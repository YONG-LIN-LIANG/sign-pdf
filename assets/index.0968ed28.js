var bm=Object.defineProperty;var _m=(St,e,_e)=>e in St?bm(St,e,{enumerable:!0,configurable:!0,writable:!0,value:_e}):St[e]=_e;var Ws=(St,e,_e)=>(_m(St,typeof e!="symbol"?e+"":e,_e),_e),y1=(St,e,_e)=>{if(!e.has(St))throw TypeError("Cannot "+_e)};var fr=(St,e,_e)=>(y1(St,e,"read from private field"),_e?_e.call(St):e.get(St)),Mr=(St,e,_e)=>{if(e.has(St))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(St):e.set(St,_e)},Kr=(St,e,_e,tn)=>(y1(St,e,"write to private field"),tn?tn.call(St,_e):e.set(St,_e),_e),b1=(St,e,_e,tn)=>({set _(un){Kr(St,e,un,_e)},get _(){return fr(St,e,tn)}}),Ur=(St,e,_e)=>(y1(St,e,"access private method"),_e);function _mergeNamespaces(St,e){for(var _e=0;_e<e.length;_e++){const tn=e[_e];if(typeof tn!="string"&&!Array.isArray(tn)){for(const un in tn)if(un!=="default"&&!(un in St)){const gn=Object.getOwnPropertyDescriptor(tn,un);gn&&Object.defineProperty(St,un,gn.get?gn:{enumerable:!0,get:()=>tn[un]})}}}return Object.freeze(Object.defineProperty(St,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const un of document.querySelectorAll('link[rel="modulepreload"]'))tn(un);new MutationObserver(un=>{for(const gn of un)if(gn.type==="childList")for(const vn of gn.addedNodes)vn.tagName==="LINK"&&vn.rel==="modulepreload"&&tn(vn)}).observe(document,{childList:!0,subtree:!0});function _e(un){const gn={};return un.integrity&&(gn.integrity=un.integrity),un.referrerpolicy&&(gn.referrerPolicy=un.referrerpolicy),un.crossorigin==="use-credentials"?gn.credentials="include":un.crossorigin==="anonymous"?gn.credentials="omit":gn.credentials="same-origin",gn}function tn(un){if(un.ep)return;un.ep=!0;const gn=_e(un);fetch(un.href,gn)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(St){return St&&St.__esModule&&Object.prototype.hasOwnProperty.call(St,"default")?St.default:St}function getAugmentedNamespace(St){var e=St.default;if(typeof e=="function"){var _e=function(){return e.apply(this,arguments)};_e.prototype=e.prototype}else _e={};return Object.defineProperty(_e,"__esModule",{value:!0}),Object.keys(St).forEach(function(tn){var un=Object.getOwnPropertyDescriptor(St,tn);Object.defineProperty(_e,tn,un.get?un:{enumerable:!0,get:function(){return St[tn]}})}),_e}var react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$2=Symbol.for("react.element"),n$2=Symbol.for("react.portal"),p$3=Symbol.for("react.fragment"),q$2=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u$1=Symbol.for("react.context"),v$2=Symbol.for("react.forward_ref"),w$1=Symbol.for("react.suspense"),x$2=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$2(St){return St===null||typeof St!="object"?null:(St=z$2&&St[z$2]||St["@@iterator"],typeof St=="function"?St:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$2={};function E$2(St,e,_e){this.props=St,this.context=e,this.refs=D$2,this.updater=_e||B$2}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(St,e){if(typeof St!="object"&&typeof St!="function"&&St!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,St,e,"setState")};E$2.prototype.forceUpdate=function(St){this.updater.enqueueForceUpdate(this,St,"forceUpdate")};function F$1(){}F$1.prototype=E$2.prototype;function G$2(St,e,_e){this.props=St,this.context=e,this.refs=D$2,this.updater=_e||B$2}var H$2=G$2.prototype=new F$1;H$2.constructor=G$2;C$2(H$2,E$2.prototype);H$2.isPureReactComponent=!0;var I$2=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$2={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$2(St,e,_e){var tn,un={},gn=null,vn=null;if(e!=null)for(tn in e.ref!==void 0&&(vn=e.ref),e.key!==void 0&&(gn=""+e.key),e)J$1.call(e,tn)&&!L$2.hasOwnProperty(tn)&&(un[tn]=e[tn]);var fn=arguments.length-2;if(fn===1)un.children=_e;else if(1<fn){for(var en=Array(fn),on=0;on<fn;on++)en[on]=arguments[on+2];un.children=en}if(St&&St.defaultProps)for(tn in fn=St.defaultProps,fn)un[tn]===void 0&&(un[tn]=fn[tn]);return{$$typeof:l$2,type:St,key:gn,ref:vn,props:un,_owner:K$2.current}}function N$2(St,e){return{$$typeof:l$2,type:St.type,key:e,ref:St.ref,props:St.props,_owner:St._owner}}function O$2(St){return typeof St=="object"&&St!==null&&St.$$typeof===l$2}function escape$1(St){var e={"=":"=0",":":"=2"};return"$"+St.replace(/[=:]/g,function(_e){return e[_e]})}var P$2=/\/+/g;function Q$2(St,e){return typeof St=="object"&&St!==null&&St.key!=null?escape$1(""+St.key):e.toString(36)}function R$2(St,e,_e,tn,un){var gn=typeof St;(gn==="undefined"||gn==="boolean")&&(St=null);var vn=!1;if(St===null)vn=!0;else switch(gn){case"string":case"number":vn=!0;break;case"object":switch(St.$$typeof){case l$2:case n$2:vn=!0}}if(vn)return vn=St,un=un(vn),St=tn===""?"."+Q$2(vn,0):tn,I$2(un)?(_e="",St!=null&&(_e=St.replace(P$2,"$&/")+"/"),R$2(un,e,_e,"",function(on){return on})):un!=null&&(O$2(un)&&(un=N$2(un,_e+(!un.key||vn&&vn.key===un.key?"":(""+un.key).replace(P$2,"$&/")+"/")+St)),e.push(un)),1;if(vn=0,tn=tn===""?".":tn+":",I$2(St))for(var fn=0;fn<St.length;fn++){gn=St[fn];var en=tn+Q$2(gn,fn);vn+=R$2(gn,e,_e,en,un)}else if(en=A$2(St),typeof en=="function")for(St=en.call(St),fn=0;!(gn=St.next()).done;)gn=gn.value,en=tn+Q$2(gn,fn++),vn+=R$2(gn,e,_e,en,un);else if(gn==="object")throw e=String(St),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(St).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return vn}function S$2(St,e,_e){if(St==null)return St;var tn=[],un=0;return R$2(St,tn,"","",function(gn){return e.call(_e,gn,un++)}),tn}function T$2(St){if(St._status===-1){var e=St._result;e=e(),e.then(function(_e){(St._status===0||St._status===-1)&&(St._status=1,St._result=_e)},function(_e){(St._status===0||St._status===-1)&&(St._status=2,St._result=_e)}),St._status===-1&&(St._status=0,St._result=e)}if(St._status===1)return St._result.default;throw St._result}var U$2={current:null},V$2={transition:null},W$2={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$2};react_production_min.Children={map:S$2,forEach:function(St,e,_e){S$2(St,function(){e.apply(this,arguments)},_e)},count:function(St){var e=0;return S$2(St,function(){e++}),e},toArray:function(St){return S$2(St,function(e){return e})||[]},only:function(St){if(!O$2(St))throw Error("React.Children.only expected to receive a single React element child.");return St}};react_production_min.Component=E$2;react_production_min.Fragment=p$3;react_production_min.Profiler=r;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$2;react_production_min.Suspense=w$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.cloneElement=function(St,e,_e){if(St==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+St+".");var tn=C$2({},St.props),un=St.key,gn=St.ref,vn=St._owner;if(e!=null){if(e.ref!==void 0&&(gn=e.ref,vn=K$2.current),e.key!==void 0&&(un=""+e.key),St.type&&St.type.defaultProps)var fn=St.type.defaultProps;for(en in e)J$1.call(e,en)&&!L$2.hasOwnProperty(en)&&(tn[en]=e[en]===void 0&&fn!==void 0?fn[en]:e[en])}var en=arguments.length-2;if(en===1)tn.children=_e;else if(1<en){fn=Array(en);for(var on=0;on<en;on++)fn[on]=arguments[on+2];tn.children=fn}return{$$typeof:l$2,type:St.type,key:un,ref:gn,props:tn,_owner:vn}};react_production_min.createContext=function(St){return St={$$typeof:u$1,_currentValue:St,_currentValue2:St,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},St.Provider={$$typeof:t,_context:St},St.Consumer=St};react_production_min.createElement=M$2;react_production_min.createFactory=function(St){var e=M$2.bind(null,St);return e.type=St,e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(St){return{$$typeof:v$2,render:St}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(St){return{$$typeof:y$1,_payload:{_status:-1,_result:St},_init:T$2}};react_production_min.memo=function(St,e){return{$$typeof:x$2,type:St,compare:e===void 0?null:e}};react_production_min.startTransition=function(St){var e=V$2.transition;V$2.transition={};try{St()}finally{V$2.transition=e}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(St,e){return U$2.current.useCallback(St,e)};react_production_min.useContext=function(St){return U$2.current.useContext(St)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(St){return U$2.current.useDeferredValue(St)};react_production_min.useEffect=function(St,e){return U$2.current.useEffect(St,e)};react_production_min.useId=function(){return U$2.current.useId()};react_production_min.useImperativeHandle=function(St,e,_e){return U$2.current.useImperativeHandle(St,e,_e)};react_production_min.useInsertionEffect=function(St,e){return U$2.current.useInsertionEffect(St,e)};react_production_min.useLayoutEffect=function(St,e){return U$2.current.useLayoutEffect(St,e)};react_production_min.useMemo=function(St,e){return U$2.current.useMemo(St,e)};react_production_min.useReducer=function(St,e,_e){return U$2.current.useReducer(St,e,_e)};react_production_min.useRef=function(St){return U$2.current.useRef(St)};react_production_min.useState=function(St){return U$2.current.useState(St)};react_production_min.useSyncExternalStore=function(St,e,_e){return U$2.current.useSyncExternalStore(St,e,_e)};react_production_min.useTransition=function(){return U$2.current.useTransition()};react_production_min.version="18.2.0";(function(St){St.exports=react_production_min})(react);const React=getDefaultExportFromCjs(react.exports),React$1=_mergeNamespaces({__proto__:null,default:React},[react.exports]);var client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(St){function e(Jn,Vn){var Xn=Jn.length;Jn.push(Vn);t:for(;0<Xn;){var Yn=Xn-1>>>1,Tn=Jn[Yn];if(0<un(Tn,Vn))Jn[Yn]=Vn,Jn[Xn]=Tn,Xn=Yn;else break t}}function _e(Jn){return Jn.length===0?null:Jn[0]}function tn(Jn){if(Jn.length===0)return null;var Vn=Jn[0],Xn=Jn.pop();if(Xn!==Vn){Jn[0]=Xn;t:for(var Yn=0,Tn=Jn.length,An=Tn>>>1;Yn<An;){var wn=2*(Yn+1)-1,En=Jn[wn],Nn=wn+1,Fn=Jn[Nn];if(0>un(En,Xn))Nn<Tn&&0>un(Fn,En)?(Jn[Yn]=Fn,Jn[Nn]=Xn,Yn=Nn):(Jn[Yn]=En,Jn[wn]=Xn,Yn=wn);else if(Nn<Tn&&0>un(Fn,Xn))Jn[Yn]=Fn,Jn[Nn]=Xn,Yn=Nn;else break t}}return Vn}function un(Jn,Vn){var Xn=Jn.sortIndex-Vn.sortIndex;return Xn!==0?Xn:Jn.id-Vn.id}if(typeof performance=="object"&&typeof performance.now=="function"){var gn=performance;St.unstable_now=function(){return gn.now()}}else{var vn=Date,fn=vn.now();St.unstable_now=function(){return vn.now()-fn}}var en=[],on=[],dn=1,rn=null,an=3,nn=!1,cn=!1,hn=!1,sn=typeof setTimeout=="function"?setTimeout:null,pn=typeof clearTimeout=="function"?clearTimeout:null,mn=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function yn(Jn){for(var Vn=_e(on);Vn!==null;){if(Vn.callback===null)tn(on);else if(Vn.startTime<=Jn)tn(on),Vn.sortIndex=Vn.expirationTime,e(en,Vn);else break;Vn=_e(on)}}function _n(Jn){if(hn=!1,yn(Jn),!cn)if(_e(en)!==null)cn=!0,Zn(xn);else{var Vn=_e(on);Vn!==null&&ir(_n,Vn.startTime-Jn)}}function xn(Jn,Vn){cn=!1,hn&&(hn=!1,pn(Ln),Ln=-1),nn=!0;var Xn=an;try{for(yn(Vn),rn=_e(en);rn!==null&&(!(rn.expirationTime>Vn)||Jn&&!Mn());){var Yn=rn.callback;if(typeof Yn=="function"){rn.callback=null,an=rn.priorityLevel;var Tn=Yn(rn.expirationTime<=Vn);Vn=St.unstable_now(),typeof Tn=="function"?rn.callback=Tn:rn===_e(en)&&tn(en),yn(Vn)}else tn(en);rn=_e(en)}if(rn!==null)var An=!0;else{var wn=_e(on);wn!==null&&ir(_n,wn.startTime-Vn),An=!1}return An}finally{rn=null,an=Xn,nn=!1}}var Sn=!1,Pn=null,Ln=-1,In=5,Rn=-1;function Mn(){return!(St.unstable_now()-Rn<In)}function Hn(){if(Pn!==null){var Jn=St.unstable_now();Rn=Jn;var Vn=!0;try{Vn=Pn(!0,Jn)}finally{Vn?Qn():(Sn=!1,Pn=null)}}else Sn=!1}var Qn;if(typeof mn=="function")Qn=function(){mn(Hn)};else if(typeof MessageChannel<"u"){var Kn=new MessageChannel,nr=Kn.port2;Kn.port1.onmessage=Hn,Qn=function(){nr.postMessage(null)}}else Qn=function(){sn(Hn,0)};function Zn(Jn){Pn=Jn,Sn||(Sn=!0,Qn())}function ir(Jn,Vn){Ln=sn(function(){Jn(St.unstable_now())},Vn)}St.unstable_IdlePriority=5,St.unstable_ImmediatePriority=1,St.unstable_LowPriority=4,St.unstable_NormalPriority=3,St.unstable_Profiling=null,St.unstable_UserBlockingPriority=2,St.unstable_cancelCallback=function(Jn){Jn.callback=null},St.unstable_continueExecution=function(){cn||nn||(cn=!0,Zn(xn))},St.unstable_forceFrameRate=function(Jn){0>Jn||125<Jn?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):In=0<Jn?Math.floor(1e3/Jn):5},St.unstable_getCurrentPriorityLevel=function(){return an},St.unstable_getFirstCallbackNode=function(){return _e(en)},St.unstable_next=function(Jn){switch(an){case 1:case 2:case 3:var Vn=3;break;default:Vn=an}var Xn=an;an=Vn;try{return Jn()}finally{an=Xn}},St.unstable_pauseExecution=function(){},St.unstable_requestPaint=function(){},St.unstable_runWithPriority=function(Jn,Vn){switch(Jn){case 1:case 2:case 3:case 4:case 5:break;default:Jn=3}var Xn=an;an=Jn;try{return Vn()}finally{an=Xn}},St.unstable_scheduleCallback=function(Jn,Vn,Xn){var Yn=St.unstable_now();switch(typeof Xn=="object"&&Xn!==null?(Xn=Xn.delay,Xn=typeof Xn=="number"&&0<Xn?Yn+Xn:Yn):Xn=Yn,Jn){case 1:var Tn=-1;break;case 2:Tn=250;break;case 5:Tn=1073741823;break;case 4:Tn=1e4;break;default:Tn=5e3}return Tn=Xn+Tn,Jn={id:dn++,callback:Vn,priorityLevel:Jn,startTime:Xn,expirationTime:Tn,sortIndex:-1},Xn>Yn?(Jn.sortIndex=Xn,e(on,Jn),_e(en)===null&&Jn===_e(on)&&(hn?(pn(Ln),Ln=-1):hn=!0,ir(_n,Xn-Yn))):(Jn.sortIndex=Tn,e(en,Jn),cn||nn||(cn=!0,Zn(xn))),Jn},St.unstable_shouldYield=Mn,St.unstable_wrapCallback=function(Jn){var Vn=an;return function(){var Xn=an;an=Vn;try{return Jn.apply(this,arguments)}finally{an=Xn}}}})(scheduler_production_min);(function(St){St.exports=scheduler_production_min})(scheduler);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=react.exports,ca=scheduler.exports;function p$2(St){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+St,_e=1;_e<arguments.length;_e++)e+="&args[]="+encodeURIComponent(arguments[_e]);return"Minified React error #"+St+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(St,e){ha(St,e),ha(St+"Capture",e)}function ha(St,e){for(ea[St]=e,St=0;St<e.length;St++)da.add(e[St])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(St){return ja.call(ma,St)?!0:ja.call(la,St)?!1:ka.test(St)?ma[St]=!0:(la[St]=!0,!1)}function pa(St,e,_e,tn){if(_e!==null&&_e.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return tn?!1:_e!==null?!_e.acceptsBooleans:(St=St.toLowerCase().slice(0,5),St!=="data-"&&St!=="aria-");default:return!1}}function qa(St,e,_e,tn){if(e===null||typeof e>"u"||pa(St,e,_e,tn))return!0;if(tn)return!1;if(_e!==null)switch(_e.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function v$1(St,e,_e,tn,un,gn,vn){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=tn,this.attributeNamespace=un,this.mustUseProperty=_e,this.propertyName=St,this.type=e,this.sanitizeURL=gn,this.removeEmptyString=vn}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(St){z$1[St]=new v$1(St,0,!1,St,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(St){var e=St[0];z$1[e]=new v$1(e,1,!1,St[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(St){z$1[St]=new v$1(St,2,!1,St.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(St){z$1[St]=new v$1(St,2,!1,St,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(St){z$1[St]=new v$1(St,3,!1,St.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(St){z$1[St]=new v$1(St,3,!0,St,null,!1,!1)});["capture","download"].forEach(function(St){z$1[St]=new v$1(St,4,!1,St,null,!1,!1)});["cols","rows","size","span"].forEach(function(St){z$1[St]=new v$1(St,6,!1,St,null,!1,!1)});["rowSpan","start"].forEach(function(St){z$1[St]=new v$1(St,5,!1,St.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(St){return St[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(St){var e=St.replace(ra,sa);z$1[e]=new v$1(e,1,!1,St,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(St){var e=St.replace(ra,sa);z$1[e]=new v$1(e,1,!1,St,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(St){var e=St.replace(ra,sa);z$1[e]=new v$1(e,1,!1,St,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(St){z$1[St]=new v$1(St,1,!1,St.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$1("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(St){z$1[St]=new v$1(St,1,!1,St.toLowerCase(),null,!0,!0)});function ta(St,e,_e,tn){var un=z$1.hasOwnProperty(e)?z$1[e]:null;(un!==null?un.type!==0:tn||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qa(e,_e,un,tn)&&(_e=null),tn||un===null?oa(e)&&(_e===null?St.removeAttribute(e):St.setAttribute(e,""+_e)):un.mustUseProperty?St[un.propertyName]=_e===null?un.type===3?!1:"":_e:(e=un.attributeName,tn=un.attributeNamespace,_e===null?St.removeAttribute(e):(un=un.type,_e=un===3||un===4&&_e===!0?"":""+_e,tn?St.setAttributeNS(tn,e,_e):St.setAttribute(e,_e))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(St){return St===null||typeof St!="object"?null:(St=Ja&&St[Ja]||St["@@iterator"],typeof St=="function"?St:null)}var A$1=Object.assign,La;function Ma(St){if(La===void 0)try{throw Error()}catch(_e){var e=_e.stack.trim().match(/\n( *(at )?)/);La=e&&e[1]||""}return`
`+La+St}var Na=!1;function Oa(St,e){if(!St||Na)return"";Na=!0;var _e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(on){var tn=on}Reflect.construct(St,[],e)}else{try{e.call()}catch(on){tn=on}St.call(e.prototype)}else{try{throw Error()}catch(on){tn=on}St()}}catch(on){if(on&&tn&&typeof on.stack=="string"){for(var un=on.stack.split(`
`),gn=tn.stack.split(`
`),vn=un.length-1,fn=gn.length-1;1<=vn&&0<=fn&&un[vn]!==gn[fn];)fn--;for(;1<=vn&&0<=fn;vn--,fn--)if(un[vn]!==gn[fn]){if(vn!==1||fn!==1)do if(vn--,fn--,0>fn||un[vn]!==gn[fn]){var en=`
`+un[vn].replace(" at new "," at ");return St.displayName&&en.includes("<anonymous>")&&(en=en.replace("<anonymous>",St.displayName)),en}while(1<=vn&&0<=fn);break}}}finally{Na=!1,Error.prepareStackTrace=_e}return(St=St?St.displayName||St.name:"")?Ma(St):""}function Pa(St){switch(St.tag){case 5:return Ma(St.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return St=Oa(St.type,!1),St;case 11:return St=Oa(St.type.render,!1),St;case 1:return St=Oa(St.type,!0),St;default:return""}}function Qa(St){if(St==null)return null;if(typeof St=="function")return St.displayName||St.name||null;if(typeof St=="string")return St;switch(St){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof St=="object")switch(St.$$typeof){case Ca:return(St.displayName||"Context")+".Consumer";case Ba:return(St._context.displayName||"Context")+".Provider";case Da:var e=St.render;return St=St.displayName,St||(St=e.displayName||e.name||"",St=St!==""?"ForwardRef("+St+")":"ForwardRef"),St;case Ga:return e=St.displayName||null,e!==null?e:Qa(St.type)||"Memo";case Ha:e=St._payload,St=St._init;try{return Qa(St(e))}catch{}}return null}function Ra(St){var e=St.type;switch(St.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return St=e.render,St=St.displayName||St.name||"",e.displayName||(St!==""?"ForwardRef("+St+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(e);case 8:return e===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sa(St){switch(typeof St){case"boolean":case"number":case"string":case"undefined":return St;case"object":return St;default:return""}}function Ta(St){var e=St.type;return(St=St.nodeName)&&St.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ua(St){var e=Ta(St)?"checked":"value",_e=Object.getOwnPropertyDescriptor(St.constructor.prototype,e),tn=""+St[e];if(!St.hasOwnProperty(e)&&typeof _e<"u"&&typeof _e.get=="function"&&typeof _e.set=="function"){var un=_e.get,gn=_e.set;return Object.defineProperty(St,e,{configurable:!0,get:function(){return un.call(this)},set:function(vn){tn=""+vn,gn.call(this,vn)}}),Object.defineProperty(St,e,{enumerable:_e.enumerable}),{getValue:function(){return tn},setValue:function(vn){tn=""+vn},stopTracking:function(){St._valueTracker=null,delete St[e]}}}}function Va(St){St._valueTracker||(St._valueTracker=Ua(St))}function Wa(St){if(!St)return!1;var e=St._valueTracker;if(!e)return!0;var _e=e.getValue(),tn="";return St&&(tn=Ta(St)?St.checked?"true":"false":St.value),St=tn,St!==_e?(e.setValue(St),!0):!1}function Xa(St){if(St=St||(typeof document<"u"?document:void 0),typeof St>"u")return null;try{return St.activeElement||St.body}catch{return St.body}}function Ya(St,e){var _e=e.checked;return A$1({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:_e!=null?_e:St._wrapperState.initialChecked})}function Za(St,e){var _e=e.defaultValue==null?"":e.defaultValue,tn=e.checked!=null?e.checked:e.defaultChecked;_e=Sa(e.value!=null?e.value:_e),St._wrapperState={initialChecked:tn,initialValue:_e,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ab(St,e){e=e.checked,e!=null&&ta(St,"checked",e,!1)}function bb(St,e){ab(St,e);var _e=Sa(e.value),tn=e.type;if(_e!=null)tn==="number"?(_e===0&&St.value===""||St.value!=_e)&&(St.value=""+_e):St.value!==""+_e&&(St.value=""+_e);else if(tn==="submit"||tn==="reset"){St.removeAttribute("value");return}e.hasOwnProperty("value")?cb(St,e.type,_e):e.hasOwnProperty("defaultValue")&&cb(St,e.type,Sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(St.defaultChecked=!!e.defaultChecked)}function db(St,e,_e){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var tn=e.type;if(!(tn!=="submit"&&tn!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+St._wrapperState.initialValue,_e||e===St.value||(St.value=e),St.defaultValue=e}_e=St.name,_e!==""&&(St.name=""),St.defaultChecked=!!St._wrapperState.initialChecked,_e!==""&&(St.name=_e)}function cb(St,e,_e){(e!=="number"||Xa(St.ownerDocument)!==St)&&(_e==null?St.defaultValue=""+St._wrapperState.initialValue:St.defaultValue!==""+_e&&(St.defaultValue=""+_e))}var eb=Array.isArray;function fb(St,e,_e,tn){if(St=St.options,e){e={};for(var un=0;un<_e.length;un++)e["$"+_e[un]]=!0;for(_e=0;_e<St.length;_e++)un=e.hasOwnProperty("$"+St[_e].value),St[_e].selected!==un&&(St[_e].selected=un),un&&tn&&(St[_e].defaultSelected=!0)}else{for(_e=""+Sa(_e),e=null,un=0;un<St.length;un++){if(St[un].value===_e){St[un].selected=!0,tn&&(St[un].defaultSelected=!0);return}e!==null||St[un].disabled||(e=St[un])}e!==null&&(e.selected=!0)}}function gb(St,e){if(e.dangerouslySetInnerHTML!=null)throw Error(p$2(91));return A$1({},e,{value:void 0,defaultValue:void 0,children:""+St._wrapperState.initialValue})}function hb(St,e){var _e=e.value;if(_e==null){if(_e=e.children,e=e.defaultValue,_e!=null){if(e!=null)throw Error(p$2(92));if(eb(_e)){if(1<_e.length)throw Error(p$2(93));_e=_e[0]}e=_e}e==null&&(e=""),_e=e}St._wrapperState={initialValue:Sa(_e)}}function ib(St,e){var _e=Sa(e.value),tn=Sa(e.defaultValue);_e!=null&&(_e=""+_e,_e!==St.value&&(St.value=_e),e.defaultValue==null&&St.defaultValue!==_e&&(St.defaultValue=_e)),tn!=null&&(St.defaultValue=""+tn)}function jb(St){var e=St.textContent;e===St._wrapperState.initialValue&&e!==""&&e!==null&&(St.value=e)}function kb(St){switch(St){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(St,e){return St==null||St==="http://www.w3.org/1999/xhtml"?kb(e):St==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":St}var mb,nb=function(St){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,_e,tn,un){MSApp.execUnsafeLocalFunction(function(){return St(e,_e,tn,un)})}:St}(function(St,e){if(St.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in St)St.innerHTML=e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mb.firstChild;St.firstChild;)St.removeChild(St.firstChild);for(;e.firstChild;)St.appendChild(e.firstChild)}});function ob(St,e){if(e){var _e=St.firstChild;if(_e&&_e===St.lastChild&&_e.nodeType===3){_e.nodeValue=e;return}}St.textContent=e}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(St){qb.forEach(function(e){e=e+St.charAt(0).toUpperCase()+St.substring(1),pb[e]=pb[St]})});function rb(St,e,_e){return e==null||typeof e=="boolean"||e===""?"":_e||typeof e!="number"||e===0||pb.hasOwnProperty(St)&&pb[St]?(""+e).trim():e+"px"}function sb(St,e){St=St.style;for(var _e in e)if(e.hasOwnProperty(_e)){var tn=_e.indexOf("--")===0,un=rb(_e,e[_e],tn);_e==="float"&&(_e="cssFloat"),tn?St.setProperty(_e,un):St[_e]=un}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(St,e){if(e){if(tb[St]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(p$2(137,St));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(p$2(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(p$2(61))}if(e.style!=null&&typeof e.style!="object")throw Error(p$2(62))}}function vb(St,e){if(St.indexOf("-")===-1)return typeof e.is=="string";switch(St){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(St){return St=St.target||St.srcElement||window,St.correspondingUseElement&&(St=St.correspondingUseElement),St.nodeType===3?St.parentNode:St}var yb=null,zb=null,Ab=null;function Bb(St){if(St=Cb(St)){if(typeof yb!="function")throw Error(p$2(280));var e=St.stateNode;e&&(e=Db(e),yb(St.stateNode,St.type,e))}}function Eb(St){zb?Ab?Ab.push(St):Ab=[St]:zb=St}function Fb(){if(zb){var St=zb,e=Ab;if(Ab=zb=null,Bb(St),e)for(St=0;St<e.length;St++)Bb(e[St])}}function Gb(St,e){return St(e)}function Hb(){}var Ib=!1;function Jb(St,e,_e){if(Ib)return St(e,_e);Ib=!0;try{return Gb(St,e,_e)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(St,e){var _e=St.stateNode;if(_e===null)return null;var tn=Db(_e);if(tn===null)return null;_e=tn[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(tn=!tn.disabled)||(St=St.type,tn=!(St==="button"||St==="input"||St==="select"||St==="textarea")),St=!tn;break t;default:St=!1}if(St)return null;if(_e&&typeof _e!="function")throw Error(p$2(231,e,typeof _e));return _e}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(St,e,_e,tn,un,gn,vn,fn,en){var on=Array.prototype.slice.call(arguments,3);try{e.apply(_e,on)}catch(dn){this.onError(dn)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(St){Ob=!0,Pb=St}};function Tb(St,e,_e,tn,un,gn,vn,fn,en){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(St,e,_e,tn,un,gn,vn,fn,en){if(Tb.apply(this,arguments),Ob){if(Ob){var on=Pb;Ob=!1,Pb=null}else throw Error(p$2(198));Qb||(Qb=!0,Rb=on)}}function Vb(St){var e=St,_e=St;if(St.alternate)for(;e.return;)e=e.return;else{St=e;do e=St,(e.flags&4098)!==0&&(_e=e.return),St=e.return;while(St)}return e.tag===3?_e:null}function Wb(St){if(St.tag===13){var e=St.memoizedState;if(e===null&&(St=St.alternate,St!==null&&(e=St.memoizedState)),e!==null)return e.dehydrated}return null}function Xb(St){if(Vb(St)!==St)throw Error(p$2(188))}function Yb(St){var e=St.alternate;if(!e){if(e=Vb(St),e===null)throw Error(p$2(188));return e!==St?null:St}for(var _e=St,tn=e;;){var un=_e.return;if(un===null)break;var gn=un.alternate;if(gn===null){if(tn=un.return,tn!==null){_e=tn;continue}break}if(un.child===gn.child){for(gn=un.child;gn;){if(gn===_e)return Xb(un),St;if(gn===tn)return Xb(un),e;gn=gn.sibling}throw Error(p$2(188))}if(_e.return!==tn.return)_e=un,tn=gn;else{for(var vn=!1,fn=un.child;fn;){if(fn===_e){vn=!0,_e=un,tn=gn;break}if(fn===tn){vn=!0,tn=un,_e=gn;break}fn=fn.sibling}if(!vn){for(fn=gn.child;fn;){if(fn===_e){vn=!0,_e=gn,tn=un;break}if(fn===tn){vn=!0,tn=gn,_e=un;break}fn=fn.sibling}if(!vn)throw Error(p$2(189))}}if(_e.alternate!==tn)throw Error(p$2(190))}if(_e.tag!==3)throw Error(p$2(188));return _e.stateNode.current===_e?St:e}function Zb(St){return St=Yb(St),St!==null?$b(St):null}function $b(St){if(St.tag===5||St.tag===6)return St;for(St=St.child;St!==null;){var e=$b(St);if(e!==null)return e;St=St.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$1=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc$1=null;function mc(St){if(lc$1&&typeof lc$1.onCommitFiberRoot=="function")try{lc$1.onCommitFiberRoot(kc,St,void 0,(St.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(St){return St>>>=0,St===0?32:31-(pc(St)/qc|0)|0}var rc=64,sc=4194304;function tc(St){switch(St&-St){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return St&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return St&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return St}}function uc(St,e){var _e=St.pendingLanes;if(_e===0)return 0;var tn=0,un=St.suspendedLanes,gn=St.pingedLanes,vn=_e&268435455;if(vn!==0){var fn=vn&~un;fn!==0?tn=tc(fn):(gn&=vn,gn!==0&&(tn=tc(gn)))}else vn=_e&~un,vn!==0?tn=tc(vn):gn!==0&&(tn=tc(gn));if(tn===0)return 0;if(e!==0&&e!==tn&&(e&un)===0&&(un=tn&-tn,gn=e&-e,un>=gn||un===16&&(gn&4194240)!==0))return e;if((tn&4)!==0&&(tn|=_e&16),e=St.entangledLanes,e!==0)for(St=St.entanglements,e&=tn;0<e;)_e=31-oc(e),un=1<<_e,tn|=St[_e],e&=~un;return tn}function vc(St,e){switch(St){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(St,e){for(var _e=St.suspendedLanes,tn=St.pingedLanes,un=St.expirationTimes,gn=St.pendingLanes;0<gn;){var vn=31-oc(gn),fn=1<<vn,en=un[vn];en===-1?((fn&_e)===0||(fn&tn)!==0)&&(un[vn]=vc(fn,e)):en<=e&&(St.expiredLanes|=fn),gn&=~fn}}function xc(St){return St=St.pendingLanes&-1073741825,St!==0?St:St&1073741824?1073741824:0}function yc(){var St=rc;return rc<<=1,(rc&4194240)===0&&(rc=64),St}function zc(St){for(var e=[],_e=0;31>_e;_e++)e.push(St);return e}function Ac(St,e,_e){St.pendingLanes|=e,e!==536870912&&(St.suspendedLanes=0,St.pingedLanes=0),St=St.eventTimes,e=31-oc(e),St[e]=_e}function Bc(St,e){var _e=St.pendingLanes&~e;St.pendingLanes=e,St.suspendedLanes=0,St.pingedLanes=0,St.expiredLanes&=e,St.mutableReadLanes&=e,St.entangledLanes&=e,e=St.entanglements;var tn=St.eventTimes;for(St=St.expirationTimes;0<_e;){var un=31-oc(_e),gn=1<<un;e[un]=0,tn[un]=-1,St[un]=-1,_e&=~gn}}function Cc(St,e){var _e=St.entangledLanes|=e;for(St=St.entanglements;_e;){var tn=31-oc(_e),un=1<<tn;un&e|St[tn]&e&&(St[tn]|=e),_e&=~un}}var C$1=0;function Dc(St){return St&=-St,1<St?4<St?(St&268435455)!==0?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(St,e){switch(St){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(e.pointerId)}}function Tc(St,e,_e,tn,un,gn){return St===null||St.nativeEvent!==gn?(St={blockedOn:e,domEventName:_e,eventSystemFlags:tn,nativeEvent:gn,targetContainers:[un]},e!==null&&(e=Cb(e),e!==null&&Fc(e)),St):(St.eventSystemFlags|=tn,e=St.targetContainers,un!==null&&e.indexOf(un)===-1&&e.push(un),St)}function Uc(St,e,_e,tn,un){switch(e){case"focusin":return Lc=Tc(Lc,St,e,_e,tn,un),!0;case"dragenter":return Mc=Tc(Mc,St,e,_e,tn,un),!0;case"mouseover":return Nc=Tc(Nc,St,e,_e,tn,un),!0;case"pointerover":var gn=un.pointerId;return Oc.set(gn,Tc(Oc.get(gn)||null,St,e,_e,tn,un)),!0;case"gotpointercapture":return gn=un.pointerId,Pc.set(gn,Tc(Pc.get(gn)||null,St,e,_e,tn,un)),!0}return!1}function Vc(St){var e=Wc(St.target);if(e!==null){var _e=Vb(e);if(_e!==null){if(e=_e.tag,e===13){if(e=Wb(_e),e!==null){St.blockedOn=e,Ic(St.priority,function(){Gc(_e)});return}}else if(e===3&&_e.stateNode.current.memoizedState.isDehydrated){St.blockedOn=_e.tag===3?_e.stateNode.containerInfo:null;return}}}St.blockedOn=null}function Xc(St){if(St.blockedOn!==null)return!1;for(var e=St.targetContainers;0<e.length;){var _e=Yc(St.domEventName,St.eventSystemFlags,e[0],St.nativeEvent);if(_e===null){_e=St.nativeEvent;var tn=new _e.constructor(_e.type,_e);wb=tn,_e.target.dispatchEvent(tn),wb=null}else return e=Cb(_e),e!==null&&Fc(e),St.blockedOn=_e,!1;e.shift()}return!0}function Zc(St,e,_e){Xc(St)&&_e.delete(e)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(St,e){St.blockedOn===e&&(St.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(St){function e(un){return ad(un,St)}if(0<Kc.length){ad(Kc[0],St);for(var _e=1;_e<Kc.length;_e++){var tn=Kc[_e];tn.blockedOn===St&&(tn.blockedOn=null)}}for(Lc!==null&&ad(Lc,St),Mc!==null&&ad(Mc,St),Nc!==null&&ad(Nc,St),Oc.forEach(e),Pc.forEach(e),_e=0;_e<Qc.length;_e++)tn=Qc[_e],tn.blockedOn===St&&(tn.blockedOn=null);for(;0<Qc.length&&(_e=Qc[0],_e.blockedOn===null);)Vc(_e),_e.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(St,e,_e,tn){var un=C$1,gn=cd.transition;cd.transition=null;try{C$1=1,fd$1(St,e,_e,tn)}finally{C$1=un,cd.transition=gn}}function gd(St,e,_e,tn){var un=C$1,gn=cd.transition;cd.transition=null;try{C$1=4,fd$1(St,e,_e,tn)}finally{C$1=un,cd.transition=gn}}function fd$1(St,e,_e,tn){if(dd){var un=Yc(St,e,_e,tn);if(un===null)hd(St,e,tn,id,_e),Sc(St,tn);else if(Uc(un,St,e,_e,tn))tn.stopPropagation();else if(Sc(St,tn),e&4&&-1<Rc.indexOf(St)){for(;un!==null;){var gn=Cb(un);if(gn!==null&&Ec(gn),gn=Yc(St,e,_e,tn),gn===null&&hd(St,e,tn,id,_e),gn===un)break;un=gn}un!==null&&tn.stopPropagation()}else hd(St,e,tn,null,_e)}}var id=null;function Yc(St,e,_e,tn){if(id=null,St=xb(tn),St=Wc(St),St!==null)if(e=Vb(St),e===null)St=null;else if(_e=e.tag,_e===13){if(St=Wb(e),St!==null)return St;St=null}else if(_e===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;St=null}else e!==St&&(St=null);return id=St,null}function jd(St){switch(St){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var St,e=ld,_e=e.length,tn,un="value"in kd?kd.value:kd.textContent,gn=un.length;for(St=0;St<_e&&e[St]===un[St];St++);var vn=_e-St;for(tn=1;tn<=vn&&e[_e-tn]===un[gn-tn];tn++);return md=un.slice(St,1<tn?1-tn:void 0)}function od(St){var e=St.keyCode;return"charCode"in St?(St=St.charCode,St===0&&e===13&&(St=13)):St=e,St===10&&(St=13),32<=St||St===13?St:0}function pd(){return!0}function qd(){return!1}function rd(St){function e(_e,tn,un,gn,vn){this._reactName=_e,this._targetInst=un,this.type=tn,this.nativeEvent=gn,this.target=vn,this.currentTarget=null;for(var fn in St)St.hasOwnProperty(fn)&&(_e=St[fn],this[fn]=_e?_e(gn):gn[fn]);return this.isDefaultPrevented=(gn.defaultPrevented!=null?gn.defaultPrevented:gn.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _e=this.nativeEvent;_e&&(_e.preventDefault?_e.preventDefault():typeof _e.returnValue!="unknown"&&(_e.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var _e=this.nativeEvent;_e&&(_e.stopPropagation?_e.stopPropagation():typeof _e.cancelBubble!="unknown"&&(_e.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(St){return St.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(St){return St.relatedTarget===void 0?St.fromElement===St.srcElement?St.toElement:St.fromElement:St.relatedTarget},movementX:function(St){return"movementX"in St?St.movementX:(St!==yd&&(yd&&St.type==="mousemove"?(wd=St.screenX-yd.screenX,xd=St.screenY-yd.screenY):xd=wd=0,yd=St),wd)},movementY:function(St){return"movementY"in St?St.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(St){return"clipboardData"in St?St.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(St){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(St):(St=Od[St])?!!e[St]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(St){if(St.key){var e=Md[St.key]||St.key;if(e!=="Unidentified")return e}return St.type==="keypress"?(St=od(St),St===13?"Enter":String.fromCharCode(St)):St.type==="keydown"||St.type==="keyup"?Nd[St.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(St){return St.type==="keypress"?od(St):0},keyCode:function(St){return St.type==="keydown"||St.type==="keyup"?St.keyCode:0},which:function(St){return St.type==="keypress"?od(St):St.type==="keydown"||St.type==="keyup"?St.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(St){return"deltaX"in St?St.deltaX:"wheelDeltaX"in St?-St.wheelDeltaX:0},deltaY:function(St){return"deltaY"in St?St.deltaY:"wheelDeltaY"in St?-St.wheelDeltaY:"wheelDelta"in St?-St.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$1=ia&&"CompositionEvent"in window,be$1=null;ia&&"documentMode"in document&&(be$1=document.documentMode);var ce$1=ia&&"TextEvent"in window&&!be$1,de$1=ia&&(!ae$1||be$1&&8<be$1&&11>=be$1),ee$1=String.fromCharCode(32),fe$1=!1;function ge$1(St,e){switch(St){case"keyup":return $d.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(St){return St=St.detail,typeof St=="object"&&"data"in St?St.data:null}var ie$1=!1;function je(St,e){switch(St){case"compositionend":return he$1(e);case"keypress":return e.which!==32?null:(fe$1=!0,ee$1);case"textInput":return St=e.data,St===ee$1&&fe$1?null:St;default:return null}}function ke(St,e){if(ie$1)return St==="compositionend"||!ae$1&&ge$1(St,e)?(St=nd(),md=ld=kd=null,ie$1=!1,St):null;switch(St){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return de$1&&e.locale!=="ko"?null:e.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$1(St){var e=St&&St.nodeName&&St.nodeName.toLowerCase();return e==="input"?!!le$1[St.type]:e==="textarea"}function ne$1(St,e,_e,tn){Eb(tn),e=oe$1(e,"onChange"),0<e.length&&(_e=new td("onChange","change",null,_e,tn),St.push({event:_e,listeners:e}))}var pe$1=null,qe=null;function re$1(St){se$1(St,0)}function te$1(St){var e=ue$1(St);if(Wa(e))return St}function ve$1(St,e){if(St==="change")return e}var we$1=!1;if(ia){var xe;if(ia){var ye$1="oninput"in document;if(!ye$1){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye$1=typeof ze.oninput=="function"}xe=ye$1}else xe=!1;we$1=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe$1&&(pe$1.detachEvent("onpropertychange",Be),qe=pe$1=null)}function Be(St){if(St.propertyName==="value"&&te$1(qe)){var e=[];ne$1(e,qe,St,xb(St)),Jb(re$1,e)}}function Ce(St,e,_e){St==="focusin"?(Ae(),pe$1=e,qe=_e,pe$1.attachEvent("onpropertychange",Be)):St==="focusout"&&Ae()}function De(St){if(St==="selectionchange"||St==="keyup"||St==="keydown")return te$1(qe)}function Ee(St,e){if(St==="click")return te$1(e)}function Fe(St,e){if(St==="input"||St==="change")return te$1(e)}function Ge(St,e){return St===e&&(St!==0||1/St===1/e)||St!==St&&e!==e}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(St,e){if(He(St,e))return!0;if(typeof St!="object"||St===null||typeof e!="object"||e===null)return!1;var _e=Object.keys(St),tn=Object.keys(e);if(_e.length!==tn.length)return!1;for(tn=0;tn<_e.length;tn++){var un=_e[tn];if(!ja.call(e,un)||!He(St[un],e[un]))return!1}return!0}function Je(St){for(;St&&St.firstChild;)St=St.firstChild;return St}function Ke(St,e){var _e=Je(St);St=0;for(var tn;_e;){if(_e.nodeType===3){if(tn=St+_e.textContent.length,St<=e&&tn>=e)return{node:_e,offset:e-St};St=tn}t:{for(;_e;){if(_e.nextSibling){_e=_e.nextSibling;break t}_e=_e.parentNode}_e=void 0}_e=Je(_e)}}function Le$1(St,e){return St&&e?St===e?!0:St&&St.nodeType===3?!1:e&&e.nodeType===3?Le$1(St,e.parentNode):"contains"in St?St.contains(e):St.compareDocumentPosition?!!(St.compareDocumentPosition(e)&16):!1:!1}function Me(){for(var St=window,e=Xa();e instanceof St.HTMLIFrameElement;){try{var _e=typeof e.contentWindow.location.href=="string"}catch{_e=!1}if(_e)St=e.contentWindow;else break;e=Xa(St.document)}return e}function Ne$1(St){var e=St&&St.nodeName&&St.nodeName.toLowerCase();return e&&(e==="input"&&(St.type==="text"||St.type==="search"||St.type==="tel"||St.type==="url"||St.type==="password")||e==="textarea"||St.contentEditable==="true")}function Oe(St){var e=Me(),_e=St.focusedElem,tn=St.selectionRange;if(e!==_e&&_e&&_e.ownerDocument&&Le$1(_e.ownerDocument.documentElement,_e)){if(tn!==null&&Ne$1(_e)){if(e=tn.start,St=tn.end,St===void 0&&(St=e),"selectionStart"in _e)_e.selectionStart=e,_e.selectionEnd=Math.min(St,_e.value.length);else if(St=(e=_e.ownerDocument||document)&&e.defaultView||window,St.getSelection){St=St.getSelection();var un=_e.textContent.length,gn=Math.min(tn.start,un);tn=tn.end===void 0?gn:Math.min(tn.end,un),!St.extend&&gn>tn&&(un=tn,tn=gn,gn=un),un=Ke(_e,gn);var vn=Ke(_e,tn);un&&vn&&(St.rangeCount!==1||St.anchorNode!==un.node||St.anchorOffset!==un.offset||St.focusNode!==vn.node||St.focusOffset!==vn.offset)&&(e=e.createRange(),e.setStart(un.node,un.offset),St.removeAllRanges(),gn>tn?(St.addRange(e),St.extend(vn.node,vn.offset)):(e.setEnd(vn.node,vn.offset),St.addRange(e)))}}for(e=[],St=_e;St=St.parentNode;)St.nodeType===1&&e.push({element:St,left:St.scrollLeft,top:St.scrollTop});for(typeof _e.focus=="function"&&_e.focus(),_e=0;_e<e.length;_e++)St=e[_e],St.element.scrollLeft=St.left,St.element.scrollTop=St.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(St,e,_e){var tn=_e.window===_e?_e.document:_e.nodeType===9?_e:_e.ownerDocument;Te||Qe==null||Qe!==Xa(tn)||(tn=Qe,"selectionStart"in tn&&Ne$1(tn)?tn={start:tn.selectionStart,end:tn.selectionEnd}:(tn=(tn.ownerDocument&&tn.ownerDocument.defaultView||window).getSelection(),tn={anchorNode:tn.anchorNode,anchorOffset:tn.anchorOffset,focusNode:tn.focusNode,focusOffset:tn.focusOffset}),Se&&Ie(Se,tn)||(Se=tn,tn=oe$1(Re,"onSelect"),0<tn.length&&(e=new td("onSelect","select",null,e,_e),St.push({event:e,listeners:tn}),e.target=Qe)))}function Ve(St,e){var _e={};return _e[St.toLowerCase()]=e.toLowerCase(),_e["Webkit"+St]="webkit"+e,_e["Moz"+St]="moz"+e,_e}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(St){if(Xe[St])return Xe[St];if(!We[St])return St;var e=We[St],_e;for(_e in e)if(e.hasOwnProperty(_e)&&_e in Ye)return Xe[St]=e[_e];return St}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(St,e){df.set(St,e),fa(e,[St])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(St,e,_e){var tn=St.type||"unknown-event";St.currentTarget=_e,Ub(tn,e,void 0,St),St.currentTarget=null}function se$1(St,e){e=(e&4)!==0;for(var _e=0;_e<St.length;_e++){var tn=St[_e],un=tn.event;tn=tn.listeners;t:{var gn=void 0;if(e)for(var vn=tn.length-1;0<=vn;vn--){var fn=tn[vn],en=fn.instance,on=fn.currentTarget;if(fn=fn.listener,en!==gn&&un.isPropagationStopped())break t;nf(un,fn,on),gn=en}else for(vn=0;vn<tn.length;vn++){if(fn=tn[vn],en=fn.instance,on=fn.currentTarget,fn=fn.listener,en!==gn&&un.isPropagationStopped())break t;nf(un,fn,on),gn=en}}}if(Qb)throw St=Rb,Qb=!1,Rb=null,St}function D$1(St,e){var _e=e[of];_e===void 0&&(_e=e[of]=new Set);var tn=St+"__bubble";_e.has(tn)||(pf(e,St,2,!1),_e.add(tn))}function qf(St,e,_e){var tn=0;e&&(tn|=4),pf(_e,St,tn,e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(St){if(!St[rf]){St[rf]=!0,da.forEach(function(_e){_e!=="selectionchange"&&(mf.has(_e)||qf(_e,!1,St),qf(_e,!0,St))});var e=St.nodeType===9?St:St.ownerDocument;e===null||e[rf]||(e[rf]=!0,qf("selectionchange",!1,e))}}function pf(St,e,_e,tn){switch(jd(e)){case 1:var un=ed;break;case 4:un=gd;break;default:un=fd$1}_e=un.bind(null,e,_e,St),un=void 0,!Lb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(un=!0),tn?un!==void 0?St.addEventListener(e,_e,{capture:!0,passive:un}):St.addEventListener(e,_e,!0):un!==void 0?St.addEventListener(e,_e,{passive:un}):St.addEventListener(e,_e,!1)}function hd(St,e,_e,tn,un){var gn=tn;if((e&1)===0&&(e&2)===0&&tn!==null)t:for(;;){if(tn===null)return;var vn=tn.tag;if(vn===3||vn===4){var fn=tn.stateNode.containerInfo;if(fn===un||fn.nodeType===8&&fn.parentNode===un)break;if(vn===4)for(vn=tn.return;vn!==null;){var en=vn.tag;if((en===3||en===4)&&(en=vn.stateNode.containerInfo,en===un||en.nodeType===8&&en.parentNode===un))return;vn=vn.return}for(;fn!==null;){if(vn=Wc(fn),vn===null)return;if(en=vn.tag,en===5||en===6){tn=gn=vn;continue t}fn=fn.parentNode}}tn=tn.return}Jb(function(){var on=gn,dn=xb(_e),rn=[];t:{var an=df.get(St);if(an!==void 0){var nn=td,cn=St;switch(St){case"keypress":if(od(_e)===0)break t;case"keydown":case"keyup":nn=Rd;break;case"focusin":cn="focus",nn=Fd;break;case"focusout":cn="blur",nn=Fd;break;case"beforeblur":case"afterblur":nn=Fd;break;case"click":if(_e.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":nn=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":nn=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":nn=Vd;break;case $e:case af:case bf:nn=Hd;break;case cf:nn=Xd;break;case"scroll":nn=vd;break;case"wheel":nn=Zd;break;case"copy":case"cut":case"paste":nn=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":nn=Td}var hn=(e&4)!==0,sn=!hn&&St==="scroll",pn=hn?an!==null?an+"Capture":null:an;hn=[];for(var mn=on,yn;mn!==null;){yn=mn;var _n=yn.stateNode;if(yn.tag===5&&_n!==null&&(yn=_n,pn!==null&&(_n=Kb(mn,pn),_n!=null&&hn.push(tf(mn,_n,yn)))),sn)break;mn=mn.return}0<hn.length&&(an=new nn(an,cn,null,_e,dn),rn.push({event:an,listeners:hn}))}}if((e&7)===0){t:{if(an=St==="mouseover"||St==="pointerover",nn=St==="mouseout"||St==="pointerout",an&&_e!==wb&&(cn=_e.relatedTarget||_e.fromElement)&&(Wc(cn)||cn[uf]))break t;if((nn||an)&&(an=dn.window===dn?dn:(an=dn.ownerDocument)?an.defaultView||an.parentWindow:window,nn?(cn=_e.relatedTarget||_e.toElement,nn=on,cn=cn?Wc(cn):null,cn!==null&&(sn=Vb(cn),cn!==sn||cn.tag!==5&&cn.tag!==6)&&(cn=null)):(nn=null,cn=on),nn!==cn)){if(hn=Bd,_n="onMouseLeave",pn="onMouseEnter",mn="mouse",(St==="pointerout"||St==="pointerover")&&(hn=Td,_n="onPointerLeave",pn="onPointerEnter",mn="pointer"),sn=nn==null?an:ue$1(nn),yn=cn==null?an:ue$1(cn),an=new hn(_n,mn+"leave",nn,_e,dn),an.target=sn,an.relatedTarget=yn,_n=null,Wc(dn)===on&&(hn=new hn(pn,mn+"enter",cn,_e,dn),hn.target=yn,hn.relatedTarget=sn,_n=hn),sn=_n,nn&&cn)e:{for(hn=nn,pn=cn,mn=0,yn=hn;yn;yn=vf(yn))mn++;for(yn=0,_n=pn;_n;_n=vf(_n))yn++;for(;0<mn-yn;)hn=vf(hn),mn--;for(;0<yn-mn;)pn=vf(pn),yn--;for(;mn--;){if(hn===pn||pn!==null&&hn===pn.alternate)break e;hn=vf(hn),pn=vf(pn)}hn=null}else hn=null;nn!==null&&wf(rn,an,nn,hn,!1),cn!==null&&sn!==null&&wf(rn,sn,cn,hn,!0)}}t:{if(an=on?ue$1(on):window,nn=an.nodeName&&an.nodeName.toLowerCase(),nn==="select"||nn==="input"&&an.type==="file")var xn=ve$1;else if(me$1(an))if(we$1)xn=Fe;else{xn=De;var Sn=Ce}else(nn=an.nodeName)&&nn.toLowerCase()==="input"&&(an.type==="checkbox"||an.type==="radio")&&(xn=Ee);if(xn&&(xn=xn(St,on))){ne$1(rn,xn,_e,dn);break t}Sn&&Sn(St,an,on),St==="focusout"&&(Sn=an._wrapperState)&&Sn.controlled&&an.type==="number"&&cb(an,"number",an.value)}switch(Sn=on?ue$1(on):window,St){case"focusin":(me$1(Sn)||Sn.contentEditable==="true")&&(Qe=Sn,Re=on,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(rn,_e,dn);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(rn,_e,dn)}var Pn;if(ae$1)t:{switch(St){case"compositionstart":var Ln="onCompositionStart";break t;case"compositionend":Ln="onCompositionEnd";break t;case"compositionupdate":Ln="onCompositionUpdate";break t}Ln=void 0}else ie$1?ge$1(St,_e)&&(Ln="onCompositionEnd"):St==="keydown"&&_e.keyCode===229&&(Ln="onCompositionStart");Ln&&(de$1&&_e.locale!=="ko"&&(ie$1||Ln!=="onCompositionStart"?Ln==="onCompositionEnd"&&ie$1&&(Pn=nd()):(kd=dn,ld="value"in kd?kd.value:kd.textContent,ie$1=!0)),Sn=oe$1(on,Ln),0<Sn.length&&(Ln=new Ld(Ln,St,null,_e,dn),rn.push({event:Ln,listeners:Sn}),Pn?Ln.data=Pn:(Pn=he$1(_e),Pn!==null&&(Ln.data=Pn)))),(Pn=ce$1?je(St,_e):ke(St,_e))&&(on=oe$1(on,"onBeforeInput"),0<on.length&&(dn=new Ld("onBeforeInput","beforeinput",null,_e,dn),rn.push({event:dn,listeners:on}),dn.data=Pn))}se$1(rn,e)})}function tf(St,e,_e){return{instance:St,listener:e,currentTarget:_e}}function oe$1(St,e){for(var _e=e+"Capture",tn=[];St!==null;){var un=St,gn=un.stateNode;un.tag===5&&gn!==null&&(un=gn,gn=Kb(St,_e),gn!=null&&tn.unshift(tf(St,gn,un)),gn=Kb(St,e),gn!=null&&tn.push(tf(St,gn,un))),St=St.return}return tn}function vf(St){if(St===null)return null;do St=St.return;while(St&&St.tag!==5);return St||null}function wf(St,e,_e,tn,un){for(var gn=e._reactName,vn=[];_e!==null&&_e!==tn;){var fn=_e,en=fn.alternate,on=fn.stateNode;if(en!==null&&en===tn)break;fn.tag===5&&on!==null&&(fn=on,un?(en=Kb(_e,gn),en!=null&&vn.unshift(tf(_e,en,fn))):un||(en=Kb(_e,gn),en!=null&&vn.push(tf(_e,en,fn)))),_e=_e.return}vn.length!==0&&St.push({event:e,listeners:vn})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(St){return(typeof St=="string"?St:""+St).replace(xf,`
`).replace(yf,"")}function Af(St,e,_e){if(e=zf(e),zf(St)!==e&&_e)throw Error(p$2(425))}function Bf(){}var Cf=null,Df=null;function Ef(St,e){return St==="textarea"||St==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(St){return Hf.resolve(null).then(St).catch(If)}:Ff;function If(St){setTimeout(function(){throw St})}function Kf(St,e){var _e=e,tn=0;do{var un=_e.nextSibling;if(St.removeChild(_e),un&&un.nodeType===8)if(_e=un.data,_e==="/$"){if(tn===0){St.removeChild(un),bd(e);return}tn--}else _e!=="$"&&_e!=="$?"&&_e!=="$!"||tn++;_e=un}while(_e);bd(e)}function Lf(St){for(;St!=null;St=St.nextSibling){var e=St.nodeType;if(e===1||e===3)break;if(e===8){if(e=St.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return St}function Mf(St){St=St.previousSibling;for(var e=0;St;){if(St.nodeType===8){var _e=St.data;if(_e==="$"||_e==="$!"||_e==="$?"){if(e===0)return St;e--}else _e==="/$"&&e++}St=St.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(St){var e=St[Of];if(e)return e;for(var _e=St.parentNode;_e;){if(e=_e[uf]||_e[Of]){if(_e=e.alternate,e.child!==null||_e!==null&&_e.child!==null)for(St=Mf(St);St!==null;){if(_e=St[Of])return _e;St=Mf(St)}return e}St=_e,_e=St.parentNode}return null}function Cb(St){return St=St[Of]||St[uf],!St||St.tag!==5&&St.tag!==6&&St.tag!==13&&St.tag!==3?null:St}function ue$1(St){if(St.tag===5||St.tag===6)return St.stateNode;throw Error(p$2(33))}function Db(St){return St[Pf]||null}var Sf=[],Tf=-1;function Uf(St){return{current:St}}function E$1(St){0>Tf||(St.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(St,e){Tf++,Sf[Tf]=St.current,St.current=e}var Vf={},H$1=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(St,e){var _e=St.type.contextTypes;if(!_e)return Vf;var tn=St.stateNode;if(tn&&tn.__reactInternalMemoizedUnmaskedChildContext===e)return tn.__reactInternalMemoizedMaskedChildContext;var un={},gn;for(gn in _e)un[gn]=e[gn];return tn&&(St=St.stateNode,St.__reactInternalMemoizedUnmaskedChildContext=e,St.__reactInternalMemoizedMaskedChildContext=un),un}function Zf(St){return St=St.childContextTypes,St!=null}function $f(){E$1(Wf),E$1(H$1)}function ag(St,e,_e){if(H$1.current!==Vf)throw Error(p$2(168));G$1(H$1,e),G$1(Wf,_e)}function bg(St,e,_e){var tn=St.stateNode;if(e=e.childContextTypes,typeof tn.getChildContext!="function")return _e;tn=tn.getChildContext();for(var un in tn)if(!(un in e))throw Error(p$2(108,Ra(St)||"Unknown",un));return A$1({},_e,tn)}function cg(St){return St=(St=St.stateNode)&&St.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$1.current,G$1(H$1,St),G$1(Wf,Wf.current),!0}function dg(St,e,_e){var tn=St.stateNode;if(!tn)throw Error(p$2(169));_e?(St=bg(St,e,Xf),tn.__reactInternalMemoizedMergedChildContext=St,E$1(Wf),E$1(H$1),G$1(H$1,St)):E$1(Wf),G$1(Wf,_e)}var eg=null,fg=!1,gg=!1;function hg(St){eg===null?eg=[St]:eg.push(St)}function ig(St){fg=!0,hg(St)}function jg(){if(!gg&&eg!==null){gg=!0;var St=0,e=C$1;try{var _e=eg;for(C$1=1;St<_e.length;St++){var tn=_e[St];do tn=tn(!0);while(tn!==null)}eg=null,fg=!1}catch(un){throw eg!==null&&(eg=eg.slice(St+1)),ac(fc,jg),un}finally{C$1=e,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(St,e){kg[lg++]=ng,kg[lg++]=mg,mg=St,ng=e}function ug(St,e,_e){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=St;var tn=rg;St=sg;var un=32-oc(tn)-1;tn&=~(1<<un),_e+=1;var gn=32-oc(e)+un;if(30<gn){var vn=un-un%5;gn=(tn&(1<<vn)-1).toString(32),tn>>=vn,un-=vn,rg=1<<32-oc(e)+un|_e<<un|tn,sg=gn+St}else rg=1<<gn|_e<<un|tn,sg=St}function vg(St){St.return!==null&&(tg(St,1),ug(St,1,0))}function wg(St){for(;St===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;St===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$1=!1,zg=null;function Ag(St,e){var _e=Bg(5,null,null,0);_e.elementType="DELETED",_e.stateNode=e,_e.return=St,e=St.deletions,e===null?(St.deletions=[_e],St.flags|=16):e.push(_e)}function Cg(St,e){switch(St.tag){case 5:var _e=St.type;return e=e.nodeType!==1||_e.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(St.stateNode=e,xg=St,yg=Lf(e.firstChild),!0):!1;case 6:return e=St.pendingProps===""||e.nodeType!==3?null:e,e!==null?(St.stateNode=e,xg=St,yg=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(_e=qg!==null?{id:rg,overflow:sg}:null,St.memoizedState={dehydrated:e,treeContext:_e,retryLane:1073741824},_e=Bg(18,null,null,0),_e.stateNode=e,_e.return=St,St.child=_e,xg=St,yg=null,!0):!1;default:return!1}}function Dg(St){return(St.mode&1)!==0&&(St.flags&128)===0}function Eg(St){if(I$1){var e=yg;if(e){var _e=e;if(!Cg(St,e)){if(Dg(St))throw Error(p$2(418));e=Lf(_e.nextSibling);var tn=xg;e&&Cg(St,e)?Ag(tn,_e):(St.flags=St.flags&-4097|2,I$1=!1,xg=St)}}else{if(Dg(St))throw Error(p$2(418));St.flags=St.flags&-4097|2,I$1=!1,xg=St}}}function Fg(St){for(St=St.return;St!==null&&St.tag!==5&&St.tag!==3&&St.tag!==13;)St=St.return;xg=St}function Gg(St){if(St!==xg)return!1;if(!I$1)return Fg(St),I$1=!0,!1;var e;if((e=St.tag!==3)&&!(e=St.tag!==5)&&(e=St.type,e=e!=="head"&&e!=="body"&&!Ef(St.type,St.memoizedProps)),e&&(e=yg)){if(Dg(St))throw Hg(),Error(p$2(418));for(;e;)Ag(St,e),e=Lf(e.nextSibling)}if(Fg(St),St.tag===13){if(St=St.memoizedState,St=St!==null?St.dehydrated:null,!St)throw Error(p$2(317));t:{for(St=St.nextSibling,e=0;St;){if(St.nodeType===8){var _e=St.data;if(_e==="/$"){if(e===0){yg=Lf(St.nextSibling);break t}e--}else _e!=="$"&&_e!=="$!"&&_e!=="$?"||e++}St=St.nextSibling}yg=null}}else yg=xg?Lf(St.stateNode.nextSibling):null;return!0}function Hg(){for(var St=yg;St;)St=Lf(St.nextSibling)}function Ig(){yg=xg=null,I$1=!1}function Jg(St){zg===null?zg=[St]:zg.push(St)}var Kg=ua.ReactCurrentBatchConfig;function Lg(St,e){if(St&&St.defaultProps){e=A$1({},e),St=St.defaultProps;for(var _e in St)e[_e]===void 0&&(e[_e]=St[_e]);return e}return e}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(St){var e=Mg.current;E$1(Mg),St._currentValue=e}function Sg(St,e,_e){for(;St!==null;){var tn=St.alternate;if((St.childLanes&e)!==e?(St.childLanes|=e,tn!==null&&(tn.childLanes|=e)):tn!==null&&(tn.childLanes&e)!==e&&(tn.childLanes|=e),St===_e)break;St=St.return}}function Tg(St,e){Ng=St,Pg=Og=null,St=St.dependencies,St!==null&&St.firstContext!==null&&((St.lanes&e)!==0&&(Ug=!0),St.firstContext=null)}function Vg(St){var e=St._currentValue;if(Pg!==St)if(St={context:St,memoizedValue:e,next:null},Og===null){if(Ng===null)throw Error(p$2(308));Og=St,Ng.dependencies={lanes:0,firstContext:St}}else Og=Og.next=St;return e}var Wg=null;function Xg(St){Wg===null?Wg=[St]:Wg.push(St)}function Yg(St,e,_e,tn){var un=e.interleaved;return un===null?(_e.next=_e,Xg(e)):(_e.next=un.next,un.next=_e),e.interleaved=_e,Zg(St,tn)}function Zg(St,e){St.lanes|=e;var _e=St.alternate;for(_e!==null&&(_e.lanes|=e),_e=St,St=St.return;St!==null;)St.childLanes|=e,_e=St.alternate,_e!==null&&(_e.childLanes|=e),_e=St,St=St.return;return _e.tag===3?_e.stateNode:null}var $g=!1;function ah(St){St.updateQueue={baseState:St.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(St,e){St=St.updateQueue,e.updateQueue===St&&(e.updateQueue={baseState:St.baseState,firstBaseUpdate:St.firstBaseUpdate,lastBaseUpdate:St.lastBaseUpdate,shared:St.shared,effects:St.effects})}function ch(St,e){return{eventTime:St,lane:e,tag:0,payload:null,callback:null,next:null}}function dh(St,e,_e){var tn=St.updateQueue;if(tn===null)return null;if(tn=tn.shared,(K$1&2)!==0){var un=tn.pending;return un===null?e.next=e:(e.next=un.next,un.next=e),tn.pending=e,Zg(St,_e)}return un=tn.interleaved,un===null?(e.next=e,Xg(tn)):(e.next=un.next,un.next=e),tn.interleaved=e,Zg(St,_e)}function eh(St,e,_e){if(e=e.updateQueue,e!==null&&(e=e.shared,(_e&4194240)!==0)){var tn=e.lanes;tn&=St.pendingLanes,_e|=tn,e.lanes=_e,Cc(St,_e)}}function fh(St,e){var _e=St.updateQueue,tn=St.alternate;if(tn!==null&&(tn=tn.updateQueue,_e===tn)){var un=null,gn=null;if(_e=_e.firstBaseUpdate,_e!==null){do{var vn={eventTime:_e.eventTime,lane:_e.lane,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null};gn===null?un=gn=vn:gn=gn.next=vn,_e=_e.next}while(_e!==null);gn===null?un=gn=e:gn=gn.next=e}else un=gn=e;_e={baseState:tn.baseState,firstBaseUpdate:un,lastBaseUpdate:gn,shared:tn.shared,effects:tn.effects},St.updateQueue=_e;return}St=_e.lastBaseUpdate,St===null?_e.firstBaseUpdate=e:St.next=e,_e.lastBaseUpdate=e}function gh(St,e,_e,tn){var un=St.updateQueue;$g=!1;var gn=un.firstBaseUpdate,vn=un.lastBaseUpdate,fn=un.shared.pending;if(fn!==null){un.shared.pending=null;var en=fn,on=en.next;en.next=null,vn===null?gn=on:vn.next=on,vn=en;var dn=St.alternate;dn!==null&&(dn=dn.updateQueue,fn=dn.lastBaseUpdate,fn!==vn&&(fn===null?dn.firstBaseUpdate=on:fn.next=on,dn.lastBaseUpdate=en))}if(gn!==null){var rn=un.baseState;vn=0,dn=on=en=null,fn=gn;do{var an=fn.lane,nn=fn.eventTime;if((tn&an)===an){dn!==null&&(dn=dn.next={eventTime:nn,lane:0,tag:fn.tag,payload:fn.payload,callback:fn.callback,next:null});t:{var cn=St,hn=fn;switch(an=e,nn=_e,hn.tag){case 1:if(cn=hn.payload,typeof cn=="function"){rn=cn.call(nn,rn,an);break t}rn=cn;break t;case 3:cn.flags=cn.flags&-65537|128;case 0:if(cn=hn.payload,an=typeof cn=="function"?cn.call(nn,rn,an):cn,an==null)break t;rn=A$1({},rn,an);break t;case 2:$g=!0}}fn.callback!==null&&fn.lane!==0&&(St.flags|=64,an=un.effects,an===null?un.effects=[fn]:an.push(fn))}else nn={eventTime:nn,lane:an,tag:fn.tag,payload:fn.payload,callback:fn.callback,next:null},dn===null?(on=dn=nn,en=rn):dn=dn.next=nn,vn|=an;if(fn=fn.next,fn===null){if(fn=un.shared.pending,fn===null)break;an=fn,fn=an.next,an.next=null,un.lastBaseUpdate=an,un.shared.pending=null}}while(1);if(dn===null&&(en=rn),un.baseState=en,un.firstBaseUpdate=on,un.lastBaseUpdate=dn,e=un.shared.interleaved,e!==null){un=e;do vn|=un.lane,un=un.next;while(un!==e)}else gn===null&&(un.shared.lanes=0);hh|=vn,St.lanes=vn,St.memoizedState=rn}}function ih(St,e,_e){if(St=e.effects,e.effects=null,St!==null)for(e=0;e<St.length;e++){var tn=St[e],un=tn.callback;if(un!==null){if(tn.callback=null,tn=_e,typeof un!="function")throw Error(p$2(191,un));un.call(tn)}}}var jh=new aa.Component().refs;function kh(St,e,_e,tn){e=St.memoizedState,_e=_e(tn,e),_e=_e==null?e:A$1({},e,_e),St.memoizedState=_e,St.lanes===0&&(St.updateQueue.baseState=_e)}var nh={isMounted:function(St){return(St=St._reactInternals)?Vb(St)===St:!1},enqueueSetState:function(St,e,_e){St=St._reactInternals;var tn=L$1(),un=lh(St),gn=ch(tn,un);gn.payload=e,_e!=null&&(gn.callback=_e),e=dh(St,gn,un),e!==null&&(mh(e,St,un,tn),eh(e,St,un))},enqueueReplaceState:function(St,e,_e){St=St._reactInternals;var tn=L$1(),un=lh(St),gn=ch(tn,un);gn.tag=1,gn.payload=e,_e!=null&&(gn.callback=_e),e=dh(St,gn,un),e!==null&&(mh(e,St,un,tn),eh(e,St,un))},enqueueForceUpdate:function(St,e){St=St._reactInternals;var _e=L$1(),tn=lh(St),un=ch(_e,tn);un.tag=2,e!=null&&(un.callback=e),e=dh(St,un,tn),e!==null&&(mh(e,St,tn,_e),eh(e,St,tn))}};function oh(St,e,_e,tn,un,gn,vn){return St=St.stateNode,typeof St.shouldComponentUpdate=="function"?St.shouldComponentUpdate(tn,gn,vn):e.prototype&&e.prototype.isPureReactComponent?!Ie(_e,tn)||!Ie(un,gn):!0}function ph(St,e,_e){var tn=!1,un=Vf,gn=e.contextType;return typeof gn=="object"&&gn!==null?gn=Vg(gn):(un=Zf(e)?Xf:H$1.current,tn=e.contextTypes,gn=(tn=tn!=null)?Yf(St,un):Vf),e=new e(_e,gn),St.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=nh,St.stateNode=e,e._reactInternals=St,tn&&(St=St.stateNode,St.__reactInternalMemoizedUnmaskedChildContext=un,St.__reactInternalMemoizedMaskedChildContext=gn),e}function qh(St,e,_e,tn){St=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(_e,tn),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(_e,tn),e.state!==St&&nh.enqueueReplaceState(e,e.state,null)}function rh(St,e,_e,tn){var un=St.stateNode;un.props=_e,un.state=St.memoizedState,un.refs=jh,ah(St);var gn=e.contextType;typeof gn=="object"&&gn!==null?un.context=Vg(gn):(gn=Zf(e)?Xf:H$1.current,un.context=Yf(St,gn)),un.state=St.memoizedState,gn=e.getDerivedStateFromProps,typeof gn=="function"&&(kh(St,e,gn,_e),un.state=St.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof un.getSnapshotBeforeUpdate=="function"||typeof un.UNSAFE_componentWillMount!="function"&&typeof un.componentWillMount!="function"||(e=un.state,typeof un.componentWillMount=="function"&&un.componentWillMount(),typeof un.UNSAFE_componentWillMount=="function"&&un.UNSAFE_componentWillMount(),e!==un.state&&nh.enqueueReplaceState(un,un.state,null),gh(St,_e,un,tn),un.state=St.memoizedState),typeof un.componentDidMount=="function"&&(St.flags|=4194308)}function sh(St,e,_e){if(St=_e.ref,St!==null&&typeof St!="function"&&typeof St!="object"){if(_e._owner){if(_e=_e._owner,_e){if(_e.tag!==1)throw Error(p$2(309));var tn=_e.stateNode}if(!tn)throw Error(p$2(147,St));var un=tn,gn=""+St;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===gn?e.ref:(e=function(vn){var fn=un.refs;fn===jh&&(fn=un.refs={}),vn===null?delete fn[gn]:fn[gn]=vn},e._stringRef=gn,e)}if(typeof St!="string")throw Error(p$2(284));if(!_e._owner)throw Error(p$2(290,St))}return St}function th(St,e){throw St=Object.prototype.toString.call(e),Error(p$2(31,St==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":St))}function uh(St){var e=St._init;return e(St._payload)}function vh(St){function e(pn,mn){if(St){var yn=pn.deletions;yn===null?(pn.deletions=[mn],pn.flags|=16):yn.push(mn)}}function _e(pn,mn){if(!St)return null;for(;mn!==null;)e(pn,mn),mn=mn.sibling;return null}function tn(pn,mn){for(pn=new Map;mn!==null;)mn.key!==null?pn.set(mn.key,mn):pn.set(mn.index,mn),mn=mn.sibling;return pn}function un(pn,mn){return pn=wh(pn,mn),pn.index=0,pn.sibling=null,pn}function gn(pn,mn,yn){return pn.index=yn,St?(yn=pn.alternate,yn!==null?(yn=yn.index,yn<mn?(pn.flags|=2,mn):yn):(pn.flags|=2,mn)):(pn.flags|=1048576,mn)}function vn(pn){return St&&pn.alternate===null&&(pn.flags|=2),pn}function fn(pn,mn,yn,_n){return mn===null||mn.tag!==6?(mn=xh(yn,pn.mode,_n),mn.return=pn,mn):(mn=un(mn,yn),mn.return=pn,mn)}function en(pn,mn,yn,_n){var xn=yn.type;return xn===ya?dn(pn,mn,yn.props.children,_n,yn.key):mn!==null&&(mn.elementType===xn||typeof xn=="object"&&xn!==null&&xn.$$typeof===Ha&&uh(xn)===mn.type)?(_n=un(mn,yn.props),_n.ref=sh(pn,mn,yn),_n.return=pn,_n):(_n=yh(yn.type,yn.key,yn.props,null,pn.mode,_n),_n.ref=sh(pn,mn,yn),_n.return=pn,_n)}function on(pn,mn,yn,_n){return mn===null||mn.tag!==4||mn.stateNode.containerInfo!==yn.containerInfo||mn.stateNode.implementation!==yn.implementation?(mn=zh(yn,pn.mode,_n),mn.return=pn,mn):(mn=un(mn,yn.children||[]),mn.return=pn,mn)}function dn(pn,mn,yn,_n,xn){return mn===null||mn.tag!==7?(mn=Ah(yn,pn.mode,_n,xn),mn.return=pn,mn):(mn=un(mn,yn),mn.return=pn,mn)}function rn(pn,mn,yn){if(typeof mn=="string"&&mn!==""||typeof mn=="number")return mn=xh(""+mn,pn.mode,yn),mn.return=pn,mn;if(typeof mn=="object"&&mn!==null){switch(mn.$$typeof){case va:return yn=yh(mn.type,mn.key,mn.props,null,pn.mode,yn),yn.ref=sh(pn,null,mn),yn.return=pn,yn;case wa:return mn=zh(mn,pn.mode,yn),mn.return=pn,mn;case Ha:var _n=mn._init;return rn(pn,_n(mn._payload),yn)}if(eb(mn)||Ka(mn))return mn=Ah(mn,pn.mode,yn,null),mn.return=pn,mn;th(pn,mn)}return null}function an(pn,mn,yn,_n){var xn=mn!==null?mn.key:null;if(typeof yn=="string"&&yn!==""||typeof yn=="number")return xn!==null?null:fn(pn,mn,""+yn,_n);if(typeof yn=="object"&&yn!==null){switch(yn.$$typeof){case va:return yn.key===xn?en(pn,mn,yn,_n):null;case wa:return yn.key===xn?on(pn,mn,yn,_n):null;case Ha:return xn=yn._init,an(pn,mn,xn(yn._payload),_n)}if(eb(yn)||Ka(yn))return xn!==null?null:dn(pn,mn,yn,_n,null);th(pn,yn)}return null}function nn(pn,mn,yn,_n,xn){if(typeof _n=="string"&&_n!==""||typeof _n=="number")return pn=pn.get(yn)||null,fn(mn,pn,""+_n,xn);if(typeof _n=="object"&&_n!==null){switch(_n.$$typeof){case va:return pn=pn.get(_n.key===null?yn:_n.key)||null,en(mn,pn,_n,xn);case wa:return pn=pn.get(_n.key===null?yn:_n.key)||null,on(mn,pn,_n,xn);case Ha:var Sn=_n._init;return nn(pn,mn,yn,Sn(_n._payload),xn)}if(eb(_n)||Ka(_n))return pn=pn.get(yn)||null,dn(mn,pn,_n,xn,null);th(mn,_n)}return null}function cn(pn,mn,yn,_n){for(var xn=null,Sn=null,Pn=mn,Ln=mn=0,In=null;Pn!==null&&Ln<yn.length;Ln++){Pn.index>Ln?(In=Pn,Pn=null):In=Pn.sibling;var Rn=an(pn,Pn,yn[Ln],_n);if(Rn===null){Pn===null&&(Pn=In);break}St&&Pn&&Rn.alternate===null&&e(pn,Pn),mn=gn(Rn,mn,Ln),Sn===null?xn=Rn:Sn.sibling=Rn,Sn=Rn,Pn=In}if(Ln===yn.length)return _e(pn,Pn),I$1&&tg(pn,Ln),xn;if(Pn===null){for(;Ln<yn.length;Ln++)Pn=rn(pn,yn[Ln],_n),Pn!==null&&(mn=gn(Pn,mn,Ln),Sn===null?xn=Pn:Sn.sibling=Pn,Sn=Pn);return I$1&&tg(pn,Ln),xn}for(Pn=tn(pn,Pn);Ln<yn.length;Ln++)In=nn(Pn,pn,Ln,yn[Ln],_n),In!==null&&(St&&In.alternate!==null&&Pn.delete(In.key===null?Ln:In.key),mn=gn(In,mn,Ln),Sn===null?xn=In:Sn.sibling=In,Sn=In);return St&&Pn.forEach(function(Mn){return e(pn,Mn)}),I$1&&tg(pn,Ln),xn}function hn(pn,mn,yn,_n){var xn=Ka(yn);if(typeof xn!="function")throw Error(p$2(150));if(yn=xn.call(yn),yn==null)throw Error(p$2(151));for(var Sn=xn=null,Pn=mn,Ln=mn=0,In=null,Rn=yn.next();Pn!==null&&!Rn.done;Ln++,Rn=yn.next()){Pn.index>Ln?(In=Pn,Pn=null):In=Pn.sibling;var Mn=an(pn,Pn,Rn.value,_n);if(Mn===null){Pn===null&&(Pn=In);break}St&&Pn&&Mn.alternate===null&&e(pn,Pn),mn=gn(Mn,mn,Ln),Sn===null?xn=Mn:Sn.sibling=Mn,Sn=Mn,Pn=In}if(Rn.done)return _e(pn,Pn),I$1&&tg(pn,Ln),xn;if(Pn===null){for(;!Rn.done;Ln++,Rn=yn.next())Rn=rn(pn,Rn.value,_n),Rn!==null&&(mn=gn(Rn,mn,Ln),Sn===null?xn=Rn:Sn.sibling=Rn,Sn=Rn);return I$1&&tg(pn,Ln),xn}for(Pn=tn(pn,Pn);!Rn.done;Ln++,Rn=yn.next())Rn=nn(Pn,pn,Ln,Rn.value,_n),Rn!==null&&(St&&Rn.alternate!==null&&Pn.delete(Rn.key===null?Ln:Rn.key),mn=gn(Rn,mn,Ln),Sn===null?xn=Rn:Sn.sibling=Rn,Sn=Rn);return St&&Pn.forEach(function(Hn){return e(pn,Hn)}),I$1&&tg(pn,Ln),xn}function sn(pn,mn,yn,_n){if(typeof yn=="object"&&yn!==null&&yn.type===ya&&yn.key===null&&(yn=yn.props.children),typeof yn=="object"&&yn!==null){switch(yn.$$typeof){case va:t:{for(var xn=yn.key,Sn=mn;Sn!==null;){if(Sn.key===xn){if(xn=yn.type,xn===ya){if(Sn.tag===7){_e(pn,Sn.sibling),mn=un(Sn,yn.props.children),mn.return=pn,pn=mn;break t}}else if(Sn.elementType===xn||typeof xn=="object"&&xn!==null&&xn.$$typeof===Ha&&uh(xn)===Sn.type){_e(pn,Sn.sibling),mn=un(Sn,yn.props),mn.ref=sh(pn,Sn,yn),mn.return=pn,pn=mn;break t}_e(pn,Sn);break}else e(pn,Sn);Sn=Sn.sibling}yn.type===ya?(mn=Ah(yn.props.children,pn.mode,_n,yn.key),mn.return=pn,pn=mn):(_n=yh(yn.type,yn.key,yn.props,null,pn.mode,_n),_n.ref=sh(pn,mn,yn),_n.return=pn,pn=_n)}return vn(pn);case wa:t:{for(Sn=yn.key;mn!==null;){if(mn.key===Sn)if(mn.tag===4&&mn.stateNode.containerInfo===yn.containerInfo&&mn.stateNode.implementation===yn.implementation){_e(pn,mn.sibling),mn=un(mn,yn.children||[]),mn.return=pn,pn=mn;break t}else{_e(pn,mn);break}else e(pn,mn);mn=mn.sibling}mn=zh(yn,pn.mode,_n),mn.return=pn,pn=mn}return vn(pn);case Ha:return Sn=yn._init,sn(pn,mn,Sn(yn._payload),_n)}if(eb(yn))return cn(pn,mn,yn,_n);if(Ka(yn))return hn(pn,mn,yn,_n);th(pn,yn)}return typeof yn=="string"&&yn!==""||typeof yn=="number"?(yn=""+yn,mn!==null&&mn.tag===6?(_e(pn,mn.sibling),mn=un(mn,yn),mn.return=pn,pn=mn):(_e(pn,mn),mn=xh(yn,pn.mode,_n),mn.return=pn,pn=mn),vn(pn)):_e(pn,mn)}return sn}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(St){if(St===Dh)throw Error(p$2(174));return St}function Ih(St,e){switch(G$1(Gh,e),G$1(Fh,St),G$1(Eh,Dh),St=e.nodeType,St){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lb(null,"");break;default:St=St===8?e.parentNode:e,e=St.namespaceURI||null,St=St.tagName,e=lb(e,St)}E$1(Eh),G$1(Eh,e)}function Jh(){E$1(Eh),E$1(Fh),E$1(Gh)}function Kh(St){Hh(Gh.current);var e=Hh(Eh.current),_e=lb(e,St.type);e!==_e&&(G$1(Fh,St),G$1(Eh,_e))}function Lh(St){Fh.current===St&&(E$1(Eh),E$1(Fh))}var M$1=Uf(0);function Mh(St){for(var e=St;e!==null;){if(e.tag===13){var _e=e.memoizedState;if(_e!==null&&(_e=_e.dehydrated,_e===null||_e.data==="$?"||_e.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===St)break;for(;e.sibling===null;){if(e.return===null||e.return===St)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Nh=[];function Oh(){for(var St=0;St<Nh.length;St++)Nh[St]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N$1=null,O$1=null,P$1=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q$1(){throw Error(p$2(321))}function Wh(St,e){if(e===null)return!1;for(var _e=0;_e<e.length&&_e<St.length;_e++)if(!He(St[_e],e[_e]))return!1;return!0}function Xh(St,e,_e,tn,un,gn){if(Rh=gn,N$1=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ph.current=St===null||St.memoizedState===null?Yh:Zh,St=_e(tn,un),Th){gn=0;do{if(Th=!1,Uh=0,25<=gn)throw Error(p$2(301));gn+=1,P$1=O$1=null,e.updateQueue=null,Ph.current=$h,St=_e(tn,un)}while(Th)}if(Ph.current=ai,e=O$1!==null&&O$1.next!==null,Rh=0,P$1=O$1=N$1=null,Sh=!1,e)throw Error(p$2(300));return St}function bi(){var St=Uh!==0;return Uh=0,St}function ci(){var St={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$1===null?N$1.memoizedState=P$1=St:P$1=P$1.next=St,P$1}function di(){if(O$1===null){var St=N$1.alternate;St=St!==null?St.memoizedState:null}else St=O$1.next;var e=P$1===null?N$1.memoizedState:P$1.next;if(e!==null)P$1=e,O$1=St;else{if(St===null)throw Error(p$2(310));O$1=St,St={memoizedState:O$1.memoizedState,baseState:O$1.baseState,baseQueue:O$1.baseQueue,queue:O$1.queue,next:null},P$1===null?N$1.memoizedState=P$1=St:P$1=P$1.next=St}return P$1}function ei(St,e){return typeof e=="function"?e(St):e}function fi(St){var e=di(),_e=e.queue;if(_e===null)throw Error(p$2(311));_e.lastRenderedReducer=St;var tn=O$1,un=tn.baseQueue,gn=_e.pending;if(gn!==null){if(un!==null){var vn=un.next;un.next=gn.next,gn.next=vn}tn.baseQueue=un=gn,_e.pending=null}if(un!==null){gn=un.next,tn=tn.baseState;var fn=vn=null,en=null,on=gn;do{var dn=on.lane;if((Rh&dn)===dn)en!==null&&(en=en.next={lane:0,action:on.action,hasEagerState:on.hasEagerState,eagerState:on.eagerState,next:null}),tn=on.hasEagerState?on.eagerState:St(tn,on.action);else{var rn={lane:dn,action:on.action,hasEagerState:on.hasEagerState,eagerState:on.eagerState,next:null};en===null?(fn=en=rn,vn=tn):en=en.next=rn,N$1.lanes|=dn,hh|=dn}on=on.next}while(on!==null&&on!==gn);en===null?vn=tn:en.next=fn,He(tn,e.memoizedState)||(Ug=!0),e.memoizedState=tn,e.baseState=vn,e.baseQueue=en,_e.lastRenderedState=tn}if(St=_e.interleaved,St!==null){un=St;do gn=un.lane,N$1.lanes|=gn,hh|=gn,un=un.next;while(un!==St)}else un===null&&(_e.lanes=0);return[e.memoizedState,_e.dispatch]}function gi(St){var e=di(),_e=e.queue;if(_e===null)throw Error(p$2(311));_e.lastRenderedReducer=St;var tn=_e.dispatch,un=_e.pending,gn=e.memoizedState;if(un!==null){_e.pending=null;var vn=un=un.next;do gn=St(gn,vn.action),vn=vn.next;while(vn!==un);He(gn,e.memoizedState)||(Ug=!0),e.memoizedState=gn,e.baseQueue===null&&(e.baseState=gn),_e.lastRenderedState=gn}return[gn,tn]}function hi(){}function ii(St,e){var _e=N$1,tn=di(),un=e(),gn=!He(tn.memoizedState,un);if(gn&&(tn.memoizedState=un,Ug=!0),tn=tn.queue,ji(ki.bind(null,_e,tn,St),[St]),tn.getSnapshot!==e||gn||P$1!==null&&P$1.memoizedState.tag&1){if(_e.flags|=2048,li(9,mi.bind(null,_e,tn,un,e),void 0,null),R$1===null)throw Error(p$2(349));(Rh&30)!==0||ni(_e,e,un)}return un}function ni(St,e,_e){St.flags|=16384,St={getSnapshot:e,value:_e},e=N$1.updateQueue,e===null?(e={lastEffect:null,stores:null},N$1.updateQueue=e,e.stores=[St]):(_e=e.stores,_e===null?e.stores=[St]:_e.push(St))}function mi(St,e,_e,tn){e.value=_e,e.getSnapshot=tn,oi(e)&&pi(St)}function ki(St,e,_e){return _e(function(){oi(e)&&pi(St)})}function oi(St){var e=St.getSnapshot;St=St.value;try{var _e=e();return!He(St,_e)}catch{return!0}}function pi(St){var e=Zg(St,1);e!==null&&mh(e,St,1,-1)}function qi(St){var e=ci();return typeof St=="function"&&(St=St()),e.memoizedState=e.baseState=St,St={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:St},e.queue=St,St=St.dispatch=ri.bind(null,N$1,St),[e.memoizedState,St]}function li(St,e,_e,tn){return St={tag:St,create:e,destroy:_e,deps:tn,next:null},e=N$1.updateQueue,e===null?(e={lastEffect:null,stores:null},N$1.updateQueue=e,e.lastEffect=St.next=St):(_e=e.lastEffect,_e===null?e.lastEffect=St.next=St:(tn=_e.next,_e.next=St,St.next=tn,e.lastEffect=St)),St}function si(){return di().memoizedState}function ti(St,e,_e,tn){var un=ci();N$1.flags|=St,un.memoizedState=li(1|e,_e,void 0,tn===void 0?null:tn)}function ui(St,e,_e,tn){var un=di();tn=tn===void 0?null:tn;var gn=void 0;if(O$1!==null){var vn=O$1.memoizedState;if(gn=vn.destroy,tn!==null&&Wh(tn,vn.deps)){un.memoizedState=li(e,_e,gn,tn);return}}N$1.flags|=St,un.memoizedState=li(1|e,_e,gn,tn)}function vi(St,e){return ti(8390656,8,St,e)}function ji(St,e){return ui(2048,8,St,e)}function wi(St,e){return ui(4,2,St,e)}function xi(St,e){return ui(4,4,St,e)}function yi(St,e){if(typeof e=="function")return St=St(),e(St),function(){e(null)};if(e!=null)return St=St(),e.current=St,function(){e.current=null}}function zi(St,e,_e){return _e=_e!=null?_e.concat([St]):null,ui(4,4,yi.bind(null,e,St),_e)}function Ai(){}function Bi(St,e){var _e=di();e=e===void 0?null:e;var tn=_e.memoizedState;return tn!==null&&e!==null&&Wh(e,tn[1])?tn[0]:(_e.memoizedState=[St,e],St)}function Ci(St,e){var _e=di();e=e===void 0?null:e;var tn=_e.memoizedState;return tn!==null&&e!==null&&Wh(e,tn[1])?tn[0]:(St=St(),_e.memoizedState=[St,e],St)}function Di(St,e,_e){return(Rh&21)===0?(St.baseState&&(St.baseState=!1,Ug=!0),St.memoizedState=_e):(He(_e,e)||(_e=yc(),N$1.lanes|=_e,hh|=_e,St.baseState=!0),e)}function Ei(St,e){var _e=C$1;C$1=_e!==0&&4>_e?_e:4,St(!0);var tn=Qh.transition;Qh.transition={};try{St(!1),e()}finally{C$1=_e,Qh.transition=tn}}function Fi(){return di().memoizedState}function Gi(St,e,_e){var tn=lh(St);if(_e={lane:tn,action:_e,hasEagerState:!1,eagerState:null,next:null},Hi(St))Ii(e,_e);else if(_e=Yg(St,e,_e,tn),_e!==null){var un=L$1();mh(_e,St,tn,un),Ji(_e,e,tn)}}function ri(St,e,_e){var tn=lh(St),un={lane:tn,action:_e,hasEagerState:!1,eagerState:null,next:null};if(Hi(St))Ii(e,un);else{var gn=St.alternate;if(St.lanes===0&&(gn===null||gn.lanes===0)&&(gn=e.lastRenderedReducer,gn!==null))try{var vn=e.lastRenderedState,fn=gn(vn,_e);if(un.hasEagerState=!0,un.eagerState=fn,He(fn,vn)){var en=e.interleaved;en===null?(un.next=un,Xg(e)):(un.next=en.next,en.next=un),e.interleaved=un;return}}catch{}finally{}_e=Yg(St,e,un,tn),_e!==null&&(un=L$1(),mh(_e,St,tn,un),Ji(_e,e,tn))}}function Hi(St){var e=St.alternate;return St===N$1||e!==null&&e===N$1}function Ii(St,e){Th=Sh=!0;var _e=St.pending;_e===null?e.next=e:(e.next=_e.next,_e.next=e),St.pending=e}function Ji(St,e,_e){if((_e&4194240)!==0){var tn=e.lanes;tn&=St.pendingLanes,_e|=tn,e.lanes=_e,Cc(St,_e)}}var ai={readContext:Vg,useCallback:Q$1,useContext:Q$1,useEffect:Q$1,useImperativeHandle:Q$1,useInsertionEffect:Q$1,useLayoutEffect:Q$1,useMemo:Q$1,useReducer:Q$1,useRef:Q$1,useState:Q$1,useDebugValue:Q$1,useDeferredValue:Q$1,useTransition:Q$1,useMutableSource:Q$1,useSyncExternalStore:Q$1,useId:Q$1,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(St,e){return ci().memoizedState=[St,e===void 0?null:e],St},useContext:Vg,useEffect:vi,useImperativeHandle:function(St,e,_e){return _e=_e!=null?_e.concat([St]):null,ti(4194308,4,yi.bind(null,e,St),_e)},useLayoutEffect:function(St,e){return ti(4194308,4,St,e)},useInsertionEffect:function(St,e){return ti(4,2,St,e)},useMemo:function(St,e){var _e=ci();return e=e===void 0?null:e,St=St(),_e.memoizedState=[St,e],St},useReducer:function(St,e,_e){var tn=ci();return e=_e!==void 0?_e(e):e,tn.memoizedState=tn.baseState=e,St={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:St,lastRenderedState:e},tn.queue=St,St=St.dispatch=Gi.bind(null,N$1,St),[tn.memoizedState,St]},useRef:function(St){var e=ci();return St={current:St},e.memoizedState=St},useState:qi,useDebugValue:Ai,useDeferredValue:function(St){return ci().memoizedState=St},useTransition:function(){var St=qi(!1),e=St[0];return St=Ei.bind(null,St[1]),ci().memoizedState=St,[e,St]},useMutableSource:function(){},useSyncExternalStore:function(St,e,_e){var tn=N$1,un=ci();if(I$1){if(_e===void 0)throw Error(p$2(407));_e=_e()}else{if(_e=e(),R$1===null)throw Error(p$2(349));(Rh&30)!==0||ni(tn,e,_e)}un.memoizedState=_e;var gn={value:_e,getSnapshot:e};return un.queue=gn,vi(ki.bind(null,tn,gn,St),[St]),tn.flags|=2048,li(9,mi.bind(null,tn,gn,_e,e),void 0,null),_e},useId:function(){var St=ci(),e=R$1.identifierPrefix;if(I$1){var _e=sg,tn=rg;_e=(tn&~(1<<32-oc(tn)-1)).toString(32)+_e,e=":"+e+"R"+_e,_e=Uh++,0<_e&&(e+="H"+_e.toString(32)),e+=":"}else _e=Vh++,e=":"+e+"r"+_e.toString(32)+":";return St.memoizedState=e},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(St){var e=di();return Di(e,O$1.memoizedState,St)},useTransition:function(){var St=fi(ei)[0],e=di().memoizedState;return[St,e]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(St){var e=di();return O$1===null?e.memoizedState=St:Di(e,O$1.memoizedState,St)},useTransition:function(){var St=gi(ei)[0],e=di().memoizedState;return[St,e]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(St,e){try{var _e="",tn=e;do _e+=Pa(tn),tn=tn.return;while(tn);var un=_e}catch(gn){un=`
Error generating stack: `+gn.message+`
`+gn.stack}return{value:St,source:e,stack:un,digest:null}}function Li(St,e,_e){return{value:St,source:null,stack:_e!=null?_e:null,digest:e!=null?e:null}}function Mi(St,e){try{console.error(e.value)}catch(_e){setTimeout(function(){throw _e})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(St,e,_e){_e=ch(-1,_e),_e.tag=3,_e.payload={element:null};var tn=e.value;return _e.callback=function(){Pi||(Pi=!0,Qi=tn),Mi(St,e)},_e}function Ri(St,e,_e){_e=ch(-1,_e),_e.tag=3;var tn=St.type.getDerivedStateFromError;if(typeof tn=="function"){var un=e.value;_e.payload=function(){return tn(un)},_e.callback=function(){Mi(St,e)}}var gn=St.stateNode;return gn!==null&&typeof gn.componentDidCatch=="function"&&(_e.callback=function(){Mi(St,e),typeof tn!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var vn=e.stack;this.componentDidCatch(e.value,{componentStack:vn!==null?vn:""})}),_e}function Ti(St,e,_e){var tn=St.pingCache;if(tn===null){tn=St.pingCache=new Ni;var un=new Set;tn.set(e,un)}else un=tn.get(e),un===void 0&&(un=new Set,tn.set(e,un));un.has(_e)||(un.add(_e),St=Ui.bind(null,St,e,_e),e.then(St,St))}function Vi(St){do{var e;if((e=St.tag===13)&&(e=St.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return St;St=St.return}while(St!==null);return null}function Wi(St,e,_e,tn,un){return(St.mode&1)===0?(St===e?St.flags|=65536:(St.flags|=128,_e.flags|=131072,_e.flags&=-52805,_e.tag===1&&(_e.alternate===null?_e.tag=17:(e=ch(-1,1),e.tag=2,dh(_e,e,1))),_e.lanes|=1),St):(St.flags|=65536,St.lanes=un,St)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(St,e,_e,tn){e.child=St===null?Ch(e,null,_e,tn):Bh(e,St.child,_e,tn)}function Zi(St,e,_e,tn,un){_e=_e.render;var gn=e.ref;return Tg(e,un),tn=Xh(St,e,_e,tn,gn,un),_e=bi(),St!==null&&!Ug?(e.updateQueue=St.updateQueue,e.flags&=-2053,St.lanes&=~un,$i(St,e,un)):(I$1&&_e&&vg(e),e.flags|=1,Yi(St,e,tn,un),e.child)}function aj(St,e,_e,tn,un){if(St===null){var gn=_e.type;return typeof gn=="function"&&!bj(gn)&&gn.defaultProps===void 0&&_e.compare===null&&_e.defaultProps===void 0?(e.tag=15,e.type=gn,cj(St,e,gn,tn,un)):(St=yh(_e.type,null,tn,e,e.mode,un),St.ref=e.ref,St.return=e,e.child=St)}if(gn=St.child,(St.lanes&un)===0){var vn=gn.memoizedProps;if(_e=_e.compare,_e=_e!==null?_e:Ie,_e(vn,tn)&&St.ref===e.ref)return $i(St,e,un)}return e.flags|=1,St=wh(gn,tn),St.ref=e.ref,St.return=e,e.child=St}function cj(St,e,_e,tn,un){if(St!==null){var gn=St.memoizedProps;if(Ie(gn,tn)&&St.ref===e.ref)if(Ug=!1,e.pendingProps=tn=gn,(St.lanes&un)!==0)(St.flags&131072)!==0&&(Ug=!0);else return e.lanes=St.lanes,$i(St,e,un)}return dj(St,e,_e,tn,un)}function ej(St,e,_e){var tn=e.pendingProps,un=tn.children,gn=St!==null?St.memoizedState:null;if(tn.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(fj,gj),gj|=_e;else{if((_e&1073741824)===0)return St=gn!==null?gn.baseLanes|_e:_e,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:St,cachePool:null,transitions:null},e.updateQueue=null,G$1(fj,gj),gj|=St,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},tn=gn!==null?gn.baseLanes:_e,G$1(fj,gj),gj|=tn}else gn!==null?(tn=gn.baseLanes|_e,e.memoizedState=null):tn=_e,G$1(fj,gj),gj|=tn;return Yi(St,e,un,_e),e.child}function hj(St,e){var _e=e.ref;(St===null&&_e!==null||St!==null&&St.ref!==_e)&&(e.flags|=512,e.flags|=2097152)}function dj(St,e,_e,tn,un){var gn=Zf(_e)?Xf:H$1.current;return gn=Yf(e,gn),Tg(e,un),_e=Xh(St,e,_e,tn,gn,un),tn=bi(),St!==null&&!Ug?(e.updateQueue=St.updateQueue,e.flags&=-2053,St.lanes&=~un,$i(St,e,un)):(I$1&&tn&&vg(e),e.flags|=1,Yi(St,e,_e,un),e.child)}function ij(St,e,_e,tn,un){if(Zf(_e)){var gn=!0;cg(e)}else gn=!1;if(Tg(e,un),e.stateNode===null)jj(St,e),ph(e,_e,tn),rh(e,_e,tn,un),tn=!0;else if(St===null){var vn=e.stateNode,fn=e.memoizedProps;vn.props=fn;var en=vn.context,on=_e.contextType;typeof on=="object"&&on!==null?on=Vg(on):(on=Zf(_e)?Xf:H$1.current,on=Yf(e,on));var dn=_e.getDerivedStateFromProps,rn=typeof dn=="function"||typeof vn.getSnapshotBeforeUpdate=="function";rn||typeof vn.UNSAFE_componentWillReceiveProps!="function"&&typeof vn.componentWillReceiveProps!="function"||(fn!==tn||en!==on)&&qh(e,vn,tn,on),$g=!1;var an=e.memoizedState;vn.state=an,gh(e,tn,vn,un),en=e.memoizedState,fn!==tn||an!==en||Wf.current||$g?(typeof dn=="function"&&(kh(e,_e,dn,tn),en=e.memoizedState),(fn=$g||oh(e,_e,fn,tn,an,en,on))?(rn||typeof vn.UNSAFE_componentWillMount!="function"&&typeof vn.componentWillMount!="function"||(typeof vn.componentWillMount=="function"&&vn.componentWillMount(),typeof vn.UNSAFE_componentWillMount=="function"&&vn.UNSAFE_componentWillMount()),typeof vn.componentDidMount=="function"&&(e.flags|=4194308)):(typeof vn.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=tn,e.memoizedState=en),vn.props=tn,vn.state=en,vn.context=on,tn=fn):(typeof vn.componentDidMount=="function"&&(e.flags|=4194308),tn=!1)}else{vn=e.stateNode,bh(St,e),fn=e.memoizedProps,on=e.type===e.elementType?fn:Lg(e.type,fn),vn.props=on,rn=e.pendingProps,an=vn.context,en=_e.contextType,typeof en=="object"&&en!==null?en=Vg(en):(en=Zf(_e)?Xf:H$1.current,en=Yf(e,en));var nn=_e.getDerivedStateFromProps;(dn=typeof nn=="function"||typeof vn.getSnapshotBeforeUpdate=="function")||typeof vn.UNSAFE_componentWillReceiveProps!="function"&&typeof vn.componentWillReceiveProps!="function"||(fn!==rn||an!==en)&&qh(e,vn,tn,en),$g=!1,an=e.memoizedState,vn.state=an,gh(e,tn,vn,un);var cn=e.memoizedState;fn!==rn||an!==cn||Wf.current||$g?(typeof nn=="function"&&(kh(e,_e,nn,tn),cn=e.memoizedState),(on=$g||oh(e,_e,on,tn,an,cn,en)||!1)?(dn||typeof vn.UNSAFE_componentWillUpdate!="function"&&typeof vn.componentWillUpdate!="function"||(typeof vn.componentWillUpdate=="function"&&vn.componentWillUpdate(tn,cn,en),typeof vn.UNSAFE_componentWillUpdate=="function"&&vn.UNSAFE_componentWillUpdate(tn,cn,en)),typeof vn.componentDidUpdate=="function"&&(e.flags|=4),typeof vn.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof vn.componentDidUpdate!="function"||fn===St.memoizedProps&&an===St.memoizedState||(e.flags|=4),typeof vn.getSnapshotBeforeUpdate!="function"||fn===St.memoizedProps&&an===St.memoizedState||(e.flags|=1024),e.memoizedProps=tn,e.memoizedState=cn),vn.props=tn,vn.state=cn,vn.context=en,tn=on):(typeof vn.componentDidUpdate!="function"||fn===St.memoizedProps&&an===St.memoizedState||(e.flags|=4),typeof vn.getSnapshotBeforeUpdate!="function"||fn===St.memoizedProps&&an===St.memoizedState||(e.flags|=1024),tn=!1)}return kj(St,e,_e,tn,gn,un)}function kj(St,e,_e,tn,un,gn){hj(St,e);var vn=(e.flags&128)!==0;if(!tn&&!vn)return un&&dg(e,_e,!1),$i(St,e,gn);tn=e.stateNode,Xi.current=e;var fn=vn&&typeof _e.getDerivedStateFromError!="function"?null:tn.render();return e.flags|=1,St!==null&&vn?(e.child=Bh(e,St.child,null,gn),e.child=Bh(e,null,fn,gn)):Yi(St,e,fn,gn),e.memoizedState=tn.state,un&&dg(e,_e,!0),e.child}function lj(St){var e=St.stateNode;e.pendingContext?ag(St,e.pendingContext,e.pendingContext!==e.context):e.context&&ag(St,e.context,!1),Ih(St,e.containerInfo)}function mj(St,e,_e,tn,un){return Ig(),Jg(un),e.flags|=256,Yi(St,e,_e,tn),e.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(St){return{baseLanes:St,cachePool:null,transitions:null}}function pj(St,e,_e){var tn=e.pendingProps,un=M$1.current,gn=!1,vn=(e.flags&128)!==0,fn;if((fn=vn)||(fn=St!==null&&St.memoizedState===null?!1:(un&2)!==0),fn?(gn=!0,e.flags&=-129):(St===null||St.memoizedState!==null)&&(un|=1),G$1(M$1,un&1),St===null)return Eg(e),St=e.memoizedState,St!==null&&(St=St.dehydrated,St!==null)?((e.mode&1)===0?e.lanes=1:St.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(vn=tn.children,St=tn.fallback,gn?(tn=e.mode,gn=e.child,vn={mode:"hidden",children:vn},(tn&1)===0&&gn!==null?(gn.childLanes=0,gn.pendingProps=vn):gn=qj(vn,tn,0,null),St=Ah(St,tn,_e,null),gn.return=e,St.return=e,gn.sibling=St,e.child=gn,e.child.memoizedState=oj(_e),e.memoizedState=nj,St):rj(e,vn));if(un=St.memoizedState,un!==null&&(fn=un.dehydrated,fn!==null))return sj(St,e,vn,tn,fn,un,_e);if(gn){gn=tn.fallback,vn=e.mode,un=St.child,fn=un.sibling;var en={mode:"hidden",children:tn.children};return(vn&1)===0&&e.child!==un?(tn=e.child,tn.childLanes=0,tn.pendingProps=en,e.deletions=null):(tn=wh(un,en),tn.subtreeFlags=un.subtreeFlags&14680064),fn!==null?gn=wh(fn,gn):(gn=Ah(gn,vn,_e,null),gn.flags|=2),gn.return=e,tn.return=e,tn.sibling=gn,e.child=tn,tn=gn,gn=e.child,vn=St.child.memoizedState,vn=vn===null?oj(_e):{baseLanes:vn.baseLanes|_e,cachePool:null,transitions:vn.transitions},gn.memoizedState=vn,gn.childLanes=St.childLanes&~_e,e.memoizedState=nj,tn}return gn=St.child,St=gn.sibling,tn=wh(gn,{mode:"visible",children:tn.children}),(e.mode&1)===0&&(tn.lanes=_e),tn.return=e,tn.sibling=null,St!==null&&(_e=e.deletions,_e===null?(e.deletions=[St],e.flags|=16):_e.push(St)),e.child=tn,e.memoizedState=null,tn}function rj(St,e){return e=qj({mode:"visible",children:e},St.mode,0,null),e.return=St,St.child=e}function tj(St,e,_e,tn){return tn!==null&&Jg(tn),Bh(e,St.child,null,_e),St=rj(e,e.pendingProps.children),St.flags|=2,e.memoizedState=null,St}function sj(St,e,_e,tn,un,gn,vn){if(_e)return e.flags&256?(e.flags&=-257,tn=Li(Error(p$2(422))),tj(St,e,vn,tn)):e.memoizedState!==null?(e.child=St.child,e.flags|=128,null):(gn=tn.fallback,un=e.mode,tn=qj({mode:"visible",children:tn.children},un,0,null),gn=Ah(gn,un,vn,null),gn.flags|=2,tn.return=e,gn.return=e,tn.sibling=gn,e.child=tn,(e.mode&1)!==0&&Bh(e,St.child,null,vn),e.child.memoizedState=oj(vn),e.memoizedState=nj,gn);if((e.mode&1)===0)return tj(St,e,vn,null);if(un.data==="$!"){if(tn=un.nextSibling&&un.nextSibling.dataset,tn)var fn=tn.dgst;return tn=fn,gn=Error(p$2(419)),tn=Li(gn,tn,void 0),tj(St,e,vn,tn)}if(fn=(vn&St.childLanes)!==0,Ug||fn){if(tn=R$1,tn!==null){switch(vn&-vn){case 4:un=2;break;case 16:un=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:un=32;break;case 536870912:un=268435456;break;default:un=0}un=(un&(tn.suspendedLanes|vn))!==0?0:un,un!==0&&un!==gn.retryLane&&(gn.retryLane=un,Zg(St,un),mh(tn,St,un,-1))}return uj(),tn=Li(Error(p$2(421))),tj(St,e,vn,tn)}return un.data==="$?"?(e.flags|=128,e.child=St.child,e=vj.bind(null,St),un._reactRetry=e,null):(St=gn.treeContext,yg=Lf(un.nextSibling),xg=e,I$1=!0,zg=null,St!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=St.id,sg=St.overflow,qg=e),e=rj(e,tn.children),e.flags|=4096,e)}function wj(St,e,_e){St.lanes|=e;var tn=St.alternate;tn!==null&&(tn.lanes|=e),Sg(St.return,e,_e)}function xj(St,e,_e,tn,un){var gn=St.memoizedState;gn===null?St.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:tn,tail:_e,tailMode:un}:(gn.isBackwards=e,gn.rendering=null,gn.renderingStartTime=0,gn.last=tn,gn.tail=_e,gn.tailMode=un)}function yj(St,e,_e){var tn=e.pendingProps,un=tn.revealOrder,gn=tn.tail;if(Yi(St,e,tn.children,_e),tn=M$1.current,(tn&2)!==0)tn=tn&1|2,e.flags|=128;else{if(St!==null&&(St.flags&128)!==0)t:for(St=e.child;St!==null;){if(St.tag===13)St.memoizedState!==null&&wj(St,_e,e);else if(St.tag===19)wj(St,_e,e);else if(St.child!==null){St.child.return=St,St=St.child;continue}if(St===e)break t;for(;St.sibling===null;){if(St.return===null||St.return===e)break t;St=St.return}St.sibling.return=St.return,St=St.sibling}tn&=1}if(G$1(M$1,tn),(e.mode&1)===0)e.memoizedState=null;else switch(un){case"forwards":for(_e=e.child,un=null;_e!==null;)St=_e.alternate,St!==null&&Mh(St)===null&&(un=_e),_e=_e.sibling;_e=un,_e===null?(un=e.child,e.child=null):(un=_e.sibling,_e.sibling=null),xj(e,!1,un,_e,gn);break;case"backwards":for(_e=null,un=e.child,e.child=null;un!==null;){if(St=un.alternate,St!==null&&Mh(St)===null){e.child=un;break}St=un.sibling,un.sibling=_e,_e=un,un=St}xj(e,!0,_e,null,gn);break;case"together":xj(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jj(St,e){(e.mode&1)===0&&St!==null&&(St.alternate=null,e.alternate=null,e.flags|=2)}function $i(St,e,_e){if(St!==null&&(e.dependencies=St.dependencies),hh|=e.lanes,(_e&e.childLanes)===0)return null;if(St!==null&&e.child!==St.child)throw Error(p$2(153));if(e.child!==null){for(St=e.child,_e=wh(St,St.pendingProps),e.child=_e,_e.return=e;St.sibling!==null;)St=St.sibling,_e=_e.sibling=wh(St,St.pendingProps),_e.return=e;_e.sibling=null}return e.child}function zj(St,e,_e){switch(e.tag){case 3:lj(e),Ig();break;case 5:Kh(e);break;case 1:Zf(e.type)&&cg(e);break;case 4:Ih(e,e.stateNode.containerInfo);break;case 10:var tn=e.type._context,un=e.memoizedProps.value;G$1(Mg,tn._currentValue),tn._currentValue=un;break;case 13:if(tn=e.memoizedState,tn!==null)return tn.dehydrated!==null?(G$1(M$1,M$1.current&1),e.flags|=128,null):(_e&e.child.childLanes)!==0?pj(St,e,_e):(G$1(M$1,M$1.current&1),St=$i(St,e,_e),St!==null?St.sibling:null);G$1(M$1,M$1.current&1);break;case 19:if(tn=(_e&e.childLanes)!==0,(St.flags&128)!==0){if(tn)return yj(St,e,_e);e.flags|=128}if(un=e.memoizedState,un!==null&&(un.rendering=null,un.tail=null,un.lastEffect=null),G$1(M$1,M$1.current),tn)break;return null;case 22:case 23:return e.lanes=0,ej(St,e,_e)}return $i(St,e,_e)}var Aj,Bj,Cj,Dj;Aj=function(St,e){for(var _e=e.child;_e!==null;){if(_e.tag===5||_e.tag===6)St.appendChild(_e.stateNode);else if(_e.tag!==4&&_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===e)break;for(;_e.sibling===null;){if(_e.return===null||_e.return===e)return;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}};Bj=function(){};Cj=function(St,e,_e,tn){var un=St.memoizedProps;if(un!==tn){St=e.stateNode,Hh(Eh.current);var gn=null;switch(_e){case"input":un=Ya(St,un),tn=Ya(St,tn),gn=[];break;case"select":un=A$1({},un,{value:void 0}),tn=A$1({},tn,{value:void 0}),gn=[];break;case"textarea":un=gb(St,un),tn=gb(St,tn),gn=[];break;default:typeof un.onClick!="function"&&typeof tn.onClick=="function"&&(St.onclick=Bf)}ub(_e,tn);var vn;_e=null;for(on in un)if(!tn.hasOwnProperty(on)&&un.hasOwnProperty(on)&&un[on]!=null)if(on==="style"){var fn=un[on];for(vn in fn)fn.hasOwnProperty(vn)&&(_e||(_e={}),_e[vn]="")}else on!=="dangerouslySetInnerHTML"&&on!=="children"&&on!=="suppressContentEditableWarning"&&on!=="suppressHydrationWarning"&&on!=="autoFocus"&&(ea.hasOwnProperty(on)?gn||(gn=[]):(gn=gn||[]).push(on,null));for(on in tn){var en=tn[on];if(fn=un!=null?un[on]:void 0,tn.hasOwnProperty(on)&&en!==fn&&(en!=null||fn!=null))if(on==="style")if(fn){for(vn in fn)!fn.hasOwnProperty(vn)||en&&en.hasOwnProperty(vn)||(_e||(_e={}),_e[vn]="");for(vn in en)en.hasOwnProperty(vn)&&fn[vn]!==en[vn]&&(_e||(_e={}),_e[vn]=en[vn])}else _e||(gn||(gn=[]),gn.push(on,_e)),_e=en;else on==="dangerouslySetInnerHTML"?(en=en?en.__html:void 0,fn=fn?fn.__html:void 0,en!=null&&fn!==en&&(gn=gn||[]).push(on,en)):on==="children"?typeof en!="string"&&typeof en!="number"||(gn=gn||[]).push(on,""+en):on!=="suppressContentEditableWarning"&&on!=="suppressHydrationWarning"&&(ea.hasOwnProperty(on)?(en!=null&&on==="onScroll"&&D$1("scroll",St),gn||fn===en||(gn=[])):(gn=gn||[]).push(on,en))}_e&&(gn=gn||[]).push("style",_e);var on=gn;(e.updateQueue=on)&&(e.flags|=4)}};Dj=function(St,e,_e,tn){_e!==tn&&(e.flags|=4)};function Ej(St,e){if(!I$1)switch(St.tailMode){case"hidden":e=St.tail;for(var _e=null;e!==null;)e.alternate!==null&&(_e=e),e=e.sibling;_e===null?St.tail=null:_e.sibling=null;break;case"collapsed":_e=St.tail;for(var tn=null;_e!==null;)_e.alternate!==null&&(tn=_e),_e=_e.sibling;tn===null?e||St.tail===null?St.tail=null:St.tail.sibling=null:tn.sibling=null}}function S$1(St){var e=St.alternate!==null&&St.alternate.child===St.child,_e=0,tn=0;if(e)for(var un=St.child;un!==null;)_e|=un.lanes|un.childLanes,tn|=un.subtreeFlags&14680064,tn|=un.flags&14680064,un.return=St,un=un.sibling;else for(un=St.child;un!==null;)_e|=un.lanes|un.childLanes,tn|=un.subtreeFlags,tn|=un.flags,un.return=St,un=un.sibling;return St.subtreeFlags|=tn,St.childLanes=_e,e}function Fj(St,e,_e){var tn=e.pendingProps;switch(wg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(e),null;case 1:return Zf(e.type)&&$f(),S$1(e),null;case 3:return tn=e.stateNode,Jh(),E$1(Wf),E$1(H$1),Oh(),tn.pendingContext&&(tn.context=tn.pendingContext,tn.pendingContext=null),(St===null||St.child===null)&&(Gg(e)?e.flags|=4:St===null||St.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(St,e),S$1(e),null;case 5:Lh(e);var un=Hh(Gh.current);if(_e=e.type,St!==null&&e.stateNode!=null)Cj(St,e,_e,tn,un),St.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!tn){if(e.stateNode===null)throw Error(p$2(166));return S$1(e),null}if(St=Hh(Eh.current),Gg(e)){tn=e.stateNode,_e=e.type;var gn=e.memoizedProps;switch(tn[Of]=e,tn[Pf]=gn,St=(e.mode&1)!==0,_e){case"dialog":D$1("cancel",tn),D$1("close",tn);break;case"iframe":case"object":case"embed":D$1("load",tn);break;case"video":case"audio":for(un=0;un<lf.length;un++)D$1(lf[un],tn);break;case"source":D$1("error",tn);break;case"img":case"image":case"link":D$1("error",tn),D$1("load",tn);break;case"details":D$1("toggle",tn);break;case"input":Za(tn,gn),D$1("invalid",tn);break;case"select":tn._wrapperState={wasMultiple:!!gn.multiple},D$1("invalid",tn);break;case"textarea":hb(tn,gn),D$1("invalid",tn)}ub(_e,gn),un=null;for(var vn in gn)if(gn.hasOwnProperty(vn)){var fn=gn[vn];vn==="children"?typeof fn=="string"?tn.textContent!==fn&&(gn.suppressHydrationWarning!==!0&&Af(tn.textContent,fn,St),un=["children",fn]):typeof fn=="number"&&tn.textContent!==""+fn&&(gn.suppressHydrationWarning!==!0&&Af(tn.textContent,fn,St),un=["children",""+fn]):ea.hasOwnProperty(vn)&&fn!=null&&vn==="onScroll"&&D$1("scroll",tn)}switch(_e){case"input":Va(tn),db(tn,gn,!0);break;case"textarea":Va(tn),jb(tn);break;case"select":case"option":break;default:typeof gn.onClick=="function"&&(tn.onclick=Bf)}tn=un,e.updateQueue=tn,tn!==null&&(e.flags|=4)}else{vn=un.nodeType===9?un:un.ownerDocument,St==="http://www.w3.org/1999/xhtml"&&(St=kb(_e)),St==="http://www.w3.org/1999/xhtml"?_e==="script"?(St=vn.createElement("div"),St.innerHTML="<script><\/script>",St=St.removeChild(St.firstChild)):typeof tn.is=="string"?St=vn.createElement(_e,{is:tn.is}):(St=vn.createElement(_e),_e==="select"&&(vn=St,tn.multiple?vn.multiple=!0:tn.size&&(vn.size=tn.size))):St=vn.createElementNS(St,_e),St[Of]=e,St[Pf]=tn,Aj(St,e,!1,!1),e.stateNode=St;t:{switch(vn=vb(_e,tn),_e){case"dialog":D$1("cancel",St),D$1("close",St),un=tn;break;case"iframe":case"object":case"embed":D$1("load",St),un=tn;break;case"video":case"audio":for(un=0;un<lf.length;un++)D$1(lf[un],St);un=tn;break;case"source":D$1("error",St),un=tn;break;case"img":case"image":case"link":D$1("error",St),D$1("load",St),un=tn;break;case"details":D$1("toggle",St),un=tn;break;case"input":Za(St,tn),un=Ya(St,tn),D$1("invalid",St);break;case"option":un=tn;break;case"select":St._wrapperState={wasMultiple:!!tn.multiple},un=A$1({},tn,{value:void 0}),D$1("invalid",St);break;case"textarea":hb(St,tn),un=gb(St,tn),D$1("invalid",St);break;default:un=tn}ub(_e,un),fn=un;for(gn in fn)if(fn.hasOwnProperty(gn)){var en=fn[gn];gn==="style"?sb(St,en):gn==="dangerouslySetInnerHTML"?(en=en?en.__html:void 0,en!=null&&nb(St,en)):gn==="children"?typeof en=="string"?(_e!=="textarea"||en!=="")&&ob(St,en):typeof en=="number"&&ob(St,""+en):gn!=="suppressContentEditableWarning"&&gn!=="suppressHydrationWarning"&&gn!=="autoFocus"&&(ea.hasOwnProperty(gn)?en!=null&&gn==="onScroll"&&D$1("scroll",St):en!=null&&ta(St,gn,en,vn))}switch(_e){case"input":Va(St),db(St,tn,!1);break;case"textarea":Va(St),jb(St);break;case"option":tn.value!=null&&St.setAttribute("value",""+Sa(tn.value));break;case"select":St.multiple=!!tn.multiple,gn=tn.value,gn!=null?fb(St,!!tn.multiple,gn,!1):tn.defaultValue!=null&&fb(St,!!tn.multiple,tn.defaultValue,!0);break;default:typeof un.onClick=="function"&&(St.onclick=Bf)}switch(_e){case"button":case"input":case"select":case"textarea":tn=!!tn.autoFocus;break t;case"img":tn=!0;break t;default:tn=!1}}tn&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return S$1(e),null;case 6:if(St&&e.stateNode!=null)Dj(St,e,St.memoizedProps,tn);else{if(typeof tn!="string"&&e.stateNode===null)throw Error(p$2(166));if(_e=Hh(Gh.current),Hh(Eh.current),Gg(e)){if(tn=e.stateNode,_e=e.memoizedProps,tn[Of]=e,(gn=tn.nodeValue!==_e)&&(St=xg,St!==null))switch(St.tag){case 3:Af(tn.nodeValue,_e,(St.mode&1)!==0);break;case 5:St.memoizedProps.suppressHydrationWarning!==!0&&Af(tn.nodeValue,_e,(St.mode&1)!==0)}gn&&(e.flags|=4)}else tn=(_e.nodeType===9?_e:_e.ownerDocument).createTextNode(tn),tn[Of]=e,e.stateNode=tn}return S$1(e),null;case 13:if(E$1(M$1),tn=e.memoizedState,St===null||St.memoizedState!==null&&St.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&(e.mode&1)!==0&&(e.flags&128)===0)Hg(),Ig(),e.flags|=98560,gn=!1;else if(gn=Gg(e),tn!==null&&tn.dehydrated!==null){if(St===null){if(!gn)throw Error(p$2(318));if(gn=e.memoizedState,gn=gn!==null?gn.dehydrated:null,!gn)throw Error(p$2(317));gn[Of]=e}else Ig(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;S$1(e),gn=!1}else zg!==null&&(Gj(zg),zg=null),gn=!0;if(!gn)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=_e,e):(tn=tn!==null,tn!==(St!==null&&St.memoizedState!==null)&&tn&&(e.child.flags|=8192,(e.mode&1)!==0&&(St===null||(M$1.current&1)!==0?T$1===0&&(T$1=3):uj())),e.updateQueue!==null&&(e.flags|=4),S$1(e),null);case 4:return Jh(),Bj(St,e),St===null&&sf(e.stateNode.containerInfo),S$1(e),null;case 10:return Rg(e.type._context),S$1(e),null;case 17:return Zf(e.type)&&$f(),S$1(e),null;case 19:if(E$1(M$1),gn=e.memoizedState,gn===null)return S$1(e),null;if(tn=(e.flags&128)!==0,vn=gn.rendering,vn===null)if(tn)Ej(gn,!1);else{if(T$1!==0||St!==null&&(St.flags&128)!==0)for(St=e.child;St!==null;){if(vn=Mh(St),vn!==null){for(e.flags|=128,Ej(gn,!1),tn=vn.updateQueue,tn!==null&&(e.updateQueue=tn,e.flags|=4),e.subtreeFlags=0,tn=_e,_e=e.child;_e!==null;)gn=_e,St=tn,gn.flags&=14680066,vn=gn.alternate,vn===null?(gn.childLanes=0,gn.lanes=St,gn.child=null,gn.subtreeFlags=0,gn.memoizedProps=null,gn.memoizedState=null,gn.updateQueue=null,gn.dependencies=null,gn.stateNode=null):(gn.childLanes=vn.childLanes,gn.lanes=vn.lanes,gn.child=vn.child,gn.subtreeFlags=0,gn.deletions=null,gn.memoizedProps=vn.memoizedProps,gn.memoizedState=vn.memoizedState,gn.updateQueue=vn.updateQueue,gn.type=vn.type,St=vn.dependencies,gn.dependencies=St===null?null:{lanes:St.lanes,firstContext:St.firstContext}),_e=_e.sibling;return G$1(M$1,M$1.current&1|2),e.child}St=St.sibling}gn.tail!==null&&B$1()>Hj&&(e.flags|=128,tn=!0,Ej(gn,!1),e.lanes=4194304)}else{if(!tn)if(St=Mh(vn),St!==null){if(e.flags|=128,tn=!0,_e=St.updateQueue,_e!==null&&(e.updateQueue=_e,e.flags|=4),Ej(gn,!0),gn.tail===null&&gn.tailMode==="hidden"&&!vn.alternate&&!I$1)return S$1(e),null}else 2*B$1()-gn.renderingStartTime>Hj&&_e!==1073741824&&(e.flags|=128,tn=!0,Ej(gn,!1),e.lanes=4194304);gn.isBackwards?(vn.sibling=e.child,e.child=vn):(_e=gn.last,_e!==null?_e.sibling=vn:e.child=vn,gn.last=vn)}return gn.tail!==null?(e=gn.tail,gn.rendering=e,gn.tail=e.sibling,gn.renderingStartTime=B$1(),e.sibling=null,_e=M$1.current,G$1(M$1,tn?_e&1|2:_e&1),e):(S$1(e),null);case 22:case 23:return Ij(),tn=e.memoizedState!==null,St!==null&&St.memoizedState!==null!==tn&&(e.flags|=8192),tn&&(e.mode&1)!==0?(gj&1073741824)!==0&&(S$1(e),e.subtreeFlags&6&&(e.flags|=8192)):S$1(e),null;case 24:return null;case 25:return null}throw Error(p$2(156,e.tag))}function Jj(St,e){switch(wg(e),e.tag){case 1:return Zf(e.type)&&$f(),St=e.flags,St&65536?(e.flags=St&-65537|128,e):null;case 3:return Jh(),E$1(Wf),E$1(H$1),Oh(),St=e.flags,(St&65536)!==0&&(St&128)===0?(e.flags=St&-65537|128,e):null;case 5:return Lh(e),null;case 13:if(E$1(M$1),St=e.memoizedState,St!==null&&St.dehydrated!==null){if(e.alternate===null)throw Error(p$2(340));Ig()}return St=e.flags,St&65536?(e.flags=St&-65537|128,e):null;case 19:return E$1(M$1),null;case 4:return Jh(),null;case 10:return Rg(e.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U$1=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Mj(St,e){var _e=St.ref;if(_e!==null)if(typeof _e=="function")try{_e(null)}catch(tn){W$1(St,e,tn)}else _e.current=null}function Nj(St,e,_e){try{_e()}catch(tn){W$1(St,e,tn)}}var Oj=!1;function Pj(St,e){if(Cf=dd,St=Me(),Ne$1(St)){if("selectionStart"in St)var _e={start:St.selectionStart,end:St.selectionEnd};else t:{_e=(_e=St.ownerDocument)&&_e.defaultView||window;var tn=_e.getSelection&&_e.getSelection();if(tn&&tn.rangeCount!==0){_e=tn.anchorNode;var un=tn.anchorOffset,gn=tn.focusNode;tn=tn.focusOffset;try{_e.nodeType,gn.nodeType}catch{_e=null;break t}var vn=0,fn=-1,en=-1,on=0,dn=0,rn=St,an=null;e:for(;;){for(var nn;rn!==_e||un!==0&&rn.nodeType!==3||(fn=vn+un),rn!==gn||tn!==0&&rn.nodeType!==3||(en=vn+tn),rn.nodeType===3&&(vn+=rn.nodeValue.length),(nn=rn.firstChild)!==null;)an=rn,rn=nn;for(;;){if(rn===St)break e;if(an===_e&&++on===un&&(fn=vn),an===gn&&++dn===tn&&(en=vn),(nn=rn.nextSibling)!==null)break;rn=an,an=rn.parentNode}rn=nn}_e=fn===-1||en===-1?null:{start:fn,end:en}}else _e=null}_e=_e||{start:0,end:0}}else _e=null;for(Df={focusedElem:St,selectionRange:_e},dd=!1,V$1=e;V$1!==null;)if(e=V$1,St=e.child,(e.subtreeFlags&1028)!==0&&St!==null)St.return=e,V$1=St;else for(;V$1!==null;){e=V$1;try{var cn=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(cn!==null){var hn=cn.memoizedProps,sn=cn.memoizedState,pn=e.stateNode,mn=pn.getSnapshotBeforeUpdate(e.elementType===e.type?hn:Lg(e.type,hn),sn);pn.__reactInternalSnapshotBeforeUpdate=mn}break;case 3:var yn=e.stateNode.containerInfo;yn.nodeType===1?yn.textContent="":yn.nodeType===9&&yn.documentElement&&yn.removeChild(yn.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$2(163))}}catch(_n){W$1(e,e.return,_n)}if(St=e.sibling,St!==null){St.return=e.return,V$1=St;break}V$1=e.return}return cn=Oj,Oj=!1,cn}function Qj(St,e,_e){var tn=e.updateQueue;if(tn=tn!==null?tn.lastEffect:null,tn!==null){var un=tn=tn.next;do{if((un.tag&St)===St){var gn=un.destroy;un.destroy=void 0,gn!==void 0&&Nj(e,_e,gn)}un=un.next}while(un!==tn)}}function Rj(St,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var _e=e=e.next;do{if((_e.tag&St)===St){var tn=_e.create;_e.destroy=tn()}_e=_e.next}while(_e!==e)}}function Sj(St){var e=St.ref;if(e!==null){var _e=St.stateNode;switch(St.tag){case 5:St=_e;break;default:St=_e}typeof e=="function"?e(St):e.current=St}}function Tj(St){var e=St.alternate;e!==null&&(St.alternate=null,Tj(e)),St.child=null,St.deletions=null,St.sibling=null,St.tag===5&&(e=St.stateNode,e!==null&&(delete e[Of],delete e[Pf],delete e[of],delete e[Qf],delete e[Rf])),St.stateNode=null,St.return=null,St.dependencies=null,St.memoizedProps=null,St.memoizedState=null,St.pendingProps=null,St.stateNode=null,St.updateQueue=null}function Uj(St){return St.tag===5||St.tag===3||St.tag===4}function Vj(St){t:for(;;){for(;St.sibling===null;){if(St.return===null||Uj(St.return))return null;St=St.return}for(St.sibling.return=St.return,St=St.sibling;St.tag!==5&&St.tag!==6&&St.tag!==18;){if(St.flags&2||St.child===null||St.tag===4)continue t;St.child.return=St,St=St.child}if(!(St.flags&2))return St.stateNode}}function Wj(St,e,_e){var tn=St.tag;if(tn===5||tn===6)St=St.stateNode,e?_e.nodeType===8?_e.parentNode.insertBefore(St,e):_e.insertBefore(St,e):(_e.nodeType===8?(e=_e.parentNode,e.insertBefore(St,_e)):(e=_e,e.appendChild(St)),_e=_e._reactRootContainer,_e!=null||e.onclick!==null||(e.onclick=Bf));else if(tn!==4&&(St=St.child,St!==null))for(Wj(St,e,_e),St=St.sibling;St!==null;)Wj(St,e,_e),St=St.sibling}function Xj(St,e,_e){var tn=St.tag;if(tn===5||tn===6)St=St.stateNode,e?_e.insertBefore(St,e):_e.appendChild(St);else if(tn!==4&&(St=St.child,St!==null))for(Xj(St,e,_e),St=St.sibling;St!==null;)Xj(St,e,_e),St=St.sibling}var X$1=null,Yj=!1;function Zj(St,e,_e){for(_e=_e.child;_e!==null;)ak(St,e,_e),_e=_e.sibling}function ak(St,e,_e){if(lc$1&&typeof lc$1.onCommitFiberUnmount=="function")try{lc$1.onCommitFiberUnmount(kc,_e)}catch{}switch(_e.tag){case 5:U$1||Mj(_e,e);case 6:var tn=X$1,un=Yj;X$1=null,Zj(St,e,_e),X$1=tn,Yj=un,X$1!==null&&(Yj?(St=X$1,_e=_e.stateNode,St.nodeType===8?St.parentNode.removeChild(_e):St.removeChild(_e)):X$1.removeChild(_e.stateNode));break;case 18:X$1!==null&&(Yj?(St=X$1,_e=_e.stateNode,St.nodeType===8?Kf(St.parentNode,_e):St.nodeType===1&&Kf(St,_e),bd(St)):Kf(X$1,_e.stateNode));break;case 4:tn=X$1,un=Yj,X$1=_e.stateNode.containerInfo,Yj=!0,Zj(St,e,_e),X$1=tn,Yj=un;break;case 0:case 11:case 14:case 15:if(!U$1&&(tn=_e.updateQueue,tn!==null&&(tn=tn.lastEffect,tn!==null))){un=tn=tn.next;do{var gn=un,vn=gn.destroy;gn=gn.tag,vn!==void 0&&((gn&2)!==0||(gn&4)!==0)&&Nj(_e,e,vn),un=un.next}while(un!==tn)}Zj(St,e,_e);break;case 1:if(!U$1&&(Mj(_e,e),tn=_e.stateNode,typeof tn.componentWillUnmount=="function"))try{tn.props=_e.memoizedProps,tn.state=_e.memoizedState,tn.componentWillUnmount()}catch(fn){W$1(_e,e,fn)}Zj(St,e,_e);break;case 21:Zj(St,e,_e);break;case 22:_e.mode&1?(U$1=(tn=U$1)||_e.memoizedState!==null,Zj(St,e,_e),U$1=tn):Zj(St,e,_e);break;default:Zj(St,e,_e)}}function bk(St){var e=St.updateQueue;if(e!==null){St.updateQueue=null;var _e=St.stateNode;_e===null&&(_e=St.stateNode=new Lj),e.forEach(function(tn){var un=ck.bind(null,St,tn);_e.has(tn)||(_e.add(tn),tn.then(un,un))})}}function dk(St,e){var _e=e.deletions;if(_e!==null)for(var tn=0;tn<_e.length;tn++){var un=_e[tn];try{var gn=St,vn=e,fn=vn;t:for(;fn!==null;){switch(fn.tag){case 5:X$1=fn.stateNode,Yj=!1;break t;case 3:X$1=fn.stateNode.containerInfo,Yj=!0;break t;case 4:X$1=fn.stateNode.containerInfo,Yj=!0;break t}fn=fn.return}if(X$1===null)throw Error(p$2(160));ak(gn,vn,un),X$1=null,Yj=!1;var en=un.alternate;en!==null&&(en.return=null),un.return=null}catch(on){W$1(un,e,on)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ek(e,St),e=e.sibling}function ek(St,e){var _e=St.alternate,tn=St.flags;switch(St.tag){case 0:case 11:case 14:case 15:if(dk(e,St),fk(St),tn&4){try{Qj(3,St,St.return),Rj(3,St)}catch(hn){W$1(St,St.return,hn)}try{Qj(5,St,St.return)}catch(hn){W$1(St,St.return,hn)}}break;case 1:dk(e,St),fk(St),tn&512&&_e!==null&&Mj(_e,_e.return);break;case 5:if(dk(e,St),fk(St),tn&512&&_e!==null&&Mj(_e,_e.return),St.flags&32){var un=St.stateNode;try{ob(un,"")}catch(hn){W$1(St,St.return,hn)}}if(tn&4&&(un=St.stateNode,un!=null)){var gn=St.memoizedProps,vn=_e!==null?_e.memoizedProps:gn,fn=St.type,en=St.updateQueue;if(St.updateQueue=null,en!==null)try{fn==="input"&&gn.type==="radio"&&gn.name!=null&&ab(un,gn),vb(fn,vn);var on=vb(fn,gn);for(vn=0;vn<en.length;vn+=2){var dn=en[vn],rn=en[vn+1];dn==="style"?sb(un,rn):dn==="dangerouslySetInnerHTML"?nb(un,rn):dn==="children"?ob(un,rn):ta(un,dn,rn,on)}switch(fn){case"input":bb(un,gn);break;case"textarea":ib(un,gn);break;case"select":var an=un._wrapperState.wasMultiple;un._wrapperState.wasMultiple=!!gn.multiple;var nn=gn.value;nn!=null?fb(un,!!gn.multiple,nn,!1):an!==!!gn.multiple&&(gn.defaultValue!=null?fb(un,!!gn.multiple,gn.defaultValue,!0):fb(un,!!gn.multiple,gn.multiple?[]:"",!1))}un[Pf]=gn}catch(hn){W$1(St,St.return,hn)}}break;case 6:if(dk(e,St),fk(St),tn&4){if(St.stateNode===null)throw Error(p$2(162));un=St.stateNode,gn=St.memoizedProps;try{un.nodeValue=gn}catch(hn){W$1(St,St.return,hn)}}break;case 3:if(dk(e,St),fk(St),tn&4&&_e!==null&&_e.memoizedState.isDehydrated)try{bd(e.containerInfo)}catch(hn){W$1(St,St.return,hn)}break;case 4:dk(e,St),fk(St);break;case 13:dk(e,St),fk(St),un=St.child,un.flags&8192&&(gn=un.memoizedState!==null,un.stateNode.isHidden=gn,!gn||un.alternate!==null&&un.alternate.memoizedState!==null||(gk=B$1())),tn&4&&bk(St);break;case 22:if(dn=_e!==null&&_e.memoizedState!==null,St.mode&1?(U$1=(on=U$1)||dn,dk(e,St),U$1=on):dk(e,St),fk(St),tn&8192){if(on=St.memoizedState!==null,(St.stateNode.isHidden=on)&&!dn&&(St.mode&1)!==0)for(V$1=St,dn=St.child;dn!==null;){for(rn=V$1=dn;V$1!==null;){switch(an=V$1,nn=an.child,an.tag){case 0:case 11:case 14:case 15:Qj(4,an,an.return);break;case 1:Mj(an,an.return);var cn=an.stateNode;if(typeof cn.componentWillUnmount=="function"){tn=an,_e=an.return;try{e=tn,cn.props=e.memoizedProps,cn.state=e.memoizedState,cn.componentWillUnmount()}catch(hn){W$1(tn,_e,hn)}}break;case 5:Mj(an,an.return);break;case 22:if(an.memoizedState!==null){hk(rn);continue}}nn!==null?(nn.return=an,V$1=nn):hk(rn)}dn=dn.sibling}t:for(dn=null,rn=St;;){if(rn.tag===5){if(dn===null){dn=rn;try{un=rn.stateNode,on?(gn=un.style,typeof gn.setProperty=="function"?gn.setProperty("display","none","important"):gn.display="none"):(fn=rn.stateNode,en=rn.memoizedProps.style,vn=en!=null&&en.hasOwnProperty("display")?en.display:null,fn.style.display=rb("display",vn))}catch(hn){W$1(St,St.return,hn)}}}else if(rn.tag===6){if(dn===null)try{rn.stateNode.nodeValue=on?"":rn.memoizedProps}catch(hn){W$1(St,St.return,hn)}}else if((rn.tag!==22&&rn.tag!==23||rn.memoizedState===null||rn===St)&&rn.child!==null){rn.child.return=rn,rn=rn.child;continue}if(rn===St)break t;for(;rn.sibling===null;){if(rn.return===null||rn.return===St)break t;dn===rn&&(dn=null),rn=rn.return}dn===rn&&(dn=null),rn.sibling.return=rn.return,rn=rn.sibling}}break;case 19:dk(e,St),fk(St),tn&4&&bk(St);break;case 21:break;default:dk(e,St),fk(St)}}function fk(St){var e=St.flags;if(e&2){try{t:{for(var _e=St.return;_e!==null;){if(Uj(_e)){var tn=_e;break t}_e=_e.return}throw Error(p$2(160))}switch(tn.tag){case 5:var un=tn.stateNode;tn.flags&32&&(ob(un,""),tn.flags&=-33);var gn=Vj(St);Xj(St,gn,un);break;case 3:case 4:var vn=tn.stateNode.containerInfo,fn=Vj(St);Wj(St,fn,vn);break;default:throw Error(p$2(161))}}catch(en){W$1(St,St.return,en)}St.flags&=-3}e&4096&&(St.flags&=-4097)}function ik(St,e,_e){V$1=St,jk(St)}function jk(St,e,_e){for(var tn=(St.mode&1)!==0;V$1!==null;){var un=V$1,gn=un.child;if(un.tag===22&&tn){var vn=un.memoizedState!==null||Kj;if(!vn){var fn=un.alternate,en=fn!==null&&fn.memoizedState!==null||U$1;fn=Kj;var on=U$1;if(Kj=vn,(U$1=en)&&!on)for(V$1=un;V$1!==null;)vn=V$1,en=vn.child,vn.tag===22&&vn.memoizedState!==null?kk(un):en!==null?(en.return=vn,V$1=en):kk(un);for(;gn!==null;)V$1=gn,jk(gn),gn=gn.sibling;V$1=un,Kj=fn,U$1=on}lk(St)}else(un.subtreeFlags&8772)!==0&&gn!==null?(gn.return=un,V$1=gn):lk(St)}}function lk(St){for(;V$1!==null;){var e=V$1;if((e.flags&8772)!==0){var _e=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:U$1||Rj(5,e);break;case 1:var tn=e.stateNode;if(e.flags&4&&!U$1)if(_e===null)tn.componentDidMount();else{var un=e.elementType===e.type?_e.memoizedProps:Lg(e.type,_e.memoizedProps);tn.componentDidUpdate(un,_e.memoizedState,tn.__reactInternalSnapshotBeforeUpdate)}var gn=e.updateQueue;gn!==null&&ih(e,gn,tn);break;case 3:var vn=e.updateQueue;if(vn!==null){if(_e=null,e.child!==null)switch(e.child.tag){case 5:_e=e.child.stateNode;break;case 1:_e=e.child.stateNode}ih(e,vn,_e)}break;case 5:var fn=e.stateNode;if(_e===null&&e.flags&4){_e=fn;var en=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":en.autoFocus&&_e.focus();break;case"img":en.src&&(_e.src=en.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var on=e.alternate;if(on!==null){var dn=on.memoizedState;if(dn!==null){var rn=dn.dehydrated;rn!==null&&bd(rn)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$2(163))}U$1||e.flags&512&&Sj(e)}catch(an){W$1(e,e.return,an)}}if(e===St){V$1=null;break}if(_e=e.sibling,_e!==null){_e.return=e.return,V$1=_e;break}V$1=e.return}}function hk(St){for(;V$1!==null;){var e=V$1;if(e===St){V$1=null;break}var _e=e.sibling;if(_e!==null){_e.return=e.return,V$1=_e;break}V$1=e.return}}function kk(St){for(;V$1!==null;){var e=V$1;try{switch(e.tag){case 0:case 11:case 15:var _e=e.return;try{Rj(4,e)}catch(en){W$1(e,_e,en)}break;case 1:var tn=e.stateNode;if(typeof tn.componentDidMount=="function"){var un=e.return;try{tn.componentDidMount()}catch(en){W$1(e,un,en)}}var gn=e.return;try{Sj(e)}catch(en){W$1(e,gn,en)}break;case 5:var vn=e.return;try{Sj(e)}catch(en){W$1(e,vn,en)}}}catch(en){W$1(e,e.return,en)}if(e===St){V$1=null;break}var fn=e.sibling;if(fn!==null){fn.return=e.return,V$1=fn;break}V$1=e.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K$1=0,R$1=null,Y$1=null,Z$1=0,gj=0,fj=Uf(0),T$1=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L$1(){return(K$1&6)!==0?B$1():Bk!==-1?Bk:Bk=B$1()}function lh(St){return(St.mode&1)===0?1:(K$1&2)!==0&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(St=C$1,St!==0||(St=window.event,St=St===void 0?16:jd(St.type)),St)}function mh(St,e,_e,tn){if(50<zk)throw zk=0,Ak=null,Error(p$2(185));Ac(St,_e,tn),((K$1&2)===0||St!==R$1)&&(St===R$1&&((K$1&2)===0&&(rk|=_e),T$1===4&&Dk(St,Z$1)),Ek(St,tn),_e===1&&K$1===0&&(e.mode&1)===0&&(Hj=B$1()+500,fg&&jg()))}function Ek(St,e){var _e=St.callbackNode;wc(St,e);var tn=uc(St,St===R$1?Z$1:0);if(tn===0)_e!==null&&bc(_e),St.callbackNode=null,St.callbackPriority=0;else if(e=tn&-tn,St.callbackPriority!==e){if(_e!=null&&bc(_e),e===1)St.tag===0?ig(Fk.bind(null,St)):hg(Fk.bind(null,St)),Jf(function(){(K$1&6)===0&&jg()}),_e=null;else{switch(Dc(tn)){case 1:_e=fc;break;case 4:_e=gc;break;case 16:_e=hc;break;case 536870912:_e=jc;break;default:_e=hc}_e=Gk(_e,Hk.bind(null,St))}St.callbackPriority=e,St.callbackNode=_e}}function Hk(St,e){if(Bk=-1,Ck=0,(K$1&6)!==0)throw Error(p$2(327));var _e=St.callbackNode;if(Ik()&&St.callbackNode!==_e)return null;var tn=uc(St,St===R$1?Z$1:0);if(tn===0)return null;if((tn&30)!==0||(tn&St.expiredLanes)!==0||e)e=Jk(St,tn);else{e=tn;var un=K$1;K$1|=2;var gn=Kk();(R$1!==St||Z$1!==e)&&(vk=null,Hj=B$1()+500,Lk(St,e));do try{Mk();break}catch(fn){Nk(St,fn)}while(1);Qg(),nk.current=gn,K$1=un,Y$1!==null?e=0:(R$1=null,Z$1=0,e=T$1)}if(e!==0){if(e===2&&(un=xc(St),un!==0&&(tn=un,e=Ok(St,un))),e===1)throw _e=qk,Lk(St,0),Dk(St,tn),Ek(St,B$1()),_e;if(e===6)Dk(St,tn);else{if(un=St.current.alternate,(tn&30)===0&&!Pk(un)&&(e=Jk(St,tn),e===2&&(gn=xc(St),gn!==0&&(tn=gn,e=Ok(St,gn))),e===1))throw _e=qk,Lk(St,0),Dk(St,tn),Ek(St,B$1()),_e;switch(St.finishedWork=un,St.finishedLanes=tn,e){case 0:case 1:throw Error(p$2(345));case 2:Qk(St,uk,vk);break;case 3:if(Dk(St,tn),(tn&130023424)===tn&&(e=gk+500-B$1(),10<e)){if(uc(St,0)!==0)break;if(un=St.suspendedLanes,(un&tn)!==tn){L$1(),St.pingedLanes|=St.suspendedLanes&un;break}St.timeoutHandle=Ff(Qk.bind(null,St,uk,vk),e);break}Qk(St,uk,vk);break;case 4:if(Dk(St,tn),(tn&4194240)===tn)break;for(e=St.eventTimes,un=-1;0<tn;){var vn=31-oc(tn);gn=1<<vn,vn=e[vn],vn>un&&(un=vn),tn&=~gn}if(tn=un,tn=B$1()-tn,tn=(120>tn?120:480>tn?480:1080>tn?1080:1920>tn?1920:3e3>tn?3e3:4320>tn?4320:1960*mk(tn/1960))-tn,10<tn){St.timeoutHandle=Ff(Qk.bind(null,St,uk,vk),tn);break}Qk(St,uk,vk);break;case 5:Qk(St,uk,vk);break;default:throw Error(p$2(329))}}}return Ek(St,B$1()),St.callbackNode===_e?Hk.bind(null,St):null}function Ok(St,e){var _e=tk;return St.current.memoizedState.isDehydrated&&(Lk(St,e).flags|=256),St=Jk(St,e),St!==2&&(e=uk,uk=_e,e!==null&&Gj(e)),St}function Gj(St){uk===null?uk=St:uk.push.apply(uk,St)}function Pk(St){for(var e=St;;){if(e.flags&16384){var _e=e.updateQueue;if(_e!==null&&(_e=_e.stores,_e!==null))for(var tn=0;tn<_e.length;tn++){var un=_e[tn],gn=un.getSnapshot;un=un.value;try{if(!He(gn(),un))return!1}catch{return!1}}}if(_e=e.child,e.subtreeFlags&16384&&_e!==null)_e.return=e,e=_e;else{if(e===St)break;for(;e.sibling===null;){if(e.return===null||e.return===St)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Dk(St,e){for(e&=~sk,e&=~rk,St.suspendedLanes|=e,St.pingedLanes&=~e,St=St.expirationTimes;0<e;){var _e=31-oc(e),tn=1<<_e;St[_e]=-1,e&=~tn}}function Fk(St){if((K$1&6)!==0)throw Error(p$2(327));Ik();var e=uc(St,0);if((e&1)===0)return Ek(St,B$1()),null;var _e=Jk(St,e);if(St.tag!==0&&_e===2){var tn=xc(St);tn!==0&&(e=tn,_e=Ok(St,tn))}if(_e===1)throw _e=qk,Lk(St,0),Dk(St,e),Ek(St,B$1()),_e;if(_e===6)throw Error(p$2(345));return St.finishedWork=St.current.alternate,St.finishedLanes=e,Qk(St,uk,vk),Ek(St,B$1()),null}function Rk(St,e){var _e=K$1;K$1|=1;try{return St(e)}finally{K$1=_e,K$1===0&&(Hj=B$1()+500,fg&&jg())}}function Sk(St){xk!==null&&xk.tag===0&&(K$1&6)===0&&Ik();var e=K$1;K$1|=1;var _e=pk.transition,tn=C$1;try{if(pk.transition=null,C$1=1,St)return St()}finally{C$1=tn,pk.transition=_e,K$1=e,(K$1&6)===0&&jg()}}function Ij(){gj=fj.current,E$1(fj)}function Lk(St,e){St.finishedWork=null,St.finishedLanes=0;var _e=St.timeoutHandle;if(_e!==-1&&(St.timeoutHandle=-1,Gf(_e)),Y$1!==null)for(_e=Y$1.return;_e!==null;){var tn=_e;switch(wg(tn),tn.tag){case 1:tn=tn.type.childContextTypes,tn!=null&&$f();break;case 3:Jh(),E$1(Wf),E$1(H$1),Oh();break;case 5:Lh(tn);break;case 4:Jh();break;case 13:E$1(M$1);break;case 19:E$1(M$1);break;case 10:Rg(tn.type._context);break;case 22:case 23:Ij()}_e=_e.return}if(R$1=St,Y$1=St=wh(St.current,null),Z$1=gj=e,T$1=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(e=0;e<Wg.length;e++)if(_e=Wg[e],tn=_e.interleaved,tn!==null){_e.interleaved=null;var un=tn.next,gn=_e.pending;if(gn!==null){var vn=gn.next;gn.next=un,tn.next=vn}_e.pending=tn}Wg=null}return St}function Nk(St,e){do{var _e=Y$1;try{if(Qg(),Ph.current=ai,Sh){for(var tn=N$1.memoizedState;tn!==null;){var un=tn.queue;un!==null&&(un.pending=null),tn=tn.next}Sh=!1}if(Rh=0,P$1=O$1=N$1=null,Th=!1,Uh=0,ok.current=null,_e===null||_e.return===null){T$1=1,qk=e,Y$1=null;break}t:{var gn=St,vn=_e.return,fn=_e,en=e;if(e=Z$1,fn.flags|=32768,en!==null&&typeof en=="object"&&typeof en.then=="function"){var on=en,dn=fn,rn=dn.tag;if((dn.mode&1)===0&&(rn===0||rn===11||rn===15)){var an=dn.alternate;an?(dn.updateQueue=an.updateQueue,dn.memoizedState=an.memoizedState,dn.lanes=an.lanes):(dn.updateQueue=null,dn.memoizedState=null)}var nn=Vi(vn);if(nn!==null){nn.flags&=-257,Wi(nn,vn,fn,gn,e),nn.mode&1&&Ti(gn,on,e),e=nn,en=on;var cn=e.updateQueue;if(cn===null){var hn=new Set;hn.add(en),e.updateQueue=hn}else cn.add(en);break t}else{if((e&1)===0){Ti(gn,on,e),uj();break t}en=Error(p$2(426))}}else if(I$1&&fn.mode&1){var sn=Vi(vn);if(sn!==null){(sn.flags&65536)===0&&(sn.flags|=256),Wi(sn,vn,fn,gn,e),Jg(Ki(en,fn));break t}}gn=en=Ki(en,fn),T$1!==4&&(T$1=2),tk===null?tk=[gn]:tk.push(gn),gn=vn;do{switch(gn.tag){case 3:gn.flags|=65536,e&=-e,gn.lanes|=e;var pn=Oi(gn,en,e);fh(gn,pn);break t;case 1:fn=en;var mn=gn.type,yn=gn.stateNode;if((gn.flags&128)===0&&(typeof mn.getDerivedStateFromError=="function"||yn!==null&&typeof yn.componentDidCatch=="function"&&(Si===null||!Si.has(yn)))){gn.flags|=65536,e&=-e,gn.lanes|=e;var _n=Ri(gn,fn,e);fh(gn,_n);break t}}gn=gn.return}while(gn!==null)}Tk(_e)}catch(xn){e=xn,Y$1===_e&&_e!==null&&(Y$1=_e=_e.return);continue}break}while(1)}function Kk(){var St=nk.current;return nk.current=ai,St===null?ai:St}function uj(){(T$1===0||T$1===3||T$1===2)&&(T$1=4),R$1===null||(hh&268435455)===0&&(rk&268435455)===0||Dk(R$1,Z$1)}function Jk(St,e){var _e=K$1;K$1|=2;var tn=Kk();(R$1!==St||Z$1!==e)&&(vk=null,Lk(St,e));do try{Uk();break}catch(un){Nk(St,un)}while(1);if(Qg(),K$1=_e,nk.current=tn,Y$1!==null)throw Error(p$2(261));return R$1=null,Z$1=0,T$1}function Uk(){for(;Y$1!==null;)Vk(Y$1)}function Mk(){for(;Y$1!==null&&!cc();)Vk(Y$1)}function Vk(St){var e=Wk(St.alternate,St,gj);St.memoizedProps=St.pendingProps,e===null?Tk(St):Y$1=e,ok.current=null}function Tk(St){var e=St;do{var _e=e.alternate;if(St=e.return,(e.flags&32768)===0){if(_e=Fj(_e,e,gj),_e!==null){Y$1=_e;return}}else{if(_e=Jj(_e,e),_e!==null){_e.flags&=32767,Y$1=_e;return}if(St!==null)St.flags|=32768,St.subtreeFlags=0,St.deletions=null;else{T$1=6,Y$1=null;return}}if(e=e.sibling,e!==null){Y$1=e;return}Y$1=e=St}while(e!==null);T$1===0&&(T$1=5)}function Qk(St,e,_e){var tn=C$1,un=pk.transition;try{pk.transition=null,C$1=1,Xk(St,e,_e,tn)}finally{pk.transition=un,C$1=tn}return null}function Xk(St,e,_e,tn){do Ik();while(xk!==null);if((K$1&6)!==0)throw Error(p$2(327));_e=St.finishedWork;var un=St.finishedLanes;if(_e===null)return null;if(St.finishedWork=null,St.finishedLanes=0,_e===St.current)throw Error(p$2(177));St.callbackNode=null,St.callbackPriority=0;var gn=_e.lanes|_e.childLanes;if(Bc(St,gn),St===R$1&&(Y$1=R$1=null,Z$1=0),(_e.subtreeFlags&2064)===0&&(_e.flags&2064)===0||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),gn=(_e.flags&15990)!==0,(_e.subtreeFlags&15990)!==0||gn){gn=pk.transition,pk.transition=null;var vn=C$1;C$1=1;var fn=K$1;K$1|=4,ok.current=null,Pj(St,_e),ek(_e,St),Oe(Df),dd=!!Cf,Df=Cf=null,St.current=_e,ik(_e),dc(),K$1=fn,C$1=vn,pk.transition=gn}else St.current=_e;if(wk&&(wk=!1,xk=St,yk=un),gn=St.pendingLanes,gn===0&&(Si=null),mc(_e.stateNode),Ek(St,B$1()),e!==null)for(tn=St.onRecoverableError,_e=0;_e<e.length;_e++)un=e[_e],tn(un.value,{componentStack:un.stack,digest:un.digest});if(Pi)throw Pi=!1,St=Qi,Qi=null,St;return(yk&1)!==0&&St.tag!==0&&Ik(),gn=St.pendingLanes,(gn&1)!==0?St===Ak?zk++:(zk=0,Ak=St):zk=0,jg(),null}function Ik(){if(xk!==null){var St=Dc(yk),e=pk.transition,_e=C$1;try{if(pk.transition=null,C$1=16>St?16:St,xk===null)var tn=!1;else{if(St=xk,xk=null,yk=0,(K$1&6)!==0)throw Error(p$2(331));var un=K$1;for(K$1|=4,V$1=St.current;V$1!==null;){var gn=V$1,vn=gn.child;if((V$1.flags&16)!==0){var fn=gn.deletions;if(fn!==null){for(var en=0;en<fn.length;en++){var on=fn[en];for(V$1=on;V$1!==null;){var dn=V$1;switch(dn.tag){case 0:case 11:case 15:Qj(8,dn,gn)}var rn=dn.child;if(rn!==null)rn.return=dn,V$1=rn;else for(;V$1!==null;){dn=V$1;var an=dn.sibling,nn=dn.return;if(Tj(dn),dn===on){V$1=null;break}if(an!==null){an.return=nn,V$1=an;break}V$1=nn}}}var cn=gn.alternate;if(cn!==null){var hn=cn.child;if(hn!==null){cn.child=null;do{var sn=hn.sibling;hn.sibling=null,hn=sn}while(hn!==null)}}V$1=gn}}if((gn.subtreeFlags&2064)!==0&&vn!==null)vn.return=gn,V$1=vn;else t:for(;V$1!==null;){if(gn=V$1,(gn.flags&2048)!==0)switch(gn.tag){case 0:case 11:case 15:Qj(9,gn,gn.return)}var pn=gn.sibling;if(pn!==null){pn.return=gn.return,V$1=pn;break t}V$1=gn.return}}var mn=St.current;for(V$1=mn;V$1!==null;){vn=V$1;var yn=vn.child;if((vn.subtreeFlags&2064)!==0&&yn!==null)yn.return=vn,V$1=yn;else t:for(vn=mn;V$1!==null;){if(fn=V$1,(fn.flags&2048)!==0)try{switch(fn.tag){case 0:case 11:case 15:Rj(9,fn)}}catch(xn){W$1(fn,fn.return,xn)}if(fn===vn){V$1=null;break t}var _n=fn.sibling;if(_n!==null){_n.return=fn.return,V$1=_n;break t}V$1=fn.return}}if(K$1=un,jg(),lc$1&&typeof lc$1.onPostCommitFiberRoot=="function")try{lc$1.onPostCommitFiberRoot(kc,St)}catch{}tn=!0}return tn}finally{C$1=_e,pk.transition=e}}return!1}function Yk(St,e,_e){e=Ki(_e,e),e=Oi(St,e,1),St=dh(St,e,1),e=L$1(),St!==null&&(Ac(St,1,e),Ek(St,e))}function W$1(St,e,_e){if(St.tag===3)Yk(St,St,_e);else for(;e!==null;){if(e.tag===3){Yk(e,St,_e);break}else if(e.tag===1){var tn=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof tn.componentDidCatch=="function"&&(Si===null||!Si.has(tn))){St=Ki(_e,St),St=Ri(e,St,1),e=dh(e,St,1),St=L$1(),e!==null&&(Ac(e,1,St),Ek(e,St));break}}e=e.return}}function Ui(St,e,_e){var tn=St.pingCache;tn!==null&&tn.delete(e),e=L$1(),St.pingedLanes|=St.suspendedLanes&_e,R$1===St&&(Z$1&_e)===_e&&(T$1===4||T$1===3&&(Z$1&130023424)===Z$1&&500>B$1()-gk?Lk(St,0):sk|=_e),Ek(St,e)}function Zk(St,e){e===0&&((St.mode&1)===0?e=1:(e=sc,sc<<=1,(sc&130023424)===0&&(sc=4194304)));var _e=L$1();St=Zg(St,e),St!==null&&(Ac(St,e,_e),Ek(St,_e))}function vj(St){var e=St.memoizedState,_e=0;e!==null&&(_e=e.retryLane),Zk(St,_e)}function ck(St,e){var _e=0;switch(St.tag){case 13:var tn=St.stateNode,un=St.memoizedState;un!==null&&(_e=un.retryLane);break;case 19:tn=St.stateNode;break;default:throw Error(p$2(314))}tn!==null&&tn.delete(e),Zk(St,_e)}var Wk;Wk=function(St,e,_e){if(St!==null)if(St.memoizedProps!==e.pendingProps||Wf.current)Ug=!0;else{if((St.lanes&_e)===0&&(e.flags&128)===0)return Ug=!1,zj(St,e,_e);Ug=(St.flags&131072)!==0}else Ug=!1,I$1&&(e.flags&1048576)!==0&&ug(e,ng,e.index);switch(e.lanes=0,e.tag){case 2:var tn=e.type;jj(St,e),St=e.pendingProps;var un=Yf(e,H$1.current);Tg(e,_e),un=Xh(null,e,tn,St,un,_e);var gn=bi();return e.flags|=1,typeof un=="object"&&un!==null&&typeof un.render=="function"&&un.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zf(tn)?(gn=!0,cg(e)):gn=!1,e.memoizedState=un.state!==null&&un.state!==void 0?un.state:null,ah(e),un.updater=nh,e.stateNode=un,un._reactInternals=e,rh(e,tn,St,_e),e=kj(null,e,tn,!0,gn,_e)):(e.tag=0,I$1&&gn&&vg(e),Yi(null,e,un,_e),e=e.child),e;case 16:tn=e.elementType;t:{switch(jj(St,e),St=e.pendingProps,un=tn._init,tn=un(tn._payload),e.type=tn,un=e.tag=$k(tn),St=Lg(tn,St),un){case 0:e=dj(null,e,tn,St,_e);break t;case 1:e=ij(null,e,tn,St,_e);break t;case 11:e=Zi(null,e,tn,St,_e);break t;case 14:e=aj(null,e,tn,Lg(tn.type,St),_e);break t}throw Error(p$2(306,tn,""))}return e;case 0:return tn=e.type,un=e.pendingProps,un=e.elementType===tn?un:Lg(tn,un),dj(St,e,tn,un,_e);case 1:return tn=e.type,un=e.pendingProps,un=e.elementType===tn?un:Lg(tn,un),ij(St,e,tn,un,_e);case 3:t:{if(lj(e),St===null)throw Error(p$2(387));tn=e.pendingProps,gn=e.memoizedState,un=gn.element,bh(St,e),gh(e,tn,null,_e);var vn=e.memoizedState;if(tn=vn.element,gn.isDehydrated)if(gn={element:tn,isDehydrated:!1,cache:vn.cache,pendingSuspenseBoundaries:vn.pendingSuspenseBoundaries,transitions:vn.transitions},e.updateQueue.baseState=gn,e.memoizedState=gn,e.flags&256){un=Ki(Error(p$2(423)),e),e=mj(St,e,tn,_e,un);break t}else if(tn!==un){un=Ki(Error(p$2(424)),e),e=mj(St,e,tn,_e,un);break t}else for(yg=Lf(e.stateNode.containerInfo.firstChild),xg=e,I$1=!0,zg=null,_e=Ch(e,null,tn,_e),e.child=_e;_e;)_e.flags=_e.flags&-3|4096,_e=_e.sibling;else{if(Ig(),tn===un){e=$i(St,e,_e);break t}Yi(St,e,tn,_e)}e=e.child}return e;case 5:return Kh(e),St===null&&Eg(e),tn=e.type,un=e.pendingProps,gn=St!==null?St.memoizedProps:null,vn=un.children,Ef(tn,un)?vn=null:gn!==null&&Ef(tn,gn)&&(e.flags|=32),hj(St,e),Yi(St,e,vn,_e),e.child;case 6:return St===null&&Eg(e),null;case 13:return pj(St,e,_e);case 4:return Ih(e,e.stateNode.containerInfo),tn=e.pendingProps,St===null?e.child=Bh(e,null,tn,_e):Yi(St,e,tn,_e),e.child;case 11:return tn=e.type,un=e.pendingProps,un=e.elementType===tn?un:Lg(tn,un),Zi(St,e,tn,un,_e);case 7:return Yi(St,e,e.pendingProps,_e),e.child;case 8:return Yi(St,e,e.pendingProps.children,_e),e.child;case 12:return Yi(St,e,e.pendingProps.children,_e),e.child;case 10:t:{if(tn=e.type._context,un=e.pendingProps,gn=e.memoizedProps,vn=un.value,G$1(Mg,tn._currentValue),tn._currentValue=vn,gn!==null)if(He(gn.value,vn)){if(gn.children===un.children&&!Wf.current){e=$i(St,e,_e);break t}}else for(gn=e.child,gn!==null&&(gn.return=e);gn!==null;){var fn=gn.dependencies;if(fn!==null){vn=gn.child;for(var en=fn.firstContext;en!==null;){if(en.context===tn){if(gn.tag===1){en=ch(-1,_e&-_e),en.tag=2;var on=gn.updateQueue;if(on!==null){on=on.shared;var dn=on.pending;dn===null?en.next=en:(en.next=dn.next,dn.next=en),on.pending=en}}gn.lanes|=_e,en=gn.alternate,en!==null&&(en.lanes|=_e),Sg(gn.return,_e,e),fn.lanes|=_e;break}en=en.next}}else if(gn.tag===10)vn=gn.type===e.type?null:gn.child;else if(gn.tag===18){if(vn=gn.return,vn===null)throw Error(p$2(341));vn.lanes|=_e,fn=vn.alternate,fn!==null&&(fn.lanes|=_e),Sg(vn,_e,e),vn=gn.sibling}else vn=gn.child;if(vn!==null)vn.return=gn;else for(vn=gn;vn!==null;){if(vn===e){vn=null;break}if(gn=vn.sibling,gn!==null){gn.return=vn.return,vn=gn;break}vn=vn.return}gn=vn}Yi(St,e,un.children,_e),e=e.child}return e;case 9:return un=e.type,tn=e.pendingProps.children,Tg(e,_e),un=Vg(un),tn=tn(un),e.flags|=1,Yi(St,e,tn,_e),e.child;case 14:return tn=e.type,un=Lg(tn,e.pendingProps),un=Lg(tn.type,un),aj(St,e,tn,un,_e);case 15:return cj(St,e,e.type,e.pendingProps,_e);case 17:return tn=e.type,un=e.pendingProps,un=e.elementType===tn?un:Lg(tn,un),jj(St,e),e.tag=1,Zf(tn)?(St=!0,cg(e)):St=!1,Tg(e,_e),ph(e,tn,un),rh(e,tn,un,_e),kj(null,e,tn,!0,St,_e);case 19:return yj(St,e,_e);case 22:return ej(St,e,_e)}throw Error(p$2(156,e.tag))};function Gk(St,e){return ac(St,e)}function al(St,e,_e,tn){this.tag=St,this.key=_e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=tn,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(St,e,_e,tn){return new al(St,e,_e,tn)}function bj(St){return St=St.prototype,!(!St||!St.isReactComponent)}function $k(St){if(typeof St=="function")return bj(St)?1:0;if(St!=null){if(St=St.$$typeof,St===Da)return 11;if(St===Ga)return 14}return 2}function wh(St,e){var _e=St.alternate;return _e===null?(_e=Bg(St.tag,e,St.key,St.mode),_e.elementType=St.elementType,_e.type=St.type,_e.stateNode=St.stateNode,_e.alternate=St,St.alternate=_e):(_e.pendingProps=e,_e.type=St.type,_e.flags=0,_e.subtreeFlags=0,_e.deletions=null),_e.flags=St.flags&14680064,_e.childLanes=St.childLanes,_e.lanes=St.lanes,_e.child=St.child,_e.memoizedProps=St.memoizedProps,_e.memoizedState=St.memoizedState,_e.updateQueue=St.updateQueue,e=St.dependencies,_e.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},_e.sibling=St.sibling,_e.index=St.index,_e.ref=St.ref,_e}function yh(St,e,_e,tn,un,gn){var vn=2;if(tn=St,typeof St=="function")bj(St)&&(vn=1);else if(typeof St=="string")vn=5;else t:switch(St){case ya:return Ah(_e.children,un,gn,e);case za:vn=8,un|=8;break;case Aa:return St=Bg(12,_e,e,un|2),St.elementType=Aa,St.lanes=gn,St;case Ea:return St=Bg(13,_e,e,un),St.elementType=Ea,St.lanes=gn,St;case Fa:return St=Bg(19,_e,e,un),St.elementType=Fa,St.lanes=gn,St;case Ia:return qj(_e,un,gn,e);default:if(typeof St=="object"&&St!==null)switch(St.$$typeof){case Ba:vn=10;break t;case Ca:vn=9;break t;case Da:vn=11;break t;case Ga:vn=14;break t;case Ha:vn=16,tn=null;break t}throw Error(p$2(130,St==null?St:typeof St,""))}return e=Bg(vn,_e,e,un),e.elementType=St,e.type=tn,e.lanes=gn,e}function Ah(St,e,_e,tn){return St=Bg(7,St,tn,e),St.lanes=_e,St}function qj(St,e,_e,tn){return St=Bg(22,St,tn,e),St.elementType=Ia,St.lanes=_e,St.stateNode={isHidden:!1},St}function xh(St,e,_e){return St=Bg(6,St,null,e),St.lanes=_e,St}function zh(St,e,_e){return e=Bg(4,St.children!==null?St.children:[],St.key,e),e.lanes=_e,e.stateNode={containerInfo:St.containerInfo,pendingChildren:null,implementation:St.implementation},e}function bl(St,e,_e,tn,un){this.tag=e,this.containerInfo=St,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=tn,this.onRecoverableError=un,this.mutableSourceEagerHydrationData=null}function cl(St,e,_e,tn,un,gn,vn,fn,en){return St=new bl(St,e,_e,fn,en),e===1?(e=1,gn===!0&&(e|=8)):e=0,gn=Bg(3,null,null,e),St.current=gn,gn.stateNode=St,gn.memoizedState={element:tn,isDehydrated:_e,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(gn),St}function dl(St,e,_e){var tn=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:tn==null?null:""+tn,children:St,containerInfo:e,implementation:_e}}function el(St){if(!St)return Vf;St=St._reactInternals;t:{if(Vb(St)!==St||St.tag!==1)throw Error(p$2(170));var e=St;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Zf(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(e!==null);throw Error(p$2(171))}if(St.tag===1){var _e=St.type;if(Zf(_e))return bg(St,_e,e)}return e}function fl$1(St,e,_e,tn,un,gn,vn,fn,en){return St=cl(_e,tn,!0,St,un,gn,vn,fn,en),St.context=el(null),_e=St.current,tn=L$1(),un=lh(_e),gn=ch(tn,un),gn.callback=e!=null?e:null,dh(_e,gn,un),St.current.lanes=un,Ac(St,un,tn),Ek(St,tn),St}function gl(St,e,_e,tn){var un=e.current,gn=L$1(),vn=lh(un);return _e=el(_e),e.context===null?e.context=_e:e.pendingContext=_e,e=ch(gn,vn),e.payload={element:St},tn=tn===void 0?null:tn,tn!==null&&(e.callback=tn),St=dh(un,e,vn),St!==null&&(mh(St,un,vn,gn),eh(St,un,vn)),vn}function hl(St){if(St=St.current,!St.child)return null;switch(St.child.tag){case 5:return St.child.stateNode;default:return St.child.stateNode}}function il(St,e){if(St=St.memoizedState,St!==null&&St.dehydrated!==null){var _e=St.retryLane;St.retryLane=_e!==0&&_e<e?_e:e}}function jl(St,e){il(St,e),(St=St.alternate)&&il(St,e)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(St){console.error(St)};function ml(St){this._internalRoot=St}nl.prototype.render=ml.prototype.render=function(St){var e=this._internalRoot;if(e===null)throw Error(p$2(409));gl(St,e,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var St=this._internalRoot;if(St!==null){this._internalRoot=null;var e=St.containerInfo;Sk(function(){gl(null,St,null,null)}),e[uf]=null}};function nl(St){this._internalRoot=St}nl.prototype.unstable_scheduleHydration=function(St){if(St){var e=Hc();St={blockedOn:null,target:St,priority:e};for(var _e=0;_e<Qc.length&&e!==0&&e<Qc[_e].priority;_e++);Qc.splice(_e,0,St),_e===0&&Vc(St)}};function ol(St){return!(!St||St.nodeType!==1&&St.nodeType!==9&&St.nodeType!==11)}function pl(St){return!(!St||St.nodeType!==1&&St.nodeType!==9&&St.nodeType!==11&&(St.nodeType!==8||St.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(St,e,_e,tn,un){if(un){if(typeof tn=="function"){var gn=tn;tn=function(){var on=hl(vn);gn.call(on)}}var vn=fl$1(e,tn,St,0,null,!1,!1,"",ql);return St._reactRootContainer=vn,St[uf]=vn.current,sf(St.nodeType===8?St.parentNode:St),Sk(),vn}for(;un=St.lastChild;)St.removeChild(un);if(typeof tn=="function"){var fn=tn;tn=function(){var on=hl(en);fn.call(on)}}var en=cl(St,0,!1,null,null,!1,!1,"",ql);return St._reactRootContainer=en,St[uf]=en.current,sf(St.nodeType===8?St.parentNode:St),Sk(function(){gl(e,en,_e,tn)}),en}function sl(St,e,_e,tn,un){var gn=_e._reactRootContainer;if(gn){var vn=gn;if(typeof un=="function"){var fn=un;un=function(){var en=hl(vn);fn.call(en)}}gl(e,vn,St,un)}else vn=rl(_e,e,St,un,tn);return hl(vn)}Ec=function(St){switch(St.tag){case 3:var e=St.stateNode;if(e.current.memoizedState.isDehydrated){var _e=tc(e.pendingLanes);_e!==0&&(Cc(e,_e|1),Ek(e,B$1()),(K$1&6)===0&&(Hj=B$1()+500,jg()))}break;case 13:Sk(function(){var tn=Zg(St,1);if(tn!==null){var un=L$1();mh(tn,St,1,un)}}),jl(St,1)}};Fc=function(St){if(St.tag===13){var e=Zg(St,134217728);if(e!==null){var _e=L$1();mh(e,St,134217728,_e)}jl(St,134217728)}};Gc=function(St){if(St.tag===13){var e=lh(St),_e=Zg(St,e);if(_e!==null){var tn=L$1();mh(_e,St,e,tn)}jl(St,e)}};Hc=function(){return C$1};Ic=function(St,e){var _e=C$1;try{return C$1=St,e()}finally{C$1=_e}};yb=function(St,e,_e){switch(e){case"input":if(bb(St,_e),e=_e.name,_e.type==="radio"&&e!=null){for(_e=St;_e.parentNode;)_e=_e.parentNode;for(_e=_e.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<_e.length;e++){var tn=_e[e];if(tn!==St&&tn.form===St.form){var un=Db(tn);if(!un)throw Error(p$2(90));Wa(tn),bb(tn,un)}}}break;case"textarea":ib(St,_e);break;case"select":e=_e.value,e!=null&&fb(St,!!_e.multiple,e,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(St){return St=Zb(St),St===null?null:St.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc$1=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(St,e){var _e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(e))throw Error(p$2(200));return dl(St,e,null,_e)};reactDom_production_min.createRoot=function(St,e){if(!ol(St))throw Error(p$2(299));var _e=!1,tn="",un=ll;return e!=null&&(e.unstable_strictMode===!0&&(_e=!0),e.identifierPrefix!==void 0&&(tn=e.identifierPrefix),e.onRecoverableError!==void 0&&(un=e.onRecoverableError)),e=cl(St,1,!1,null,null,_e,!1,tn,un),St[uf]=e.current,sf(St.nodeType===8?St.parentNode:St),new ml(e)};reactDom_production_min.findDOMNode=function(St){if(St==null)return null;if(St.nodeType===1)return St;var e=St._reactInternals;if(e===void 0)throw typeof St.render=="function"?Error(p$2(188)):(St=Object.keys(St).join(","),Error(p$2(268,St)));return St=Zb(e),St=St===null?null:St.stateNode,St};reactDom_production_min.flushSync=function(St){return Sk(St)};reactDom_production_min.hydrate=function(St,e,_e){if(!pl(e))throw Error(p$2(200));return sl(null,St,e,!0,_e)};reactDom_production_min.hydrateRoot=function(St,e,_e){if(!ol(St))throw Error(p$2(405));var tn=_e!=null&&_e.hydratedSources||null,un=!1,gn="",vn=ll;if(_e!=null&&(_e.unstable_strictMode===!0&&(un=!0),_e.identifierPrefix!==void 0&&(gn=_e.identifierPrefix),_e.onRecoverableError!==void 0&&(vn=_e.onRecoverableError)),e=fl$1(e,null,St,1,_e!=null?_e:null,un,!1,gn,vn),St[uf]=e.current,sf(St),tn)for(St=0;St<tn.length;St++)_e=tn[St],un=_e._getVersion,un=un(_e._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[_e,un]:e.mutableSourceEagerHydrationData.push(_e,un);return new nl(e)};reactDom_production_min.render=function(St,e,_e){if(!pl(e))throw Error(p$2(200));return sl(null,St,e,!1,_e)};reactDom_production_min.unmountComponentAtNode=function(St){if(!pl(St))throw Error(p$2(40));return St._reactRootContainer?(Sk(function(){sl(null,null,St,!1,function(){St._reactRootContainer=null,St[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(St,e,_e,tn){if(!pl(_e))throw Error(p$2(200));if(St==null||St._reactInternals===void 0)throw Error(p$2(38));return sl(St,e,_e,!1,tn)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";(function(St){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(_e){console.error(_e)}}e(),St.exports=reactDom_production_min})(reactDom);var m$2=reactDom.exports;client.createRoot=m$2.createRoot,client.hydrateRoot=m$2.hydrateRoot;const SUSPENSE_PROMISE=Symbol(),isSuspensePromise=St=>!!St[SUSPENSE_PROMISE],isSuspensePromiseAlreadyCancelled=St=>!St[SUSPENSE_PROMISE].c,cancelSuspensePromise=St=>{var e;const{b:_e,c:tn}=St[SUSPENSE_PROMISE];tn&&(tn(),(e=promiseAbortMap.get(_e))==null||e())},isEqualSuspensePromise=(St,e)=>{const _e=St[SUSPENSE_PROMISE].o,tn=e[SUSPENSE_PROMISE].o;return _e===tn||St===tn||isSuspensePromise(_e)&&isEqualSuspensePromise(_e,e)},createSuspensePromise=(St,e)=>{const _e={b:St,o:e,c:null},tn=new Promise(un=>{_e.c=()=>{_e.c=null,un()},e.finally(_e.c)});return tn[SUSPENSE_PROMISE]=_e,tn},promiseAbortMap=new WeakMap,hasInitialValue=St=>"init"in St,READ_ATOM="r",WRITE_ATOM="w",COMMIT_ATOM="c",SUBSCRIBE_ATOM="s",RESTORE_ATOMS="h",DEV_SUBSCRIBE_STATE="n",DEV_GET_MOUNTED_ATOMS="l",DEV_GET_ATOM_STATE="a",DEV_GET_MOUNTED="m",createStore=St=>{const e=new WeakMap,_e=new WeakMap,tn=new Map;let un,gn;if(({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&(un=new Set,gn=new Set),St)for(const[Xn,Yn]of St){const Tn={v:Yn,r:0,y:!0,d:new Map};({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&(Object.freeze(Tn),hasInitialValue(Xn)||console.warn("Found initial value for derived atom which can cause unexpected behavior",Xn)),e.set(Xn,Tn)}const vn=new WeakMap,fn=(Xn,Yn,Tn)=>{let An=vn.get(Yn);An||(An=new Map,vn.set(Yn,An)),Tn.then(()=>{An.get(Xn)===Tn&&(An.delete(Xn),An.size||vn.delete(Yn))}),An.set(Xn,Tn)},en=Xn=>{const Yn=new Set,Tn=vn.get(Xn);return Tn&&(vn.delete(Xn),Tn.forEach((An,wn)=>{cancelSuspensePromise(An),Yn.add(wn)})),Yn},on=new WeakMap,dn=Xn=>{let Yn=on.get(Xn);return Yn||(Yn=new Map,on.set(Xn,Yn)),Yn},rn=(Xn,Yn)=>{if(Xn){const Tn=dn(Xn);let An=Tn.get(Yn);return An||(An=rn(Xn.p,Yn),An&&"p"in An&&isSuspensePromiseAlreadyCancelled(An.p)&&(An=void 0),An&&Tn.set(Yn,An)),An}return e.get(Yn)},an=(Xn,Yn,Tn)=>{if(({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&Object.freeze(Tn),Xn)dn(Xn).set(Yn,Tn);else{const An=e.get(Yn);e.set(Yn,Tn),tn.has(Yn)||tn.set(Yn,An)}},nn=(Xn,Yn=new Map,Tn)=>{if(!Tn)return Yn;const An=new Map;let wn=!1;return Tn.forEach(En=>{var Nn;const Fn=((Nn=rn(Xn,En))==null?void 0:Nn.r)||0;An.set(En,Fn),Yn.get(En)!==Fn&&(wn=!0)}),Yn.size===An.size&&!wn?Yn:An},cn=(Xn,Yn,Tn,An,wn)=>{const En=rn(Xn,Yn);if(En){if(wn&&(!("p"in En)||!isEqualSuspensePromise(En.p,wn)))return En;"p"in En&&cancelSuspensePromise(En.p)}const Nn={v:Tn,r:(En==null?void 0:En.r)||0,y:!0,d:nn(Xn,En==null?void 0:En.d,An)};let Fn=!(En!=null&&En.y);return!En||!("v"in En)||!Object.is(En.v,Tn)?(Fn=!0,++Nn.r,Nn.d.has(Yn)&&(Nn.d=new Map(Nn.d).set(Yn,Nn.r))):Nn.d!==En.d&&(Nn.d.size!==En.d.size||!Array.from(Nn.d.keys()).every(Un=>En.d.has(Un)))&&(Fn=!0,Promise.resolve().then(()=>{nr(Xn)})),En&&!Fn?En:(an(Xn,Yn,Nn),Nn)},hn=(Xn,Yn,Tn,An,wn)=>{const En=rn(Xn,Yn);if(En){if(wn&&(!("p"in En)||!isEqualSuspensePromise(En.p,wn)))return En;"p"in En&&cancelSuspensePromise(En.p)}const Nn={e:Tn,r:((En==null?void 0:En.r)||0)+1,y:!0,d:nn(Xn,En==null?void 0:En.d,An)};return an(Xn,Yn,Nn),Nn},sn=(Xn,Yn,Tn,An)=>{const wn=rn(Xn,Yn);if(wn&&"p"in wn){if(isEqualSuspensePromise(wn.p,Tn))return wn.y?wn:{...wn,y:!0};cancelSuspensePromise(wn.p)}fn(Xn,Yn,Tn);const En={p:Tn,r:((wn==null?void 0:wn.r)||0)+1,y:!0,d:nn(Xn,wn==null?void 0:wn.d,An)};return an(Xn,Yn,En),En},pn=(Xn,Yn,Tn,An)=>{if(Tn instanceof Promise){const wn=createSuspensePromise(Tn,Tn.then(En=>{cn(Xn,Yn,En,An,wn)}).catch(En=>{if(En instanceof Promise)return isSuspensePromise(En)?En.then(()=>{yn(Xn,Yn,!0)}):En;hn(Xn,Yn,En,An,wn)}));return sn(Xn,Yn,wn,An)}return cn(Xn,Yn,Tn,An)},mn=(Xn,Yn)=>{const Tn=rn(Xn,Yn);if(Tn){const An={...Tn,y:!1};an(Xn,Yn,An)}else({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&console.warn("[Bug] could not invalidate non existing atom",Yn)},yn=(Xn,Yn,Tn)=>{if(!Tn){const wn=rn(Xn,Yn);if(wn){if(wn.y&&"p"in wn&&!isSuspensePromiseAlreadyCancelled(wn.p))return wn;if(wn.d.forEach((En,Nn)=>{if(Nn!==Yn)if(!_e.has(Nn))yn(Xn,Nn);else{const Fn=rn(Xn,Nn);Fn&&!Fn.y&&yn(Xn,Nn)}}),Array.from(wn.d).every(([En,Nn])=>{const Fn=rn(Xn,En);return Fn&&!("p"in Fn)&&Fn.r===Nn}))return wn.y?wn:{...wn,y:!0}}}const An=new Set;try{const wn=Yn.read(En=>{An.add(En);const Nn=En===Yn?rn(Xn,En):yn(Xn,En);if(Nn){if("e"in Nn)throw Nn.e;if("p"in Nn)throw Nn.p;return Nn.v}if(hasInitialValue(En))return En.init;throw new Error("no atom init")});return pn(Xn,Yn,wn,An)}catch(wn){if(wn instanceof Promise){const En=createSuspensePromise(wn,wn);return sn(Xn,Yn,En,An)}return hn(Xn,Yn,wn,An)}},_n=(Xn,Yn)=>yn(Yn,Xn),xn=(Xn,Yn)=>{let Tn=_e.get(Yn);return Tn||(Tn=Hn(Xn,Yn)),Tn},Sn=(Xn,Yn)=>!Yn.l.size&&(!Yn.t.size||Yn.t.size===1&&Yn.t.has(Xn)),Pn=(Xn,Yn)=>{const Tn=_e.get(Yn);Tn&&Sn(Yn,Tn)&&Qn(Xn,Yn)},Ln=(Xn,Yn)=>{const Tn=_e.get(Yn);Tn==null||Tn.t.forEach(An=>{An!==Yn&&(mn(Xn,An),Ln(Xn,An))})},In=(Xn,Yn,Tn)=>{let An=!0;const wn=(Fn,Un)=>{const Gn=yn(Xn,Fn);if("e"in Gn)throw Gn.e;if("p"in Gn){if(Un!=null&&Un.unstable_promise)return Gn.p.then(()=>{const er=rn(Xn,Fn);return er&&"p"in er&&er.p===Gn.p?new Promise(On=>setTimeout(On)).then(()=>wn(Fn,Un)):wn(Fn,Un)});throw({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&console.info("Reading pending atom state in write operation. We throw a promise for now.",Fn),Gn.p}if("v"in Gn)return Gn.v;throw({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&console.warn("[Bug] no value found while reading atom in write operation. This is probably a bug.",Fn),new Error("no value found")},En=(Fn,Un)=>{let Gn;if(Fn===Yn){if(!hasInitialValue(Fn))throw new Error("atom not writable");en(Fn).forEach($n=>{$n!==Xn&&pn($n,Fn,Un)});const On=rn(Xn,Fn),Bn=pn(Xn,Fn,Un);On!==Bn&&Ln(Xn,Fn)}else Gn=In(Xn,Fn,Un);return An||nr(Xn),Gn},Nn=Yn.write(wn,En,Tn);return An=!1,Nn},Rn=(Xn,Yn,Tn)=>{const An=In(Tn,Xn,Yn);return nr(Tn),An},Mn=Xn=>!!Xn.write,Hn=(Xn,Yn,Tn)=>{const An={t:new Set(Tn&&[Tn]),l:new Set};if(_e.set(Yn,An),({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&gn.add(Yn),yn(void 0,Yn).d.forEach((En,Nn)=>{const Fn=_e.get(Nn);Fn?Fn.t.add(Yn):Nn!==Yn&&Hn(Xn,Nn,Yn)}),Mn(Yn)&&Yn.onMount){const En=Fn=>Rn(Yn,Fn,Xn),Nn=Yn.onMount(En);Xn=void 0,Nn&&(An.u=Nn)}return An},Qn=(Xn,Yn)=>{var Tn;const An=(Tn=_e.get(Yn))==null?void 0:Tn.u;An&&An(),_e.delete(Yn),({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&gn.delete(Yn);const wn=rn(Xn,Yn);wn?("p"in wn&&cancelSuspensePromise(wn.p),wn.d.forEach((En,Nn)=>{if(Nn!==Yn){const Fn=_e.get(Nn);Fn&&(Fn.t.delete(Yn),Sn(Nn,Fn)&&Qn(Xn,Nn))}})):({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&console.warn("[Bug] could not find atom state to unmount",Yn)},Kn=(Xn,Yn,Tn,An)=>{const wn=new Set(Tn.d.keys());An==null||An.forEach((En,Nn)=>{if(wn.has(Nn)){wn.delete(Nn);return}const Fn=_e.get(Nn);Fn&&(Fn.t.delete(Yn),Sn(Nn,Fn)&&Qn(Xn,Nn))}),wn.forEach(En=>{const Nn=_e.get(En);Nn?Nn.t.add(Yn):_e.has(Yn)&&Hn(Xn,En,Yn)})},nr=Xn=>{if(Xn){dn(Xn).forEach((Tn,An)=>{const wn=e.get(An);if(Tn!==wn){const En=_e.get(An);En==null||En.l.forEach(Nn=>Nn(Xn))}});return}for(;tn.size;){const Yn=Array.from(tn);tn.clear(),Yn.forEach(([Tn,An])=>{const wn=rn(void 0,Tn);if(wn&&wn.d!==(An==null?void 0:An.d)&&Kn(void 0,Tn,wn,An==null?void 0:An.d),An&&!An.y&&(wn==null?void 0:wn.y))return;const En=_e.get(Tn);En==null||En.l.forEach(Nn=>Nn())})}({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&un.forEach(Yn=>Yn())},Zn=Xn=>{dn(Xn).forEach((Tn,An)=>{const wn=e.get(An);(!wn||Tn.r>wn.r||Tn.y!==wn.y||Tn.r===wn.r&&Tn.d!==wn.d)&&(e.set(An,Tn),Tn.d!==(wn==null?void 0:wn.d)&&Kn(Xn,An,Tn,wn==null?void 0:wn.d))})},ir=(Xn,Yn)=>{Yn&&Zn(Yn),nr(void 0)},Jn=(Xn,Yn,Tn)=>{const wn=xn(Tn,Xn).l;return wn.add(Yn),()=>{wn.delete(Yn),Pn(Tn,Xn)}},Vn=(Xn,Yn)=>{for(const[Tn,An]of Xn)hasInitialValue(Tn)&&(pn(Yn,Tn,An),Ln(Yn,Tn));nr(Yn)};return({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"?{[READ_ATOM]:_n,[WRITE_ATOM]:Rn,[COMMIT_ATOM]:ir,[SUBSCRIBE_ATOM]:Jn,[RESTORE_ATOMS]:Vn,[DEV_SUBSCRIBE_STATE]:Xn=>(un.add(Xn),()=>{un.delete(Xn)}),[DEV_GET_MOUNTED_ATOMS]:()=>gn.values(),[DEV_GET_ATOM_STATE]:Xn=>e.get(Xn),[DEV_GET_MOUNTED]:Xn=>_e.get(Xn)}:{[READ_ATOM]:_n,[WRITE_ATOM]:Rn,[COMMIT_ATOM]:ir,[SUBSCRIBE_ATOM]:Jn,[RESTORE_ATOMS]:Vn}},createScopeContainer=(St,e)=>({s:e?e(St).SECRET_INTERNAL_store:createStore(St)}),ScopeContextMap=new Map,getScopeContext=St=>(ScopeContextMap.has(St)||ScopeContextMap.set(St,react.exports.createContext(createScopeContainer())),ScopeContextMap.get(St)),Provider=({children:St,initialValues:e,scope:_e,unstable_createStore:tn,unstable_enableVersionedWrite:un})=>{const[gn,vn]=react.exports.useState({});react.exports.useEffect(()=>{const on=fn.current;on.w&&(on.s[COMMIT_ATOM](null,gn),delete gn.p,on.v=gn)},[gn]);const fn=react.exports.useRef();if(!fn.current){const on=createScopeContainer(e,tn);if(un){let dn=0;on.w=rn=>{vn(an=>{const nn=dn?an:{p:an};return rn(nn),nn})},on.v=gn,on.r=rn=>{++dn,rn(),--dn}}fn.current=on}const en=getScopeContext(_e);return react.exports.createElement(en.Provider,{value:fn.current},St)};let keyCount=0;function atom(St,e){const _e=`atom${++keyCount}`,tn={toString:()=>_e};return typeof St=="function"?tn.read=St:(tn.init=St,tn.read=un=>un(tn),tn.write=(un,gn,vn)=>gn(tn,typeof vn=="function"?vn(un(tn)):vn)),e&&(tn.write=e),tn}function useAtomValue(St,e){const _e=getScopeContext(e),tn=react.exports.useContext(_e),{s:un,v:gn}=tn,vn=an=>{const nn=un[READ_ATOM](St,an);if(({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&!nn.y)throw new Error("should not be invalidated");if("e"in nn)throw nn.e;if("p"in nn)throw nn.p;if("v"in nn)return nn.v;throw new Error("no atom value")},[[fn,en,on],dn]=react.exports.useReducer((an,nn)=>{const cn=vn(nn);return Object.is(an[1],cn)&&an[2]===St?an:[nn,cn,St]},gn,an=>{const nn=vn(an);return[an,nn,St]});let rn=en;return on!==St&&(dn(fn),rn=vn(fn)),react.exports.useEffect(()=>{const{v:an}=tn;an&&un[COMMIT_ATOM](St,an);const nn=un[SUBSCRIBE_ATOM](St,dn,an);return dn(an),nn},[un,St,tn]),react.exports.useEffect(()=>{un[COMMIT_ATOM](St,fn)}),react.exports.useDebugValue(rn),rn}function useSetAtom(St,e){const _e=getScopeContext(e),{s:tn,w:un}=react.exports.useContext(_e);return react.exports.useCallback(vn=>{if(({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&!("write"in St))throw new Error("not writable atom");const fn=en=>tn[WRITE_ATOM](St,vn,en);return un?un(fn):fn()},[tn,un,St])}function useAtom(St,e){return"scope"in St&&(console.warn("atom.scope is deprecated. Please do useAtom(atom, scope) instead."),e=St.scope),[useAtomValue(St,e),useSetAtom(St,e)]}const messageBox=atom({isDisplay:!1,isMask:!1,dialogName:"",content:""}),dialogAtom=atom({isDisplay:!1,dialogName:"",props:{}}),signListAtom=atom([]),pdfAtom=atom(null),stepAtom=atom(1),stepDirectionAtom=atom({from:1,to:null}),pdfCombinePageAtom=atom(1),signToPdfAtom=atom(null),outputDocumentArr=atom([]),outputInfoAtom=atom({isSubmit:!1,docName:"",extension:"pdf"}),setCurrentStep=atom(()=>"",(St,e,{step:_e})=>{e(stepAtom,_e)}),setStepDirection=atom(()=>"",(St,e,{from:_e,to:tn})=>{e(stepDirectionAtom,{from:_e,to:tn})}),displayMessageBox=atom(()=>"",(St,e,_e)=>{e(messageBox,_e),setTimeout(()=>{e(messageBox,{isDisplay:!1,isMask:!1,dialogName:"",content:""})},3e3)}),displayDialog=atom(()=>"",(St,e,_e)=>{e(dialogAtom,_e)}),setSignList=atom(()=>"",(St,e)=>{let _e=localStorage.getItem("signList");if(_e!==null){const tn=JSON.parse(_e);e(signListAtom,tn)}}),addSign=atom(()=>"",(St,e,_e)=>{let tn=localStorage.getItem("signList");if(tn!==null){const un=JSON.parse(tn);un.unshift(_e),e(signListAtom,un),localStorage.setItem("signList",JSON.stringify(un))}else localStorage.setItem("signList",JSON.stringify([_e])),e(signListAtom,[_e])}),removeSign=atom(()=>"",(St,e,{id:_e})=>{const un=St(signListAtom).filter(vn=>vn.id!==_e);localStorage.getItem("signList")!==null&&(localStorage.setItem("signList",JSON.stringify(un)),e(signListAtom,un))}),setPdf=atom(()=>"",(St,e,{pdf:_e})=>{e(pdfAtom,_e)}),setPdfCombinePage=atom(()=>"",(St,e,{page:_e})=>{e(pdfCombinePageAtom,_e)}),setSignToPdf=atom(()=>"",(St,e,{page:_e,imageUrl:tn})=>{e(signToPdfAtom,{page:_e,imageUrl:tn}),setTimeout(()=>{e(signToPdfAtom,{page:0,imageUrl:""})},100)}),setOutputDocumentArr=atom(()=>"",(St,e,{document:_e})=>{if(_e===null){e(outputDocumentArr,[]);return}const{page:tn,isEdit:un,imageUrl:gn,width:vn,height:fn}=_e,en=St(outputDocumentArr).find(dn=>dn&&dn.page===tn);let on;en?(on=St(outputDocumentArr).map(dn=>(dn&&dn.page===tn&&(dn.imageUrl=gn,dn.isEdit=un,(vn||fn)&&(dn.width=vn,dn.height=fn)),dn)),e(outputDocumentArr,on)):on=[...St(outputDocumentArr),_e],e(outputDocumentArr,on)}),setOutputInfo=atom(()=>"",(St,e,_e)=>{let tn=St(outputInfoAtom);if(e(outputInfoAtom,{...tn,..._e}),_e.isSubmit){const un=setTimeout(()=>{tn=St(outputInfoAtom),e(outputInfoAtom,{...tn,isSubmit:!1}),clearTimeout(un)},3e3)}});var jsxRuntime={exports:{}},reactJsxRuntime_production_min={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=react.exports,k$1=Symbol.for("react.element"),l$1=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n$1=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q$1(St,e,_e){var tn,un={},gn=null,vn=null;_e!==void 0&&(gn=""+_e),e.key!==void 0&&(gn=""+e.key),e.ref!==void 0&&(vn=e.ref);for(tn in e)m$1.call(e,tn)&&!p$1.hasOwnProperty(tn)&&(un[tn]=e[tn]);if(St&&St.defaultProps)for(tn in e=St.defaultProps,e)un[tn]===void 0&&(un[tn]=e[tn]);return{$$typeof:k$1,type:St,key:gn,ref:vn,props:un,_owner:n$1.current}}reactJsxRuntime_production_min.Fragment=l$1;reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;(function(St){St.exports=reactJsxRuntime_production_min})(jsxRuntime);const Fragment=jsxRuntime.exports.Fragment,jsx=jsxRuntime.exports.jsx,jsxs=jsxRuntime.exports.jsxs,AlertIcon=()=>jsx("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsx("path",{className:"fill-current",d:"M8.99996 13.1667C9.1944 13.1667 9.3576 13.1007 9.48954 12.9688C9.62149 12.8368 9.68746 12.6736 9.68746 12.4792C9.68746 12.2847 9.62149 12.1215 9.48954 11.9896C9.3576 11.8577 9.1944 11.7917 8.99996 11.7917C8.80551 11.7917 8.64232 11.8577 8.51038 11.9896C8.37843 12.1215 8.31246 12.2847 8.31246 12.4792C8.31246 12.6736 8.37843 12.8368 8.51038 12.9688C8.64232 13.1007 8.80551 13.1667 8.99996 13.1667ZM8.43746 9.97919H9.68746V4.70835H8.43746V9.97919ZM8.99996 17.3334C7.86107 17.3334 6.78468 17.1146 5.77079 16.6771C4.7569 16.2396 3.87149 15.6424 3.11454 14.8854C2.3576 14.1285 1.76038 13.2431 1.32288 12.2292C0.885376 11.2153 0.666626 10.132 0.666626 8.97919C0.666626 7.8403 0.885376 6.76391 1.32288 5.75002C1.76038 4.73613 2.3576 3.85419 3.11454 3.10419C3.87149 2.35419 4.7569 1.76044 5.77079 1.32294C6.78468 0.885437 7.86801 0.666687 9.02079 0.666687C10.1597 0.666687 11.2361 0.885437 12.25 1.32294C13.2638 1.76044 14.1458 2.35419 14.8958 3.10419C15.6458 3.85419 16.2395 4.73613 16.677 5.75002C17.1145 6.76391 17.3333 7.84724 17.3333 9.00002C17.3333 10.1389 17.1145 11.2153 16.677 12.2292C16.2395 13.2431 15.6458 14.1285 14.8958 14.8854C14.1458 15.6424 13.2638 16.2396 12.25 16.6771C11.2361 17.1146 10.1527 17.3334 8.99996 17.3334ZM9.02079 16.0834C10.9791 16.0834 12.6458 15.3924 14.0208 14.0104C15.3958 12.6285 16.0833 10.9514 16.0833 8.97919C16.0833 7.02085 15.3958 5.35419 14.0208 3.97919C12.6458 2.60419 10.9722 1.91669 8.99996 1.91669C7.04163 1.91669 5.37149 2.60419 3.98954 3.97919C2.6076 5.35419 1.91663 7.0278 1.91663 9.00002C1.91663 10.9584 2.6076 12.6285 3.98954 14.0104C5.37149 15.3924 7.04857 16.0834 9.02079 16.0834Z",fill:"white"})}),MessageBox=()=>{const[St,e]=useAtom(messageBox);return jsxs("section",{className:`flex items-center messageBox text-[#333333] translate-x-[-50%] translate-y-[100px] shadow-[0_4px_12px_rgba(0,0,0,0.1)] ${St.basicStyle} ${St.isDisplay?"messageBox--open":"messageBox--close"}`,children:[St.dialogName==="alert"&&jsx("div",{className:`mr-[12px] ${St.logoStyle}`,children:jsx(AlertIcon,{})}),jsx("span",{children:St.content})]})},RemoveSignDialog=()=>{const[St]=useAtom(dialogAtom),[,e]=useAtom(displayDialog),[,_e]=useAtom(removeSign),tn=()=>{e({isDisplay:!1,dialogName:"",props:{}})};return jsxs("section",{className:"flex flex-col items-center max-w-[90%] sm:max-w-[300px] w-full h-[187px] py-[20px] text-[#000] bg-[#fff] rounded-tl-[30px] rounded-tr-[30px] rounded-bl-[30px]",children:[jsx("h4",{children:"\u78BA\u5B9A\u79FB\u9664\u7C3D\u540D\u6A94 ?"}),jsx("button",{onClick:()=>{St.props&&(_e({id:St.props.id}),tn())},className:"flex-center w-[180px] h-[40px] mt-[32px] mb-[12px] text-[14px] text-[#F2F2F2] bg-[#FF7070] rounded-full",children:"\u79FB\u9664"}),jsx("button",{onClick:tn,className:"flex-center w-[180px] h-[40px] text-[14px] text-[#4F4F4F] bg-[#E5E6F2] rounded-full",children:"\u53D6\u6D88"})]})},Dialog=()=>{const[St]=useAtom(dialogAtom),[,e]=useAtom(displayDialog),_e=tn=>{tn.target===tn.currentTarget&&e({isDisplay:!1,dialogName:"",props:{}})};return jsxs("section",{children:[St.isDisplay&&jsx("div",{onClick:_e,className:"flex-center fixed top-0 left-0 right-0 w-full min-h-screen bg-[#000] bg-opacity-50 z-[90]",children:St.dialogName==="removeSign"&&jsx(RemoveSignDialog,{})}),jsx(MessageBox,{})]})};/**
 * @remix-run/router v1.0.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(St){for(var e=1;e<arguments.length;e++){var _e=arguments[e];for(var tn in _e)Object.prototype.hasOwnProperty.call(_e,tn)&&(St[tn]=_e[tn])}return St},_extends$1.apply(this,arguments)}var Action;(function(St){St.Pop="POP",St.Push="PUSH",St.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(St){St===void 0&&(St={});function e(tn,un){let{pathname:gn,search:vn,hash:fn}=tn.location;return createLocation("",{pathname:gn,search:vn,hash:fn},un.state&&un.state.usr||null,un.state&&un.state.key||"default")}function _e(tn,un){return typeof un=="string"?un:createPath(un)}return getUrlBasedHistory(e,_e,null,St)}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(St){return{usr:St.state,key:St.key}}function createLocation(St,e,_e,tn){return _e===void 0&&(_e=null),_extends$1({pathname:typeof St=="string"?St:St.pathname,search:"",hash:""},typeof e=="string"?parsePath(e):e,{state:_e,key:e&&e.key||tn||createKey()})}function createPath(St){let{pathname:e="/",search:_e="",hash:tn=""}=St;return _e&&_e!=="?"&&(e+=_e.charAt(0)==="?"?_e:"?"+_e),tn&&tn!=="#"&&(e+=tn.charAt(0)==="#"?tn:"#"+tn),e}function parsePath(St){let e={};if(St){let _e=St.indexOf("#");_e>=0&&(e.hash=St.substr(_e),St=St.substr(0,_e));let tn=St.indexOf("?");tn>=0&&(e.search=St.substr(tn),St=St.substr(0,tn)),St&&(e.pathname=St)}return e}function createURL(St){let e=typeof window<"u"&&typeof window.location<"u"&&window.location.origin!=="null"?window.location.origin:"unknown://unknown",_e=typeof St=="string"?St:createPath(St);return new URL(_e,e)}function getUrlBasedHistory(St,e,_e,tn){tn===void 0&&(tn={});let{window:un=document.defaultView,v5Compat:gn=!1}=tn,vn=un.history,fn=Action.Pop,en=null;function on(){fn=Action.Pop,en&&en({action:fn,location:an.location})}function dn(nn,cn){fn=Action.Push;let hn=createLocation(an.location,nn,cn);_e&&_e(hn,nn);let sn=getHistoryState(hn),pn=an.createHref(hn);try{vn.pushState(sn,"",pn)}catch{un.location.assign(pn)}gn&&en&&en({action:fn,location:an.location})}function rn(nn,cn){fn=Action.Replace;let hn=createLocation(an.location,nn,cn);_e&&_e(hn,nn);let sn=getHistoryState(hn),pn=an.createHref(hn);vn.replaceState(sn,"",pn),gn&&en&&en({action:fn,location:an.location})}let an={get action(){return fn},get location(){return St(un,vn)},listen(nn){if(en)throw new Error("A history only accepts one active listener");return un.addEventListener(PopStateEventType,on),en=nn,()=>{un.removeEventListener(PopStateEventType,on),en=null}},createHref(nn){return e(un,nn)},encodeLocation(nn){let cn=createURL(createPath(nn));return _extends$1({},nn,{pathname:cn.pathname,search:cn.search,hash:cn.hash})},push:dn,replace:rn,go(nn){return vn.go(nn)}};return an}var ResultType;(function(St){St.data="data",St.deferred="deferred",St.redirect="redirect",St.error="error"})(ResultType||(ResultType={}));function matchRoutes(St,e,_e){_e===void 0&&(_e="/");let tn=typeof e=="string"?parsePath(e):e,un=stripBasename(tn.pathname||"/",_e);if(un==null)return null;let gn=flattenRoutes(St);rankRouteBranches(gn);let vn=null;for(let fn=0;vn==null&&fn<gn.length;++fn)vn=matchRouteBranch(gn[fn],safelyDecodeURI(un));return vn}function flattenRoutes(St,e,_e,tn){return e===void 0&&(e=[]),_e===void 0&&(_e=[]),tn===void 0&&(tn=""),St.forEach((un,gn)=>{let vn={relativePath:un.path||"",caseSensitive:un.caseSensitive===!0,childrenIndex:gn,route:un};vn.relativePath.startsWith("/")&&(invariant$1(vn.relativePath.startsWith(tn),'Absolute route path "'+vn.relativePath+'" nested under path '+('"'+tn+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),vn.relativePath=vn.relativePath.slice(tn.length));let fn=joinPaths([tn,vn.relativePath]),en=_e.concat(vn);un.children&&un.children.length>0&&(invariant$1(un.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+fn+'".')),flattenRoutes(un.children,e,en,fn)),!(un.path==null&&!un.index)&&e.push({path:fn,score:computeScore(fn,un.index),routesMeta:en})}),e}function rankRouteBranches(St){St.sort((e,_e)=>e.score!==_e.score?_e.score-e.score:compareIndexes(e.routesMeta.map(tn=>tn.childrenIndex),_e.routesMeta.map(tn=>tn.childrenIndex)))}const paramRe=/^:\w+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=St=>St==="*";function computeScore(St,e){let _e=St.split("/"),tn=_e.length;return _e.some(isSplat)&&(tn+=splatPenalty),e&&(tn+=indexRouteValue),_e.filter(un=>!isSplat(un)).reduce((un,gn)=>un+(paramRe.test(gn)?dynamicSegmentValue:gn===""?emptySegmentValue:staticSegmentValue),tn)}function compareIndexes(St,e){return St.length===e.length&&St.slice(0,-1).every((tn,un)=>tn===e[un])?St[St.length-1]-e[e.length-1]:0}function matchRouteBranch(St,e){let{routesMeta:_e}=St,tn={},un="/",gn=[];for(let vn=0;vn<_e.length;++vn){let fn=_e[vn],en=vn===_e.length-1,on=un==="/"?e:e.slice(un.length)||"/",dn=matchPath({path:fn.relativePath,caseSensitive:fn.caseSensitive,end:en},on);if(!dn)return null;Object.assign(tn,dn.params);let rn=fn.route;gn.push({params:tn,pathname:joinPaths([un,dn.pathname]),pathnameBase:normalizePathname(joinPaths([un,dn.pathnameBase])),route:rn}),dn.pathnameBase!=="/"&&(un=joinPaths([un,dn.pathnameBase]))}return gn}function matchPath(St,e){typeof St=="string"&&(St={path:St,caseSensitive:!1,end:!0});let[_e,tn]=compilePath(St.path,St.caseSensitive,St.end),un=e.match(_e);if(!un)return null;let gn=un[0],vn=gn.replace(/(.)\/+$/,"$1"),fn=un.slice(1);return{params:tn.reduce((on,dn,rn)=>{if(dn==="*"){let an=fn[rn]||"";vn=gn.slice(0,gn.length-an.length).replace(/(.)\/+$/,"$1")}return on[dn]=safelyDecodeURIComponent(fn[rn]||"",dn),on},{}),pathname:gn,pathnameBase:vn,pattern:St}}function compilePath(St,e,_e){e===void 0&&(e=!1),_e===void 0&&(_e=!0),warning$1(St==="*"||!St.endsWith("*")||St.endsWith("/*"),'Route path "'+St+'" will be treated as if it were '+('"'+St.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+St.replace(/\*$/,"/*")+'".'));let tn=[],un="^"+St.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(vn,fn)=>(tn.push(fn),"([^\\/]+)"));return St.endsWith("*")?(tn.push("*"),un+=St==="*"||St==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):_e?un+="\\/*$":St!==""&&St!=="/"&&(un+="(?:(?=\\/|$))"),[new RegExp(un,e?void 0:"i"),tn]}function safelyDecodeURI(St){try{return decodeURI(St)}catch(e){return warning$1(!1,'The URL path "'+St+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),St}}function safelyDecodeURIComponent(St,e){try{return decodeURIComponent(St)}catch(_e){return warning$1(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+St+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+_e+").")),St}}function stripBasename(St,e){if(e==="/")return St;if(!St.toLowerCase().startsWith(e.toLowerCase()))return null;let _e=e.endsWith("/")?e.length-1:e.length,tn=St.charAt(_e);return tn&&tn!=="/"?null:St.slice(_e)||"/"}function invariant$1(St,e){if(St===!1||St===null||typeof St>"u")throw new Error(e)}function warning$1(St,e){if(!St){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function resolvePath(St,e){e===void 0&&(e="/");let{pathname:_e,search:tn="",hash:un=""}=typeof St=="string"?parsePath(St):St;return{pathname:_e?_e.startsWith("/")?_e:resolvePathname(_e,e):e,search:normalizeSearch(tn),hash:normalizeHash(un)}}function resolvePathname(St,e){let _e=e.replace(/\/+$/,"").split("/");return St.split("/").forEach(un=>{un===".."?_e.length>1&&_e.pop():un!=="."&&_e.push(un)}),_e.length>1?_e.join("/"):"/"}function getInvalidPathError(St,e,_e,tn){return"Cannot include a '"+St+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(tn)+"].  Please separate it out to the ")+("`to."+_e+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(St){return St.filter((e,_e)=>_e===0||e.route.path&&e.route.path.length>0)}function resolveTo(St,e,_e,tn){tn===void 0&&(tn=!1);let un;typeof St=="string"?un=parsePath(St):(un=_extends$1({},St),invariant$1(!un.pathname||!un.pathname.includes("?"),getInvalidPathError("?","pathname","search",un)),invariant$1(!un.pathname||!un.pathname.includes("#"),getInvalidPathError("#","pathname","hash",un)),invariant$1(!un.search||!un.search.includes("#"),getInvalidPathError("#","search","hash",un)));let gn=St===""||un.pathname==="",vn=gn?"/":un.pathname,fn;if(tn||vn==null)fn=_e;else{let rn=e.length-1;if(vn.startsWith("..")){let an=vn.split("/");for(;an[0]==="..";)an.shift(),rn-=1;un.pathname=an.join("/")}fn=rn>=0?e[rn]:"/"}let en=resolvePath(un,fn),on=vn&&vn!=="/"&&vn.endsWith("/"),dn=(gn||vn===".")&&_e.endsWith("/");return!en.pathname.endsWith("/")&&(on||dn)&&(en.pathname+="/"),en}const joinPaths=St=>St.join("/").replace(/\/\/+/g,"/"),normalizePathname=St=>St.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=St=>!St||St==="?"?"":St.startsWith("?")?St:"?"+St,normalizeHash=St=>!St||St==="#"?"":St.startsWith("#")?St:"#"+St;class ErrorResponse{constructor(e,_e,tn){this.status=e,this.statusText=_e||"",this.data=tn}}function isRouteErrorResponse(St){return St instanceof ErrorResponse}const validActionMethods=new Set(["POST","PUT","PATCH","DELETE"]);[...validActionMethods];/**
 * React Router v6.4.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends(){return _extends=Object.assign?Object.assign.bind():function(St){for(var e=1;e<arguments.length;e++){var _e=arguments[e];for(var tn in _e)Object.prototype.hasOwnProperty.call(_e,tn)&&(St[tn]=_e[tn])}return St},_extends.apply(this,arguments)}function isPolyfill(St,e){return St===e&&(St!==0||1/St===1/e)||St!==St&&e!==e}const is=typeof Object.is=="function"?Object.is:isPolyfill,{useState,useEffect,useLayoutEffect,useDebugValue}=React$1;function useSyncExternalStore$2(St,e,_e){const tn=e(),[{inst:un},gn]=useState({inst:{value:tn,getSnapshot:e}});return useLayoutEffect(()=>{un.value=tn,un.getSnapshot=e,checkIfSnapshotChanged(un)&&gn({inst:un})},[St,tn,e]),useEffect(()=>(checkIfSnapshotChanged(un)&&gn({inst:un}),St(()=>{checkIfSnapshotChanged(un)&&gn({inst:un})})),[St]),useDebugValue(tn),tn}function checkIfSnapshotChanged(St){const e=St.getSnapshot,_e=St.value;try{const tn=e();return!is(_e,tn)}catch{return!0}}function useSyncExternalStore$1(St,e,_e){return e()}const canUseDOM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",isServerEnvironment=!canUseDOM,shim=isServerEnvironment?useSyncExternalStore$1:useSyncExternalStore$2;"useSyncExternalStore"in React$1&&(St=>St.useSyncExternalStore)(React$1);const DataStaticRouterContext=react.exports.createContext(null),DataRouterContext=react.exports.createContext(null),DataRouterStateContext=react.exports.createContext(null),NavigationContext=react.exports.createContext(null),LocationContext=react.exports.createContext(null),RouteContext=react.exports.createContext({outlet:null,matches:[]}),RouteErrorContext=react.exports.createContext(null);function useHref(St,e){let{relative:_e}=e===void 0?{}:e;useInRouterContext()||invariant$1(!1);let{basename:tn,navigator:un}=react.exports.useContext(NavigationContext),{hash:gn,pathname:vn,search:fn}=useResolvedPath(St,{relative:_e}),en=vn;return tn!=="/"&&(en=vn==="/"?tn:joinPaths([tn,vn])),un.createHref({pathname:en,search:fn,hash:gn})}function useInRouterContext(){return react.exports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$1(!1),react.exports.useContext(LocationContext).location}function useNavigate(){useInRouterContext()||invariant$1(!1);let{basename:St,navigator:e}=react.exports.useContext(NavigationContext),{matches:_e}=react.exports.useContext(RouteContext),{pathname:tn}=useLocation(),un=JSON.stringify(getPathContributingMatches(_e).map(fn=>fn.pathnameBase)),gn=react.exports.useRef(!1);return react.exports.useEffect(()=>{gn.current=!0}),react.exports.useCallback(function(fn,en){if(en===void 0&&(en={}),!gn.current)return;if(typeof fn=="number"){e.go(fn);return}let on=resolveTo(fn,JSON.parse(un),tn,en.relative==="path");St!=="/"&&(on.pathname=on.pathname==="/"?St:joinPaths([St,on.pathname])),(en.replace?e.replace:e.push)(on,en.state,en)},[St,e,un,tn])}function useResolvedPath(St,e){let{relative:_e}=e===void 0?{}:e,{matches:tn}=react.exports.useContext(RouteContext),{pathname:un}=useLocation(),gn=JSON.stringify(getPathContributingMatches(tn).map(vn=>vn.pathnameBase));return react.exports.useMemo(()=>resolveTo(St,JSON.parse(gn),un,_e==="path"),[St,gn,un,_e])}function useRoutes(St,e){useInRouterContext()||invariant$1(!1);let _e=react.exports.useContext(DataRouterStateContext),{matches:tn}=react.exports.useContext(RouteContext),un=tn[tn.length-1],gn=un?un.params:{};un&&un.pathname;let vn=un?un.pathnameBase:"/";un&&un.route;let fn=useLocation(),en;if(e){var on;let cn=typeof e=="string"?parsePath(e):e;vn==="/"||((on=cn.pathname)==null?void 0:on.startsWith(vn))||invariant$1(!1),en=cn}else en=fn;let dn=en.pathname||"/",rn=vn==="/"?dn:dn.slice(vn.length)||"/",an=matchRoutes(St,{pathname:rn}),nn=_renderMatches(an&&an.map(cn=>Object.assign({},cn,{params:Object.assign({},gn,cn.params),pathname:joinPaths([vn,cn.pathname]),pathnameBase:cn.pathnameBase==="/"?vn:joinPaths([vn,cn.pathnameBase])})),tn,_e||void 0);return e&&nn?jsx(LocationContext.Provider,{value:{location:_extends({pathname:"/",search:"",hash:"",state:null,key:"default"},en),navigationType:Action.Pop},children:nn}):nn}function DefaultErrorElement(){let St=useRouteError(),e=isRouteErrorResponse(St)?St.status+" "+St.statusText:St instanceof Error?St.message:JSON.stringify(St),_e=St instanceof Error?St.stack:null,tn="rgba(200,200,200, 0.5)",un={padding:"0.5rem",backgroundColor:tn},gn={padding:"2px 4px",backgroundColor:tn};return jsxs(Fragment,{children:[jsx("h2",{children:"Unhandled Thrown Error!"}),jsx("h3",{style:{fontStyle:"italic"},children:e}),_e?jsx("pre",{style:un,children:_e}):null,jsx("p",{children:"\u{1F4BF} Hey developer \u{1F44B}"}),jsxs("p",{children:["You can provide a way better UX than this when your app throws errors by providing your own\xA0",jsx("code",{style:gn,children:"errorElement"})," props on\xA0",jsx("code",{style:gn,children:"<Route>"})]})]})}class RenderErrorBoundary extends react.exports.Component{constructor(e){super(e),this.state={location:e.location,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,_e){return _e.location!==e.location?{error:e.error,location:e.location}:{error:e.error||_e.error,location:_e.location}}componentDidCatch(e,_e){console.error("React Router caught the following error during render",e,_e)}render(){return this.state.error?jsx(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}function RenderedRoute(St){let{routeContext:e,match:_e,children:tn}=St,un=react.exports.useContext(DataStaticRouterContext);return un&&_e.route.errorElement&&(un._deepestRenderedBoundaryId=_e.route.id),jsx(RouteContext.Provider,{value:e,children:tn})}function _renderMatches(St,e,_e){if(e===void 0&&(e=[]),St==null)if(_e!=null&&_e.errors)St=_e.matches;else return null;let tn=St,un=_e==null?void 0:_e.errors;if(un!=null){let gn=tn.findIndex(vn=>vn.route.id&&(un==null?void 0:un[vn.route.id]));gn>=0||invariant$1(!1),tn=tn.slice(0,Math.min(tn.length,gn+1))}return tn.reduceRight((gn,vn,fn)=>{let en=vn.route.id?un==null?void 0:un[vn.route.id]:null,on=_e?vn.route.errorElement||jsx(DefaultErrorElement,{}):null,dn=()=>jsx(RenderedRoute,{match:vn,routeContext:{outlet:gn,matches:e.concat(tn.slice(0,fn+1))},children:en?on:vn.route.element!==void 0?vn.route.element:gn});return _e&&(vn.route.errorElement||fn===0)?jsx(RenderErrorBoundary,{location:_e.location,component:on,error:en,children:dn()}):dn()},null)}var DataRouterHook$1;(function(St){St.UseRevalidator="useRevalidator"})(DataRouterHook$1||(DataRouterHook$1={}));var DataRouterStateHook$1;(function(St){St.UseLoaderData="useLoaderData",St.UseActionData="useActionData",St.UseRouteError="useRouteError",St.UseNavigation="useNavigation",St.UseRouteLoaderData="useRouteLoaderData",St.UseMatches="useMatches",St.UseRevalidator="useRevalidator"})(DataRouterStateHook$1||(DataRouterStateHook$1={}));function useDataRouterState(St){let e=react.exports.useContext(DataRouterStateContext);return e||invariant$1(!1),e}function useRouteError(){var St;let e=react.exports.useContext(RouteErrorContext),_e=useDataRouterState(DataRouterStateHook$1.UseRouteError),tn=react.exports.useContext(RouteContext),un=tn.matches[tn.matches.length-1];return e||(tn||invariant$1(!1),un.route.id||invariant$1(!1),(St=_e.errors)==null?void 0:St[un.route.id])}function Navigate(St){let{to:e,replace:_e,state:tn,relative:un}=St;useInRouterContext()||invariant$1(!1);let gn=react.exports.useContext(DataRouterStateContext),vn=useNavigate();return react.exports.useEffect(()=>{gn&&gn.navigation.state!=="idle"||vn(e,{replace:_e,state:tn,relative:un})}),null}function Route(St){invariant$1(!1)}function Router(St){let{basename:e="/",children:_e=null,location:tn,navigationType:un=Action.Pop,navigator:gn,static:vn=!1}=St;useInRouterContext()&&invariant$1(!1);let fn=e.replace(/^\/*/,"/"),en=react.exports.useMemo(()=>({basename:fn,navigator:gn,static:vn}),[fn,gn,vn]);typeof tn=="string"&&(tn=parsePath(tn));let{pathname:on="/",search:dn="",hash:rn="",state:an=null,key:nn="default"}=tn,cn=react.exports.useMemo(()=>{let hn=stripBasename(on,fn);return hn==null?null:{pathname:hn,search:dn,hash:rn,state:an,key:nn}},[fn,on,dn,rn,an,nn]);return cn==null?null:jsx(NavigationContext.Provider,{value:en,children:jsx(LocationContext.Provider,{children:_e,value:{location:cn,navigationType:un}})})}function Routes(St){let{children:e,location:_e}=St,tn=react.exports.useContext(DataRouterContext),un=tn&&!e?tn.router.routes:createRoutesFromChildren(e);return useRoutes(un,_e)}var AwaitRenderStatus;(function(St){St[St.pending=0]="pending",St[St.success=1]="success",St[St.error=2]="error"})(AwaitRenderStatus||(AwaitRenderStatus={}));new Promise(()=>{});function createRoutesFromChildren(St,e){e===void 0&&(e=[]);let _e=[];return react.exports.Children.forEach(St,(tn,un)=>{if(!react.exports.isValidElement(tn))return;if(tn.type===react.exports.Fragment){_e.push.apply(_e,createRoutesFromChildren(tn.props.children,e));return}tn.type!==Route&&invariant$1(!1),!tn.props.index||!tn.props.children||invariant$1(!1);let gn=[...e,un],vn={id:tn.props.id||gn.join("-"),caseSensitive:tn.props.caseSensitive,element:tn.props.element,index:tn.props.index,path:tn.props.path,loader:tn.props.loader,action:tn.props.action,errorElement:tn.props.errorElement,hasErrorBoundary:tn.props.errorElement!=null,shouldRevalidate:tn.props.shouldRevalidate,handle:tn.props.handle};tn.props.children&&(vn.children=createRoutesFromChildren(tn.props.children,gn)),_e.push(vn)}),_e}/**
 * React Router DOM v6.4.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _objectWithoutPropertiesLoose(St,e){if(St==null)return{};var _e={},tn=Object.keys(St),un,gn;for(gn=0;gn<tn.length;gn++)un=tn[gn],!(e.indexOf(un)>=0)&&(_e[un]=St[un]);return _e}function isModifiedEvent(St){return!!(St.metaKey||St.altKey||St.ctrlKey||St.shiftKey)}function shouldProcessLinkClick(St,e){return St.button===0&&(!e||e==="_self")&&!isModifiedEvent(St)}const _excluded=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function BrowserRouter(St){let{basename:e,children:_e,window:tn}=St,un=react.exports.useRef();un.current==null&&(un.current=createBrowserHistory({window:tn,v5Compat:!0}));let gn=un.current,[vn,fn]=react.exports.useState({action:gn.action,location:gn.location});return react.exports.useLayoutEffect(()=>gn.listen(fn),[gn]),jsx(Router,{basename:e,children:_e,location:vn.location,navigationType:vn.action,navigator:gn})}const Link=react.exports.forwardRef(function(e,_e){let{onClick:tn,relative:un,reloadDocument:gn,replace:vn,state:fn,target:en,to:on,preventScrollReset:dn}=e,rn=_objectWithoutPropertiesLoose(e,_excluded),an=useHref(on,{relative:un}),nn=useLinkClickHandler(on,{replace:vn,state:fn,target:en,preventScrollReset:dn,relative:un});function cn(hn){tn&&tn(hn),hn.defaultPrevented||nn(hn)}return jsx("a",{...rn,href:an,onClick:gn?tn:cn,ref:_e,target:en})});var DataRouterHook;(function(St){St.UseScrollRestoration="useScrollRestoration",St.UseSubmitImpl="useSubmitImpl",St.UseFetcher="useFetcher"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(St){St.UseFetchers="useFetchers",St.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(St,e){let{target:_e,replace:tn,state:un,preventScrollReset:gn,relative:vn}=e===void 0?{}:e,fn=useNavigate(),en=useLocation(),on=useResolvedPath(St,{relative:vn});return react.exports.useCallback(dn=>{if(shouldProcessLinkClick(dn,_e)){dn.preventDefault();let rn=tn!==void 0?tn:createPath(en)===createPath(on);fn(St,{replace:rn,state:un,preventScrollReset:gn,relative:vn})}},[en,fn,on,tn,un,_e,St,gn,vn])}const CheckedIcon=()=>jsx("svg",{width:"13",height:"12",viewBox:"0 0 13 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsx("path",{d:"M5.63942 8.65416L9.7665 4.52708L9.09567 3.87083L5.63942 7.32708L3.88942 5.57708L3.23317 6.23333L5.63942 8.65416ZM6.49984 11.8333C5.70262 11.8333 4.94914 11.6802 4.23942 11.374C3.5297 11.0677 2.90991 10.6497 2.38005 10.1198C1.85018 9.58993 1.43213 8.97014 1.12588 8.26042C0.819629 7.55069 0.666504 6.79722 0.666504 6C0.666504 5.19305 0.819629 4.43472 1.12588 3.725C1.43213 3.01528 1.85018 2.39791 2.38005 1.87291C2.90991 1.34791 3.5297 0.932289 4.23942 0.626039C4.94914 0.319789 5.70262 0.166664 6.49984 0.166664C7.30678 0.166664 8.06512 0.319789 8.77484 0.626039C9.48456 0.932289 10.1019 1.34791 10.6269 1.87291C11.1519 2.39791 11.5675 3.01528 11.8738 3.725C12.18 4.43472 12.3332 5.19305 12.3332 6C12.3332 6.79722 12.18 7.55069 11.8738 8.26042C11.5675 8.97014 11.1519 9.58993 10.6269 10.1198C10.1019 10.6497 9.48456 11.0677 8.77484 11.374C8.06512 11.6802 7.30678 11.8333 6.49984 11.8333ZM6.49984 10.9583C7.88039 10.9583 9.05192 10.4747 10.0144 9.50729C10.9769 8.53993 11.4582 7.37083 11.4582 6C11.4582 4.61944 10.9769 3.44791 10.0144 2.48541C9.05192 1.52291 7.88039 1.04166 6.49984 1.04166C5.129 1.04166 3.95991 1.52291 2.99255 2.48541C2.02518 3.44791 1.5415 4.61944 1.5415 6C1.5415 7.37083 2.02518 8.53993 2.99255 9.50729C3.95991 10.4747 5.129 10.9583 6.49984 10.9583Z",fill:"#595ED3"})}),Login=()=>{const St=["\u4F7F\u7528\u5DF2\u65B0\u589E\u7684\u7C3D\u540D\u6A94","\u5EFA\u7ACB\u4E26\u4FDD\u5B58\u7C3D\u540D\u6A94","\u67E5\u770B\u904E\u53BB\u7C3D\u7F72\u6587\u4EF6"],e="flex-center w-full py-[10px] text-[14px] bg-[#E3FEC7] rounded-full",_e="flex flex-col w-[265px] min-h-[425px] px-[38px] py-[32px] rounded-[30px] rounded-br-[2px] bg-[#ffffff80] hover:shadow-[0_4px_32px_rgba(178,167,209,0.5)] transition-all ease-in-out duration-500",tn="flex flex-col w-[265px] min-h-[200px] mmd:min-h-[425px] px-[38px] py-[32px] rounded-[30px] rounded-br-[2px] bg-[#ffffff80] hover:shadow-[0_4px_32px_rgba(178,167,209,0.5)] transition-all ease-in-out duration-500";return jsxs("section",{className:"flex flex-col mmd:flex-row justify-center items-center m-auto",children:[jsxs("form",{className:`${_e}`,children:[jsx("h4",{className:"text-purple text-center",children:"\u767B\u5165"}),jsx("ul",{className:"my-[32px] text-[14px]",children:St.map((un,gn)=>jsxs("li",{className:"featureList flex items-center",children:[jsx(CheckedIcon,{}),jsx("span",{className:"ml-[9px] text-[#4F4F4F]",children:un})]},gn))}),jsx("div",{children:jsx("input",{className:"loginInput",type:"text",placeholder:"\u4FE1\u7BB1"})}),jsx("div",{className:"mt-[12px]",children:jsx("input",{className:"loginInput",type:"password",placeholder:"\u5BC6\u78BC"})}),jsxs("div",{className:"w-full max-w-[180px] mx-auto mt-[38px]",children:[jsx(Link,{to:"/",className:"block w-full px-[10px] text-left text-[#8DAC82] text-[14px]",children:"\u8A3B\u518A"}),jsx("button",{className:`${e} mt-[10px]`,children:"\u767B\u5165"})]})]}),jsxs("div",{className:`${tn} mt-[30px] mmd:mt-0 mmd:ml-[30px]`,children:[jsx("h4",{className:"text-purple text-center",children:"\u5FEB\u901F\u7C3D\u540D"}),jsx("span",{className:"mt-[32px] text-center text-[14px]",children:"\u514D\u767B\u5165\u5FEB\u901F\u7C3D\u540D"}),jsx(Link,{to:"/sign",className:`${e} mt-auto`,children:"\u524D\u5F80\u7C3D\u540D"})]})]})},Overview=()=>{const St="flex-center w-[180px] py-[10px] text-[14px] bg-[#E3FEC7] rounded-full";return jsxs("section",{className:"flex flex-col items-center mx-auto",children:[jsx("h4",{className:"mt-[30px] mb-[60px] text-[18px]",children:"\u7C3D\u540D\u6D41\u7A0B"}),jsx("div",{className:"flex",children:[{id:1,title:"\u5EFA\u7ACB\u7C3D\u540D\u6A94",desc1:"\u53EF\u4EE5\u9078\u64C7\u624B\u5BEB\u7C3D\u540D",desc2:"\u6216\u4E0A\u50B3\u7C3D\u540D\u6A94"},{id:2,title:"\u4E0A\u50B3\u7C3D\u7F72\u6587\u4EF6",desc1:"\u6A94\u6848\u683C\u5F0F pdf / jpg",desc2:"\u6A94\u6848\u5927\u5C0F <1MB"},{id:3,title:"\u7C3D\u540D",desc1:"\u5C07\u5EFA\u7ACB\u7684\u7C3D\u540D\u6A94\u52A0\u5165\u6A94\u6848",desc2:"\u8ABF\u6574\u5230\u9069\u7576\u4F4D\u7F6E\u5B8C\u6210\u7C3D\u7F72"},{id:4,title:"\u4E0B\u8F09\u7C3D\u7F72\u6587\u4EF6",desc1:"\u9810\u89BD\u4E26\u4E0B\u8F09\u7C3D\u7F72\u6A94\u6848",desc2:"\u53EF\u9078\u64C7pdf / jpg"}].map((_e,tn)=>jsxs("div",{className:"cardStyle text-center",children:[jsxs("h5",{className:"text-[#787CDA] text-[14px]",children:["step ",_e.id]}),jsx("h2",{className:"mt-[10px]",children:_e.title}),jsxs("div",{className:"flex flex-col mt-[32px] text-[14px] text-[#828282]",children:[jsx("span",{children:_e.desc1}),jsx("span",{children:_e.desc2})]}),jsx("img",{className:"mt-[32px]",src:`/src/assets/image/overview${_e.id}.png`,alt:"process"})]},tn))}),jsx("button",{className:`${St} my-[60px]`,children:jsx(Link,{to:"/",children:"\u958B\u59CB\u7C3D\u540D"})})]})},scriptRel="modulepreload",assetsURL=function(St){return"/"+St},seen={},__vitePreload=function(e,_e,tn){return!_e||_e.length===0?e():Promise.all(_e.map(un=>{if(un=assetsURL(un),un in seen)return;seen[un]=!0;const gn=un.endsWith(".css"),vn=gn?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${un}"]${vn}`))return;const fn=document.createElement("link");if(fn.rel=gn?"stylesheet":scriptRel,gn||(fn.as="script",fn.crossOrigin=""),fn.href=un,document.head.appendChild(fn),gn)return new Promise((en,on)=>{fn.addEventListener("load",en),fn.addEventListener("error",()=>on(new Error(`Unable to preload CSS for ${un}`)))})})).then(()=>e())};function _typeof(St){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(St)}var u8=Uint8Array,u16=Uint16Array,u32=Uint32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(St,e){for(var _e=new u16(31),tn=0;tn<31;++tn)_e[tn]=e+=1<<St[tn-1];for(var un=new u32(_e[30]),tn=1;tn<30;++tn)for(var gn=_e[tn];gn<_e[tn+1];++gn)un[gn]=gn-_e[tn]<<5|tn;return[_e,un]},_a=freb(fleb,2),fl=_a[0],revfl=_a[1];fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),fd=_b[0],revfd=_b[1],rev=new u16(32768);for(var i$1=0;i$1<32768;++i$1){var x$1=(i$1&43690)>>>1|(i$1&21845)<<1;x$1=(x$1&52428)>>>2|(x$1&13107)<<2,x$1=(x$1&61680)>>>4|(x$1&3855)<<4,rev[i$1]=((x$1&65280)>>>8|(x$1&255)<<8)>>>1}var hMap=function(St,e,_e){for(var tn=St.length,un=0,gn=new u16(e);un<tn;++un)++gn[St[un]-1];var vn=new u16(e);for(un=0;un<e;++un)vn[un]=vn[un-1]+gn[un-1]<<1;var fn;if(_e){fn=new u16(1<<e);var en=15-e;for(un=0;un<tn;++un)if(St[un])for(var on=un<<4|St[un],dn=e-St[un],rn=vn[St[un]-1]++<<dn,an=rn|(1<<dn)-1;rn<=an;++rn)fn[rev[rn]>>>en]=on}else for(fn=new u16(tn),un=0;un<tn;++un)fn[un]=rev[vn[St[un]-1]++]>>>15-St[un];return fn},flt=new u8(288);for(var i$1=0;i$1<144;++i$1)flt[i$1]=8;for(var i$1=144;i$1<256;++i$1)flt[i$1]=9;for(var i$1=256;i$1<280;++i$1)flt[i$1]=7;for(var i$1=280;i$1<288;++i$1)flt[i$1]=8;var fdt=new u8(32);for(var i$1=0;i$1<32;++i$1)fdt[i$1]=5;var flm=hMap(flt,9,0),flrm=hMap(flt,9,1),fdm=hMap(fdt,5,0),fdrm=hMap(fdt,5,1),max=function(St){for(var e=St[0],_e=1;_e<St.length;++_e)St[_e]>e&&(e=St[_e]);return e},bits=function(St,e,_e){var tn=e/8>>0;return(St[tn]|St[tn+1]<<8)>>>(e&7)&_e},bits16=function(St,e){var _e=e/8>>0;return(St[_e]|St[_e+1]<<8|St[_e+2]<<16)>>>(e&7)},shft=function(St){return(St/8>>0)+(St&7&&1)},slc=function(St,e,_e){(e==null||e<0)&&(e=0),(_e==null||_e>St.length)&&(_e=St.length);var tn=new(St instanceof u16?u16:St instanceof u32?u32:u8)(_e-e);return tn.set(St.subarray(e,_e)),tn},inflt=function(St,e,_e){var tn=St.length,un=!e||_e,gn=!_e||_e.i;_e||(_e={}),e||(e=new u8(tn*3));var vn=function(Nn){var Fn=e.length;if(Nn>Fn){var Un=new u8(Math.max(Fn*2,Nn));Un.set(e),e=Un}},fn=_e.f||0,en=_e.p||0,on=_e.b||0,dn=_e.l,rn=_e.d,an=_e.m,nn=_e.n,cn=tn*8;do{if(!dn){_e.f=fn=bits(St,en,1);var hn=bits(St,en+1,3);if(en+=3,hn)if(hn==1)dn=flrm,rn=fdrm,an=9,nn=5;else if(hn==2){var yn=bits(St,en,31)+257,_n=bits(St,en+10,15)+4,xn=yn+bits(St,en+5,31)+1;en+=14;for(var Sn=new u8(xn),Pn=new u8(19),Ln=0;Ln<_n;++Ln)Pn[clim[Ln]]=bits(St,en+Ln*3,7);en+=_n*3;var In=max(Pn),Rn=(1<<In)-1;if(!gn&&en+xn*(In+7)>cn)break;for(var Mn=hMap(Pn,In,1),Ln=0;Ln<xn;){var Hn=Mn[bits(St,en,Rn)];en+=Hn&15;var sn=Hn>>>4;if(sn<16)Sn[Ln++]=sn;else{var Qn=0,Kn=0;for(sn==16?(Kn=3+bits(St,en,3),en+=2,Qn=Sn[Ln-1]):sn==17?(Kn=3+bits(St,en,7),en+=3):sn==18&&(Kn=11+bits(St,en,127),en+=7);Kn--;)Sn[Ln++]=Qn}}var nr=Sn.subarray(0,yn),Zn=Sn.subarray(yn);an=max(nr),nn=max(Zn),dn=hMap(nr,an,1),rn=hMap(Zn,nn,1)}else throw"invalid block type";else{var sn=shft(en)+4,pn=St[sn-4]|St[sn-3]<<8,mn=sn+pn;if(mn>tn){if(gn)throw"unexpected EOF";break}un&&vn(on+pn),e.set(St.subarray(sn,mn),on),_e.b=on+=pn,_e.p=en=mn*8;continue}if(en>cn)throw"unexpected EOF"}un&&vn(on+131072);for(var ir=(1<<an)-1,Jn=(1<<nn)-1,Vn=an+nn+18;gn||en+Vn<cn;){var Qn=dn[bits16(St,en)&ir],Xn=Qn>>>4;if(en+=Qn&15,en>cn)throw"unexpected EOF";if(!Qn)throw"invalid length/literal";if(Xn<256)e[on++]=Xn;else if(Xn==256){dn=null;break}else{var Yn=Xn-254;if(Xn>264){var Ln=Xn-257,Tn=fleb[Ln];Yn=bits(St,en,(1<<Tn)-1)+fl[Ln],en+=Tn}var An=rn[bits16(St,en)&Jn],wn=An>>>4;if(!An)throw"invalid distance";en+=An&15;var Zn=fd[wn];if(wn>3){var Tn=fdeb[wn];Zn+=bits16(St,en)&(1<<Tn)-1,en+=Tn}if(en>cn)throw"unexpected EOF";un&&vn(on+131072);for(var En=on+Yn;on<En;on+=4)e[on]=e[on-Zn],e[on+1]=e[on+1-Zn],e[on+2]=e[on+2-Zn],e[on+3]=e[on+3-Zn];on=En}}_e.l=dn,_e.p=en,_e.b=on,dn&&(fn=1,_e.m=an,_e.d=rn,_e.n=nn)}while(!fn);return on==e.length?e:slc(e,0,on)},wbits=function(St,e,_e){_e<<=e&7;var tn=e/8>>0;St[tn]|=_e,St[tn+1]|=_e>>>8},wbits16=function(St,e,_e){_e<<=e&7;var tn=e/8>>0;St[tn]|=_e,St[tn+1]|=_e>>>8,St[tn+2]|=_e>>>16},hTree=function(St,e){for(var _e=[],tn=0;tn<St.length;++tn)St[tn]&&_e.push({s:tn,f:St[tn]});var un=_e.length,gn=_e.slice();if(!un)return[new u8(0),0];if(un==1){var vn=new u8(_e[0].s+1);return vn[_e[0].s]=1,[vn,1]}_e.sort(function(xn,Sn){return xn.f-Sn.f}),_e.push({s:-1,f:25001});var fn=_e[0],en=_e[1],on=0,dn=1,rn=2;for(_e[0]={s:-1,f:fn.f+en.f,l:fn,r:en};dn!=un-1;)fn=_e[_e[on].f<_e[rn].f?on++:rn++],en=_e[on!=dn&&_e[on].f<_e[rn].f?on++:rn++],_e[dn++]={s:-1,f:fn.f+en.f,l:fn,r:en};for(var an=gn[0].s,tn=1;tn<un;++tn)gn[tn].s>an&&(an=gn[tn].s);var nn=new u16(an+1),cn=ln(_e[dn-1],nn,0);if(cn>e){var tn=0,hn=0,sn=cn-e,pn=1<<sn;for(gn.sort(function(Sn,Pn){return nn[Pn.s]-nn[Sn.s]||Sn.f-Pn.f});tn<un;++tn){var mn=gn[tn].s;if(nn[mn]>e)hn+=pn-(1<<cn-nn[mn]),nn[mn]=e;else break}for(hn>>>=sn;hn>0;){var yn=gn[tn].s;nn[yn]<e?hn-=1<<e-nn[yn]++-1:++tn}for(;tn>=0&&hn;--tn){var _n=gn[tn].s;nn[_n]==e&&(--nn[_n],++hn)}cn=e}return[new u8(nn),cn]},ln=function(St,e,_e){return St.s==-1?Math.max(ln(St.l,e,_e+1),ln(St.r,e,_e+1)):e[St.s]=_e},lc=function(St){for(var e=St.length;e&&!St[--e];);for(var _e=new u16(++e),tn=0,un=St[0],gn=1,vn=function(en){_e[tn++]=en},fn=1;fn<=e;++fn)if(St[fn]==un&&fn!=e)++gn;else{if(!un&&gn>2){for(;gn>138;gn-=138)vn(32754);gn>2&&(vn(gn>10?gn-11<<5|28690:gn-3<<5|12305),gn=0)}else if(gn>3){for(vn(un),--gn;gn>6;gn-=6)vn(8304);gn>2&&(vn(gn-3<<5|8208),gn=0)}for(;gn--;)vn(un);gn=1,un=St[fn]}return[_e.subarray(0,tn),e]},clen=function(St,e){for(var _e=0,tn=0;tn<e.length;++tn)_e+=St[tn]*e[tn];return _e},wfblk=function(St,e,_e){var tn=_e.length,un=shft(e+2);St[un]=tn&255,St[un+1]=tn>>>8,St[un+2]=St[un]^255,St[un+3]=St[un+1]^255;for(var gn=0;gn<tn;++gn)St[un+gn+4]=_e[gn];return(un+4+tn)*8},wblk=function(St,e,_e,tn,un,gn,vn,fn,en,on,dn){wbits(e,dn++,_e),++un[256];for(var rn=hTree(un,15),an=rn[0],nn=rn[1],cn=hTree(gn,15),hn=cn[0],sn=cn[1],pn=lc(an),mn=pn[0],yn=pn[1],_n=lc(hn),xn=_n[0],Sn=_n[1],Pn=new u16(19),Ln=0;Ln<mn.length;++Ln)Pn[mn[Ln]&31]++;for(var Ln=0;Ln<xn.length;++Ln)Pn[xn[Ln]&31]++;for(var In=hTree(Pn,7),Rn=In[0],Mn=In[1],Hn=19;Hn>4&&!Rn[clim[Hn-1]];--Hn);var Qn=on+5<<3,Kn=clen(un,flt)+clen(gn,fdt)+vn,nr=clen(un,an)+clen(gn,hn)+vn+14+3*Hn+clen(Pn,Rn)+(2*Pn[16]+3*Pn[17]+7*Pn[18]);if(Qn<=Kn&&Qn<=nr)return wfblk(e,dn,St.subarray(en,en+on));var Zn,ir,Jn,Vn;if(wbits(e,dn,1+(nr<Kn)),dn+=2,nr<Kn){Zn=hMap(an,nn,0),ir=an,Jn=hMap(hn,sn,0),Vn=hn;var Xn=hMap(Rn,Mn,0);wbits(e,dn,yn-257),wbits(e,dn+5,Sn-1),wbits(e,dn+10,Hn-4),dn+=14;for(var Ln=0;Ln<Hn;++Ln)wbits(e,dn+3*Ln,Rn[clim[Ln]]);dn+=3*Hn;for(var Yn=[mn,xn],Tn=0;Tn<2;++Tn)for(var An=Yn[Tn],Ln=0;Ln<An.length;++Ln){var wn=An[Ln]&31;wbits(e,dn,Xn[wn]),dn+=Rn[wn],wn>15&&(wbits(e,dn,An[Ln]>>>5&127),dn+=An[Ln]>>>12)}}else Zn=flm,ir=flt,Jn=fdm,Vn=fdt;for(var Ln=0;Ln<fn;++Ln)if(tn[Ln]>255){var wn=tn[Ln]>>>18&31;wbits16(e,dn,Zn[wn+257]),dn+=ir[wn+257],wn>7&&(wbits(e,dn,tn[Ln]>>>23&31),dn+=fleb[wn]);var En=tn[Ln]&31;wbits16(e,dn,Jn[En]),dn+=Vn[En],En>3&&(wbits16(e,dn,tn[Ln]>>>5&8191),dn+=fdeb[En])}else wbits16(e,dn,Zn[tn[Ln]]),dn+=ir[tn[Ln]];return wbits16(e,dn,Zn[256]),dn+ir[256]},deo=new u32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et$1=new u8(0),dflt=function(St,e,_e,tn,un,gn){var vn=St.length,fn=new u8(tn+vn+5*(1+Math.floor(vn/7e3))+un),en=fn.subarray(tn,fn.length-un),on=0;if(!e||vn<8)for(var dn=0;dn<=vn;dn+=65535){var rn=dn+65535;rn<vn?on=wfblk(en,on,St.subarray(dn,rn)):(en[dn]=gn,on=wfblk(en,on,St.subarray(dn,vn)))}else{for(var an=deo[e-1],nn=an>>>13,cn=an&8191,hn=(1<<_e)-1,sn=new u16(32768),pn=new u16(hn+1),mn=Math.ceil(_e/3),yn=2*mn,_n=function(qn){return(St[qn]^St[qn+1]<<mn^St[qn+2]<<yn)&hn},xn=new u32(25e3),Sn=new u16(288),Pn=new u16(32),Ln=0,In=0,dn=0,Rn=0,Mn=0,Hn=0;dn<vn;++dn){var Qn=_n(dn),Kn=dn&32767,nr=pn[Qn];if(sn[Kn]=nr,pn[Qn]=Kn,Mn<=dn){var Zn=vn-dn;if((Ln>7e3||Rn>24576)&&Zn>423){on=wblk(St,en,0,xn,Sn,Pn,In,Rn,Hn,dn-Hn,on),Rn=Ln=In=0,Hn=dn;for(var ir=0;ir<286;++ir)Sn[ir]=0;for(var ir=0;ir<30;++ir)Pn[ir]=0}var Jn=2,Vn=0,Xn=cn,Yn=Kn-nr&32767;if(Zn>2&&Qn==_n(dn-Yn))for(var Tn=Math.min(nn,Zn)-1,An=Math.min(32767,dn),wn=Math.min(258,Zn);Yn<=An&&--Xn&&Kn!=nr;){if(St[dn+Jn]==St[dn+Jn-Yn]){for(var En=0;En<wn&&St[dn+En]==St[dn+En-Yn];++En);if(En>Jn){if(Jn=En,Vn=Yn,En>Tn)break;for(var Nn=Math.min(Yn,En-2),Fn=0,ir=0;ir<Nn;++ir){var Un=dn-Yn+ir+32768&32767,Gn=sn[Un],er=Un-Gn+32768&32767;er>Fn&&(Fn=er,nr=Un)}}}Kn=nr,nr=sn[Kn],Yn+=Kn-nr+32768&32767}if(Vn){xn[Rn++]=268435456|revfl[Jn]<<18|revfd[Vn];var On=revfl[Jn]&31,Bn=revfd[Vn]&31;In+=fleb[On]+fdeb[Bn],++Sn[257+On],++Pn[Bn],Mn=dn+Jn,++Ln}else xn[Rn++]=St[dn],++Sn[St[dn]]}}on=wblk(St,en,gn,xn,Sn,Pn,In,Rn,Hn,dn-Hn,on),gn||(on=wfblk(en,on,et$1))}return slc(fn,0,tn+shft(on)+un)},adler=function(){var St=1,e=0;return{p:function(_e){for(var tn=St,un=e,gn=_e.length,vn=0;vn!=gn;){for(var fn=Math.min(vn+5552,gn);vn<fn;++vn)tn+=_e[vn],un+=tn;tn%=65521,un%=65521}St=tn,e=un},d:function(){return(St>>>8<<16|(e&255)<<8|e>>>8)+((St&255)<<23)*2}}},dopt=function(St,e,_e,tn,un){return dflt(St,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(St.length)))*1.5):12+e.mem,_e,tn,!un)},wbytes=function(St,e,_e){for(;_e;++e)St[e]=_e,_e>>>=8},zlh=function(St,e){var _e=e.level,tn=_e==0?0:_e<6?1:_e==9?3:2;St[0]=120,St[1]=tn<<6|(tn?32-2*tn:1)},zlv=function(St){if((St[0]&15)!=8||St[0]>>>4>7||(St[0]<<8|St[1])%31)throw"invalid zlib data";if(St[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function zlibSync(St,e){e===void 0&&(e={});var _e=adler();_e.p(St);var tn=dopt(St,e,2,4);return zlh(tn,e),wbytes(tn,tn.length-4,_e.d()),tn}function unzlibSync(St,e){return inflt((zlv(St),St.subarray(2,-4)),e)}var n=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function i(){n.console&&typeof n.console.log=="function"&&n.console.log.apply(n.console,arguments)}var a={log:i,warn:function(St){n.console&&(typeof n.console.warn=="function"?n.console.warn.apply(n.console,arguments):i.call(null,arguments))},error:function(St){n.console&&(typeof n.console.error=="function"?n.console.error.apply(n.console,arguments):i(St))}};function o(St,e,_e){var tn=new XMLHttpRequest;tn.open("GET",St),tn.responseType="blob",tn.onload=function(){l(tn.response,e,_e)},tn.onerror=function(){a.error("could not download file")},tn.send()}function s(St){var e=new XMLHttpRequest;e.open("HEAD",St,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function c(St){try{St.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),St.dispatchEvent(e)}}var u,h,l=n.saveAs||((typeof window>"u"?"undefined":_typeof(window))!=="object"||window!==n?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(St,e,_e){var tn=n.URL||n.webkitURL,un=document.createElement("a");e=e||St.name||"download",un.download=e,un.rel="noopener",typeof St=="string"?(un.href=St,un.origin!==location.origin?s(un.href)?o(St,e,_e):c(un,un.target="_blank"):c(un)):(un.href=tn.createObjectURL(St),setTimeout(function(){tn.revokeObjectURL(un.href)},4e4),setTimeout(function(){c(un)},0))}:"msSaveOrOpenBlob"in navigator?function(St,e,_e){if(e=e||St.name||"download",typeof St=="string")if(s(St))o(St,e,_e);else{var tn=document.createElement("a");tn.href=St,tn.target="_blank",setTimeout(function(){c(tn)})}else navigator.msSaveOrOpenBlob(function(un,gn){return gn===void 0?gn={autoBom:!1}:_typeof(gn)!=="object"&&(a.warn("Deprecated: Expected third argument to be a object"),gn={autoBom:!gn}),gn.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(un.type)?new Blob([String.fromCharCode(65279),un],{type:un.type}):un}(St,_e),e)}:function(St,e,_e,tn){if((tn=tn||open("","_blank"))&&(tn.document.title=tn.document.body.innerText="downloading..."),typeof St=="string")return o(St,e,_e);var un=St.type==="application/octet-stream",gn=/constructor/i.test(n.HTMLElement)||n.safari,vn=/CriOS\/[\d]+/.test(navigator.userAgent);if((vn||un&&gn)&&(typeof FileReader>"u"?"undefined":_typeof(FileReader))==="object"){var fn=new FileReader;fn.onloadend=function(){var dn=fn.result;dn=vn?dn:dn.replace(/^data:[^;]*;/,"data:attachment/file;"),tn?tn.location.href=dn:location=dn,tn=null},fn.readAsDataURL(St)}else{var en=n.URL||n.webkitURL,on=en.createObjectURL(St);tn?tn.location=on:location.href=on,tn=null,setTimeout(function(){en.revokeObjectURL(on)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function f(St){var e;St=St||"",this.ok=!1,St.charAt(0)=="#"&&(St=St.substr(1,6)),St={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[St=(St=St.replace(/ /g,"")).toLowerCase()]||St;for(var _e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(fn){return[parseInt(fn[1]),parseInt(fn[2]),parseInt(fn[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(fn){return[parseInt(fn[1],16),parseInt(fn[2],16),parseInt(fn[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(fn){return[parseInt(fn[1]+fn[1],16),parseInt(fn[2]+fn[2],16),parseInt(fn[3]+fn[3],16)]}}],tn=0;tn<_e.length;tn++){var un=_e[tn].re,gn=_e[tn].process,vn=un.exec(St);vn&&(e=gn(vn),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var fn=this.r.toString(16),en=this.g.toString(16),on=this.b.toString(16);return fn.length==1&&(fn="0"+fn),en.length==1&&(en="0"+en),on.length==1&&(on="0"+on),"#"+fn+en+on}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function d(St,e){var _e=St[0],tn=St[1],un=St[2],gn=St[3];_e=g(_e,tn,un,gn,e[0],7,-680876936),gn=g(gn,_e,tn,un,e[1],12,-389564586),un=g(un,gn,_e,tn,e[2],17,606105819),tn=g(tn,un,gn,_e,e[3],22,-1044525330),_e=g(_e,tn,un,gn,e[4],7,-176418897),gn=g(gn,_e,tn,un,e[5],12,1200080426),un=g(un,gn,_e,tn,e[6],17,-1473231341),tn=g(tn,un,gn,_e,e[7],22,-45705983),_e=g(_e,tn,un,gn,e[8],7,1770035416),gn=g(gn,_e,tn,un,e[9],12,-1958414417),un=g(un,gn,_e,tn,e[10],17,-42063),tn=g(tn,un,gn,_e,e[11],22,-1990404162),_e=g(_e,tn,un,gn,e[12],7,1804603682),gn=g(gn,_e,tn,un,e[13],12,-40341101),un=g(un,gn,_e,tn,e[14],17,-1502002290),_e=m(_e,tn=g(tn,un,gn,_e,e[15],22,1236535329),un,gn,e[1],5,-165796510),gn=m(gn,_e,tn,un,e[6],9,-1069501632),un=m(un,gn,_e,tn,e[11],14,643717713),tn=m(tn,un,gn,_e,e[0],20,-373897302),_e=m(_e,tn,un,gn,e[5],5,-701558691),gn=m(gn,_e,tn,un,e[10],9,38016083),un=m(un,gn,_e,tn,e[15],14,-660478335),tn=m(tn,un,gn,_e,e[4],20,-405537848),_e=m(_e,tn,un,gn,e[9],5,568446438),gn=m(gn,_e,tn,un,e[14],9,-1019803690),un=m(un,gn,_e,tn,e[3],14,-187363961),tn=m(tn,un,gn,_e,e[8],20,1163531501),_e=m(_e,tn,un,gn,e[13],5,-1444681467),gn=m(gn,_e,tn,un,e[2],9,-51403784),un=m(un,gn,_e,tn,e[7],14,1735328473),_e=v(_e,tn=m(tn,un,gn,_e,e[12],20,-1926607734),un,gn,e[5],4,-378558),gn=v(gn,_e,tn,un,e[8],11,-2022574463),un=v(un,gn,_e,tn,e[11],16,1839030562),tn=v(tn,un,gn,_e,e[14],23,-35309556),_e=v(_e,tn,un,gn,e[1],4,-1530992060),gn=v(gn,_e,tn,un,e[4],11,1272893353),un=v(un,gn,_e,tn,e[7],16,-155497632),tn=v(tn,un,gn,_e,e[10],23,-1094730640),_e=v(_e,tn,un,gn,e[13],4,681279174),gn=v(gn,_e,tn,un,e[0],11,-358537222),un=v(un,gn,_e,tn,e[3],16,-722521979),tn=v(tn,un,gn,_e,e[6],23,76029189),_e=v(_e,tn,un,gn,e[9],4,-640364487),gn=v(gn,_e,tn,un,e[12],11,-421815835),un=v(un,gn,_e,tn,e[15],16,530742520),_e=b(_e,tn=v(tn,un,gn,_e,e[2],23,-995338651),un,gn,e[0],6,-198630844),gn=b(gn,_e,tn,un,e[7],10,1126891415),un=b(un,gn,_e,tn,e[14],15,-1416354905),tn=b(tn,un,gn,_e,e[5],21,-57434055),_e=b(_e,tn,un,gn,e[12],6,1700485571),gn=b(gn,_e,tn,un,e[3],10,-1894986606),un=b(un,gn,_e,tn,e[10],15,-1051523),tn=b(tn,un,gn,_e,e[1],21,-2054922799),_e=b(_e,tn,un,gn,e[8],6,1873313359),gn=b(gn,_e,tn,un,e[15],10,-30611744),un=b(un,gn,_e,tn,e[6],15,-1560198380),tn=b(tn,un,gn,_e,e[13],21,1309151649),_e=b(_e,tn,un,gn,e[4],6,-145523070),gn=b(gn,_e,tn,un,e[11],10,-1120210379),un=b(un,gn,_e,tn,e[2],15,718787259),tn=b(tn,un,gn,_e,e[9],21,-343485551),St[0]=_(_e,St[0]),St[1]=_(tn,St[1]),St[2]=_(un,St[2]),St[3]=_(gn,St[3])}function p(St,e,_e,tn,un,gn){return e=_(_(e,St),_(tn,gn)),_(e<<un|e>>>32-un,_e)}function g(St,e,_e,tn,un,gn,vn){return p(e&_e|~e&tn,St,e,un,gn,vn)}function m(St,e,_e,tn,un,gn,vn){return p(e&tn|_e&~tn,St,e,un,gn,vn)}function v(St,e,_e,tn,un,gn,vn){return p(e^_e^tn,St,e,un,gn,vn)}function b(St,e,_e,tn,un,gn,vn){return p(_e^(e|~tn),St,e,un,gn,vn)}function y(St){var e,_e=St.length,tn=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=St.length;e+=64)d(tn,w(St.substring(e-64,e)));St=St.substring(e-64);var un=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<St.length;e++)un[e>>2]|=St.charCodeAt(e)<<(e%4<<3);if(un[e>>2]|=128<<(e%4<<3),e>55)for(d(tn,un),e=0;e<16;e++)un[e]=0;return un[14]=8*_e,d(tn,un),tn}function w(St){var e,_e=[];for(e=0;e<64;e+=4)_e[e>>2]=St.charCodeAt(e)+(St.charCodeAt(e+1)<<8)+(St.charCodeAt(e+2)<<16)+(St.charCodeAt(e+3)<<24);return _e}u=n.atob.bind(n),h=n.btoa.bind(n);var N="0123456789abcdef".split("");function L(St){for(var e="",_e=0;_e<4;_e++)e+=N[St>>8*_e+4&15]+N[St>>8*_e&15];return e}function A(St){return String.fromCharCode((255&St)>>0,(65280&St)>>8,(16711680&St)>>16,(4278190080&St)>>24)}function x(St){return y(St).map(A).join("")}var S=function(St){for(var e=0;e<St.length;e++)St[e]=L(St[e]);return St.join("")}(y("hello"))!="5d41402abc4b2a76b9719d911017c592";function _(St,e){if(S){var _e=(65535&St)+(65535&e);return(St>>16)+(e>>16)+(_e>>16)<<16|65535&_e}return St+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function P(St,e){var _e,tn,un,gn;if(St!==_e){for(var vn=(un=St,gn=1+(256/St.length>>0),new Array(gn+1).join(un)),fn=[],en=0;en<256;en++)fn[en]=en;var on=0;for(en=0;en<256;en++){var dn=fn[en];on=(on+dn+vn.charCodeAt(en))%256,fn[en]=fn[on],fn[on]=dn}_e=St,tn=fn}else fn=tn;var rn=e.length,an=0,nn=0,cn="";for(en=0;en<rn;en++)nn=(nn+(dn=fn[an=(an+1)%256]))%256,fn[an]=fn[nn],fn[nn]=dn,vn=fn[(fn[an]+fn[nn])%256],cn+=String.fromCharCode(e.charCodeAt(en)^vn);return cn}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var k={print:4,modify:8,copy:16,"annot-forms":32};function I(St,e,_e,tn){this.v=1,this.r=2;var un=192;St.forEach(function(fn){if(k.perm!==void 0)throw new Error("Invalid permission: "+fn);un+=k[fn]}),this.padding="(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";var gn=(e+this.padding).substr(0,32),vn=(_e+this.padding).substr(0,32);this.O=this.processOwnerPassword(gn,vn),this.P=-(1+(255^un)),this.encryptionKey=x(gn+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(tn)).substr(0,5),this.U=P(this.encryptionKey,this.padding)}function F(St){if(/[^\u0000-\u00ff]/.test(St))throw new Error("Invalid PDF Name Object: "+St+", Only accept ASCII characters.");for(var e="",_e=St.length,tn=0;tn<_e;tn++){var un=St.charCodeAt(tn);un<33||un===35||un===37||un===40||un===41||un===47||un===60||un===62||un===91||un===93||un===123||un===125||un>126?e+="#"+("0"+un.toString(16)).slice(-2):e+=St[tn]}return e}function C(St){if(_typeof(St)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(_e,tn,un){if(un=un||!1,typeof _e!="string"||typeof tn!="function"||typeof un!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(_e)||(e[_e]={});var gn=Math.random().toString(35);return e[_e][gn]=[tn,!!un],gn},this.unsubscribe=function(_e){for(var tn in e)if(e[tn][_e])return delete e[tn][_e],Object.keys(e[tn]).length===0&&delete e[tn],!0;return!1},this.publish=function(_e){if(e.hasOwnProperty(_e)){var tn=Array.prototype.slice.call(arguments,1),un=[];for(var gn in e[_e]){var vn=e[_e][gn];try{vn[0].apply(St,tn)}catch(fn){n.console&&a.error("jsPDF PubSub Error",fn.message,fn)}vn[1]&&un.push(gn)}un.length&&un.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function j(St){if(!(this instanceof j))return new j(St);var e="opacity,stroke-opacity".split(",");for(var _e in St)St.hasOwnProperty(_e)&&e.indexOf(_e)>=0&&(this[_e]=St[_e]);this.id="",this.objectNumber=-1}function O(St,e){this.gState=St,this.matrix=e,this.id="",this.objectNumber=-1}function B(St,e,_e,tn,un){if(!(this instanceof B))return new B(St,e,_e,tn,un);this.type=St==="axial"?2:3,this.coords=e,this.colors=_e,O.call(this,tn,un)}function M(St,e,_e,tn,un){if(!(this instanceof M))return new M(St,e,_e,tn,un);this.boundingBox=St,this.xStep=e,this.yStep=_e,this.stream="",this.cloneIndex=0,O.call(this,tn,un)}function E(St){var e,_e=typeof arguments[0]=="string"?arguments[0]:"p",tn=arguments[1],un=arguments[2],gn=arguments[3],vn=[],fn=1,en=16,on="S",dn=null;_typeof(St=St||{})==="object"&&(_e=St.orientation,tn=St.unit||tn,un=St.format||un,gn=St.compress||St.compressPdf||gn,(dn=St.encryption||null)!==null&&(dn.userPassword=dn.userPassword||"",dn.ownerPassword=dn.ownerPassword||"",dn.userPermissions=dn.userPermissions||[]),fn=typeof St.userUnit=="number"?Math.abs(St.userUnit):1,St.precision!==void 0&&(e=St.precision),St.floatPrecision!==void 0&&(en=St.floatPrecision),on=St.defaultPathOperation||"S"),vn=St.filters||(gn===!0?["FlateEncode"]:vn),tn=tn||"mm",_e=(""+(_e||"P")).toLowerCase();var rn=St.putOnlyUsedFonts||!1,an={},nn={internal:{},__private__:{}};nn.__private__.PubSub=C;var cn="1.3",hn=nn.__private__.getPdfVersion=function(){return cn};nn.__private__.setPdfVersion=function(kn){cn=kn};var sn={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};nn.__private__.getPageFormats=function(){return sn};var pn=nn.__private__.getPageFormat=function(kn){return sn[kn]};un=un||"a4";var mn={COMPAT:"compat",ADVANCED:"advanced"},yn=mn.COMPAT;function _n(){this.saveGraphicsState(),jn(new ns(zr,0,0,-zr,0,Ho()*zr).toString()+" cm"),this.setFontSize(this.getFontSize()/zr),on="n",yn=mn.ADVANCED}function xn(){this.restoreGraphicsState(),on="S",yn=mn.COMPAT}var Sn=nn.__private__.combineFontStyleAndFontWeight=function(kn,tr){if(kn=="bold"&&tr=="normal"||kn=="bold"&&tr==400||kn=="normal"&&tr=="italic"||kn=="bold"&&tr=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return tr&&(kn=tr==400||tr==="normal"?kn==="italic"?"italic":"normal":tr!=700&&tr!=="bold"||kn!=="normal"?(tr==700?"bold":tr)+""+kn:"bold"),kn};nn.advancedAPI=function(kn){var tr=yn===mn.COMPAT;return tr&&_n.call(this),typeof kn!="function"||(kn(this),tr&&xn.call(this)),this},nn.compatAPI=function(kn){var tr=yn===mn.ADVANCED;return tr&&xn.call(this),typeof kn!="function"||(kn(this),tr&&_n.call(this)),this},nn.isAdvancedAPI=function(){return yn===mn.ADVANCED};var Pn,Ln=function(kn){if(yn!==mn.ADVANCED)throw new Error(kn+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},In=nn.roundToPrecision=nn.__private__.roundToPrecision=function(kn,tr){var mr=e||tr;if(isNaN(kn)||isNaN(mr))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return kn.toFixed(mr).replace(/0+$/,"")};Pn=nn.hpf=nn.__private__.hpf=typeof en=="number"?function(kn){if(isNaN(kn))throw new Error("Invalid argument passed to jsPDF.hpf");return In(kn,en)}:en==="smart"?function(kn){if(isNaN(kn))throw new Error("Invalid argument passed to jsPDF.hpf");return In(kn,kn>-1&&kn<1?16:5)}:function(kn){if(isNaN(kn))throw new Error("Invalid argument passed to jsPDF.hpf");return In(kn,16)};var Rn=nn.f2=nn.__private__.f2=function(kn){if(isNaN(kn))throw new Error("Invalid argument passed to jsPDF.f2");return In(kn,2)},Mn=nn.__private__.f3=function(kn){if(isNaN(kn))throw new Error("Invalid argument passed to jsPDF.f3");return In(kn,3)},Hn=nn.scale=nn.__private__.scale=function(kn){if(isNaN(kn))throw new Error("Invalid argument passed to jsPDF.scale");return yn===mn.COMPAT?kn*zr:yn===mn.ADVANCED?kn:void 0},Qn=function(kn){return yn===mn.COMPAT?Ho()-kn:yn===mn.ADVANCED?kn:void 0},Kn=function(kn){return Hn(Qn(kn))};nn.__private__.setPrecision=nn.setPrecision=function(kn){typeof parseInt(kn,10)=="number"&&(e=parseInt(kn,10))};var nr,Zn="00000000000000000000000000000000",ir=nn.__private__.getFileId=function(){return Zn},Jn=nn.__private__.setFileId=function(kn){return Zn=kn!==void 0&&/^[a-fA-F0-9]{32}$/.test(kn)?kn.toUpperCase():Zn.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),dn!==null&&(na=new I(dn.userPermissions,dn.userPassword,dn.ownerPassword,Zn)),Zn};nn.setFileId=function(kn){return Jn(kn),this},nn.getFileId=function(){return ir()};var Vn=nn.__private__.convertDateToPDFDate=function(kn){var tr=kn.getTimezoneOffset(),mr=tr<0?"+":"-",wr=Math.floor(Math.abs(tr/60)),Pr=Math.abs(tr%60),Nr=[mr,wn(wr),"'",wn(Pr),"'"].join("");return["D:",kn.getFullYear(),wn(kn.getMonth()+1),wn(kn.getDate()),wn(kn.getHours()),wn(kn.getMinutes()),wn(kn.getSeconds()),Nr].join("")},Xn=nn.__private__.convertPDFDateToDate=function(kn){var tr=parseInt(kn.substr(2,4),10),mr=parseInt(kn.substr(6,2),10)-1,wr=parseInt(kn.substr(8,2),10),Pr=parseInt(kn.substr(10,2),10),Nr=parseInt(kn.substr(12,2),10),Vr=parseInt(kn.substr(14,2),10);return new Date(tr,mr,wr,Pr,Nr,Vr,0)},Yn=nn.__private__.setCreationDate=function(kn){var tr;if(kn===void 0&&(kn=new Date),kn instanceof Date)tr=Vn(kn);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(kn))throw new Error("Invalid argument passed to jsPDF.setCreationDate");tr=kn}return nr=tr},Tn=nn.__private__.getCreationDate=function(kn){var tr=nr;return kn==="jsDate"&&(tr=Xn(nr)),tr};nn.setCreationDate=function(kn){return Yn(kn),this},nn.getCreationDate=function(kn){return Tn(kn)};var An,wn=nn.__private__.padd2=function(kn){return("0"+parseInt(kn)).slice(-2)},En=nn.__private__.padd2Hex=function(kn){return("00"+(kn=kn.toString())).substr(kn.length)},Nn=0,Fn=[],Un=[],Gn=0,er=[],On=[],Bn=!1,$n=Un,qn=function(){Nn=0,Gn=0,Un=[],Fn=[],er=[],Ls=Ts(),Rs=Ts()};nn.__private__.setCustomOutputDestination=function(kn){Bn=!0,$n=kn};var zn=function(kn){Bn||($n=kn)};nn.__private__.resetCustomOutputDestination=function(){Bn=!1,$n=Un};var jn=nn.__private__.out=function(kn){return kn=kn.toString(),Gn+=kn.length+1,$n.push(kn),$n},ur=nn.__private__.write=function(kn){return jn(arguments.length===1?kn.toString():Array.prototype.join.call(arguments," "))},gr=nn.__private__.getArrayBuffer=function(kn){for(var tr=kn.length,mr=new ArrayBuffer(tr),wr=new Uint8Array(mr);tr--;)wr[tr]=kn.charCodeAt(tr);return mr},ar=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];nn.__private__.getStandardFonts=function(){return ar};var vr=St.fontSize||16;nn.__private__.setFontSize=nn.setFontSize=function(kn){return vr=yn===mn.ADVANCED?kn/zr:kn,this};var dr,hr=nn.__private__.getFontSize=nn.getFontSize=function(){return yn===mn.COMPAT?vr:vr*zr},_r=St.R2L||!1;nn.__private__.setR2L=nn.setR2L=function(kn){return _r=kn,this},nn.__private__.getR2L=nn.getR2L=function(){return _r};var or,Er=nn.__private__.setZoomMode=function(kn){var tr=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(kn))dr=kn;else if(isNaN(kn)){if(tr.indexOf(kn)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+kn+'" is not recognized.');dr=kn}else dr=parseInt(kn,10)};nn.__private__.getZoomMode=function(){return dr};var Dr,Rr=nn.__private__.setPageMode=function(kn){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(kn)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+kn+'" is not recognized.');or=kn};nn.__private__.getPageMode=function(){return or};var Gr=nn.__private__.setLayoutMode=function(kn){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(kn)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+kn+'" is not recognized.');Dr=kn};nn.__private__.getLayoutMode=function(){return Dr},nn.__private__.setDisplayMode=nn.setDisplayMode=function(kn,tr,mr){return Er(kn),Gr(tr),Rr(mr),this};var Ir={title:"",subject:"",author:"",keywords:"",creator:""};nn.__private__.getDocumentProperty=function(kn){if(Object.keys(Ir).indexOf(kn)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ir[kn]},nn.__private__.getDocumentProperties=function(){return Ir},nn.__private__.setDocumentProperties=nn.setProperties=nn.setDocumentProperties=function(kn){for(var tr in Ir)Ir.hasOwnProperty(tr)&&kn[tr]&&(Ir[tr]=kn[tr]);return this},nn.__private__.setDocumentProperty=function(kn,tr){if(Object.keys(Ir).indexOf(kn)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ir[kn]=tr};var ts,zr,ws,es,ps,ys={},Or={},Wr=[],xr={},br={},yr={},qr={},Yr=null,Jr=0,Xr=[],as=new C(nn),ks=St.hotfixes||[],us={},ls={},As=[],ns=function kn(tr,mr,wr,Pr,Nr,Vr){if(!(this instanceof kn))return new kn(tr,mr,wr,Pr,Nr,Vr);isNaN(tr)&&(tr=1),isNaN(mr)&&(mr=0),isNaN(wr)&&(wr=0),isNaN(Pr)&&(Pr=1),isNaN(Nr)&&(Nr=0),isNaN(Vr)&&(Vr=0),this._matrix=[tr,mr,wr,Pr,Nr,Vr]};Object.defineProperty(ns.prototype,"sx",{get:function(){return this._matrix[0]},set:function(kn){this._matrix[0]=kn}}),Object.defineProperty(ns.prototype,"shy",{get:function(){return this._matrix[1]},set:function(kn){this._matrix[1]=kn}}),Object.defineProperty(ns.prototype,"shx",{get:function(){return this._matrix[2]},set:function(kn){this._matrix[2]=kn}}),Object.defineProperty(ns.prototype,"sy",{get:function(){return this._matrix[3]},set:function(kn){this._matrix[3]=kn}}),Object.defineProperty(ns.prototype,"tx",{get:function(){return this._matrix[4]},set:function(kn){this._matrix[4]=kn}}),Object.defineProperty(ns.prototype,"ty",{get:function(){return this._matrix[5]},set:function(kn){this._matrix[5]=kn}}),Object.defineProperty(ns.prototype,"a",{get:function(){return this._matrix[0]},set:function(kn){this._matrix[0]=kn}}),Object.defineProperty(ns.prototype,"b",{get:function(){return this._matrix[1]},set:function(kn){this._matrix[1]=kn}}),Object.defineProperty(ns.prototype,"c",{get:function(){return this._matrix[2]},set:function(kn){this._matrix[2]=kn}}),Object.defineProperty(ns.prototype,"d",{get:function(){return this._matrix[3]},set:function(kn){this._matrix[3]=kn}}),Object.defineProperty(ns.prototype,"e",{get:function(){return this._matrix[4]},set:function(kn){this._matrix[4]=kn}}),Object.defineProperty(ns.prototype,"f",{get:function(){return this._matrix[5]},set:function(kn){this._matrix[5]=kn}}),Object.defineProperty(ns.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ns.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ns.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ns.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ns.prototype.join=function(kn){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Pn).join(kn)},ns.prototype.multiply=function(kn){var tr=kn.sx*this.sx+kn.shy*this.shx,mr=kn.sx*this.shy+kn.shy*this.sy,wr=kn.shx*this.sx+kn.sy*this.shx,Pr=kn.shx*this.shy+kn.sy*this.sy,Nr=kn.tx*this.sx+kn.ty*this.shx+this.tx,Vr=kn.tx*this.shy+kn.ty*this.sy+this.ty;return new ns(tr,mr,wr,Pr,Nr,Vr)},ns.prototype.decompose=function(){var kn=this.sx,tr=this.shy,mr=this.shx,wr=this.sy,Pr=this.tx,Nr=this.ty,Vr=Math.sqrt(kn*kn+tr*tr),rs=(kn/=Vr)*mr+(tr/=Vr)*wr;mr-=kn*rs,wr-=tr*rs;var os=Math.sqrt(mr*mr+wr*wr);return rs/=os,kn*(wr/=os)<tr*(mr/=os)&&(kn=-kn,tr=-tr,rs=-rs,Vr=-Vr),{scale:new ns(Vr,0,0,os,0,0),translate:new ns(1,0,0,1,Pr,Nr),rotate:new ns(kn,tr,-tr,kn,0,0),skew:new ns(1,0,rs,1,0,0)}},ns.prototype.toString=function(kn){return this.join(" ")},ns.prototype.inversed=function(){var kn=this.sx,tr=this.shy,mr=this.shx,wr=this.sy,Pr=this.tx,Nr=this.ty,Vr=1/(kn*wr-tr*mr),rs=wr*Vr,os=-tr*Vr,fs=-mr*Vr,ms=kn*Vr;return new ns(rs,os,fs,ms,-rs*Pr-fs*Nr,-os*Pr-ms*Nr)},ns.prototype.applyToPoint=function(kn){var tr=kn.x*this.sx+kn.y*this.shx+this.tx,mr=kn.x*this.shy+kn.y*this.sy+this.ty;return new Vl(tr,mr)},ns.prototype.applyToRectangle=function(kn){var tr=this.applyToPoint(kn),mr=this.applyToPoint(new Vl(kn.x+kn.w,kn.y+kn.h));return new yu(tr.x,tr.y,mr.x-tr.x,mr.y-tr.y)},ns.prototype.clone=function(){var kn=this.sx,tr=this.shy,mr=this.shx,wr=this.sy,Pr=this.tx,Nr=this.ty;return new ns(kn,tr,mr,wr,Pr,Nr)},nn.Matrix=ns;var Fs=nn.matrixMult=function(kn,tr){return tr.multiply(kn)},gs=new ns(1,0,0,1,0,0);nn.unitMatrix=nn.identityMatrix=gs;var bs=function(kn,tr){if(!br[kn]){var mr=(tr instanceof B?"Sh":"P")+(Object.keys(xr).length+1).toString(10);tr.id=mr,br[kn]=mr,xr[mr]=tr,as.publish("addPattern",tr)}};nn.ShadingPattern=B,nn.TilingPattern=M,nn.addShadingPattern=function(kn,tr){return Ln("addShadingPattern()"),bs(kn,tr),this},nn.beginTilingPattern=function(kn){Ln("beginTilingPattern()"),tp(kn.boundingBox[0],kn.boundingBox[1],kn.boundingBox[2]-kn.boundingBox[0],kn.boundingBox[3]-kn.boundingBox[1],kn.matrix)},nn.endTilingPattern=function(kn,tr){Ln("endTilingPattern()"),tr.stream=On[An].join(`
`),bs(kn,tr),as.publish("endTilingPattern",tr),As.pop().restore()};var Ss=nn.__private__.newObject=function(){var kn=Ts();return js(kn,!0),kn},Ts=nn.__private__.newObjectDeferred=function(){return Nn++,Fn[Nn]=function(){return Gn},Nn},js=function(kn,tr){return tr=typeof tr=="boolean"&&tr,Fn[kn]=Gn,tr&&jn(kn+" 0 obj"),kn},Qs=nn.__private__.newAdditionalObject=function(){var kn={objId:Ts(),content:""};return er.push(kn),kn},Ls=Ts(),Rs=Ts(),Gs=nn.__private__.decodeColorString=function(kn){var tr=kn.split(" ");if(tr.length!==2||tr[1]!=="g"&&tr[1]!=="G")tr.length===5&&(tr[4]==="k"||tr[4]==="K")&&(tr=[(1-tr[0])*(1-tr[3]),(1-tr[1])*(1-tr[3]),(1-tr[2])*(1-tr[3]),"r"]);else{var mr=parseFloat(tr[0]);tr=[mr,mr,mr,"r"]}for(var wr="#",Pr=0;Pr<3;Pr++)wr+=("0"+Math.floor(255*parseFloat(tr[Pr])).toString(16)).slice(-2);return wr},go=nn.__private__.encodeColorString=function(kn){var tr;typeof kn=="string"&&(kn={ch1:kn});var mr=kn.ch1,wr=kn.ch2,Pr=kn.ch3,Nr=kn.ch4,Vr=kn.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof mr=="string"&&mr.charAt(0)!=="#"){var rs=new f(mr);if(rs.ok)mr=rs.toHex();else if(!/^\d*\.?\d*$/.test(mr))throw new Error('Invalid color "'+mr+'" passed to jsPDF.encodeColorString.')}if(typeof mr=="string"&&/^#[0-9A-Fa-f]{3}$/.test(mr)&&(mr="#"+mr[1]+mr[1]+mr[2]+mr[2]+mr[3]+mr[3]),typeof mr=="string"&&/^#[0-9A-Fa-f]{6}$/.test(mr)){var os=parseInt(mr.substr(1),16);mr=os>>16&255,wr=os>>8&255,Pr=255&os}if(wr===void 0||Nr===void 0&&mr===wr&&wr===Pr)if(typeof mr=="string")tr=mr+" "+Vr[0];else switch(kn.precision){case 2:tr=Rn(mr/255)+" "+Vr[0];break;case 3:default:tr=Mn(mr/255)+" "+Vr[0]}else if(Nr===void 0||_typeof(Nr)==="object"){if(Nr&&!isNaN(Nr.a)&&Nr.a===0)return tr=["1.","1.","1.",Vr[1]].join(" ");if(typeof mr=="string")tr=[mr,wr,Pr,Vr[1]].join(" ");else switch(kn.precision){case 2:tr=[Rn(mr/255),Rn(wr/255),Rn(Pr/255),Vr[1]].join(" ");break;default:case 3:tr=[Mn(mr/255),Mn(wr/255),Mn(Pr/255),Vr[1]].join(" ")}}else if(typeof mr=="string")tr=[mr,wr,Pr,Nr,Vr[2]].join(" ");else switch(kn.precision){case 2:tr=[Rn(mr),Rn(wr),Rn(Pr),Rn(Nr),Vr[2]].join(" ");break;case 3:default:tr=[Mn(mr),Mn(wr),Mn(Pr),Mn(Nr),Vr[2]].join(" ")}return tr},Ao=nn.__private__.getFilters=function(){return vn},lo=nn.__private__.putStream=function(kn){var tr=(kn=kn||{}).data||"",mr=kn.filters||Ao(),wr=kn.alreadyAppliedFilters||[],Pr=kn.addLength1||!1,Nr=tr.length,Vr=kn.objectId,rs=function(ga){return ga};if(dn!==null&&Vr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");dn!==null&&(rs=na.encryptor(Vr,0));var os={};mr===!0&&(mr=["FlateEncode"]);var fs=kn.additionalKeyValues||[],ms=(os=E.API.processDataByFilters!==void 0?E.API.processDataByFilters(tr,mr):{data:tr,reverseChain:[]}).reverseChain+(Array.isArray(wr)?wr.join(" "):wr.toString());if(os.data.length!==0&&(fs.push({key:"Length",value:os.data.length}),Pr===!0&&fs.push({key:"Length1",value:Nr})),ms.length!=0)if(ms.split("/").length-1==1)fs.push({key:"Filter",value:ms});else{fs.push({key:"Filter",value:"["+ms+"]"});for(var _s=0;_s<fs.length;_s+=1)if(fs[_s].key==="DecodeParms"){for(var Is=[],Bs=0;Bs<os.reverseChain.split("/").length-1;Bs+=1)Is.push("null");Is.push(fs[_s].value),fs[_s].value="["+Is.join(" ")+"]"}}jn("<<");for(var Hs=0;Hs<fs.length;Hs++)jn("/"+fs[Hs].key+" "+fs[Hs].value);jn(">>"),os.data.length!==0&&(jn("stream"),jn(rs(os.data)),jn("endstream"))},To=nn.__private__.putPage=function(kn){var tr=kn.number,mr=kn.data,wr=kn.objId,Pr=kn.contentsObjId;js(wr,!0),jn("<</Type /Page"),jn("/Parent "+kn.rootDictionaryObjId+" 0 R"),jn("/Resources "+kn.resourceDictionaryObjId+" 0 R"),jn("/MediaBox ["+parseFloat(Pn(kn.mediaBox.bottomLeftX))+" "+parseFloat(Pn(kn.mediaBox.bottomLeftY))+" "+Pn(kn.mediaBox.topRightX)+" "+Pn(kn.mediaBox.topRightY)+"]"),kn.cropBox!==null&&jn("/CropBox ["+Pn(kn.cropBox.bottomLeftX)+" "+Pn(kn.cropBox.bottomLeftY)+" "+Pn(kn.cropBox.topRightX)+" "+Pn(kn.cropBox.topRightY)+"]"),kn.bleedBox!==null&&jn("/BleedBox ["+Pn(kn.bleedBox.bottomLeftX)+" "+Pn(kn.bleedBox.bottomLeftY)+" "+Pn(kn.bleedBox.topRightX)+" "+Pn(kn.bleedBox.topRightY)+"]"),kn.trimBox!==null&&jn("/TrimBox ["+Pn(kn.trimBox.bottomLeftX)+" "+Pn(kn.trimBox.bottomLeftY)+" "+Pn(kn.trimBox.topRightX)+" "+Pn(kn.trimBox.topRightY)+"]"),kn.artBox!==null&&jn("/ArtBox ["+Pn(kn.artBox.bottomLeftX)+" "+Pn(kn.artBox.bottomLeftY)+" "+Pn(kn.artBox.topRightX)+" "+Pn(kn.artBox.topRightY)+"]"),typeof kn.userUnit=="number"&&kn.userUnit!==1&&jn("/UserUnit "+kn.userUnit),as.publish("putPage",{objId:wr,pageContext:Xr[tr],pageNumber:tr,page:mr}),jn("/Contents "+Pr+" 0 R"),jn(">>"),jn("endobj");var Nr=mr.join(`
`);return yn===mn.ADVANCED&&(Nr+=`
Q`),js(Pr,!0),lo({data:Nr,filters:Ao(),objectId:Pr}),jn("endobj"),wr},Sl=nn.__private__.putPages=function(){var kn,tr,mr=[];for(kn=1;kn<=Jr;kn++)Xr[kn].objId=Ts(),Xr[kn].contentsObjId=Ts();for(kn=1;kn<=Jr;kn++)mr.push(To({number:kn,data:On[kn],objId:Xr[kn].objId,contentsObjId:Xr[kn].contentsObjId,mediaBox:Xr[kn].mediaBox,cropBox:Xr[kn].cropBox,bleedBox:Xr[kn].bleedBox,trimBox:Xr[kn].trimBox,artBox:Xr[kn].artBox,userUnit:Xr[kn].userUnit,rootDictionaryObjId:Ls,resourceDictionaryObjId:Rs}));js(Ls,!0),jn("<</Type /Pages");var wr="/Kids [";for(tr=0;tr<Jr;tr++)wr+=mr[tr]+" 0 R ";jn(wr+"]"),jn("/Count "+Jr),jn(">>"),jn("endobj"),as.publish("postPutPages")},Fl=function(kn){as.publish("putFont",{font:kn,out:jn,newObject:Ss,putStream:lo}),kn.isAlreadyPutted!==!0&&(kn.objectNumber=Ss(),jn("<<"),jn("/Type /Font"),jn("/BaseFont /"+F(kn.postScriptName)),jn("/Subtype /Type1"),typeof kn.encoding=="string"&&jn("/Encoding /"+kn.encoding),jn("/FirstChar 32"),jn("/LastChar 255"),jn(">>"),jn("endobj"))},Nl=function(){for(var kn in ys)ys.hasOwnProperty(kn)&&(rn===!1||rn===!0&&an.hasOwnProperty(kn))&&Fl(ys[kn])},Dl=function(kn){kn.objectNumber=Ss();var tr=[];tr.push({key:"Type",value:"/XObject"}),tr.push({key:"Subtype",value:"/Form"}),tr.push({key:"BBox",value:"["+[Pn(kn.x),Pn(kn.y),Pn(kn.x+kn.width),Pn(kn.y+kn.height)].join(" ")+"]"}),tr.push({key:"Matrix",value:"["+kn.matrix.toString()+"]"});var mr=kn.pages[1].join(`
`);lo({data:mr,additionalKeyValues:tr,objectId:kn.objectNumber}),jn("endobj")},Ml=function(){for(var kn in us)us.hasOwnProperty(kn)&&Dl(us[kn])},Bu=function(kn,tr){var mr,wr=[],Pr=1/(tr-1);for(mr=0;mr<1;mr+=Pr)wr.push(mr);if(wr.push(1),kn[0].offset!=0){var Nr={offset:0,color:kn[0].color};kn.unshift(Nr)}if(kn[kn.length-1].offset!=1){var Vr={offset:1,color:kn[kn.length-1].color};kn.push(Vr)}for(var rs="",os=0,fs=0;fs<wr.length;fs++){for(mr=wr[fs];mr>kn[os+1].offset;)os++;var ms=kn[os].offset,_s=(mr-ms)/(kn[os+1].offset-ms),Is=kn[os].color,Bs=kn[os+1].color;rs+=En(Math.round((1-_s)*Is[0]+_s*Bs[0]).toString(16))+En(Math.round((1-_s)*Is[1]+_s*Bs[1]).toString(16))+En(Math.round((1-_s)*Is[2]+_s*Bs[2]).toString(16))}return rs.trim()},Pp=function(kn,tr){tr||(tr=21);var mr=Ss(),wr=Bu(kn.colors,tr),Pr=[];Pr.push({key:"FunctionType",value:"0"}),Pr.push({key:"Domain",value:"[0.0 1.0]"}),Pr.push({key:"Size",value:"["+tr+"]"}),Pr.push({key:"BitsPerSample",value:"8"}),Pr.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Pr.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),lo({data:wr,additionalKeyValues:Pr,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:mr}),jn("endobj"),kn.objectNumber=Ss(),jn("<< /ShadingType "+kn.type),jn("/ColorSpace /DeviceRGB");var Nr="/Coords ["+Pn(parseFloat(kn.coords[0]))+" "+Pn(parseFloat(kn.coords[1]))+" ";kn.type===2?Nr+=Pn(parseFloat(kn.coords[2]))+" "+Pn(parseFloat(kn.coords[3])):Nr+=Pn(parseFloat(kn.coords[2]))+" "+Pn(parseFloat(kn.coords[3]))+" "+Pn(parseFloat(kn.coords[4]))+" "+Pn(parseFloat(kn.coords[5])),jn(Nr+="]"),kn.matrix&&jn("/Matrix ["+kn.matrix.toString()+"]"),jn("/Function "+mr+" 0 R"),jn("/Extend [true true]"),jn(">>"),jn("endobj")},kp=function(kn,tr){var mr=Ts(),wr=Ss();tr.push({resourcesOid:mr,objectOid:wr}),kn.objectNumber=wr;var Pr=[];Pr.push({key:"Type",value:"/Pattern"}),Pr.push({key:"PatternType",value:"1"}),Pr.push({key:"PaintType",value:"1"}),Pr.push({key:"TilingType",value:"1"}),Pr.push({key:"BBox",value:"["+kn.boundingBox.map(Pn).join(" ")+"]"}),Pr.push({key:"XStep",value:Pn(kn.xStep)}),Pr.push({key:"YStep",value:Pn(kn.yStep)}),Pr.push({key:"Resources",value:mr+" 0 R"}),kn.matrix&&Pr.push({key:"Matrix",value:"["+kn.matrix.toString()+"]"}),lo({data:kn.stream,additionalKeyValues:Pr,objectId:kn.objectNumber}),jn("endobj")},Rl=function(kn){var tr;for(tr in xr)xr.hasOwnProperty(tr)&&(xr[tr]instanceof B?Pp(xr[tr]):xr[tr]instanceof M&&kp(xr[tr],kn))},$u=function(kn){for(var tr in kn.objectNumber=Ss(),jn("<<"),kn)switch(tr){case"opacity":jn("/ca "+Rn(kn[tr]));break;case"stroke-opacity":jn("/CA "+Rn(kn[tr]))}jn(">>"),jn("endobj")},Lp=function(){var kn;for(kn in yr)yr.hasOwnProperty(kn)&&$u(yr[kn])},lu=function(){for(var kn in jn("/XObject <<"),us)us.hasOwnProperty(kn)&&us[kn].objectNumber>=0&&jn("/"+kn+" "+us[kn].objectNumber+" 0 R");as.publish("putXobjectDict"),jn(">>")},Op=function(){na.oid=Ss(),jn("<<"),jn("/Filter /Standard"),jn("/V "+na.v),jn("/R "+na.r),jn("/U <"+na.toHexString(na.U)+">"),jn("/O <"+na.toHexString(na.O)+">"),jn("/P "+na.P),jn(">>"),jn("endobj")},Uu=function(){for(var kn in jn("/Font <<"),ys)ys.hasOwnProperty(kn)&&(rn===!1||rn===!0&&an.hasOwnProperty(kn))&&jn("/"+kn+" "+ys[kn].objectNumber+" 0 R");jn(">>")},Fp=function(){if(Object.keys(xr).length>0){for(var kn in jn("/Shading <<"),xr)xr.hasOwnProperty(kn)&&xr[kn]instanceof B&&xr[kn].objectNumber>=0&&jn("/"+kn+" "+xr[kn].objectNumber+" 0 R");as.publish("putShadingPatternDict"),jn(">>")}},Il=function(kn){if(Object.keys(xr).length>0){for(var tr in jn("/Pattern <<"),xr)xr.hasOwnProperty(tr)&&xr[tr]instanceof nn.TilingPattern&&xr[tr].objectNumber>=0&&xr[tr].objectNumber<kn&&jn("/"+tr+" "+xr[tr].objectNumber+" 0 R");as.publish("putTilingPatternDict"),jn(">>")}},Np=function(){if(Object.keys(yr).length>0){var kn;for(kn in jn("/ExtGState <<"),yr)yr.hasOwnProperty(kn)&&yr[kn].objectNumber>=0&&jn("/"+kn+" "+yr[kn].objectNumber+" 0 R");as.publish("putGStateDict"),jn(">>")}},Us=function(kn){js(kn.resourcesOid,!0),jn("<<"),jn("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Uu(),Fp(),Il(kn.objectOid),Np(),lu(),jn(">>"),jn("endobj")},zu=function(){var kn=[];Nl(),Lp(),Ml(),Rl(kn),as.publish("putResources"),kn.forEach(Us),Us({resourcesOid:Rs,objectOid:Number.MAX_SAFE_INTEGER}),as.publish("postPutResources")},Wu=function(){as.publish("putAdditionalObjects");for(var kn=0;kn<er.length;kn++){var tr=er[kn];js(tr.objId,!0),jn(tr.content),jn("endobj")}as.publish("postPutAdditionalObjects")},Hu=function(kn){Or[kn.fontName]=Or[kn.fontName]||{},Or[kn.fontName][kn.fontStyle]=kn.id},cu=function(kn,tr,mr,wr,Pr){var Nr={id:"F"+(Object.keys(ys).length+1).toString(10),postScriptName:kn,fontName:tr,fontStyle:mr,encoding:wr,isStandardFont:Pr||!1,metadata:{}};return as.publish("addFont",{font:Nr,instance:this}),ys[Nr.id]=Nr,Hu(Nr),Nr.id},Dp=function(kn){for(var tr=0,mr=ar.length;tr<mr;tr++){var wr=cu.call(this,kn[tr][0],kn[tr][1],kn[tr][2],ar[tr][3],!0);rn===!1&&(an[wr]=!0);var Pr=kn[tr][0].split("-");Hu({id:wr,fontName:Pr[0],fontStyle:Pr[1]||""})}as.publish("addFonts",{fonts:ys,dictionary:Or})},mo=function(kn){return kn.foo=function(){try{return kn.apply(this,arguments)}catch(wr){var tr=wr.stack||"";~tr.indexOf(" at ")&&(tr=tr.split(" at ")[1]);var mr="Error in function "+tr.split(`
`)[0].split("<")[0]+": "+wr.message;if(!n.console)throw new Error(mr);n.console.error(mr,wr),n.alert&&alert(mr)}},kn.foo.bar=kn,kn.foo},Bl=function(kn,tr){var mr,wr,Pr,Nr,Vr,rs,os,fs,ms;if(Pr=(tr=tr||{}).sourceEncoding||"Unicode",Vr=tr.outputEncoding,(tr.autoencode||Vr)&&ys[ts].metadata&&ys[ts].metadata[Pr]&&ys[ts].metadata[Pr].encoding&&(Nr=ys[ts].metadata[Pr].encoding,!Vr&&ys[ts].encoding&&(Vr=ys[ts].encoding),!Vr&&Nr.codePages&&(Vr=Nr.codePages[0]),typeof Vr=="string"&&(Vr=Nr[Vr]),Vr)){for(os=!1,rs=[],mr=0,wr=kn.length;mr<wr;mr++)(fs=Vr[kn.charCodeAt(mr)])?rs.push(String.fromCharCode(fs)):rs.push(kn[mr]),rs[mr].charCodeAt(0)>>8&&(os=!0);kn=rs.join("")}for(mr=kn.length;os===void 0&&mr!==0;)kn.charCodeAt(mr-1)>>8&&(os=!0),mr--;if(!os)return kn;for(rs=tr.noBOM?[]:[254,255],mr=0,wr=kn.length;mr<wr;mr++){if((ms=(fs=kn.charCodeAt(mr))>>8)>>8)throw new Error("Character at position "+mr+" of string '"+kn+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");rs.push(ms),rs.push(fs-(ms<<8))}return String.fromCharCode.apply(void 0,rs)},xa=nn.__private__.pdfEscape=nn.pdfEscape=function(kn,tr){return Bl(kn,tr).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},uu=nn.__private__.beginPage=function(kn){On[++Jr]=[],Xr[Jr]={objId:0,contentsObjId:0,userUnit:Number(fn),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(kn[0]),topRightY:Number(kn[1])}},Vu(Jr),zn(On[An])},qu=function(kn,tr){var mr,wr,Pr;switch(_e=tr||_e,typeof kn=="string"&&(mr=pn(kn.toLowerCase()),Array.isArray(mr)&&(wr=mr[0],Pr=mr[1])),Array.isArray(kn)&&(wr=kn[0]*zr,Pr=kn[1]*zr),isNaN(wr)&&(wr=un[0],Pr=un[1]),(wr>14400||Pr>14400)&&(a.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),wr=Math.min(14400,wr),Pr=Math.min(14400,Pr)),un=[wr,Pr],_e.substr(0,1)){case"l":Pr>wr&&(un=[Pr,wr]);break;case"p":wr>Pr&&(un=[Pr,wr])}uu(un),Qu(pu),jn(vo),mu!==0&&jn(mu+" J"),vu!==0&&jn(vu+" j"),as.publish("addPage",{pageNumber:Jr})},Mp=function(kn){kn>0&&kn<=Jr&&(On.splice(kn,1),Xr.splice(kn,1),Jr--,An>Jr&&(An=Jr),this.setPage(An))},Vu=function(kn){kn>0&&kn<=Jr&&(An=kn)},Rp=nn.__private__.getNumberOfPages=nn.getNumberOfPages=function(){return On.length-1},Xu=function(kn,tr,mr){var wr,Pr=void 0;return mr=mr||{},kn=kn!==void 0?kn:ys[ts].fontName,tr=tr!==void 0?tr:ys[ts].fontStyle,wr=kn.toLowerCase(),Or[wr]!==void 0&&Or[wr][tr]!==void 0?Pr=Or[wr][tr]:Or[kn]!==void 0&&Or[kn][tr]!==void 0?Pr=Or[kn][tr]:mr.disableWarning===!1&&a.warn("Unable to look up font label for font '"+kn+"', '"+tr+"'. Refer to getFontList() for available fonts."),Pr||mr.noFallback||(Pr=Or.times[tr])==null&&(Pr=Or.times.normal),Pr},Ip=nn.__private__.putInfo=function(){var kn=Ss(),tr=function(wr){return wr};for(var mr in dn!==null&&(tr=na.encryptor(kn,0)),jn("<<"),jn("/Producer ("+xa(tr("jsPDF "+E.version))+")"),Ir)Ir.hasOwnProperty(mr)&&Ir[mr]&&jn("/"+mr.substr(0,1).toUpperCase()+mr.substr(1)+" ("+xa(tr(Ir[mr]))+")");jn("/CreationDate ("+xa(tr(nr))+")"),jn(">>"),jn("endobj")},hu=nn.__private__.putCatalog=function(kn){var tr=(kn=kn||{}).rootDictionaryObjId||Ls;switch(Ss(),jn("<<"),jn("/Type /Catalog"),jn("/Pages "+tr+" 0 R"),dr||(dr="fullwidth"),dr){case"fullwidth":jn("/OpenAction [3 0 R /FitH null]");break;case"fullheight":jn("/OpenAction [3 0 R /FitV null]");break;case"fullpage":jn("/OpenAction [3 0 R /Fit]");break;case"original":jn("/OpenAction [3 0 R /XYZ null null 1]");break;default:var mr=""+dr;mr.substr(mr.length-1)==="%"&&(dr=parseInt(dr)/100),typeof dr=="number"&&jn("/OpenAction [3 0 R /XYZ null null "+Rn(dr)+"]")}switch(Dr||(Dr="continuous"),Dr){case"continuous":jn("/PageLayout /OneColumn");break;case"single":jn("/PageLayout /SinglePage");break;case"two":case"twoleft":jn("/PageLayout /TwoColumnLeft");break;case"tworight":jn("/PageLayout /TwoColumnRight")}or&&jn("/PageMode /"+or),as.publish("putCatalog"),jn(">>"),jn("endobj")},jp=nn.__private__.putTrailer=function(){jn("trailer"),jn("<<"),jn("/Size "+(Nn+1)),jn("/Root "+Nn+" 0 R"),jn("/Info "+(Nn-1)+" 0 R"),dn!==null&&jn("/Encrypt "+na.oid+" 0 R"),jn("/ID [ <"+Zn+"> <"+Zn+"> ]"),jn(">>")},Bp=nn.__private__.putHeader=function(){jn("%PDF-"+cn),jn("%\xBA\xDF\xAC\xE0")},$p=nn.__private__.putXRef=function(){var kn="0000000000";jn("xref"),jn("0 "+(Nn+1)),jn("0000000000 65535 f ");for(var tr=1;tr<=Nn;tr++)typeof Fn[tr]=="function"?jn((kn+Fn[tr]()).slice(-10)+" 00000 n "):Fn[tr]!==void 0?jn((kn+Fn[tr]).slice(-10)+" 00000 n "):jn("0000000000 00000 n ")},Oo=nn.__private__.buildDocument=function(){qn(),zn(Un),as.publish("buildDocument"),Bp(),Sl(),Wu(),zu(),dn!==null&&Op(),Ip(),hu();var kn=Gn;return $p(),jp(),jn("startxref"),jn(""+kn),jn("%%EOF"),zn(On[An]),Un.join(`
`)},$l=nn.__private__.getBlob=function(kn){return new Blob([gr(kn)],{type:"application/pdf"})},Ul=nn.output=nn.__private__.output=mo(function(kn,tr){switch(typeof(tr=tr||{})=="string"?tr={filename:tr}:tr.filename=tr.filename||"generated.pdf",kn){case void 0:return Oo();case"save":nn.save(tr.filename);break;case"arraybuffer":return gr(Oo());case"blob":return $l(Oo());case"bloburi":case"bloburl":if(n.URL!==void 0&&typeof n.URL.createObjectURL=="function")return n.URL&&n.URL.createObjectURL($l(Oo()))||void 0;a.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var mr="",wr=Oo();try{mr=h(wr)}catch{mr=h(unescape(encodeURIComponent(wr)))}return"data:application/pdf;filename="+tr.filename+";base64,"+mr;case"pdfobjectnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var Pr="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Nr=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';tr.pdfObjectUrl&&(Pr=tr.pdfObjectUrl,Nr="");var Vr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Pr+'"'+Nr+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(tr)+");<\/script></body></html>",rs=n.open();return rs!==null&&rs.document.write(Vr),rs}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var os='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(tr.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+tr.filename+'" width="500px" height="400px" /></body></html>',fs=n.open();if(fs!==null){fs.document.write(os);var ms=this;fs.document.documentElement.querySelector("#pdfViewer").onload=function(){fs.document.title=tr.filename,fs.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ms.output("bloburl"))}}return fs}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(n)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var _s='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",tr)+'"></iframe></body></html>',Is=n.open();if(Is!==null&&(Is.document.write(_s),Is.document.title=tr.filename),Is||typeof safari>"u")return Is;break;case"datauri":case"dataurl":return n.document.location.href=this.output("datauristring",tr);default:return null}}),Gu=function(kn){return Array.isArray(ks)===!0&&ks.indexOf(kn)>-1};switch(tn){case"pt":zr=1;break;case"mm":zr=72/25.4;break;case"cm":zr=72/2.54;break;case"in":zr=72;break;case"px":zr=Gu("px_scaling")==1?.75:96/72;break;case"pc":case"em":zr=12;break;case"ex":zr=6;break;default:if(typeof tn!="number")throw new Error("Invalid unit: "+tn);zr=tn}var na=null;Yn(),Jn();var Up=function(kn){return dn!==null?na.encryptor(kn,0):function(tr){return tr}},Yu=nn.__private__.getPageInfo=nn.getPageInfo=function(kn){if(isNaN(kn)||kn%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Xr[kn].objId,pageNumber:kn,pageContext:Xr[kn]}},hs=nn.__private__.getPageInfoByObjId=function(kn){if(isNaN(kn)||kn%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var tr in Xr)if(Xr[tr].objId===kn)break;return Yu(tr)},zp=nn.__private__.getCurrentPageInfo=nn.getCurrentPageInfo=function(){return{objId:Xr[An].objId,pageNumber:An,pageContext:Xr[An]}};nn.addPage=function(){return qu.apply(this,arguments),this},nn.setPage=function(){return Vu.apply(this,arguments),zn.call(this,On[An]),this},nn.insertPage=function(kn){return this.addPage(),this.movePage(An,kn),this},nn.movePage=function(kn,tr){var mr,wr;if(kn>tr){mr=On[kn],wr=Xr[kn];for(var Pr=kn;Pr>tr;Pr--)On[Pr]=On[Pr-1],Xr[Pr]=Xr[Pr-1];On[tr]=mr,Xr[tr]=wr,this.setPage(tr)}else if(kn<tr){mr=On[kn],wr=Xr[kn];for(var Nr=kn;Nr<tr;Nr++)On[Nr]=On[Nr+1],Xr[Nr]=Xr[Nr+1];On[tr]=mr,Xr[tr]=wr,this.setPage(tr)}return this},nn.deletePage=function(){return Mp.apply(this,arguments),this},nn.__private__.text=nn.text=function(kn,tr,mr,wr,Pr){var Nr,Vr,rs,os,fs,ms,_s,Is,Bs,Hs=(wr=wr||{}).scope||this;if(typeof kn=="number"&&typeof tr=="number"&&(typeof mr=="string"||Array.isArray(mr))){var ga=mr;mr=tr,tr=kn,kn=ga}if(arguments[3]instanceof ns?(Ln("The transform parameter of text() with a Matrix value"),Bs=Pr):(rs=arguments[4],os=arguments[5],_typeof(_s=arguments[3])==="object"&&_s!==null||(typeof rs=="string"&&(os=rs,rs=null),typeof _s=="string"&&(os=_s,_s=null),typeof _s=="number"&&(rs=_s,_s=null),wr={flags:_s,angle:rs,align:os})),isNaN(tr)||isNaN(mr)||kn==null)throw new Error("Invalid arguments passed to jsPDF.text");if(kn.length===0)return Hs;var Ys="",yo=!1,io=typeof wr.lineHeightFactor=="number"?wr.lineHeightFactor:Al,No=Hs.internal.scaleFactor;function ep(Ds){return Ds=Ds.split("	").join(Array(wr.TabLen||9).join(" ")),xa(Ds,_s)}function wu(Ds){for(var Ms,zs=Ds.concat(),Xs=[],Io=zs.length;Io--;)typeof(Ms=zs.shift())=="string"?Xs.push(Ms):Array.isArray(Ds)&&(Ms.length===1||Ms[1]===void 0&&Ms[2]===void 0)?Xs.push(Ms[0]):Xs.push([Ms[0],Ms[1],Ms[2]]);return Xs}function Su(Ds,Ms){var zs;if(typeof Ds=="string")zs=Ms(Ds)[0];else if(Array.isArray(Ds)){for(var Xs,Io,Yo=Ds.concat(),eu=[],ip=Yo.length;ip--;)typeof(Xs=Yo.shift())=="string"?eu.push(Ms(Xs)[0]):Array.isArray(Xs)&&typeof Xs[0]=="string"&&(Io=Ms(Xs[0],Xs[1],Xs[2]),eu.push([Io[0],Io[1],Io[2]]));zs=eu}return zs}var Gl=!1,Cu=!0;if(typeof kn=="string")Gl=!0;else if(Array.isArray(kn)){var Au=kn.concat();Vr=[];for(var Yl,$a=Au.length;$a--;)(typeof(Yl=Au.shift())!="string"||Array.isArray(Yl)&&typeof Yl[0]!="string")&&(Cu=!1);Gl=Cu}if(Gl===!1)throw new Error('Type of text must be string or Array. "'+kn+'" is not recognized.');typeof kn=="string"&&(kn=kn.match(/[\r?\n]/)?kn.split(/\r\n|\r|\n/g):[kn]);var Kl=vr/Hs.internal.scaleFactor,Jl=Kl*(io-1);switch(wr.baseline){case"bottom":mr-=Jl;break;case"top":mr+=Kl-Jl;break;case"hanging":mr+=Kl-2*Jl;break;case"middle":mr+=Kl/2-Jl}if((ms=wr.maxWidth||0)>0&&(typeof kn=="string"?kn=Hs.splitTextToSize(kn,ms):Object.prototype.toString.call(kn)==="[object Array]"&&(kn=kn.reduce(function(Ds,Ms){return Ds.concat(Hs.splitTextToSize(Ms,ms))},[]))),Nr={text:kn,x:tr,y:mr,options:wr,mutex:{pdfEscape:xa,activeFontKey:ts,fonts:ys,activeFontSize:vr}},as.publish("preProcessText",Nr),kn=Nr.text,rs=(wr=Nr.options).angle,!(Bs instanceof ns)&&rs&&typeof rs=="number"){rs*=Math.PI/180,wr.rotationDirection===0&&(rs=-rs),yn===mn.ADVANCED&&(rs=-rs);var Ql=Math.cos(rs),Tu=Math.sin(rs);Bs=new ns(Ql,Tu,-Tu,Ql,0,0)}else rs&&rs instanceof ns&&(Bs=rs);yn!==mn.ADVANCED||Bs||(Bs=gs),(fs=wr.charSpace||Hl)!==void 0&&(Ys+=Pn(Hn(fs))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Is=wr.horizontalScale)!==void 0&&(Ys+=Pn(100*Is)+` Tz
`),wr.lang;var to=-1,Qp=wr.renderingMode!==void 0?wr.renderingMode:wr.stroke,Eu=Hs.internal.getCurrentPageInfo().pageContext;switch(Qp){case 0:case!1:case"fill":to=0;break;case 1:case!0:case"stroke":to=1;break;case 2:case"fillThenStroke":to=2;break;case 3:case"invisible":to=3;break;case 4:case"fillAndAddForClipping":to=4;break;case 5:case"strokeAndAddPathForClipping":to=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":to=6;break;case 7:case"addToPathForClipping":to=7}var np=Eu.usedRenderingMode!==void 0?Eu.usedRenderingMode:-1;to!==-1?Ys+=to+` Tr
`:np!==-1&&(Ys+=`0 Tr
`),to!==-1&&(Eu.usedRenderingMode=to),os=wr.align||"left";var bo,Pu=vr*io,Zp=Hs.internal.pageSize.getWidth(),t1=ys[ts];fs=wr.charSpace||Hl,ms=wr.maxWidth||0,_s=Object.assign({autoencode:!0,noBOM:!0},wr.flags);var qo=[];if(Object.prototype.toString.call(kn)==="[object Array]"){var co;Vr=wu(kn),os!=="left"&&(bo=Vr.map(function(Ds){return Hs.getStringUnitWidth(Ds,{font:t1,charSpace:fs,fontSize:vr,doKerning:!1})*vr/No}));var _o,Vo=0;if(os==="right"){tr-=bo[0],kn=[],$a=Vr.length;for(var Po=0;Po<$a;Po++)Po===0?(_o=Fo(tr),co=zo(mr)):(_o=Hn(Vo-bo[Po]),co=-Pu),kn.push([Vr[Po],_o,co]),Vo=bo[Po]}else if(os==="center"){tr-=bo[0]/2,kn=[],$a=Vr.length;for(var Do=0;Do<$a;Do++)Do===0?(_o=Fo(tr),co=zo(mr)):(_o=Hn((Vo-bo[Do])/2),co=-Pu),kn.push([Vr[Do],_o,co]),Vo=bo[Do]}else if(os==="left"){kn=[],$a=Vr.length;for(var Zl=0;Zl<$a;Zl++)kn.push(Vr[Zl])}else{if(os!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');kn=[],$a=Vr.length,ms=ms!==0?ms:Zp;for(var xo=0;xo<$a;xo++)co=xo===0?zo(mr):-Pu,_o=xo===0?Fo(tr):0,xo<$a-1?qo.push(Pn(Hn((ms-bo[xo])/(Vr[xo].split(" ").length-1)))):qo.push(0),kn.push([Vr[xo],_o,co])}}var _c=typeof wr.R2L=="boolean"?wr.R2L:_r;_c===!0&&(kn=Su(kn,function(Ds,Ms,zs){return[Ds.split("").reverse().join(""),Ms,zs]})),Nr={text:kn,x:tr,y:mr,options:wr,mutex:{pdfEscape:xa,activeFontKey:ts,fonts:ys,activeFontSize:vr}},as.publish("postProcessText",Nr),kn=Nr.text,yo=Nr.mutex.isHex||!1;var ku=ys[ts].encoding;ku!=="WinAnsiEncoding"&&ku!=="StandardEncoding"||(kn=Su(kn,function(Ds,Ms,zs){return[ep(Ds),Ms,zs]})),Vr=wu(kn),kn=[];for(var Xo,wo,Mo,Pl=0,tu=1,Ll=Array.isArray(Vr[0])?tu:Pl,Go="",Lu=function(Ds,Ms,zs){var Xs="";return zs instanceof ns?(zs=typeof wr.angle=="number"?Fs(zs,new ns(1,0,0,1,Ds,Ms)):Fs(new ns(1,0,0,1,Ds,Ms),zs),yn===mn.ADVANCED&&(zs=Fs(new ns(1,0,0,-1,0,0),zs)),Xs=zs.join(" ")+` Tm
`):Xs=Pn(Ds)+" "+Pn(Ms)+` Td
`,Xs},uo=0;uo<Vr.length;uo++){switch(Go="",Ll){case tu:Mo=(yo?"<":"(")+Vr[uo][0]+(yo?">":")"),Xo=parseFloat(Vr[uo][1]),wo=parseFloat(Vr[uo][2]);break;case Pl:Mo=(yo?"<":"(")+Vr[uo]+(yo?">":")"),Xo=Fo(tr),wo=zo(mr)}qo!==void 0&&qo[uo]!==void 0&&(Go=qo[uo]+` Tw
`),uo===0?kn.push(Go+Lu(Xo,wo,Bs)+Mo):Ll===Pl?kn.push(Go+Mo):Ll===tu&&kn.push(Go+Lu(Xo,wo,Bs)+Mo)}kn=Ll===Pl?kn.join(` Tj
T* `):kn.join(` Tj
`),kn+=` Tj
`;var Ro=`BT
/`;return Ro+=ts+" "+vr+` Tf
`,Ro+=Pn(vr*io)+` TL
`,Ro+=Tl+`
`,Ro+=Ys,Ro+=kn,jn(Ro+="ET"),an[ts]=!0,Hs};var Wp=nn.__private__.clip=nn.clip=function(kn){return jn(kn==="evenodd"?"W*":"W"),this};nn.clipEvenOdd=function(){return Wp("evenodd")},nn.__private__.discardPath=nn.discardPath=function(){return jn("n"),this};var Eo=nn.__private__.isValidStyle=function(kn){var tr=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(kn)!==-1&&(tr=!0),tr};nn.__private__.setDefaultPathOperation=nn.setDefaultPathOperation=function(kn){return Eo(kn)&&(on=kn),this};var Ku=nn.__private__.getStyle=nn.getStyle=function(kn){var tr=on;switch(kn){case"D":case"S":tr="S";break;case"F":tr="f";break;case"FD":case"DF":tr="B";break;case"f":case"f*":case"B":case"B*":tr=kn}return tr},Ju=nn.close=function(){return jn("h"),this};nn.stroke=function(){return jn("S"),this},nn.fill=function(kn){return zl("f",kn),this},nn.fillEvenOdd=function(kn){return zl("f*",kn),this},nn.fillStroke=function(kn){return zl("B",kn),this},nn.fillStrokeEvenOdd=function(kn){return zl("B*",kn),this};var zl=function(kn,tr){_typeof(tr)==="object"?qp(tr,kn):jn(kn)},fu=function(kn){kn===null||yn===mn.ADVANCED&&kn===void 0||(kn=Ku(kn),jn(kn))};function Hp(kn,tr,mr,wr,Pr){var Nr=new M(tr||this.boundingBox,mr||this.xStep,wr||this.yStep,this.gState,Pr||this.matrix);Nr.stream=this.stream;var Vr=kn+"$$"+this.cloneIndex+++"$$";return bs(Vr,Nr),Nr}var qp=function(kn,tr){var mr=br[kn.key],wr=xr[mr];if(wr instanceof B)jn("q"),jn(Vp(tr)),wr.gState&&nn.setGState(wr.gState),jn(kn.matrix.toString()+" cm"),jn("/"+mr+" sh"),jn("Q");else if(wr instanceof M){var Pr=new ns(1,0,0,-1,0,Ho());kn.matrix&&(Pr=Pr.multiply(kn.matrix||gs),mr=Hp.call(wr,kn.key,kn.boundingBox,kn.xStep,kn.yStep,Pr).id),jn("q"),jn("/Pattern cs"),jn("/"+mr+" scn"),wr.gState&&nn.setGState(wr.gState),jn(tr),jn("Q")}},Vp=function(kn){switch(kn){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},du=nn.moveTo=function(kn,tr){return jn(Pn(Hn(kn))+" "+Pn(Kn(tr))+" m"),this},Cl=nn.lineTo=function(kn,tr){return jn(Pn(Hn(kn))+" "+Pn(Kn(tr))+" l"),this},Uo=nn.curveTo=function(kn,tr,mr,wr,Pr,Nr){return jn([Pn(Hn(kn)),Pn(Kn(tr)),Pn(Hn(mr)),Pn(Kn(wr)),Pn(Hn(Pr)),Pn(Kn(Nr)),"c"].join(" ")),this};nn.__private__.line=nn.line=function(kn,tr,mr,wr,Pr){if(isNaN(kn)||isNaN(tr)||isNaN(mr)||isNaN(wr)||!Eo(Pr))throw new Error("Invalid arguments passed to jsPDF.line");return yn===mn.COMPAT?this.lines([[mr-kn,wr-tr]],kn,tr,[1,1],Pr||"S"):this.lines([[mr-kn,wr-tr]],kn,tr,[1,1]).stroke()},nn.__private__.lines=nn.lines=function(kn,tr,mr,wr,Pr,Nr){var Vr,rs,os,fs,ms,_s,Is,Bs,Hs,ga,Ys,yo;if(typeof kn=="number"&&(yo=mr,mr=tr,tr=kn,kn=yo),wr=wr||[1,1],Nr=Nr||!1,isNaN(tr)||isNaN(mr)||!Array.isArray(kn)||!Array.isArray(wr)||!Eo(Pr)||typeof Nr!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(du(tr,mr),Vr=wr[0],rs=wr[1],fs=kn.length,ga=tr,Ys=mr,os=0;os<fs;os++)(ms=kn[os]).length===2?(ga=ms[0]*Vr+ga,Ys=ms[1]*rs+Ys,Cl(ga,Ys)):(_s=ms[0]*Vr+ga,Is=ms[1]*rs+Ys,Bs=ms[2]*Vr+ga,Hs=ms[3]*rs+Ys,ga=ms[4]*Vr+ga,Ys=ms[5]*rs+Ys,Uo(_s,Is,Bs,Hs,ga,Ys));return Nr&&Ju(),fu(Pr),this},nn.path=function(kn){for(var tr=0;tr<kn.length;tr++){var mr=kn[tr],wr=mr.c;switch(mr.op){case"m":du(wr[0],wr[1]);break;case"l":Cl(wr[0],wr[1]);break;case"c":Uo.apply(this,wr);break;case"h":Ju()}}return this},nn.__private__.rect=nn.rect=function(kn,tr,mr,wr,Pr){if(isNaN(kn)||isNaN(tr)||isNaN(mr)||isNaN(wr)||!Eo(Pr))throw new Error("Invalid arguments passed to jsPDF.rect");return yn===mn.COMPAT&&(wr=-wr),jn([Pn(Hn(kn)),Pn(Kn(tr)),Pn(Hn(mr)),Pn(Hn(wr)),"re"].join(" ")),fu(Pr),this},nn.__private__.triangle=nn.triangle=function(kn,tr,mr,wr,Pr,Nr,Vr){if(isNaN(kn)||isNaN(tr)||isNaN(mr)||isNaN(wr)||isNaN(Pr)||isNaN(Nr)||!Eo(Vr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[mr-kn,wr-tr],[Pr-mr,Nr-wr],[kn-Pr,tr-Nr]],kn,tr,[1,1],Vr,!0),this},nn.__private__.roundedRect=nn.roundedRect=function(kn,tr,mr,wr,Pr,Nr,Vr){if(isNaN(kn)||isNaN(tr)||isNaN(mr)||isNaN(wr)||isNaN(Pr)||isNaN(Nr)||!Eo(Vr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var rs=4/3*(Math.SQRT2-1);return Pr=Math.min(Pr,.5*mr),Nr=Math.min(Nr,.5*wr),this.lines([[mr-2*Pr,0],[Pr*rs,0,Pr,Nr-Nr*rs,Pr,Nr],[0,wr-2*Nr],[0,Nr*rs,-Pr*rs,Nr,-Pr,Nr],[2*Pr-mr,0],[-Pr*rs,0,-Pr,-Nr*rs,-Pr,-Nr],[0,2*Nr-wr],[0,-Nr*rs,Pr*rs,-Nr,Pr,-Nr]],kn+Pr,tr,[1,1],Vr,!0),this},nn.__private__.ellipse=nn.ellipse=function(kn,tr,mr,wr,Pr){if(isNaN(kn)||isNaN(tr)||isNaN(mr)||isNaN(wr)||!Eo(Pr))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Nr=4/3*(Math.SQRT2-1)*mr,Vr=4/3*(Math.SQRT2-1)*wr;return du(kn+mr,tr),Uo(kn+mr,tr-Vr,kn+Nr,tr-wr,kn,tr-wr),Uo(kn-Nr,tr-wr,kn-mr,tr-Vr,kn-mr,tr),Uo(kn-mr,tr+Vr,kn-Nr,tr+wr,kn,tr+wr),Uo(kn+Nr,tr+wr,kn+mr,tr+Vr,kn+mr,tr),fu(Pr),this},nn.__private__.circle=nn.circle=function(kn,tr,mr,wr){if(isNaN(kn)||isNaN(tr)||isNaN(mr)||!Eo(wr))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(kn,tr,mr,mr,wr)},nn.setFont=function(kn,tr,mr){return mr&&(tr=Sn(tr,mr)),ts=Xu(kn,tr,{disableWarning:!1}),this};var Xp=nn.__private__.getFont=nn.getFont=function(){return ys[Xu.apply(nn,arguments)]};nn.__private__.getFontList=nn.getFontList=function(){var kn,tr,mr={};for(kn in Or)if(Or.hasOwnProperty(kn))for(tr in mr[kn]=[],Or[kn])Or[kn].hasOwnProperty(tr)&&mr[kn].push(tr);return mr},nn.addFont=function(kn,tr,mr,wr,Pr){var Nr=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Nr.indexOf(arguments[3])!==-1?Pr=arguments[3]:arguments[3]&&Nr.indexOf(arguments[3])==-1&&(mr=Sn(mr,wr)),Pr=Pr||"Identity-H",cu.call(this,kn,tr,mr,Pr)};var Al,pu=St.lineWidth||.200025,Wl=nn.__private__.getLineWidth=nn.getLineWidth=function(){return pu},Qu=nn.__private__.setLineWidth=nn.setLineWidth=function(kn){return pu=kn,jn(Pn(Hn(kn))+" w"),this};nn.__private__.setLineDash=E.API.setLineDash=E.API.setLineDashPattern=function(kn,tr){if(kn=kn||[],tr=tr||0,isNaN(tr)||!Array.isArray(kn))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return kn=kn.map(function(mr){return Pn(Hn(mr))}).join(" "),tr=Pn(Hn(tr)),jn("["+kn+"] "+tr+" d"),this};var Zu=nn.__private__.getLineHeight=nn.getLineHeight=function(){return vr*Al};nn.__private__.getLineHeight=nn.getLineHeight=function(){return vr*Al};var _h=nn.__private__.setLineHeightFactor=nn.setLineHeightFactor=function(kn){return typeof(kn=kn||1.15)=="number"&&(Al=kn),this},_f=nn.__private__.getLineHeightFactor=nn.getLineHeightFactor=function(){return Al};_h(St.lineHeight);var Fo=nn.__private__.getHorizontalCoordinate=function(kn){return Hn(kn)},zo=nn.__private__.getVerticalCoordinate=function(kn){return yn===mn.ADVANCED?kn:Xr[An].mediaBox.topRightY-Xr[An].mediaBox.bottomLeftY-Hn(kn)},Gp=nn.__private__.getHorizontalCoordinateString=nn.getHorizontalCoordinateString=function(kn){return Pn(Fo(kn))},Wo=nn.__private__.getVerticalCoordinateString=nn.getVerticalCoordinateString=function(kn){return Pn(zo(kn))},vo=St.strokeColor||"0 G";nn.__private__.getStrokeColor=nn.getDrawColor=function(){return Gs(vo)},nn.__private__.setStrokeColor=nn.setDrawColor=function(kn,tr,mr,wr){return vo=go({ch1:kn,ch2:tr,ch3:mr,ch4:wr,pdfColorType:"draw",precision:2}),jn(vo),this};var gu=St.fillColor||"0 g";nn.__private__.getFillColor=nn.getFillColor=function(){return Gs(gu)},nn.__private__.setFillColor=nn.setFillColor=function(kn,tr,mr,wr){return gu=go({ch1:kn,ch2:tr,ch3:mr,ch4:wr,pdfColorType:"fill",precision:2}),jn(gu),this};var Tl=St.textColor||"0 g",Yp=nn.__private__.getTextColor=nn.getTextColor=function(){return Gs(Tl)};nn.__private__.setTextColor=nn.setTextColor=function(kn,tr,mr,wr){return Tl=go({ch1:kn,ch2:tr,ch3:mr,ch4:wr,pdfColorType:"text",precision:3}),this};var Hl=St.charSpace,Kp=nn.__private__.getCharSpace=nn.getCharSpace=function(){return parseFloat(Hl||0)};nn.__private__.setCharSpace=nn.setCharSpace=function(kn){if(isNaN(kn))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Hl=kn,this};var mu=0;nn.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},nn.__private__.setLineCap=nn.setLineCap=function(kn){var tr=nn.CapJoinStyles[kn];if(tr===void 0)throw new Error("Line cap style of '"+kn+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return mu=tr,jn(tr+" J"),this};var vu=0;nn.__private__.setLineJoin=nn.setLineJoin=function(kn){var tr=nn.CapJoinStyles[kn];if(tr===void 0)throw new Error("Line join style of '"+kn+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return vu=tr,jn(tr+" j"),this},nn.__private__.setLineMiterLimit=nn.__private__.setMiterLimit=nn.setLineMiterLimit=nn.setMiterLimit=function(kn){if(kn=kn||0,isNaN(kn))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return jn(Pn(Hn(kn))+" M"),this},nn.GState=j,nn.setGState=function(kn){(kn=typeof kn=="string"?yr[qr[kn]]:_d(null,kn)).equals(Yr)||(jn("/"+kn.id+" gs"),Yr=kn)};var _d=function(kn,tr){if(!kn||!qr[kn]){var mr=!1;for(var wr in yr)if(yr.hasOwnProperty(wr)&&yr[wr].equals(tr)){mr=!0;break}if(mr)tr=yr[wr];else{var Pr="GS"+(Object.keys(yr).length+1).toString(10);yr[Pr]=tr,tr.id=Pr}return kn&&(qr[kn]=tr.id),as.publish("addGState",tr),tr}};nn.addGState=function(kn,tr){return _d(kn,tr),this},nn.saveGraphicsState=function(){return jn("q"),Wr.push({key:ts,size:vr,color:Tl}),this},nn.restoreGraphicsState=function(){jn("Q");var kn=Wr.pop();return ts=kn.key,vr=kn.size,Tl=kn.color,Yr=null,this},nn.setCurrentTransformationMatrix=function(kn){return jn(kn.toString()+" cm"),this},nn.comment=function(kn){return jn("#"+kn),this};var Vl=function(kn,tr){var mr=kn||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return mr},set:function(Nr){isNaN(Nr)||(mr=parseFloat(Nr))}});var wr=tr||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return wr},set:function(Nr){isNaN(Nr)||(wr=parseFloat(Nr))}});var Pr="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Pr},set:function(Nr){Pr=Nr.toString()}}),this},yu=function(kn,tr,mr,wr){Vl.call(this,kn,tr),this.type="rect";var Pr=mr||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Pr},set:function(Vr){isNaN(Vr)||(Pr=parseFloat(Vr))}});var Nr=wr||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Nr},set:function(Vr){isNaN(Vr)||(Nr=parseFloat(Vr))}}),this},bu=function(){this.page=Jr,this.currentPage=An,this.pages=On.slice(0),this.pagesContext=Xr.slice(0),this.x=ws,this.y=es,this.matrix=ps,this.width=El(An),this.height=Ho(An),this.outputDestination=$n,this.id="",this.objectNumber=-1};bu.prototype.restore=function(){Jr=this.page,An=this.currentPage,Xr=this.pagesContext,On=this.pages,ws=this.x,es=this.y,ps=this.matrix,_u(An,this.width),xu(An,this.height),$n=this.outputDestination};var tp=function(kn,tr,mr,wr,Pr){As.push(new bu),Jr=An=0,On=[],ws=kn,es=tr,ps=Pr,uu([mr,wr])},Jp=function(kn){if(ls[kn])As.pop().restore();else{var tr=new bu,mr="Xo"+(Object.keys(us).length+1).toString(10);tr.id=mr,ls[kn]=mr,us[mr]=tr,as.publish("addFormObject",tr),As.pop().restore()}};for(var Xl in nn.beginFormObject=function(kn,tr,mr,wr,Pr){return tp(kn,tr,mr,wr,Pr),this},nn.endFormObject=function(kn){return Jp(kn),this},nn.doFormObject=function(kn,tr){var mr=us[ls[kn]];return jn("q"),jn(tr.toString()+" cm"),jn("/"+mr.id+" Do"),jn("Q"),this},nn.getFormObject=function(kn){var tr=us[ls[kn]];return{x:tr.x,y:tr.y,width:tr.width,height:tr.height,matrix:tr.matrix}},nn.save=function(kn,tr){return kn=kn||"generated.pdf",(tr=tr||{}).returnPromise=tr.returnPromise||!1,tr.returnPromise===!1?(l($l(Oo()),kn),typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),this):new Promise(function(mr,wr){try{var Pr=l($l(Oo()),kn);typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),mr(Pr)}catch(Nr){wr(Nr.message)}})},E.API)E.API.hasOwnProperty(Xl)&&(Xl==="events"&&E.API.events.length?function(kn,tr){var mr,wr,Pr;for(Pr=tr.length-1;Pr!==-1;Pr--)mr=tr[Pr][0],wr=tr[Pr][1],kn.subscribe.apply(kn,[mr].concat(typeof wr=="function"?[wr]:wr))}(as,E.API.events):nn[Xl]=E.API[Xl]);var El=nn.getPageWidth=function(kn){return(Xr[kn=kn||An].mediaBox.topRightX-Xr[kn].mediaBox.bottomLeftX)/zr},_u=nn.setPageWidth=function(kn,tr){Xr[kn].mediaBox.topRightX=tr*zr+Xr[kn].mediaBox.bottomLeftX},Ho=nn.getPageHeight=function(kn){return(Xr[kn=kn||An].mediaBox.topRightY-Xr[kn].mediaBox.bottomLeftY)/zr},xu=nn.setPageHeight=function(kn,tr){Xr[kn].mediaBox.topRightY=tr*zr+Xr[kn].mediaBox.bottomLeftY};return nn.internal={pdfEscape:xa,getStyle:Ku,getFont:Xp,getFontSize:hr,getCharSpace:Kp,getTextColor:Yp,getLineHeight:Zu,getLineHeightFactor:_f,getLineWidth:Wl,write:ur,getHorizontalCoordinate:Fo,getVerticalCoordinate:zo,getCoordinateString:Gp,getVerticalCoordinateString:Wo,collections:{},newObject:Ss,newAdditionalObject:Qs,newObjectDeferred:Ts,newObjectDeferredBegin:js,getFilters:Ao,putStream:lo,events:as,scaleFactor:zr,pageSize:{getWidth:function(){return El(An)},setWidth:function(kn){_u(An,kn)},getHeight:function(){return Ho(An)},setHeight:function(kn){xu(An,kn)}},encryptionOptions:dn,encryption:na,getEncryptor:Up,output:Ul,getNumberOfPages:Rp,pages:On,out:jn,f2:Rn,f3:Mn,getPageInfo:Yu,getPageInfoByObjId:hs,getCurrentPageInfo:zp,getPDFVersion:hn,Point:Vl,Rectangle:yu,Matrix:ns,hasHotfix:Gu},Object.defineProperty(nn.internal.pageSize,"width",{get:function(){return El(An)},set:function(kn){_u(An,kn)},enumerable:!0,configurable:!0}),Object.defineProperty(nn.internal.pageSize,"height",{get:function(){return Ho(An)},set:function(kn){xu(An,kn)},enumerable:!0,configurable:!0}),Dp.call(nn,ar),ts="F1",qu(un,_e),as.publish("initialized"),nn}I.prototype.lsbFirstWord=function(St){return String.fromCharCode(St>>0&255,St>>8&255,St>>16&255,St>>24&255)},I.prototype.toHexString=function(St){return St.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},I.prototype.hexToBytes=function(St){for(var e=[],_e=0;_e<St.length;_e+=2)e.push(String.fromCharCode(parseInt(St.substr(_e,2),16)));return e.join("")},I.prototype.processOwnerPassword=function(St,e){return P(x(e).substr(0,5),St)},I.prototype.encryptor=function(St,e){var _e=x(this.encryptionKey+String.fromCharCode(255&St,St>>8&255,St>>16&255,255&e,e>>8&255)).substr(0,10);return function(tn){return P(_e,tn)}},j.prototype.equals=function(St){var e,_e="id,objectNumber,equals";if(!St||_typeof(St)!==_typeof(this))return!1;var tn=0;for(e in this)if(!(_e.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!St.hasOwnProperty(e)||this[e]!==St[e])return!1;tn++}for(e in St)St.hasOwnProperty(e)&&_e.indexOf(e)<0&&tn--;return tn===0},E.API={events:[]},E.version="2.5.1";var q=E.API,D=1,R=function(St){return St.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},T=function(St){return St.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},U=function(St){return St.toFixed(2)},z=function(St){return St.toFixed(5)};q.__acroform__={};var H=function(St,e){St.prototype=Object.create(e.prototype),St.prototype.constructor=St},W=function(St){return St*D},V=function(St){var e=new ut,_e=At.internal.getHeight(St)||0,tn=At.internal.getWidth(St)||0;return e.BBox=[0,0,Number(U(tn)),Number(U(_e))],e},G=q.__acroform__.setBit=function(St,e){if(St=St||0,e=e||0,isNaN(St)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return St|=1<<e},Y=q.__acroform__.clearBit=function(St,e){if(St=St||0,e=e||0,isNaN(St)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return St&=~(1<<e)},J=q.__acroform__.getBit=function(St,e){if(isNaN(St)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(St&1<<e)==0?0:1},X=q.__acroform__.getBitForPdf=function(St,e){if(isNaN(St)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return J(St,e-1)},K=q.__acroform__.setBitForPdf=function(St,e){if(isNaN(St)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return G(St,e-1)},Z=q.__acroform__.clearBitForPdf=function(St,e){if(isNaN(St)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Y(St,e-1)},$=q.__acroform__.calculateCoordinates=function(St,e){var _e=e.internal.getHorizontalCoordinate,tn=e.internal.getVerticalCoordinate,un=St[0],gn=St[1],vn=St[2],fn=St[3],en={};return en.lowerLeft_X=_e(un)||0,en.lowerLeft_Y=tn(gn+fn)||0,en.upperRight_X=_e(un+vn)||0,en.upperRight_Y=tn(gn)||0,[Number(U(en.lowerLeft_X)),Number(U(en.lowerLeft_Y)),Number(U(en.upperRight_X)),Number(U(en.upperRight_Y))]},Q=function(St){if(St.appearanceStreamContent)return St.appearanceStreamContent;if(St.V||St.DV){var e=[],_e=St._V||St.DV,tn=tt(St,_e),un=St.scope.internal.getFont(St.fontName,St.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(St.scope.__private__.encodeColorString(St.color)),e.push("/"+un+" "+U(tn.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(tn.text),e.push("ET"),e.push("Q"),e.push("EMC");var gn=V(St);return gn.scope=St.scope,gn.stream=e.join(`
`),gn}},tt=function(St,e){var _e=St.fontSize===0?St.maxFontSize:St.fontSize,tn={text:"",fontSize:""},un=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");un=St.multiline?un.map(function(Mn){return Mn.split(`
`)}):un.map(function(Mn){return[Mn]});var gn=_e,vn=At.internal.getHeight(St)||0;vn=vn<0?-vn:vn;var fn=At.internal.getWidth(St)||0;fn=fn<0?-fn:fn;var en=function(Mn,Hn,Qn){if(Mn+1<un.length){var Kn=Hn+" "+un[Mn+1][0];return et(Kn,St,Qn).width<=fn-4}return!1};gn++;t:for(;gn>0;){e="",gn--;var on,dn,rn=et("3",St,gn).height,an=St.multiline?vn-gn:(vn-rn)/2,nn=an+=2,cn=0,hn=0,sn=0;if(gn<=0){e=`(...) Tj
`,e+="% Width of Text: "+et(e,St,gn=12).width+", FieldWidth:"+fn+`
`;break}for(var pn="",mn=0,yn=0;yn<un.length;yn++)if(un.hasOwnProperty(yn)){var _n=!1;if(un[yn].length!==1&&sn!==un[yn].length-1){if((rn+2)*(mn+2)+2>vn)continue t;pn+=un[yn][sn],_n=!0,hn=yn,yn--}else{pn=(pn+=un[yn][sn]+" ").substr(pn.length-1)==" "?pn.substr(0,pn.length-1):pn;var xn=parseInt(yn),Sn=en(xn,pn,gn),Pn=yn>=un.length-1;if(Sn&&!Pn){pn+=" ",sn=0;continue}if(Sn||Pn){if(Pn)hn=xn;else if(St.multiline&&(rn+2)*(mn+2)+2>vn)continue t}else{if(!St.multiline||(rn+2)*(mn+2)+2>vn)continue t;hn=xn}}for(var Ln="",In=cn;In<=hn;In++){var Rn=un[In];if(St.multiline){if(In===hn){Ln+=Rn[sn]+" ",sn=(sn+1)%Rn.length;continue}if(In===cn){Ln+=Rn[Rn.length-1]+" ";continue}}Ln+=Rn[0]+" "}switch(Ln=Ln.substr(Ln.length-1)==" "?Ln.substr(0,Ln.length-1):Ln,dn=et(Ln,St,gn).width,St.textAlign){case"right":on=fn-dn-2;break;case"center":on=(fn-dn)/2;break;case"left":default:on=2}e+=U(on)+" "+U(nn)+` Td
`,e+="("+R(Ln)+`) Tj
`,e+=-U(on)+` 0 Td
`,nn=-(gn+2),dn=0,cn=_n?hn:hn+1,mn++,pn=""}break}return tn.text=e,tn.fontSize=gn,tn},et=function(St,e,_e){var tn=e.scope.internal.getFont(e.fontName,e.fontStyle),un=e.scope.getStringUnitWidth(St,{font:tn,fontSize:parseFloat(_e),charSpace:0})*parseFloat(_e);return{height:e.scope.getStringUnitWidth("3",{font:tn,fontSize:parseFloat(_e),charSpace:0})*parseFloat(_e)*1.5,width:un}},rt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},nt=function(St,e){var _e={type:"reference",object:St};e.internal.getPageInfo(St.page).pageContext.annotations.find(function(tn){return tn.type===_e.type&&tn.object===_e.object})===void 0&&e.internal.getPageInfo(St.page).pageContext.annotations.push(_e)},it=function(St,e){for(var _e in St)if(St.hasOwnProperty(_e)){var tn=_e,un=St[_e];e.internal.newObjectDeferredBegin(un.objId,!0),_typeof(un)==="object"&&typeof un.putStream=="function"&&un.putStream(),delete St[tn]}},at=function(St,e){if(e.scope=St,St.internal!==void 0&&(St.internal.acroformPlugin===void 0||St.internal.acroformPlugin.isInitialized===!1)){if(lt.FieldNum=0,St.internal.acroformPlugin=JSON.parse(JSON.stringify(rt)),St.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");D=St.internal.scaleFactor,St.internal.acroformPlugin.acroFormDictionaryRoot=new ht,St.internal.acroformPlugin.acroFormDictionaryRoot.scope=St,St.internal.acroformPlugin.acroFormDictionaryRoot._eventID=St.internal.events.subscribe("postPutResources",function(){(function(_e){_e.internal.events.unsubscribe(_e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete _e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,_e.internal.acroformPlugin.printedOut=!0})(St)}),St.internal.events.subscribe("buildDocument",function(){(function(_e){_e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var tn=_e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var un in tn)if(tn.hasOwnProperty(un)){var gn=tn[un];gn.objId=void 0,gn.hasAnnotation&&nt(gn,_e)}})(St)}),St.internal.events.subscribe("putCatalog",function(){(function(_e){if(_e.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");_e.internal.write("/AcroForm "+_e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(St)}),St.internal.events.subscribe("postPutPages",function(_e){(function(tn,un){var gn=!tn;for(var vn in tn||(un.internal.newObjectDeferredBegin(un.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),un.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),tn=tn||un.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(tn.hasOwnProperty(vn)){var fn=tn[vn],en=[],on=fn.Rect;if(fn.Rect&&(fn.Rect=$(fn.Rect,un)),un.internal.newObjectDeferredBegin(fn.objId,!0),fn.DA=At.createDefaultAppearanceStream(fn),_typeof(fn)==="object"&&typeof fn.getKeyValueListForStream=="function"&&(en=fn.getKeyValueListForStream()),fn.Rect=on,fn.hasAppearanceStream&&!fn.appearanceStreamContent){var dn=Q(fn);en.push({key:"AP",value:"<</N "+dn+">>"}),un.internal.acroformPlugin.xForms.push(dn)}if(fn.appearanceStreamContent){var rn="";for(var an in fn.appearanceStreamContent)if(fn.appearanceStreamContent.hasOwnProperty(an)){var nn=fn.appearanceStreamContent[an];if(rn+="/"+an+" ",rn+="<<",Object.keys(nn).length>=1||Array.isArray(nn)){for(var vn in nn)if(nn.hasOwnProperty(vn)){var cn=nn[vn];typeof cn=="function"&&(cn=cn.call(un,fn)),rn+="/"+vn+" "+cn+" ",un.internal.acroformPlugin.xForms.indexOf(cn)>=0||un.internal.acroformPlugin.xForms.push(cn)}}else typeof(cn=nn)=="function"&&(cn=cn.call(un,fn)),rn+="/"+vn+" "+cn,un.internal.acroformPlugin.xForms.indexOf(cn)>=0||un.internal.acroformPlugin.xForms.push(cn);rn+=">>"}en.push({key:"AP",value:`<<
`+rn+">>"})}un.internal.putStream({additionalKeyValues:en,objectId:fn.objId}),un.internal.out("endobj")}gn&&it(un.internal.acroformPlugin.xForms,un)})(_e,St)}),St.internal.acroformPlugin.isInitialized=!0}},ot=q.__acroform__.arrayToPdfArray=function(St,e,_e){var tn=function(vn){return vn};if(Array.isArray(St)){for(var un="[",gn=0;gn<St.length;gn++)switch(gn!==0&&(un+=" "),_typeof(St[gn])){case"boolean":case"number":case"object":un+=St[gn].toString();break;case"string":St[gn].substr(0,1)!=="/"?(e!==void 0&&_e&&(tn=_e.internal.getEncryptor(e)),un+="("+R(tn(St[gn].toString()))+")"):un+=St[gn].toString()}return un+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},st=function(St,e,_e){var tn=function(un){return un};return e!==void 0&&_e&&(tn=_e.internal.getEncryptor(e)),(St=St||"").toString(),St="("+R(tn(St))+")"},ct=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(St){this._objId=St}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ct.prototype.toString=function(){return this.objId+" 0 R"},ct.prototype.putStream=function(){var St=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:St,objectId:this.objId}),this.scope.internal.out("endobj")},ct.prototype.getKeyValueListForStream=function(){var St=[],e=Object.getOwnPropertyNames(this).filter(function(gn){return gn!="content"&&gn!="appearanceStreamContent"&&gn!="scope"&&gn!="objId"&&gn.substring(0,1)!="_"});for(var _e in e)if(Object.getOwnPropertyDescriptor(this,e[_e]).configurable===!1){var tn=e[_e],un=this[tn];un&&(Array.isArray(un)?St.push({key:tn,value:ot(un,this.objId,this.scope)}):un instanceof ct?(un.scope=this.scope,St.push({key:tn,value:un.objId+" 0 R"})):typeof un!="function"&&St.push({key:tn,value:un}))}return St};var ut=function(){ct.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var St,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(_e){e=_e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(_e){St=_e.trim()},get:function(){return St||null}})};H(ut,ct);var ht=function(){ct.call(this);var St,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(St){var _e=function(tn){return tn};return this.scope&&(_e=this.scope.internal.getEncryptor(this.objId)),"("+R(_e(St))+")"}},set:function(_e){St=_e}})};H(ht,ct);var lt=function St(){ct.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(pn){if(isNaN(pn))throw new Error('Invalid value "'+pn+'" for attribute F supplied.');e=pn}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(e,3))},set:function(pn){Boolean(pn)===!0?this.F=K(e,3):this.F=Z(e,3)}});var _e=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return _e},set:function(pn){if(isNaN(pn))throw new Error('Invalid value "'+pn+'" for attribute Ff supplied.');_e=pn}});var tn=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(tn.length!==0)return tn},set:function(pn){tn=pn!==void 0?pn:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!tn||isNaN(tn[0])?0:tn[0]},set:function(pn){tn[0]=pn}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!tn||isNaN(tn[1])?0:tn[1]},set:function(pn){tn[1]=pn}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!tn||isNaN(tn[2])?0:tn[2]},set:function(pn){tn[2]=pn}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!tn||isNaN(tn[3])?0:tn[3]},set:function(pn){tn[3]=pn}});var un="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return un},set:function(pn){switch(pn){case"/Btn":case"/Tx":case"/Ch":case"/Sig":un=pn;break;default:throw new Error('Invalid value "'+pn+'" for attribute FT supplied.')}}});var gn=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!gn||gn.length<1){if(this instanceof yt)return;gn="FieldObject"+St.FieldNum++}var pn=function(mn){return mn};return this.scope&&(pn=this.scope.internal.getEncryptor(this.objId)),"("+R(pn(gn))+")"},set:function(pn){gn=pn.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return gn},set:function(pn){gn=pn}});var vn="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return vn},set:function(pn){vn=pn}});var fn="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return fn},set:function(pn){fn=pn}});var en=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return en},set:function(pn){en=pn}});var on=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return on===void 0?50/D:on},set:function(pn){on=pn}});var dn="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return dn},set:function(pn){dn=pn}});var rn="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!rn||this instanceof yt||this instanceof Nt))return st(rn,this.objId,this.scope)},set:function(pn){pn=pn.toString(),rn=pn}});var an=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(an)return this instanceof mt?an:st(an,this.objId,this.scope)},set:function(pn){pn=pn.toString(),an=this instanceof mt?pn:pn.substr(0,1)==="("?T(pn.substr(1,pn.length-2)):T(pn)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(an.substr(1,an.length-1)):an},set:function(pn){pn=pn.toString(),an=this instanceof mt?"/"+pn:pn}});var nn=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(nn)return nn},set:function(pn){this.V=pn}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(nn)return this instanceof mt?nn:st(nn,this.objId,this.scope)},set:function(pn){pn=pn.toString(),nn=this instanceof mt?pn:pn.substr(0,1)==="("?T(pn.substr(1,pn.length-2)):T(pn)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(nn.substr(1,nn.length-1)):nn},set:function(pn){pn=pn.toString(),nn=this instanceof mt?"/"+pn:pn}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var cn,hn=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return hn},set:function(pn){pn=Boolean(pn),hn=pn}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(cn)return cn},set:function(pn){cn=pn}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,1))},set:function(pn){Boolean(pn)===!0?this.Ff=K(this.Ff,1):this.Ff=Z(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,2))},set:function(pn){Boolean(pn)===!0?this.Ff=K(this.Ff,2):this.Ff=Z(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,3))},set:function(pn){Boolean(pn)===!0?this.Ff=K(this.Ff,3):this.Ff=Z(this.Ff,3)}});var sn=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(sn!==null)return sn},set:function(pn){if([0,1,2].indexOf(pn)===-1)throw new Error('Invalid value "'+pn+'" for attribute Q supplied.');sn=pn}}),Object.defineProperty(this,"textAlign",{get:function(){var pn;switch(sn){case 0:default:pn="left";break;case 1:pn="center";break;case 2:pn="right"}return pn},configurable:!0,enumerable:!0,set:function(pn){switch(pn){case"right":case 2:sn=2;break;case"center":case 1:sn=1;break;case"left":case 0:default:sn=0}}})};H(lt,ct);var ft=function(){lt.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var St=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return St},set:function(_e){St=_e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return St},set:function(_e){St=_e}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ot(e,this.objId,this.scope)},set:function(_e){var tn,un;un=[],typeof(tn=_e)=="string"&&(un=function(gn,vn,fn){fn||(fn=1);for(var en,on=[];en=vn.exec(gn);)on.push(en[fn]);return on}(tn,/\((.*?)\)/g)),e=un}}),this.getOptions=function(){return e},this.setOptions=function(_e){e=_e,this.sort&&e.sort()},this.addOption=function(_e){_e=(_e=_e||"").toString(),e.push(_e),this.sort&&e.sort()},this.removeOption=function(_e,tn){for(tn=tn||!1,_e=(_e=_e||"").toString();e.indexOf(_e)!==-1&&(e.splice(e.indexOf(_e),1),tn!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,18))},set:function(_e){Boolean(_e)===!0?this.Ff=K(this.Ff,18):this.Ff=Z(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,19))},set:function(_e){this.combo===!0&&(Boolean(_e)===!0?this.Ff=K(this.Ff,19):this.Ff=Z(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,20))},set:function(_e){Boolean(_e)===!0?(this.Ff=K(this.Ff,20),e.sort()):this.Ff=Z(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,22))},set:function(_e){Boolean(_e)===!0?this.Ff=K(this.Ff,22):this.Ff=Z(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,23))},set:function(_e){Boolean(_e)===!0?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,27))},set:function(_e){Boolean(_e)===!0?this.Ff=K(this.Ff,27):this.Ff=Z(this.Ff,27)}}),this.hasAppearanceStream=!1};H(ft,lt);var dt=function(){ft.call(this),this.fontName="helvetica",this.combo=!1};H(dt,ft);var pt=function(){dt.call(this),this.combo=!0};H(pt,dt);var gt=function(){pt.call(this),this.edit=!0};H(gt,pt);var mt=function(){lt.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,15))},set:function(_e){Boolean(_e)===!0?this.Ff=K(this.Ff,15):this.Ff=Z(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,16))},set:function(_e){Boolean(_e)===!0?this.Ff=K(this.Ff,16):this.Ff=Z(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,17))},set:function(_e){Boolean(_e)===!0?this.Ff=K(this.Ff,17):this.Ff=Z(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,26))},set:function(_e){Boolean(_e)===!0?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var St,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var _e=function(gn){return gn};if(this.scope&&(_e=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var tn,un=[];for(tn in un.push("<<"),e)un.push("/"+tn+" ("+R(_e(e[tn]))+")");return un.push(">>"),un.join(`
`)}},set:function(_e){_typeof(_e)==="object"&&(e=_e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(_e){typeof _e=="string"&&(e.CA=_e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return St},set:function(_e){St=_e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return St.substr(1,St.length-1)},set:function(_e){St="/"+_e}})};H(mt,lt);var vt=function(){mt.call(this),this.pushButton=!0};H(vt,mt);var bt=function(){mt.call(this),this.radio=!0,this.pushButton=!1;var St=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return St},set:function(e){St=e!==void 0?e:[]}})};H(bt,mt);var yt=function(){var St,e;lt.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return St},set:function(un){St=un}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(un){e=un}});var _e,tn={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var un=function(fn){return fn};this.scope&&(un=this.scope.internal.getEncryptor(this.objId));var gn,vn=[];for(gn in vn.push("<<"),tn)vn.push("/"+gn+" ("+R(un(tn[gn]))+")");return vn.push(">>"),vn.join(`
`)},set:function(un){_typeof(un)==="object"&&(tn=un)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return tn.CA||""},set:function(un){typeof un=="string"&&(tn.CA=un)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return _e},set:function(un){_e=un}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return _e.substr(1,_e.length-1)},set:function(un){_e="/"+un}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=At.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};H(yt,lt),bt.prototype.setAppearance=function(St){if(!("createAppearanceStream"in St)||!("getCA"in St))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var _e=this.Kids[e];_e.appearanceStreamContent=St.createAppearanceStream(_e.optionName),_e.caption=St.getCA()}},bt.prototype.createOption=function(St){var e=new yt;return e.Parent=this,e.optionName=St,this.Kids.push(e),xt.call(this.scope,e),e};var wt=function(){mt.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=At.CheckBox.createAppearanceStream()};H(wt,mt);var Nt=function(){lt.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,13))},set:function(e){Boolean(e)===!0?this.Ff=K(this.Ff,13):this.Ff=Z(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,21))},set:function(e){Boolean(e)===!0?this.Ff=K(this.Ff,21):this.Ff=Z(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,23))},set:function(e){Boolean(e)===!0?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,24))},set:function(e){Boolean(e)===!0?this.Ff=K(this.Ff,24):this.Ff=Z(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,25))},set:function(e){Boolean(e)===!0?this.Ff=K(this.Ff,25):this.Ff=Z(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,26))},set:function(e){Boolean(e)===!0?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var St=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return St},set:function(e){St=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return St},set:function(e){Number.isInteger(e)&&(St=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};H(Nt,lt);var Lt=function(){Nt.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,14))},set:function(St){Boolean(St)===!0?this.Ff=K(this.Ff,14):this.Ff=Z(this.Ff,14)}}),this.password=!0};H(Lt,Nt);var At={CheckBox:{createAppearanceStream:function(){return{N:{On:At.CheckBox.YesNormal},D:{On:At.CheckBox.YesPushDown,Off:At.CheckBox.OffPushDown}}},YesPushDown:function(St){var e=V(St);e.scope=St.scope;var _e=[],tn=St.scope.internal.getFont(St.fontName,St.fontStyle).id,un=St.scope.__private__.encodeColorString(St.color),gn=tt(St,St.caption);return _e.push("0.749023 g"),_e.push("0 0 "+U(At.internal.getWidth(St))+" "+U(At.internal.getHeight(St))+" re"),_e.push("f"),_e.push("BMC"),_e.push("q"),_e.push("0 0 1 rg"),_e.push("/"+tn+" "+U(gn.fontSize)+" Tf "+un),_e.push("BT"),_e.push(gn.text),_e.push("ET"),_e.push("Q"),_e.push("EMC"),e.stream=_e.join(`
`),e},YesNormal:function(St){var e=V(St);e.scope=St.scope;var _e=St.scope.internal.getFont(St.fontName,St.fontStyle).id,tn=St.scope.__private__.encodeColorString(St.color),un=[],gn=At.internal.getHeight(St),vn=At.internal.getWidth(St),fn=tt(St,St.caption);return un.push("1 g"),un.push("0 0 "+U(vn)+" "+U(gn)+" re"),un.push("f"),un.push("q"),un.push("0 0 1 rg"),un.push("0 0 "+U(vn-1)+" "+U(gn-1)+" re"),un.push("W"),un.push("n"),un.push("0 g"),un.push("BT"),un.push("/"+_e+" "+U(fn.fontSize)+" Tf "+tn),un.push(fn.text),un.push("ET"),un.push("Q"),e.stream=un.join(`
`),e},OffPushDown:function(St){var e=V(St);e.scope=St.scope;var _e=[];return _e.push("0.749023 g"),_e.push("0 0 "+U(At.internal.getWidth(St))+" "+U(At.internal.getHeight(St))+" re"),_e.push("f"),e.stream=_e.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(St){var e={D:{Off:At.RadioButton.Circle.OffPushDown},N:{}};return e.N[St]=At.RadioButton.Circle.YesNormal,e.D[St]=At.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(St){var e=V(St);e.scope=St.scope;var _e=[],tn=At.internal.getWidth(St)<=At.internal.getHeight(St)?At.internal.getWidth(St)/4:At.internal.getHeight(St)/4;tn=Number((.9*tn).toFixed(5));var un=At.internal.Bezier_C,gn=Number((tn*un).toFixed(5));return _e.push("q"),_e.push("1 0 0 1 "+z(At.internal.getWidth(St)/2)+" "+z(At.internal.getHeight(St)/2)+" cm"),_e.push(tn+" 0 m"),_e.push(tn+" "+gn+" "+gn+" "+tn+" 0 "+tn+" c"),_e.push("-"+gn+" "+tn+" -"+tn+" "+gn+" -"+tn+" 0 c"),_e.push("-"+tn+" -"+gn+" -"+gn+" -"+tn+" 0 -"+tn+" c"),_e.push(gn+" -"+tn+" "+tn+" -"+gn+" "+tn+" 0 c"),_e.push("f"),_e.push("Q"),e.stream=_e.join(`
`),e},YesPushDown:function(St){var e=V(St);e.scope=St.scope;var _e=[],tn=At.internal.getWidth(St)<=At.internal.getHeight(St)?At.internal.getWidth(St)/4:At.internal.getHeight(St)/4;tn=Number((.9*tn).toFixed(5));var un=Number((2*tn).toFixed(5)),gn=Number((un*At.internal.Bezier_C).toFixed(5)),vn=Number((tn*At.internal.Bezier_C).toFixed(5));return _e.push("0.749023 g"),_e.push("q"),_e.push("1 0 0 1 "+z(At.internal.getWidth(St)/2)+" "+z(At.internal.getHeight(St)/2)+" cm"),_e.push(un+" 0 m"),_e.push(un+" "+gn+" "+gn+" "+un+" 0 "+un+" c"),_e.push("-"+gn+" "+un+" -"+un+" "+gn+" -"+un+" 0 c"),_e.push("-"+un+" -"+gn+" -"+gn+" -"+un+" 0 -"+un+" c"),_e.push(gn+" -"+un+" "+un+" -"+gn+" "+un+" 0 c"),_e.push("f"),_e.push("Q"),_e.push("0 g"),_e.push("q"),_e.push("1 0 0 1 "+z(At.internal.getWidth(St)/2)+" "+z(At.internal.getHeight(St)/2)+" cm"),_e.push(tn+" 0 m"),_e.push(tn+" "+vn+" "+vn+" "+tn+" 0 "+tn+" c"),_e.push("-"+vn+" "+tn+" -"+tn+" "+vn+" -"+tn+" 0 c"),_e.push("-"+tn+" -"+vn+" -"+vn+" -"+tn+" 0 -"+tn+" c"),_e.push(vn+" -"+tn+" "+tn+" -"+vn+" "+tn+" 0 c"),_e.push("f"),_e.push("Q"),e.stream=_e.join(`
`),e},OffPushDown:function(St){var e=V(St);e.scope=St.scope;var _e=[],tn=At.internal.getWidth(St)<=At.internal.getHeight(St)?At.internal.getWidth(St)/4:At.internal.getHeight(St)/4;tn=Number((.9*tn).toFixed(5));var un=Number((2*tn).toFixed(5)),gn=Number((un*At.internal.Bezier_C).toFixed(5));return _e.push("0.749023 g"),_e.push("q"),_e.push("1 0 0 1 "+z(At.internal.getWidth(St)/2)+" "+z(At.internal.getHeight(St)/2)+" cm"),_e.push(un+" 0 m"),_e.push(un+" "+gn+" "+gn+" "+un+" 0 "+un+" c"),_e.push("-"+gn+" "+un+" -"+un+" "+gn+" -"+un+" 0 c"),_e.push("-"+un+" -"+gn+" -"+gn+" -"+un+" 0 -"+un+" c"),_e.push(gn+" -"+un+" "+un+" -"+gn+" "+un+" 0 c"),_e.push("f"),_e.push("Q"),e.stream=_e.join(`
`),e}},Cross:{createAppearanceStream:function(St){var e={D:{Off:At.RadioButton.Cross.OffPushDown},N:{}};return e.N[St]=At.RadioButton.Cross.YesNormal,e.D[St]=At.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(St){var e=V(St);e.scope=St.scope;var _e=[],tn=At.internal.calculateCross(St);return _e.push("q"),_e.push("1 1 "+U(At.internal.getWidth(St)-2)+" "+U(At.internal.getHeight(St)-2)+" re"),_e.push("W"),_e.push("n"),_e.push(U(tn.x1.x)+" "+U(tn.x1.y)+" m"),_e.push(U(tn.x2.x)+" "+U(tn.x2.y)+" l"),_e.push(U(tn.x4.x)+" "+U(tn.x4.y)+" m"),_e.push(U(tn.x3.x)+" "+U(tn.x3.y)+" l"),_e.push("s"),_e.push("Q"),e.stream=_e.join(`
`),e},YesPushDown:function(St){var e=V(St);e.scope=St.scope;var _e=At.internal.calculateCross(St),tn=[];return tn.push("0.749023 g"),tn.push("0 0 "+U(At.internal.getWidth(St))+" "+U(At.internal.getHeight(St))+" re"),tn.push("f"),tn.push("q"),tn.push("1 1 "+U(At.internal.getWidth(St)-2)+" "+U(At.internal.getHeight(St)-2)+" re"),tn.push("W"),tn.push("n"),tn.push(U(_e.x1.x)+" "+U(_e.x1.y)+" m"),tn.push(U(_e.x2.x)+" "+U(_e.x2.y)+" l"),tn.push(U(_e.x4.x)+" "+U(_e.x4.y)+" m"),tn.push(U(_e.x3.x)+" "+U(_e.x3.y)+" l"),tn.push("s"),tn.push("Q"),e.stream=tn.join(`
`),e},OffPushDown:function(St){var e=V(St);e.scope=St.scope;var _e=[];return _e.push("0.749023 g"),_e.push("0 0 "+U(At.internal.getWidth(St))+" "+U(At.internal.getHeight(St))+" re"),_e.push("f"),e.stream=_e.join(`
`),e}}},createDefaultAppearanceStream:function(St){var e=St.scope.internal.getFont(St.fontName,St.fontStyle).id,_e=St.scope.__private__.encodeColorString(St.color);return"/"+e+" "+St.fontSize+" Tf "+_e}};At.internal={Bezier_C:.551915024494,calculateCross:function(St){var e=At.internal.getWidth(St),_e=At.internal.getHeight(St),tn=Math.min(e,_e);return{x1:{x:(e-tn)/2,y:(_e-tn)/2+tn},x2:{x:(e-tn)/2+tn,y:(_e-tn)/2},x3:{x:(e-tn)/2,y:(_e-tn)/2},x4:{x:(e-tn)/2+tn,y:(_e-tn)/2+tn}}}},At.internal.getWidth=function(St){var e=0;return _typeof(St)==="object"&&(e=W(St.Rect[2])),e},At.internal.getHeight=function(St){var e=0;return _typeof(St)==="object"&&(e=W(St.Rect[3])),e};var xt=q.addField=function(St){if(at(this,St),!(St instanceof lt))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=St).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),St.page=St.scope.internal.getCurrentPageInfo().pageNumber,this};q.AcroFormChoiceField=ft,q.AcroFormListBox=dt,q.AcroFormComboBox=pt,q.AcroFormEditBox=gt,q.AcroFormButton=mt,q.AcroFormPushButton=vt,q.AcroFormRadioButton=bt,q.AcroFormCheckBox=wt,q.AcroFormTextField=Nt,q.AcroFormPasswordField=Lt,q.AcroFormAppearance=At,q.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At},E.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At};E.AcroForm;function _t(St){return St.reduce(function(e,_e,tn){return e[_e]=tn,e},{})}(function(St){St.__addimage__={};var e="UNKNOWN",_e={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},tn=St.__addimage__.getImageFileTypeByImageData=function(Mn,Hn){var Qn,Kn,nr,Zn,ir,Jn=e;if((Hn=Hn||e)==="RGBA"||Mn.data!==void 0&&Mn.data instanceof Uint8ClampedArray&&"height"in Mn&&"width"in Mn)return"RGBA";if(Sn(Mn))for(ir in _e)for(nr=_e[ir],Qn=0;Qn<nr.length;Qn+=1){for(Zn=!0,Kn=0;Kn<nr[Qn].length;Kn+=1)if(nr[Qn][Kn]!==void 0&&nr[Qn][Kn]!==Mn[Kn]){Zn=!1;break}if(Zn===!0){Jn=ir;break}}else for(ir in _e)for(nr=_e[ir],Qn=0;Qn<nr.length;Qn+=1){for(Zn=!0,Kn=0;Kn<nr[Qn].length;Kn+=1)if(nr[Qn][Kn]!==void 0&&nr[Qn][Kn]!==Mn.charCodeAt(Kn)){Zn=!1;break}if(Zn===!0){Jn=ir;break}}return Jn===e&&Hn!==e&&(Jn=Hn),Jn},un=function Mn(Hn){for(var Qn=this.internal.write,Kn=this.internal.putStream,nr=(0,this.internal.getFilters)();nr.indexOf("FlateEncode")!==-1;)nr.splice(nr.indexOf("FlateEncode"),1);Hn.objectId=this.internal.newObject();var Zn=[];if(Zn.push({key:"Type",value:"/XObject"}),Zn.push({key:"Subtype",value:"/Image"}),Zn.push({key:"Width",value:Hn.width}),Zn.push({key:"Height",value:Hn.height}),Hn.colorSpace===sn.INDEXED?Zn.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Hn.palette.length/3-1)+" "+("sMask"in Hn&&Hn.sMask!==void 0?Hn.objectId+2:Hn.objectId+1)+" 0 R]"}):(Zn.push({key:"ColorSpace",value:"/"+Hn.colorSpace}),Hn.colorSpace===sn.DEVICE_CMYK&&Zn.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Zn.push({key:"BitsPerComponent",value:Hn.bitsPerComponent}),"decodeParameters"in Hn&&Hn.decodeParameters!==void 0&&Zn.push({key:"DecodeParms",value:"<<"+Hn.decodeParameters+">>"}),"transparency"in Hn&&Array.isArray(Hn.transparency)){for(var ir="",Jn=0,Vn=Hn.transparency.length;Jn<Vn;Jn++)ir+=Hn.transparency[Jn]+" "+Hn.transparency[Jn]+" ";Zn.push({key:"Mask",value:"["+ir+"]"})}Hn.sMask!==void 0&&Zn.push({key:"SMask",value:Hn.objectId+1+" 0 R"});var Xn=Hn.filter!==void 0?["/"+Hn.filter]:void 0;if(Kn({data:Hn.data,additionalKeyValues:Zn,alreadyAppliedFilters:Xn,objectId:Hn.objectId}),Qn("endobj"),"sMask"in Hn&&Hn.sMask!==void 0){var Yn="/Predictor "+Hn.predictor+" /Colors 1 /BitsPerComponent "+Hn.bitsPerComponent+" /Columns "+Hn.width,Tn={width:Hn.width,height:Hn.height,colorSpace:"DeviceGray",bitsPerComponent:Hn.bitsPerComponent,decodeParameters:Yn,data:Hn.sMask};"filter"in Hn&&(Tn.filter=Hn.filter),Mn.call(this,Tn)}if(Hn.colorSpace===sn.INDEXED){var An=this.internal.newObject();Kn({data:Ln(new Uint8Array(Hn.palette)),objectId:An}),Qn("endobj")}},gn=function(){var Mn=this.internal.collections.addImage_images;for(var Hn in Mn)un.call(this,Mn[Hn])},vn=function(){var Mn,Hn=this.internal.collections.addImage_images,Qn=this.internal.write;for(var Kn in Hn)Qn("/I"+(Mn=Hn[Kn]).index,Mn.objectId,"0","R")},fn=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",gn),this.internal.events.subscribe("putXobjectDict",vn))},en=function(){var Mn=this.internal.collections.addImage_images;return fn.call(this),Mn},on=function(){return Object.keys(this.internal.collections.addImage_images).length},dn=function(Mn){return typeof St["process"+Mn.toUpperCase()]=="function"},rn=function(Mn){return _typeof(Mn)==="object"&&Mn.nodeType===1},an=function(Mn,Hn){if(Mn.nodeName==="IMG"&&Mn.hasAttribute("src")){var Qn=""+Mn.getAttribute("src");if(Qn.indexOf("data:image/")===0)return u(unescape(Qn).split("base64,").pop());var Kn=St.loadFile(Qn,!0);if(Kn!==void 0)return Kn}if(Mn.nodeName==="CANVAS"){if(Mn.width===0||Mn.height===0)throw new Error("Given canvas must have data. Canvas width: "+Mn.width+", height: "+Mn.height);var nr;switch(Hn){case"PNG":nr="image/png";break;case"WEBP":nr="image/webp";break;case"JPEG":case"JPG":default:nr="image/jpeg"}return u(Mn.toDataURL(nr,1).split("base64,").pop())}},nn=function(Mn){var Hn=this.internal.collections.addImage_images;if(Hn){for(var Qn in Hn)if(Mn===Hn[Qn].alias)return Hn[Qn]}},cn=function(Mn,Hn,Qn){return Mn||Hn||(Mn=-96,Hn=-96),Mn<0&&(Mn=-1*Qn.width*72/Mn/this.internal.scaleFactor),Hn<0&&(Hn=-1*Qn.height*72/Hn/this.internal.scaleFactor),Mn===0&&(Mn=Hn*Qn.width/Qn.height),Hn===0&&(Hn=Mn*Qn.height/Qn.width),[Mn,Hn]},hn=function(Mn,Hn,Qn,Kn,nr,Zn){var ir=cn.call(this,Qn,Kn,nr),Jn=this.internal.getCoordinateString,Vn=this.internal.getVerticalCoordinateString,Xn=en.call(this);if(Qn=ir[0],Kn=ir[1],Xn[nr.index]=nr,Zn){Zn*=Math.PI/180;var Yn=Math.cos(Zn),Tn=Math.sin(Zn),An=function(En){return En.toFixed(4)},wn=[An(Yn),An(Tn),An(-1*Tn),An(Yn),0,0,"cm"]}this.internal.write("q"),Zn?(this.internal.write([1,"0","0",1,Jn(Mn),Vn(Hn+Kn),"cm"].join(" ")),this.internal.write(wn.join(" ")),this.internal.write([Jn(Qn),"0","0",Jn(Kn),"0","0","cm"].join(" "))):this.internal.write([Jn(Qn),"0","0",Jn(Kn),Jn(Mn),Vn(Hn+Kn),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+nr.index+" Do"),this.internal.write("Q")},sn=St.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};St.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var pn=St.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},mn=St.__addimage__.sHashCode=function(Mn){var Hn,Qn,Kn=0;if(typeof Mn=="string")for(Qn=Mn.length,Hn=0;Hn<Qn;Hn++)Kn=(Kn<<5)-Kn+Mn.charCodeAt(Hn),Kn|=0;else if(Sn(Mn))for(Qn=Mn.byteLength/2,Hn=0;Hn<Qn;Hn++)Kn=(Kn<<5)-Kn+Mn[Hn],Kn|=0;return Kn},yn=St.__addimage__.validateStringAsBase64=function(Mn){(Mn=Mn||"").toString().trim();var Hn=!0;return Mn.length===0&&(Hn=!1),Mn.length%4!=0&&(Hn=!1),/^[A-Za-z0-9+/]+$/.test(Mn.substr(0,Mn.length-2))===!1&&(Hn=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(Mn.substr(-2))===!1&&(Hn=!1),Hn},_n=St.__addimage__.extractImageFromDataUrl=function(Mn){var Hn=(Mn=Mn||"").split("base64,"),Qn=null;if(Hn.length===2){var Kn=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(Hn[0]);Array.isArray(Kn)&&(Qn={mimeType:Kn[1],charset:Kn[2],data:Hn[1]})}return Qn},xn=St.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};St.__addimage__.isArrayBuffer=function(Mn){return xn()&&Mn instanceof ArrayBuffer};var Sn=St.__addimage__.isArrayBufferView=function(Mn){return xn()&&typeof Uint32Array<"u"&&(Mn instanceof Int8Array||Mn instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&Mn instanceof Uint8ClampedArray||Mn instanceof Int16Array||Mn instanceof Uint16Array||Mn instanceof Int32Array||Mn instanceof Uint32Array||Mn instanceof Float32Array||Mn instanceof Float64Array)},Pn=St.__addimage__.binaryStringToUint8Array=function(Mn){for(var Hn=Mn.length,Qn=new Uint8Array(Hn),Kn=0;Kn<Hn;Kn++)Qn[Kn]=Mn.charCodeAt(Kn);return Qn},Ln=St.__addimage__.arrayBufferToBinaryString=function(Mn){for(var Hn="",Qn=Sn(Mn)?Mn:new Uint8Array(Mn),Kn=0;Kn<Qn.length;Kn+=8192)Hn+=String.fromCharCode.apply(null,Qn.subarray(Kn,Kn+8192));return Hn};St.addImage=function(){var Mn,Hn,Qn,Kn,nr,Zn,ir,Jn,Vn;if(typeof arguments[1]=="number"?(Hn=e,Qn=arguments[1],Kn=arguments[2],nr=arguments[3],Zn=arguments[4],ir=arguments[5],Jn=arguments[6],Vn=arguments[7]):(Hn=arguments[1],Qn=arguments[2],Kn=arguments[3],nr=arguments[4],Zn=arguments[5],ir=arguments[6],Jn=arguments[7],Vn=arguments[8]),_typeof(Mn=arguments[0])==="object"&&!rn(Mn)&&"imageData"in Mn){var Xn=Mn;Mn=Xn.imageData,Hn=Xn.format||Hn||e,Qn=Xn.x||Qn||0,Kn=Xn.y||Kn||0,nr=Xn.w||Xn.width||nr,Zn=Xn.h||Xn.height||Zn,ir=Xn.alias||ir,Jn=Xn.compression||Jn,Vn=Xn.rotation||Xn.angle||Vn}var Yn=this.internal.getFilters();if(Jn===void 0&&Yn.indexOf("FlateEncode")!==-1&&(Jn="SLOW"),isNaN(Qn)||isNaN(Kn))throw new Error("Invalid coordinates passed to jsPDF.addImage");fn.call(this);var Tn=In.call(this,Mn,Hn,ir,Jn);return hn.call(this,Qn,Kn,nr,Zn,Tn,Vn),this};var In=function(Mn,Hn,Qn,Kn){var nr,Zn,ir;if(typeof Mn=="string"&&tn(Mn)===e){Mn=unescape(Mn);var Jn=Rn(Mn,!1);(Jn!==""||(Jn=St.loadFile(Mn,!0))!==void 0)&&(Mn=Jn)}if(rn(Mn)&&(Mn=an(Mn,Hn)),Hn=tn(Mn,Hn),!dn(Hn))throw new Error("addImage does not support files of type '"+Hn+"', please ensure that a plugin for '"+Hn+"' support is added.");if(((ir=Qn)==null||ir.length===0)&&(Qn=function(Vn){return typeof Vn=="string"||Sn(Vn)?mn(Vn):Sn(Vn.data)?mn(Vn.data):null}(Mn)),(nr=nn.call(this,Qn))||(xn()&&(Mn instanceof Uint8Array||Hn==="RGBA"||(Zn=Mn,Mn=Pn(Mn))),nr=this["process"+Hn.toUpperCase()](Mn,on.call(this),Qn,function(Vn){return Vn&&typeof Vn=="string"&&(Vn=Vn.toUpperCase()),Vn in St.image_compression?Vn:pn.NONE}(Kn),Zn)),!nr)throw new Error("An unknown error occurred whilst processing the image.");return nr},Rn=St.__addimage__.convertBase64ToBinaryString=function(Mn,Hn){var Qn;Hn=typeof Hn!="boolean"||Hn;var Kn,nr="";if(typeof Mn=="string"){Kn=(Qn=_n(Mn))!==null?Qn.data:Mn;try{nr=u(Kn)}catch(Zn){if(Hn)throw yn(Kn)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Zn.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return nr};St.getImageProperties=function(Mn){var Hn,Qn,Kn="";if(rn(Mn)&&(Mn=an(Mn)),typeof Mn=="string"&&tn(Mn)===e&&((Kn=Rn(Mn,!1))===""&&(Kn=St.loadFile(Mn)||""),Mn=Kn),Qn=tn(Mn),!dn(Qn))throw new Error("addImage does not support files of type '"+Qn+"', please ensure that a plugin for '"+Qn+"' support is added.");if(!xn()||Mn instanceof Uint8Array||(Mn=Pn(Mn)),!(Hn=this["process"+Qn.toUpperCase()](Mn)))throw new Error("An unknown error occurred whilst processing the image");return Hn.fileType=Qn,Hn}})(E.API),function(St){var e=function(_e){if(_e!==void 0&&_e!="")return!0};E.API.events.push(["addPage",function(_e){this.internal.getPageInfo(_e.pageNumber).pageContext.annotations=[]}]),St.events.push(["putPage",function(_e){for(var tn,un,gn,vn=this.internal.getCoordinateString,fn=this.internal.getVerticalCoordinateString,en=this.internal.getPageInfoByObjId(_e.objId),on=_e.pageContext.annotations,dn=!1,rn=0;rn<on.length&&!dn;rn++)switch((tn=on[rn]).type){case"link":(e(tn.options.url)||e(tn.options.pageNumber))&&(dn=!0);break;case"reference":case"text":case"freetext":dn=!0}if(dn!=0){this.internal.write("/Annots [");for(var an=0;an<on.length;an++){tn=on[an];var nn=this.internal.pdfEscape,cn=this.internal.getEncryptor(_e.objId);switch(tn.type){case"reference":this.internal.write(" "+tn.object.objId+" 0 R ");break;case"text":var hn=this.internal.newAdditionalObject(),sn=this.internal.newAdditionalObject(),pn=this.internal.getEncryptor(hn.objId),mn=tn.title||"Note";gn="<</Type /Annot /Subtype /Text "+(un="/Rect ["+vn(tn.bounds.x)+" "+fn(tn.bounds.y+tn.bounds.h)+" "+vn(tn.bounds.x+tn.bounds.w)+" "+fn(tn.bounds.y)+"] ")+"/Contents ("+nn(pn(tn.contents))+")",gn+=" /Popup "+sn.objId+" 0 R",gn+=" /P "+en.objId+" 0 R",gn+=" /T ("+nn(pn(mn))+") >>",hn.content=gn;var yn=hn.objId+" 0 R";gn="<</Type /Annot /Subtype /Popup "+(un="/Rect ["+vn(tn.bounds.x+30)+" "+fn(tn.bounds.y+tn.bounds.h)+" "+vn(tn.bounds.x+tn.bounds.w+30)+" "+fn(tn.bounds.y)+"] ")+" /Parent "+yn,tn.open&&(gn+=" /Open true"),gn+=" >>",sn.content=gn,this.internal.write(hn.objId,"0 R",sn.objId,"0 R");break;case"freetext":un="/Rect ["+vn(tn.bounds.x)+" "+fn(tn.bounds.y)+" "+vn(tn.bounds.x+tn.bounds.w)+" "+fn(tn.bounds.y+tn.bounds.h)+"] ";var _n=tn.color||"#000000";gn="<</Type /Annot /Subtype /FreeText "+un+"/Contents ("+nn(cn(tn.contents))+")",gn+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+_n+")",gn+=" /Border [0 0 0]",gn+=" >>",this.internal.write(gn);break;case"link":if(tn.options.name){var xn=this.annotations._nameMap[tn.options.name];tn.options.pageNumber=xn.page,tn.options.top=xn.y}else tn.options.top||(tn.options.top=0);if(un="/Rect ["+tn.finalBounds.x+" "+tn.finalBounds.y+" "+tn.finalBounds.w+" "+tn.finalBounds.h+"] ",gn="",tn.options.url)gn="<</Type /Annot /Subtype /Link "+un+"/Border [0 0 0] /A <</S /URI /URI ("+nn(cn(tn.options.url))+") >>";else if(tn.options.pageNumber)switch(gn="<</Type /Annot /Subtype /Link "+un+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(tn.options.pageNumber).objId+" 0 R",tn.options.magFactor=tn.options.magFactor||"XYZ",tn.options.magFactor){case"Fit":gn+=" /Fit]";break;case"FitH":gn+=" /FitH "+tn.options.top+"]";break;case"FitV":tn.options.left=tn.options.left||0,gn+=" /FitV "+tn.options.left+"]";break;case"XYZ":default:var Sn=fn(tn.options.top);tn.options.left=tn.options.left||0,tn.options.zoom===void 0&&(tn.options.zoom=0),gn+=" /XYZ "+tn.options.left+" "+Sn+" "+tn.options.zoom+"]"}gn!=""&&(gn+=" >>",this.internal.write(gn))}}this.internal.write("]")}}]),St.createAnnotation=function(_e){var tn=this.internal.getCurrentPageInfo();switch(_e.type){case"link":this.link(_e.bounds.x,_e.bounds.y,_e.bounds.w,_e.bounds.h,_e);break;case"text":case"freetext":tn.pageContext.annotations.push(_e)}},St.link=function(_e,tn,un,gn,vn){var fn=this.internal.getCurrentPageInfo(),en=this.internal.getCoordinateString,on=this.internal.getVerticalCoordinateString;fn.pageContext.annotations.push({finalBounds:{x:en(_e),y:on(tn),w:en(_e+un),h:on(tn+gn)},options:vn,type:"link"})},St.textWithLink=function(_e,tn,un,gn){var vn,fn,en=this.getTextWidth(_e),on=this.internal.getLineHeight()/this.internal.scaleFactor;if(gn.maxWidth!==void 0){fn=gn.maxWidth;var dn=this.splitTextToSize(_e,fn).length;vn=Math.ceil(on*dn)}else fn=en,vn=on;return this.text(_e,tn,un,gn),un+=.2*on,gn.align==="center"&&(tn-=en/2),gn.align==="right"&&(tn-=en),this.link(tn,un-on,fn,vn,gn),en},St.getTextWidth=function(_e){var tn=this.internal.getFontSize();return this.getStringUnitWidth(_e)*tn/this.internal.scaleFactor}}(E.API),function(St){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},_e={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},tn={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},un=[1570,1571,1573,1575];St.__arabicParser__={};var gn=St.__arabicParser__.isInArabicSubstitutionA=function(hn){return e[hn.charCodeAt(0)]!==void 0},vn=St.__arabicParser__.isArabicLetter=function(hn){return typeof hn=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(hn)},fn=St.__arabicParser__.isArabicEndLetter=function(hn){return vn(hn)&&gn(hn)&&e[hn.charCodeAt(0)].length<=2},en=St.__arabicParser__.isArabicAlfLetter=function(hn){return vn(hn)&&un.indexOf(hn.charCodeAt(0))>=0};St.__arabicParser__.arabicLetterHasIsolatedForm=function(hn){return vn(hn)&&gn(hn)&&e[hn.charCodeAt(0)].length>=1};var on=St.__arabicParser__.arabicLetterHasFinalForm=function(hn){return vn(hn)&&gn(hn)&&e[hn.charCodeAt(0)].length>=2};St.__arabicParser__.arabicLetterHasInitialForm=function(hn){return vn(hn)&&gn(hn)&&e[hn.charCodeAt(0)].length>=3};var dn=St.__arabicParser__.arabicLetterHasMedialForm=function(hn){return vn(hn)&&gn(hn)&&e[hn.charCodeAt(0)].length==4},rn=St.__arabicParser__.resolveLigatures=function(hn){var sn=0,pn=_e,mn="",yn=0;for(sn=0;sn<hn.length;sn+=1)pn[hn.charCodeAt(sn)]!==void 0?(yn++,typeof(pn=pn[hn.charCodeAt(sn)])=="number"&&(mn+=String.fromCharCode(pn),pn=_e,yn=0),sn===hn.length-1&&(pn=_e,mn+=hn.charAt(sn-(yn-1)),sn-=yn-1,yn=0)):(pn=_e,mn+=hn.charAt(sn-yn),sn-=yn,yn=0);return mn};St.__arabicParser__.isArabicDiacritic=function(hn){return hn!==void 0&&tn[hn.charCodeAt(0)]!==void 0};var an=St.__arabicParser__.getCorrectForm=function(hn,sn,pn){return vn(hn)?gn(hn)===!1?-1:!on(hn)||!vn(sn)&&!vn(pn)||!vn(pn)&&fn(sn)||fn(hn)&&!vn(sn)||fn(hn)&&en(sn)||fn(hn)&&fn(sn)?0:dn(hn)&&vn(sn)&&!fn(sn)&&vn(pn)&&on(pn)?3:fn(hn)||!vn(pn)?1:2:-1},nn=function(hn){var sn=0,pn=0,mn=0,yn="",_n="",xn="",Sn=(hn=hn||"").split("\\s+"),Pn=[];for(sn=0;sn<Sn.length;sn+=1){for(Pn.push(""),pn=0;pn<Sn[sn].length;pn+=1)yn=Sn[sn][pn],_n=Sn[sn][pn-1],xn=Sn[sn][pn+1],vn(yn)?(mn=an(yn,_n,xn),Pn[sn]+=mn!==-1?String.fromCharCode(e[yn.charCodeAt(0)][mn]):yn):Pn[sn]+=yn;Pn[sn]=rn(Pn[sn])}return Pn.join(" ")},cn=St.__arabicParser__.processArabic=St.processArabic=function(){var hn,sn=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,pn=[];if(Array.isArray(sn)){var mn=0;for(pn=[],mn=0;mn<sn.length;mn+=1)Array.isArray(sn[mn])?pn.push([nn(sn[mn][0]),sn[mn][1],sn[mn][2]]):pn.push([nn(sn[mn])]);hn=pn}else hn=nn(sn);return typeof arguments[0]=="string"?hn:(arguments[0].text=hn,arguments[0])};St.events.push(["preProcessText",cn])}(E.API),E.API.autoPrint=function(St){var e;switch((St=St||{}).variant=St.variant||"non-conform",St.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(St){var e=function(){var _e=void 0;Object.defineProperty(this,"pdf",{get:function(){return _e},set:function(fn){_e=fn}});var tn=150;Object.defineProperty(this,"width",{get:function(){return tn},set:function(fn){tn=isNaN(fn)||Number.isInteger(fn)===!1||fn<0?150:fn,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=tn+1)}});var un=300;Object.defineProperty(this,"height",{get:function(){return un},set:function(fn){un=isNaN(fn)||Number.isInteger(fn)===!1||fn<0?300:fn,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=un+1)}});var gn=[];Object.defineProperty(this,"childNodes",{get:function(){return gn},set:function(fn){gn=fn}});var vn={};Object.defineProperty(this,"style",{get:function(){return vn},set:function(fn){vn=fn}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(_e,tn){var un;if((_e=_e||"2d")!=="2d")return null;for(un in tn)this.pdf.context2d.hasOwnProperty(un)&&(this.pdf.context2d[un]=tn[un]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},St.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(E.API),function(St){var e={left:0,top:0,bottom:0,right:0},_e=!1,tn=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),un.call(this))},un=function(){this.internal.__cell__.lastCell=new gn,this.internal.__cell__.pages=1},gn=function(){var en=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return en},set:function(hn){en=hn}});var on=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return on},set:function(hn){on=hn}});var dn=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return dn},set:function(hn){dn=hn}});var rn=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return rn},set:function(hn){rn=hn}});var an=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return an},set:function(hn){an=hn}});var nn=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return nn},set:function(hn){nn=hn}});var cn=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return cn},set:function(hn){cn=hn}}),this};gn.prototype.clone=function(){return new gn(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},gn.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},St.setHeaderFunction=function(en){return tn.call(this),this.internal.__cell__.headerFunction=typeof en=="function"?en:void 0,this},St.getTextDimensions=function(en,on){tn.call(this);var dn=(on=on||{}).fontSize||this.getFontSize(),rn=on.font||this.getFont(),an=on.scaleFactor||this.internal.scaleFactor,nn=0,cn=0,hn=0,sn=this;if(!Array.isArray(en)&&typeof en!="string"){if(typeof en!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");en=String(en)}var pn=on.maxWidth;pn>0?typeof en=="string"?en=this.splitTextToSize(en,pn):Object.prototype.toString.call(en)==="[object Array]"&&(en=en.reduce(function(yn,_n){return yn.concat(sn.splitTextToSize(_n,pn))},[])):en=Array.isArray(en)?en:[en];for(var mn=0;mn<en.length;mn++)nn<(hn=this.getStringUnitWidth(en[mn],{font:rn})*dn)&&(nn=hn);return nn!==0&&(cn=en.length),{w:nn/=an,h:Math.max((cn*dn*this.getLineHeightFactor()-dn*(this.getLineHeightFactor()-1))/an,0)}},St.cellAddPage=function(){tn.call(this),this.addPage();var en=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new gn(en.left,en.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var vn=St.cell=function(){var en;en=arguments[0]instanceof gn?arguments[0]:new gn(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),tn.call(this);var on=this.internal.__cell__.lastCell,dn=this.internal.__cell__.padding,rn=this.internal.__cell__.margins||e,an=this.internal.__cell__.tableHeaderRow,nn=this.internal.__cell__.printHeaders;return on.lineNumber!==void 0&&(on.lineNumber===en.lineNumber?(en.x=(on.x||0)+(on.width||0),en.y=on.y||0):on.y+on.height+en.height+rn.bottom>this.getPageHeight()?(this.cellAddPage(),en.y=rn.top,nn&&an&&(this.printHeaderRow(en.lineNumber,!0),en.y+=an[0].height)):en.y=on.y+on.height||en.y),en.text[0]!==void 0&&(this.rect(en.x,en.y,en.width,en.height,_e===!0?"FD":void 0),en.align==="right"?this.text(en.text,en.x+en.width-dn,en.y+dn,{align:"right",baseline:"top"}):en.align==="center"?this.text(en.text,en.x+en.width/2,en.y+dn,{align:"center",baseline:"top",maxWidth:en.width-dn-dn}):this.text(en.text,en.x+dn,en.y+dn,{align:"left",baseline:"top",maxWidth:en.width-dn-dn})),this.internal.__cell__.lastCell=en,this};St.table=function(en,on,dn,rn,an){if(tn.call(this),!dn)throw new Error("No data for PDF table.");var nn,cn,hn,sn,pn=[],mn=[],yn=[],_n={},xn={},Sn=[],Pn=[],Ln=(an=an||{}).autoSize||!1,In=an.printHeaders!==!1,Rn=an.css&&an.css["font-size"]!==void 0?16*an.css["font-size"]:an.fontSize||12,Mn=an.margins||Object.assign({width:this.getPageWidth()},e),Hn=typeof an.padding=="number"?an.padding:3,Qn=an.headerBackgroundColor||"#c8c8c8",Kn=an.headerTextColor||"#000";if(un.call(this),this.internal.__cell__.printHeaders=In,this.internal.__cell__.margins=Mn,this.internal.__cell__.table_font_size=Rn,this.internal.__cell__.padding=Hn,this.internal.__cell__.headerBackgroundColor=Qn,this.internal.__cell__.headerTextColor=Kn,this.setFontSize(Rn),rn==null)mn=pn=Object.keys(dn[0]),yn=pn.map(function(){return"left"});else if(Array.isArray(rn)&&_typeof(rn[0])==="object")for(pn=rn.map(function(Xn){return Xn.name}),mn=rn.map(function(Xn){return Xn.prompt||Xn.name||""}),yn=rn.map(function(Xn){return Xn.align||"left"}),nn=0;nn<rn.length;nn+=1)xn[rn[nn].name]=rn[nn].width*(19.049976/25.4);else Array.isArray(rn)&&typeof rn[0]=="string"&&(mn=pn=rn,yn=pn.map(function(){return"left"}));if(Ln||Array.isArray(rn)&&typeof rn[0]=="string")for(nn=0;nn<pn.length;nn+=1){for(_n[sn=pn[nn]]=dn.map(function(Xn){return Xn[sn]}),this.setFont(void 0,"bold"),Sn.push(this.getTextDimensions(mn[nn],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),cn=_n[sn],this.setFont(void 0,"normal"),hn=0;hn<cn.length;hn+=1)Sn.push(this.getTextDimensions(cn[hn],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);xn[sn]=Math.max.apply(null,Sn)+Hn+Hn,Sn=[]}if(In){var nr={};for(nn=0;nn<pn.length;nn+=1)nr[pn[nn]]={},nr[pn[nn]].text=mn[nn],nr[pn[nn]].align=yn[nn];var Zn=fn.call(this,nr,xn);Pn=pn.map(function(Xn){return new gn(en,on,xn[Xn],Zn,nr[Xn].text,void 0,nr[Xn].align)}),this.setTableHeaderRow(Pn),this.printHeaderRow(1,!1)}var ir=rn.reduce(function(Xn,Yn){return Xn[Yn.name]=Yn.align,Xn},{});for(nn=0;nn<dn.length;nn+=1){"rowStart"in an&&an.rowStart instanceof Function&&an.rowStart({row:nn,data:dn[nn]},this);var Jn=fn.call(this,dn[nn],xn);for(hn=0;hn<pn.length;hn+=1){var Vn=dn[nn][pn[hn]];"cellStart"in an&&an.cellStart instanceof Function&&an.cellStart({row:nn,col:hn,data:Vn},this),vn.call(this,new gn(en,on,xn[pn[hn]],Jn,Vn,nn+2,ir[pn[hn]]))}}return this.internal.__cell__.table_x=en,this.internal.__cell__.table_y=on,this};var fn=function(en,on){var dn=this.internal.__cell__.padding,rn=this.internal.__cell__.table_font_size,an=this.internal.scaleFactor;return Object.keys(en).map(function(nn){var cn=en[nn];return this.splitTextToSize(cn.hasOwnProperty("text")?cn.text:cn,on[nn]-dn-dn)},this).map(function(nn){return this.getLineHeightFactor()*nn.length*rn/an+dn+dn},this).reduce(function(nn,cn){return Math.max(nn,cn)},0)};St.setTableHeaderRow=function(en){tn.call(this),this.internal.__cell__.tableHeaderRow=en},St.printHeaderRow=function(en,on){if(tn.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var dn;if(_e=!0,typeof this.internal.__cell__.headerFunction=="function"){var rn=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new gn(rn[0],rn[1],rn[2],rn[3],void 0,-1)}this.setFont(void 0,"bold");for(var an=[],nn=0;nn<this.internal.__cell__.tableHeaderRow.length;nn+=1){dn=this.internal.__cell__.tableHeaderRow[nn].clone(),on&&(dn.y=this.internal.__cell__.margins.top||0,an.push(dn)),dn.lineNumber=en;var cn=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),vn.call(this,dn),this.setTextColor(cn)}an.length>0&&this.setTableHeaderRow(an),this.setFont(void 0,"normal"),_e=!1}}(E.API);var Pt={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},kt=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],It=_t(kt),Ft=[100,200,300,400,500,600,700,800,900],Ct=_t(Ft);function jt(St){var e=St.family.replace(/"|'/g,"").toLowerCase(),_e=function(gn){return Pt[gn=gn||"normal"]?gn:"normal"}(St.style),tn=function(gn){if(!gn)return 400;if(typeof gn=="number")return gn>=100&&gn<=900&&gn%100==0?gn:400;if(/^\d00$/.test(gn))return parseInt(gn);switch(gn){case"bold":return 700;case"normal":default:return 400}}(St.weight),un=function(gn){return typeof It[gn=gn||"normal"]=="number"?gn:"normal"}(St.stretch);return{family:e,style:_e,weight:tn,stretch:un,src:St.src||[],ref:St.ref||{name:e,style:[un,_e,tn].join(" ")}}}function Ot(St,e,_e,tn){var un;for(un=_e;un>=0&&un<e.length;un+=tn)if(St[e[un]])return St[e[un]];for(un=_e;un>=0&&un<e.length;un-=tn)if(St[e[un]])return St[e[un]]}var Bt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Mt={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Et(St){return[St.stretch,St.style,St.weight,St.family].join(" ")}function qt(St,e,_e){for(var tn=(_e=_e||{}).defaultFontFamily||"times",un=Object.assign({},Bt,_e.genericFontFamilies||{}),gn=null,vn=null,fn=0;fn<e.length;++fn)if(un[(gn=jt(e[fn])).family]&&(gn.family=un[gn.family]),St.hasOwnProperty(gn.family)){vn=St[gn.family];break}if(!(vn=vn||St[tn]))throw new Error("Could not find a font-family for the rule '"+Et(gn)+"' and default family '"+tn+"'.");if(vn=function(en,on){if(on[en])return on[en];var dn=It[en],rn=dn<=It.normal?-1:1,an=Ot(on,kt,dn,rn);if(!an)throw new Error("Could not find a matching font-stretch value for "+en);return an}(gn.stretch,vn),vn=function(en,on){if(on[en])return on[en];for(var dn=Pt[en],rn=0;rn<dn.length;++rn)if(on[dn[rn]])return on[dn[rn]];throw new Error("Could not find a matching font-style for "+en)}(gn.style,vn),!(vn=function(en,on){if(on[en])return on[en];if(en===400&&on[500])return on[500];if(en===500&&on[400])return on[400];var dn=Ct[en],rn=Ot(on,Ft,dn,en<400?-1:1);if(!rn)throw new Error("Could not find a matching font-weight for value "+en);return rn}(gn.weight,vn)))throw new Error("Failed to resolve a font for the rule '"+Et(gn)+"'.");return vn}function Dt(St){return St.trimLeft()}function Rt(St,e){for(var _e=0;_e<St.length;){if(St.charAt(_e)===e)return[St.substring(0,_e),St.substring(_e+1)];_e+=1}return null}function Tt(St){var e=St.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],St.substring(e[0].length)]}var Ut,zt,Ht,Wt=["times"];(function(St){var e,_e,tn,un,gn,vn,fn,en,on,dn=function(Tn){return Tn=Tn||{},this.isStrokeTransparent=Tn.isStrokeTransparent||!1,this.strokeOpacity=Tn.strokeOpacity||1,this.strokeStyle=Tn.strokeStyle||"#000000",this.fillStyle=Tn.fillStyle||"#000000",this.isFillTransparent=Tn.isFillTransparent||!1,this.fillOpacity=Tn.fillOpacity||1,this.font=Tn.font||"10px sans-serif",this.textBaseline=Tn.textBaseline||"alphabetic",this.textAlign=Tn.textAlign||"left",this.lineWidth=Tn.lineWidth||1,this.lineJoin=Tn.lineJoin||"miter",this.lineCap=Tn.lineCap||"butt",this.path=Tn.path||[],this.transform=Tn.transform!==void 0?Tn.transform.clone():new en,this.globalCompositeOperation=Tn.globalCompositeOperation||"normal",this.globalAlpha=Tn.globalAlpha||1,this.clip_path=Tn.clip_path||[],this.currentPoint=Tn.currentPoint||new vn,this.miterLimit=Tn.miterLimit||10,this.lastPoint=Tn.lastPoint||new vn,this.lineDashOffset=Tn.lineDashOffset||0,this.lineDash=Tn.lineDash||[],this.margin=Tn.margin||[0,0,0,0],this.prevPageLastElemOffset=Tn.prevPageLastElemOffset||0,this.ignoreClearRect=typeof Tn.ignoreClearRect!="boolean"||Tn.ignoreClearRect,this};St.events.push(["initialized",function(){this.context2d=new rn(this),e=this.internal.f2,_e=this.internal.getCoordinateString,tn=this.internal.getVerticalCoordinateString,un=this.internal.getHorizontalCoordinate,gn=this.internal.getVerticalCoordinate,vn=this.internal.Point,fn=this.internal.Rectangle,en=this.internal.Matrix,on=new dn}]);var rn=function(Tn){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var An=Tn;Object.defineProperty(this,"pdf",{get:function(){return An}});var wn=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return wn},set:function(zn){wn=Boolean(zn)}});var En=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return En},set:function(zn){En=Boolean(zn)}});var Nn=0;Object.defineProperty(this,"posX",{get:function(){return Nn},set:function(zn){isNaN(zn)||(Nn=zn)}});var Fn=0;Object.defineProperty(this,"posY",{get:function(){return Fn},set:function(zn){isNaN(zn)||(Fn=zn)}}),Object.defineProperty(this,"margin",{get:function(){return on.margin},set:function(zn){var jn;typeof zn=="number"?jn=[zn,zn,zn,zn]:((jn=new Array(4))[0]=zn[0],jn[1]=zn.length>=2?zn[1]:jn[0],jn[2]=zn.length>=3?zn[2]:jn[0],jn[3]=zn.length>=4?zn[3]:jn[1]),on.margin=jn}});var Un=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Un},set:function(zn){Un=zn}});var Gn=0;Object.defineProperty(this,"lastBreak",{get:function(){return Gn},set:function(zn){Gn=zn}});var er=[];Object.defineProperty(this,"pageBreaks",{get:function(){return er},set:function(zn){er=zn}}),Object.defineProperty(this,"ctx",{get:function(){return on},set:function(zn){zn instanceof dn&&(on=zn)}}),Object.defineProperty(this,"path",{get:function(){return on.path},set:function(zn){on.path=zn}});var On=[];Object.defineProperty(this,"ctxStack",{get:function(){return On},set:function(zn){On=zn}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(zn){var jn;jn=an(zn),this.ctx.fillStyle=jn.style,this.ctx.isFillTransparent=jn.a===0,this.ctx.fillOpacity=jn.a,this.pdf.setFillColor(jn.r,jn.g,jn.b,{a:jn.a}),this.pdf.setTextColor(jn.r,jn.g,jn.b,{a:jn.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(zn){var jn=an(zn);this.ctx.strokeStyle=jn.style,this.ctx.isStrokeTransparent=jn.a===0,this.ctx.strokeOpacity=jn.a,jn.a===0?this.pdf.setDrawColor(255,255,255):(jn.a,this.pdf.setDrawColor(jn.r,jn.g,jn.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(zn){["butt","round","square"].indexOf(zn)!==-1&&(this.ctx.lineCap=zn,this.pdf.setLineCap(zn))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(zn){isNaN(zn)||(this.ctx.lineWidth=zn,this.pdf.setLineWidth(zn))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(zn){["bevel","round","miter"].indexOf(zn)!==-1&&(this.ctx.lineJoin=zn,this.pdf.setLineJoin(zn))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(zn){isNaN(zn)||(this.ctx.miterLimit=zn,this.pdf.setMiterLimit(zn))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(zn){this.ctx.textBaseline=zn}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(zn){["right","end","center","left","start"].indexOf(zn)!==-1&&(this.ctx.textAlign=zn)}});var Bn=null;function $n(zn,jn){if(Bn===null){var ur=function(gr){var ar=[];return Object.keys(gr).forEach(function(vr){gr[vr].forEach(function(dr){var hr=null;switch(dr){case"bold":hr={family:vr,weight:"bold"};break;case"italic":hr={family:vr,style:"italic"};break;case"bolditalic":hr={family:vr,weight:"bold",style:"italic"};break;case"":case"normal":hr={family:vr}}hr!==null&&(hr.ref={name:vr,style:dr},ar.push(hr))})}),ar}(zn.getFontList());Bn=function(gr){for(var ar={},vr=0;vr<gr.length;++vr){var dr=jt(gr[vr]),hr=dr.family,_r=dr.stretch,or=dr.style,Er=dr.weight;ar[hr]=ar[hr]||{},ar[hr][_r]=ar[hr][_r]||{},ar[hr][_r][or]=ar[hr][_r][or]||{},ar[hr][_r][or][Er]=dr}return ar}(ur.concat(jn))}return Bn}var qn=null;Object.defineProperty(this,"fontFaces",{get:function(){return qn},set:function(zn){Bn=null,qn=zn}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(zn){var jn;if(this.ctx.font=zn,(jn=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(zn))!==null){var ur=jn[1],gr=(jn[2],jn[3]),ar=jn[4],vr=(jn[5],jn[6]),dr=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ar)[2];ar=Math.floor(dr==="px"?parseFloat(ar)*this.pdf.internal.scaleFactor:dr==="em"?parseFloat(ar)*this.pdf.getFontSize():parseFloat(ar)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ar);var hr=function(Ir){var ts,zr,ws=[],es=Ir.trim();if(es==="")return Wt;if(es in Mt)return[Mt[es]];for(;es!=="";){switch(zr=null,ts=(es=Dt(es)).charAt(0)){case'"':case"'":zr=Rt(es.substring(1),ts);break;default:zr=Tt(es)}if(zr===null||(ws.push(zr[0]),(es=Dt(zr[1]))!==""&&es.charAt(0)!==","))return Wt;es=es.replace(/^,/,"")}return ws}(vr);if(this.fontFaces){var _r=qt($n(this.pdf,this.fontFaces),hr.map(function(Ir){return{family:Ir,stretch:"normal",weight:gr,style:ur}}));this.pdf.setFont(_r.ref.name,_r.ref.style)}else{var or="";(gr==="bold"||parseInt(gr,10)>=700||ur==="bold")&&(or="bold"),ur==="italic"&&(or+="italic"),or.length===0&&(or="normal");for(var Er="",Dr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Rr=0;Rr<hr.length;Rr++){if(this.pdf.internal.getFont(hr[Rr],or,{noFallback:!0,disableWarning:!0})!==void 0){Er=hr[Rr];break}if(or==="bolditalic"&&this.pdf.internal.getFont(hr[Rr],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Er=hr[Rr],or="bold";else if(this.pdf.internal.getFont(hr[Rr],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Er=hr[Rr],or="normal";break}}if(Er===""){for(var Gr=0;Gr<hr.length;Gr++)if(Dr[hr[Gr]]){Er=Dr[hr[Gr]];break}}Er=Er===""?"Times":Er,this.pdf.setFont(Er,or)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(zn){this.ctx.globalCompositeOperation=zn}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(zn){this.ctx.globalAlpha=zn}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(zn){this.ctx.lineDashOffset=zn,Yn.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(zn){this.ctx.lineDash=zn,Yn.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(zn){this.ctx.ignoreClearRect=Boolean(zn)}})};rn.prototype.setLineDash=function(Tn){this.lineDash=Tn},rn.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},rn.prototype.fill=function(){_n.call(this,"fill",!1)},rn.prototype.stroke=function(){_n.call(this,"stroke",!1)},rn.prototype.beginPath=function(){this.path=[{type:"begin"}]},rn.prototype.moveTo=function(Tn,An){if(isNaN(Tn)||isNaN(An))throw a.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var wn=this.ctx.transform.applyToPoint(new vn(Tn,An));this.path.push({type:"mt",x:wn.x,y:wn.y}),this.ctx.lastPoint=new vn(Tn,An)},rn.prototype.closePath=function(){var Tn=new vn(0,0),An=0;for(An=this.path.length-1;An!==-1;An--)if(this.path[An].type==="begin"&&_typeof(this.path[An+1])==="object"&&typeof this.path[An+1].x=="number"){Tn=new vn(this.path[An+1].x,this.path[An+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new vn(Tn.x,Tn.y)},rn.prototype.lineTo=function(Tn,An){if(isNaN(Tn)||isNaN(An))throw a.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var wn=this.ctx.transform.applyToPoint(new vn(Tn,An));this.path.push({type:"lt",x:wn.x,y:wn.y}),this.ctx.lastPoint=new vn(wn.x,wn.y)},rn.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),_n.call(this,null,!0)},rn.prototype.quadraticCurveTo=function(Tn,An,wn,En){if(isNaN(wn)||isNaN(En)||isNaN(Tn)||isNaN(An))throw a.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Nn=this.ctx.transform.applyToPoint(new vn(wn,En)),Fn=this.ctx.transform.applyToPoint(new vn(Tn,An));this.path.push({type:"qct",x1:Fn.x,y1:Fn.y,x:Nn.x,y:Nn.y}),this.ctx.lastPoint=new vn(Nn.x,Nn.y)},rn.prototype.bezierCurveTo=function(Tn,An,wn,En,Nn,Fn){if(isNaN(Nn)||isNaN(Fn)||isNaN(Tn)||isNaN(An)||isNaN(wn)||isNaN(En))throw a.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Un=this.ctx.transform.applyToPoint(new vn(Nn,Fn)),Gn=this.ctx.transform.applyToPoint(new vn(Tn,An)),er=this.ctx.transform.applyToPoint(new vn(wn,En));this.path.push({type:"bct",x1:Gn.x,y1:Gn.y,x2:er.x,y2:er.y,x:Un.x,y:Un.y}),this.ctx.lastPoint=new vn(Un.x,Un.y)},rn.prototype.arc=function(Tn,An,wn,En,Nn,Fn){if(isNaN(Tn)||isNaN(An)||isNaN(wn)||isNaN(En)||isNaN(Nn))throw a.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Fn=Boolean(Fn),!this.ctx.transform.isIdentity){var Un=this.ctx.transform.applyToPoint(new vn(Tn,An));Tn=Un.x,An=Un.y;var Gn=this.ctx.transform.applyToPoint(new vn(0,wn)),er=this.ctx.transform.applyToPoint(new vn(0,0));wn=Math.sqrt(Math.pow(Gn.x-er.x,2)+Math.pow(Gn.y-er.y,2))}Math.abs(Nn-En)>=2*Math.PI&&(En=0,Nn=2*Math.PI),this.path.push({type:"arc",x:Tn,y:An,radius:wn,startAngle:En,endAngle:Nn,counterclockwise:Fn})},rn.prototype.arcTo=function(Tn,An,wn,En,Nn){throw new Error("arcTo not implemented.")},rn.prototype.rect=function(Tn,An,wn,En){if(isNaN(Tn)||isNaN(An)||isNaN(wn)||isNaN(En))throw a.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(Tn,An),this.lineTo(Tn+wn,An),this.lineTo(Tn+wn,An+En),this.lineTo(Tn,An+En),this.lineTo(Tn,An),this.lineTo(Tn+wn,An),this.lineTo(Tn,An)},rn.prototype.fillRect=function(Tn,An,wn,En){if(isNaN(Tn)||isNaN(An)||isNaN(wn)||isNaN(En))throw a.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!nn.call(this)){var Nn={};this.lineCap!=="butt"&&(Nn.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Nn.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(Tn,An,wn,En),this.fill(),Nn.hasOwnProperty("lineCap")&&(this.lineCap=Nn.lineCap),Nn.hasOwnProperty("lineJoin")&&(this.lineJoin=Nn.lineJoin)}},rn.prototype.strokeRect=function(Tn,An,wn,En){if(isNaN(Tn)||isNaN(An)||isNaN(wn)||isNaN(En))throw a.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");cn.call(this)||(this.beginPath(),this.rect(Tn,An,wn,En),this.stroke())},rn.prototype.clearRect=function(Tn,An,wn,En){if(isNaN(Tn)||isNaN(An)||isNaN(wn)||isNaN(En))throw a.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(Tn,An,wn,En))},rn.prototype.save=function(Tn){Tn=typeof Tn!="boolean"||Tn;for(var An=this.pdf.internal.getCurrentPageInfo().pageNumber,wn=0;wn<this.pdf.internal.getNumberOfPages();wn++)this.pdf.setPage(wn+1),this.pdf.internal.out("q");if(this.pdf.setPage(An),Tn){this.ctx.fontSize=this.pdf.internal.getFontSize();var En=new dn(this.ctx);this.ctxStack.push(this.ctx),this.ctx=En}},rn.prototype.restore=function(Tn){Tn=typeof Tn!="boolean"||Tn;for(var An=this.pdf.internal.getCurrentPageInfo().pageNumber,wn=0;wn<this.pdf.internal.getNumberOfPages();wn++)this.pdf.setPage(wn+1),this.pdf.internal.out("Q");this.pdf.setPage(An),Tn&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},rn.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var an=function(Tn){var An,wn,En,Nn;if(Tn.isCanvasGradient===!0&&(Tn=Tn.getColor()),!Tn)return{r:0,g:0,b:0,a:0,style:Tn};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(Tn))An=0,wn=0,En=0,Nn=0;else{var Fn=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(Tn);if(Fn!==null)An=parseInt(Fn[1]),wn=parseInt(Fn[2]),En=parseInt(Fn[3]),Nn=1;else if((Fn=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(Tn))!==null)An=parseInt(Fn[1]),wn=parseInt(Fn[2]),En=parseInt(Fn[3]),Nn=parseFloat(Fn[4]);else{if(Nn=1,typeof Tn=="string"&&Tn.charAt(0)!=="#"){var Un=new f(Tn);Tn=Un.ok?Un.toHex():"#000000"}Tn.length===4?(An=Tn.substring(1,2),An+=An,wn=Tn.substring(2,3),wn+=wn,En=Tn.substring(3,4),En+=En):(An=Tn.substring(1,3),wn=Tn.substring(3,5),En=Tn.substring(5,7)),An=parseInt(An,16),wn=parseInt(wn,16),En=parseInt(En,16)}}return{r:An,g:wn,b:En,a:Nn,style:Tn}},nn=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},cn=function(){return Boolean(this.ctx.isStrokeTransparent||this.globalAlpha==0)};rn.prototype.fillText=function(Tn,An,wn,En){if(isNaN(An)||isNaN(wn)||typeof Tn!="string")throw a.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(En=isNaN(En)?void 0:En,!nn.call(this)){var Nn=Jn(this.ctx.transform.rotation),Fn=this.ctx.transform.scaleX;Hn.call(this,{text:Tn,x:An,y:wn,scale:Fn,angle:Nn,align:this.textAlign,maxWidth:En})}},rn.prototype.strokeText=function(Tn,An,wn,En){if(isNaN(An)||isNaN(wn)||typeof Tn!="string")throw a.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!cn.call(this)){En=isNaN(En)?void 0:En;var Nn=Jn(this.ctx.transform.rotation),Fn=this.ctx.transform.scaleX;Hn.call(this,{text:Tn,x:An,y:wn,scale:Fn,renderingMode:"stroke",angle:Nn,align:this.textAlign,maxWidth:En})}},rn.prototype.measureText=function(Tn){if(typeof Tn!="string")throw a.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var An=this.pdf,wn=this.pdf.internal.scaleFactor,En=An.internal.getFontSize(),Nn=An.getStringUnitWidth(Tn)*En/An.internal.scaleFactor,Fn=function(Un){var Gn=(Un=Un||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Gn}}),this};return new Fn({width:Nn*=Math.round(96*wn/72*1e4)/1e4})},rn.prototype.scale=function(Tn,An){if(isNaN(Tn)||isNaN(An))throw a.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var wn=new en(Tn,0,0,An,0,0);this.ctx.transform=this.ctx.transform.multiply(wn)},rn.prototype.rotate=function(Tn){if(isNaN(Tn))throw a.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var An=new en(Math.cos(Tn),Math.sin(Tn),-Math.sin(Tn),Math.cos(Tn),0,0);this.ctx.transform=this.ctx.transform.multiply(An)},rn.prototype.translate=function(Tn,An){if(isNaN(Tn)||isNaN(An))throw a.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var wn=new en(1,0,0,1,Tn,An);this.ctx.transform=this.ctx.transform.multiply(wn)},rn.prototype.transform=function(Tn,An,wn,En,Nn,Fn){if(isNaN(Tn)||isNaN(An)||isNaN(wn)||isNaN(En)||isNaN(Nn)||isNaN(Fn))throw a.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Un=new en(Tn,An,wn,En,Nn,Fn);this.ctx.transform=this.ctx.transform.multiply(Un)},rn.prototype.setTransform=function(Tn,An,wn,En,Nn,Fn){Tn=isNaN(Tn)?1:Tn,An=isNaN(An)?0:An,wn=isNaN(wn)?0:wn,En=isNaN(En)?1:En,Nn=isNaN(Nn)?0:Nn,Fn=isNaN(Fn)?0:Fn,this.ctx.transform=new en(Tn,An,wn,En,Nn,Fn)};var hn=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};rn.prototype.drawImage=function(Tn,An,wn,En,Nn,Fn,Un,Gn,er){var On=this.pdf.getImageProperties(Tn),Bn=1,$n=1,qn=1,zn=1;En!==void 0&&Gn!==void 0&&(qn=Gn/En,zn=er/Nn,Bn=On.width/En*Gn/En,$n=On.height/Nn*er/Nn),Fn===void 0&&(Fn=An,Un=wn,An=0,wn=0),En!==void 0&&Gn===void 0&&(Gn=En,er=Nn),En===void 0&&Gn===void 0&&(Gn=On.width,er=On.height);for(var jn,ur=this.ctx.transform.decompose(),gr=Jn(ur.rotate.shx),ar=new en,vr=(ar=(ar=(ar=ar.multiply(ur.translate)).multiply(ur.skew)).multiply(ur.scale)).applyToRectangle(new fn(Fn-An*qn,Un-wn*zn,En*Bn,Nn*$n)),dr=sn.call(this,vr),hr=[],_r=0;_r<dr.length;_r+=1)hr.indexOf(dr[_r])===-1&&hr.push(dr[_r]);if(yn(hr),this.autoPaging)for(var or=hr[0],Er=hr[hr.length-1],Dr=or;Dr<Er+1;Dr++){this.pdf.setPage(Dr);var Rr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Gr=Dr===1?this.posY+this.margin[0]:this.margin[0],Ir=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ts=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],zr=Dr===1?0:Ir+(Dr-2)*ts;if(this.ctx.clip_path.length!==0){var ws=this.path;jn=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=mn(jn,this.posX+this.margin[3],-zr+Gr+this.ctx.prevPageLastElemOffset),xn.call(this,"fill",!0),this.path=ws}var es=JSON.parse(JSON.stringify(vr));es=mn([es],this.posX+this.margin[3],-zr+Gr+this.ctx.prevPageLastElemOffset)[0];var ps=(Dr>or||Dr<Er)&&hn.call(this);ps&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Rr,ts,null).clip().discardPath()),this.pdf.addImage(Tn,"JPEG",es.x,es.y,es.w,es.h,null,null,gr),ps&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(Tn,"JPEG",vr.x,vr.y,vr.w,vr.h,null,null,gr)};var sn=function(Tn,An,wn){var En=[];An=An||this.pdf.internal.pageSize.width,wn=wn||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Nn=this.posY+this.ctx.prevPageLastElemOffset;switch(Tn.type){default:case"mt":case"lt":En.push(Math.floor((Tn.y+Nn)/wn)+1);break;case"arc":En.push(Math.floor((Tn.y+Nn-Tn.radius)/wn)+1),En.push(Math.floor((Tn.y+Nn+Tn.radius)/wn)+1);break;case"qct":var Fn=Vn(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Tn.x1,Tn.y1,Tn.x,Tn.y);En.push(Math.floor((Fn.y+Nn)/wn)+1),En.push(Math.floor((Fn.y+Fn.h+Nn)/wn)+1);break;case"bct":var Un=Xn(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Tn.x1,Tn.y1,Tn.x2,Tn.y2,Tn.x,Tn.y);En.push(Math.floor((Un.y+Nn)/wn)+1),En.push(Math.floor((Un.y+Un.h+Nn)/wn)+1);break;case"rect":En.push(Math.floor((Tn.y+Nn)/wn)+1),En.push(Math.floor((Tn.y+Tn.h+Nn)/wn)+1)}for(var Gn=0;Gn<En.length;Gn+=1)for(;this.pdf.internal.getNumberOfPages()<En[Gn];)pn.call(this);return En},pn=function(){var Tn=this.fillStyle,An=this.strokeStyle,wn=this.font,En=this.lineCap,Nn=this.lineWidth,Fn=this.lineJoin;this.pdf.addPage(),this.fillStyle=Tn,this.strokeStyle=An,this.font=wn,this.lineCap=En,this.lineWidth=Nn,this.lineJoin=Fn},mn=function(Tn,An,wn){for(var En=0;En<Tn.length;En++)switch(Tn[En].type){case"bct":Tn[En].x2+=An,Tn[En].y2+=wn;case"qct":Tn[En].x1+=An,Tn[En].y1+=wn;case"mt":case"lt":case"arc":default:Tn[En].x+=An,Tn[En].y+=wn}return Tn},yn=function(Tn){return Tn.sort(function(An,wn){return An-wn})},_n=function(Tn,An){for(var wn,En,Nn=this.fillStyle,Fn=this.strokeStyle,Un=this.lineCap,Gn=this.lineWidth,er=Math.abs(Gn*this.ctx.transform.scaleX),On=this.lineJoin,Bn=JSON.parse(JSON.stringify(this.path)),$n=JSON.parse(JSON.stringify(this.path)),qn=[],zn=0;zn<$n.length;zn++)if($n[zn].x!==void 0)for(var jn=sn.call(this,$n[zn]),ur=0;ur<jn.length;ur+=1)qn.indexOf(jn[ur])===-1&&qn.push(jn[ur]);for(var gr=0;gr<qn.length;gr++)for(;this.pdf.internal.getNumberOfPages()<qn[gr];)pn.call(this);if(yn(qn),this.autoPaging)for(var ar=qn[0],vr=qn[qn.length-1],dr=ar;dr<vr+1;dr++){this.pdf.setPage(dr),this.fillStyle=Nn,this.strokeStyle=Fn,this.lineCap=Un,this.lineWidth=er,this.lineJoin=On;var hr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],_r=dr===1?this.posY+this.margin[0]:this.margin[0],or=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Er=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Dr=dr===1?0:or+(dr-2)*Er;if(this.ctx.clip_path.length!==0){var Rr=this.path;wn=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=mn(wn,this.posX+this.margin[3],-Dr+_r+this.ctx.prevPageLastElemOffset),xn.call(this,Tn,!0),this.path=Rr}if(En=JSON.parse(JSON.stringify(Bn)),this.path=mn(En,this.posX+this.margin[3],-Dr+_r+this.ctx.prevPageLastElemOffset),An===!1||dr===0){var Gr=(dr>ar||dr<vr)&&hn.call(this);Gr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],hr,Er,null).clip().discardPath()),xn.call(this,Tn,An),Gr&&this.pdf.restoreGraphicsState()}this.lineWidth=Gn}else this.lineWidth=er,xn.call(this,Tn,An),this.lineWidth=Gn;this.path=Bn},xn=function(Tn,An){if((Tn!=="stroke"||An||!cn.call(this))&&(Tn==="stroke"||An||!nn.call(this))){for(var wn,En,Nn=[],Fn=this.path,Un=0;Un<Fn.length;Un++){var Gn=Fn[Un];switch(Gn.type){case"begin":Nn.push({begin:!0});break;case"close":Nn.push({close:!0});break;case"mt":Nn.push({start:Gn,deltas:[],abs:[]});break;case"lt":var er=Nn.length;if(Fn[Un-1]&&!isNaN(Fn[Un-1].x)&&(wn=[Gn.x-Fn[Un-1].x,Gn.y-Fn[Un-1].y],er>0)){for(;er>=0;er--)if(Nn[er-1].close!==!0&&Nn[er-1].begin!==!0){Nn[er-1].deltas.push(wn),Nn[er-1].abs.push(Gn);break}}break;case"bct":wn=[Gn.x1-Fn[Un-1].x,Gn.y1-Fn[Un-1].y,Gn.x2-Fn[Un-1].x,Gn.y2-Fn[Un-1].y,Gn.x-Fn[Un-1].x,Gn.y-Fn[Un-1].y],Nn[Nn.length-1].deltas.push(wn);break;case"qct":var On=Fn[Un-1].x+2/3*(Gn.x1-Fn[Un-1].x),Bn=Fn[Un-1].y+2/3*(Gn.y1-Fn[Un-1].y),$n=Gn.x+2/3*(Gn.x1-Gn.x),qn=Gn.y+2/3*(Gn.y1-Gn.y),zn=Gn.x,jn=Gn.y;wn=[On-Fn[Un-1].x,Bn-Fn[Un-1].y,$n-Fn[Un-1].x,qn-Fn[Un-1].y,zn-Fn[Un-1].x,jn-Fn[Un-1].y],Nn[Nn.length-1].deltas.push(wn);break;case"arc":Nn.push({deltas:[],abs:[],arc:!0}),Array.isArray(Nn[Nn.length-1].abs)&&Nn[Nn.length-1].abs.push(Gn)}}En=An?null:Tn==="stroke"?"stroke":"fill";for(var ur=!1,gr=0;gr<Nn.length;gr++)if(Nn[gr].arc)for(var ar=Nn[gr].abs,vr=0;vr<ar.length;vr++){var dr=ar[vr];dr.type==="arc"?Ln.call(this,dr.x,dr.y,dr.radius,dr.startAngle,dr.endAngle,dr.counterclockwise,void 0,An,!ur):Qn.call(this,dr.x,dr.y),ur=!0}else if(Nn[gr].close===!0)this.pdf.internal.out("h"),ur=!1;else if(Nn[gr].begin!==!0){var hr=Nn[gr].start.x,_r=Nn[gr].start.y;Kn.call(this,Nn[gr].deltas,hr,_r),ur=!0}En&&In.call(this,En),An&&Rn.call(this)}},Sn=function(Tn){var An=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,wn=An*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return Tn-wn;case"top":return Tn+An-wn;case"hanging":return Tn+An-2*wn;case"middle":return Tn+An/2-wn;case"ideographic":return Tn;case"alphabetic":default:return Tn}},Pn=function(Tn){return Tn+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};rn.prototype.createLinearGradient=function(){var Tn=function(){};return Tn.colorStops=[],Tn.addColorStop=function(An,wn){this.colorStops.push([An,wn])},Tn.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},Tn.isCanvasGradient=!0,Tn},rn.prototype.createPattern=function(){return this.createLinearGradient()},rn.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Ln=function(Tn,An,wn,En,Nn,Fn,Un,Gn,er){for(var On=Zn.call(this,wn,En,Nn,Fn),Bn=0;Bn<On.length;Bn++){var $n=On[Bn];Bn===0&&(er?Mn.call(this,$n.x1+Tn,$n.y1+An):Qn.call(this,$n.x1+Tn,$n.y1+An)),nr.call(this,Tn,An,$n.x2,$n.y2,$n.x3,$n.y3,$n.x4,$n.y4)}Gn?Rn.call(this):In.call(this,Un)},In=function(Tn){switch(Tn){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Rn=function(){this.pdf.clip(),this.pdf.discardPath()},Mn=function(Tn,An){this.pdf.internal.out(_e(Tn)+" "+tn(An)+" m")},Hn=function(Tn){var An;switch(Tn.align){case"right":case"end":An="right";break;case"center":An="center";break;case"left":case"start":default:An="left"}var wn=this.pdf.getTextDimensions(Tn.text),En=Sn.call(this,Tn.y),Nn=Pn.call(this,En)-wn.h,Fn=this.ctx.transform.applyToPoint(new vn(Tn.x,En)),Un=this.ctx.transform.decompose(),Gn=new en;Gn=(Gn=(Gn=Gn.multiply(Un.translate)).multiply(Un.skew)).multiply(Un.scale);for(var er,On,Bn,$n=this.ctx.transform.applyToRectangle(new fn(Tn.x,En,wn.w,wn.h)),qn=Gn.applyToRectangle(new fn(Tn.x,Nn,wn.w,wn.h)),zn=sn.call(this,qn),jn=[],ur=0;ur<zn.length;ur+=1)jn.indexOf(zn[ur])===-1&&jn.push(zn[ur]);if(yn(jn),this.autoPaging)for(var gr=jn[0],ar=jn[jn.length-1],vr=gr;vr<ar+1;vr++){this.pdf.setPage(vr);var dr=vr===1?this.posY+this.margin[0]:this.margin[0],hr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_r=this.pdf.internal.pageSize.height-this.margin[2],or=_r-this.margin[0],Er=this.pdf.internal.pageSize.width-this.margin[1],Dr=Er-this.margin[3],Rr=vr===1?0:hr+(vr-2)*or;if(this.ctx.clip_path.length!==0){var Gr=this.path;er=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=mn(er,this.posX+this.margin[3],-1*Rr+dr),xn.call(this,"fill",!0),this.path=Gr}var Ir=mn([JSON.parse(JSON.stringify(qn))],this.posX+this.margin[3],-Rr+dr+this.ctx.prevPageLastElemOffset)[0];Tn.scale>=.01&&(On=this.pdf.internal.getFontSize(),this.pdf.setFontSize(On*Tn.scale),Bn=this.lineWidth,this.lineWidth=Bn*Tn.scale);var ts=this.autoPaging!=="text";if(ts||Ir.y+Ir.h<=_r){if(ts||Ir.y>=dr&&Ir.x<=Er){var zr=ts?Tn.text:this.pdf.splitTextToSize(Tn.text,Tn.maxWidth||Er-Ir.x)[0],ws=mn([JSON.parse(JSON.stringify($n))],this.posX+this.margin[3],-Rr+dr+this.ctx.prevPageLastElemOffset)[0],es=ts&&(vr>gr||vr<ar)&&hn.call(this);es&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Dr,or,null).clip().discardPath()),this.pdf.text(zr,ws.x,ws.y,{angle:Tn.angle,align:An,renderingMode:Tn.renderingMode}),es&&this.pdf.restoreGraphicsState()}}else Ir.y<_r&&(this.ctx.prevPageLastElemOffset+=_r-Ir.y);Tn.scale>=.01&&(this.pdf.setFontSize(On),this.lineWidth=Bn)}else Tn.scale>=.01&&(On=this.pdf.internal.getFontSize(),this.pdf.setFontSize(On*Tn.scale),Bn=this.lineWidth,this.lineWidth=Bn*Tn.scale),this.pdf.text(Tn.text,Fn.x+this.posX,Fn.y+this.posY,{angle:Tn.angle,align:An,renderingMode:Tn.renderingMode,maxWidth:Tn.maxWidth}),Tn.scale>=.01&&(this.pdf.setFontSize(On),this.lineWidth=Bn)},Qn=function(Tn,An,wn,En){wn=wn||0,En=En||0,this.pdf.internal.out(_e(Tn+wn)+" "+tn(An+En)+" l")},Kn=function(Tn,An,wn){return this.pdf.lines(Tn,An,wn,null,null)},nr=function(Tn,An,wn,En,Nn,Fn,Un,Gn){this.pdf.internal.out([e(un(wn+Tn)),e(gn(En+An)),e(un(Nn+Tn)),e(gn(Fn+An)),e(un(Un+Tn)),e(gn(Gn+An)),"c"].join(" "))},Zn=function(Tn,An,wn,En){for(var Nn=2*Math.PI,Fn=Math.PI/2;An>wn;)An-=Nn;var Un=Math.abs(wn-An);Un<Nn&&En&&(Un=Nn-Un);for(var Gn=[],er=En?-1:1,On=An;Un>1e-5;){var Bn=On+er*Math.min(Un,Fn);Gn.push(ir.call(this,Tn,On,Bn)),Un-=Math.abs(Bn-On),On=Bn}return Gn},ir=function(Tn,An,wn){var En=(wn-An)/2,Nn=Tn*Math.cos(En),Fn=Tn*Math.sin(En),Un=Nn,Gn=-Fn,er=Un*Un+Gn*Gn,On=er+Un*Nn+Gn*Fn,Bn=4/3*(Math.sqrt(2*er*On)-On)/(Un*Fn-Gn*Nn),$n=Un-Bn*Gn,qn=Gn+Bn*Un,zn=$n,jn=-qn,ur=En+An,gr=Math.cos(ur),ar=Math.sin(ur);return{x1:Tn*Math.cos(An),y1:Tn*Math.sin(An),x2:$n*gr-qn*ar,y2:$n*ar+qn*gr,x3:zn*gr-jn*ar,y3:zn*ar+jn*gr,x4:Tn*Math.cos(wn),y4:Tn*Math.sin(wn)}},Jn=function(Tn){return 180*Tn/Math.PI},Vn=function(Tn,An,wn,En,Nn,Fn){var Un=Tn+.5*(wn-Tn),Gn=An+.5*(En-An),er=Nn+.5*(wn-Nn),On=Fn+.5*(En-Fn),Bn=Math.min(Tn,Nn,Un,er),$n=Math.max(Tn,Nn,Un,er),qn=Math.min(An,Fn,Gn,On),zn=Math.max(An,Fn,Gn,On);return new fn(Bn,qn,$n-Bn,zn-qn)},Xn=function(Tn,An,wn,En,Nn,Fn,Un,Gn){var er,On,Bn,$n,qn,zn,jn,ur,gr,ar,vr,dr,hr,_r,or=wn-Tn,Er=En-An,Dr=Nn-wn,Rr=Fn-En,Gr=Un-Nn,Ir=Gn-Fn;for(On=0;On<41;On++)gr=(jn=(Bn=Tn+(er=On/40)*or)+er*((qn=wn+er*Dr)-Bn))+er*(qn+er*(Nn+er*Gr-qn)-jn),ar=(ur=($n=An+er*Er)+er*((zn=En+er*Rr)-$n))+er*(zn+er*(Fn+er*Ir-zn)-ur),On==0?(vr=gr,dr=ar,hr=gr,_r=ar):(vr=Math.min(vr,gr),dr=Math.min(dr,ar),hr=Math.max(hr,gr),_r=Math.max(_r,ar));return new fn(Math.round(vr),Math.round(dr),Math.round(hr-vr),Math.round(_r-dr))},Yn=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Tn,An,wn=(Tn=this.ctx.lineDash,An=this.ctx.lineDashOffset,JSON.stringify({lineDash:Tn,lineDashOffset:An}));this.prevLineDash!==wn&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=wn)}}})(E.API),function(St){var e=function(gn){var vn,fn,en,on,dn,rn,an,nn,cn,hn;for(/[^\x00-\xFF]/.test(gn),fn=[],en=0,on=(gn+=vn="\0\0\0\0".slice(gn.length%4||4)).length;on>en;en+=4)(dn=(gn.charCodeAt(en)<<24)+(gn.charCodeAt(en+1)<<16)+(gn.charCodeAt(en+2)<<8)+gn.charCodeAt(en+3))!==0?(rn=(dn=((dn=((dn=((dn=(dn-(hn=dn%85))/85)-(cn=dn%85))/85)-(nn=dn%85))/85)-(an=dn%85))/85)%85,fn.push(rn+33,an+33,nn+33,cn+33,hn+33)):fn.push(122);return function(sn,pn){for(var mn=pn;mn>0;mn--)sn.pop()}(fn,vn.length),String.fromCharCode.apply(String,fn)+"~>"},_e=function(gn){var vn,fn,en,on,dn,rn=String,an="length",nn=255,cn="charCodeAt",hn="slice",sn="replace";for(gn[hn](-2),gn=gn[hn](0,-2)[sn](/\s/g,"")[sn]("z","!!!!!"),en=[],on=0,dn=(gn+=vn="uuuuu"[hn](gn[an]%5||5))[an];dn>on;on+=5)fn=52200625*(gn[cn](on)-33)+614125*(gn[cn](on+1)-33)+7225*(gn[cn](on+2)-33)+85*(gn[cn](on+3)-33)+(gn[cn](on+4)-33),en.push(nn&fn>>24,nn&fn>>16,nn&fn>>8,nn&fn);return function(pn,mn){for(var yn=mn;yn>0;yn--)pn.pop()}(en,vn[an]),rn.fromCharCode.apply(rn,en)},tn=function(gn){var vn=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((gn=gn.replace(/\s/g,"")).indexOf(">")!==-1&&(gn=gn.substr(0,gn.indexOf(">"))),gn.length%2&&(gn+="0"),vn.test(gn)===!1)return"";for(var fn="",en=0;en<gn.length;en+=2)fn+=String.fromCharCode("0x"+(gn[en]+gn[en+1]));return fn},un=function(gn){for(var vn=new Uint8Array(gn.length),fn=gn.length;fn--;)vn[fn]=gn.charCodeAt(fn);return gn=(vn=zlibSync(vn)).reduce(function(en,on){return en+String.fromCharCode(on)},"")};St.processDataByFilters=function(gn,vn){var fn=0,en=gn||"",on=[];for(typeof(vn=vn||[])=="string"&&(vn=[vn]),fn=0;fn<vn.length;fn+=1)switch(vn[fn]){case"ASCII85Decode":case"/ASCII85Decode":en=_e(en),on.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":en=e(en),on.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":en=tn(en),on.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":en=en.split("").map(function(dn){return("0"+dn.charCodeAt().toString(16)).slice(-2)}).join("")+">",on.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":en=un(en),on.push("/FlateDecode");break;default:throw new Error('The filter: "'+vn[fn]+'" is not implemented')}return{data:en,reverseChain:on.reverse().join(" ")}}}(E.API),function(St){St.loadFile=function(e,_e,tn){return function(un,gn,vn){gn=gn!==!1,vn=typeof vn=="function"?vn:function(){};var fn=void 0;try{fn=function(en,on,dn){var rn=new XMLHttpRequest,an=0,nn=function(cn){var hn=cn.length,sn=[],pn=String.fromCharCode;for(an=0;an<hn;an+=1)sn.push(pn(255&cn.charCodeAt(an)));return sn.join("")};if(rn.open("GET",en,!on),rn.overrideMimeType("text/plain; charset=x-user-defined"),on===!1&&(rn.onload=function(){rn.status===200?dn(nn(this.responseText)):dn(void 0)}),rn.send(null),on&&rn.status===200)return nn(rn.responseText)}(un,gn,vn)}catch{}return fn}(e,_e,tn)},St.loadImageFile=St.loadFile}(E.API),function(St){function e(){return(n.html2canvas?Promise.resolve(n.html2canvas):__vitePreload(()=>import("./html2canvas.esm.0eae2bf4.js"),[])).catch(function(vn){return Promise.reject(new Error("Could not load html2canvas: "+vn))}).then(function(vn){return vn.default?vn.default:vn})}function _e(){return(n.DOMPurify?Promise.resolve(n.DOMPurify):__vitePreload(()=>import("./purify.es.ed4622ee.js"),[])).catch(function(vn){return Promise.reject(new Error("Could not load dompurify: "+vn))}).then(function(vn){return vn.default?vn.default:vn})}var tn=function(vn){var fn=_typeof(vn);return fn==="undefined"?"undefined":fn==="string"||vn instanceof String?"string":fn==="number"||vn instanceof Number?"number":fn==="function"||vn instanceof Function?"function":vn&&vn.constructor===Array?"array":vn&&vn.nodeType===1?"element":fn==="object"?"object":"unknown"},un=function(vn,fn){var en=document.createElement(vn);for(var on in fn.className&&(en.className=fn.className),fn.innerHTML&&fn.dompurify&&(en.innerHTML=fn.dompurify.sanitize(fn.innerHTML)),fn.style)en.style[on]=fn.style[on];return en},gn=function vn(fn){var en=Object.assign(vn.convert(Promise.resolve()),JSON.parse(JSON.stringify(vn.template))),on=vn.convert(Promise.resolve(),en);return on=(on=on.setProgress(1,vn,1,[vn])).set(fn)};(gn.prototype=Object.create(Promise.prototype)).constructor=gn,gn.convert=function(vn,fn){return vn.__proto__=fn||gn.prototype,vn},gn.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},gn.prototype.from=function(vn,fn){return this.then(function(){switch(fn=fn||function(en){switch(tn(en)){case"string":return"string";case"element":return en.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(vn)){case"string":return this.then(_e).then(function(en){return this.set({src:un("div",{innerHTML:vn,dompurify:en})})});case"element":return this.set({src:vn});case"canvas":return this.set({canvas:vn});case"img":return this.set({img:vn});default:return this.error("Unknown source type.")}})},gn.prototype.to=function(vn){switch(vn){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},gn.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var vn={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},fn=function en(on,dn){for(var rn=on.nodeType===3?document.createTextNode(on.nodeValue):on.cloneNode(!1),an=on.firstChild;an;an=an.nextSibling)dn!==!0&&an.nodeType===1&&an.nodeName==="SCRIPT"||rn.appendChild(en(an,dn));return on.nodeType===1&&(on.nodeName==="CANVAS"?(rn.width=on.width,rn.height=on.height,rn.getContext("2d").drawImage(on,0,0)):on.nodeName!=="TEXTAREA"&&on.nodeName!=="SELECT"||(rn.value=on.value),rn.addEventListener("load",function(){rn.scrollTop=on.scrollTop,rn.scrollLeft=on.scrollLeft},!0)),rn}(this.prop.src,this.opt.html2canvas.javascriptEnabled);fn.tagName==="BODY"&&(vn.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=un("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=un("div",{className:"html2pdf__container",style:vn}),this.prop.container.appendChild(fn),this.prop.container.firstChild.appendChild(un("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},gn.prototype.toCanvas=function(){var vn=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(vn).then(e).then(function(fn){var en=Object.assign({},this.opt.html2canvas);return delete en.onrendered,fn(this.prop.container,en)}).then(function(fn){(this.opt.html2canvas.onrendered||function(){})(fn),this.prop.canvas=fn,document.body.removeChild(this.prop.overlay)})},gn.prototype.toContext2d=function(){var vn=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(vn).then(e).then(function(fn){var en=this.opt.jsPDF,on=this.opt.fontFaces,dn=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,rn=Object.assign({async:!0,allowTaint:!0,scale:dn,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete rn.onrendered,en.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,en.context2d.posX=this.opt.x,en.context2d.posY=this.opt.y,en.context2d.margin=this.opt.margin,en.context2d.fontFaces=on,on)for(var an=0;an<on.length;++an){var nn=on[an],cn=nn.src.find(function(hn){return hn.format==="truetype"});cn&&en.addFont(cn.url,nn.ref.name,nn.ref.style)}return rn.windowHeight=rn.windowHeight||0,rn.windowHeight=rn.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):rn.windowHeight,en.context2d.save(!0),fn(this.prop.container,rn)}).then(function(fn){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(fn),this.prop.canvas=fn,document.body.removeChild(this.prop.overlay)})},gn.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var vn=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=vn})},gn.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},gn.prototype.output=function(vn,fn,en){return(en=en||"pdf").toLowerCase()==="img"||en.toLowerCase()==="image"?this.outputImg(vn,fn):this.outputPdf(vn,fn)},gn.prototype.outputPdf=function(vn,fn){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(vn,fn)})},gn.prototype.outputImg=function(vn){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(vn){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+vn+'" is not supported.'}})},gn.prototype.save=function(vn){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(vn?{filename:vn}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},gn.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},gn.prototype.set=function(vn){if(tn(vn)!=="object")return this;var fn=Object.keys(vn||{}).map(function(en){if(en in gn.template.prop)return function(){this.prop[en]=vn[en]};switch(en){case"margin":return this.setMargin.bind(this,vn.margin);case"jsPDF":return function(){return this.opt.jsPDF=vn.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,vn.pageSize);default:return function(){this.opt[en]=vn[en]}}},this);return this.then(function(){return this.thenList(fn)})},gn.prototype.get=function(vn,fn){return this.then(function(){var en=vn in gn.template.prop?this.prop[vn]:this.opt[vn];return fn?fn(en):en})},gn.prototype.setMargin=function(vn){return this.then(function(){switch(tn(vn)){case"number":vn=[vn,vn,vn,vn];case"array":if(vn.length===2&&(vn=[vn[0],vn[1],vn[0],vn[1]]),vn.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=vn}).then(this.setPageSize)},gn.prototype.setPageSize=function(vn){function fn(en,on){return Math.floor(en*on/72*96)}return this.then(function(){(vn=vn||E.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(vn.inner={width:vn.width-this.opt.margin[1]-this.opt.margin[3],height:vn.height-this.opt.margin[0]-this.opt.margin[2]},vn.inner.px={width:fn(vn.inner.width,vn.k),height:fn(vn.inner.height,vn.k)},vn.inner.ratio=vn.inner.height/vn.inner.width),this.prop.pageSize=vn})},gn.prototype.setProgress=function(vn,fn,en,on){return vn!=null&&(this.progress.val=vn),fn!=null&&(this.progress.state=fn),en!=null&&(this.progress.n=en),on!=null&&(this.progress.stack=on),this.progress.ratio=this.progress.val/this.progress.state,this},gn.prototype.updateProgress=function(vn,fn,en,on){return this.setProgress(vn?this.progress.val+vn:null,fn||null,en?this.progress.n+en:null,on?this.progress.stack.concat(on):null)},gn.prototype.then=function(vn,fn){var en=this;return this.thenCore(vn,fn,function(on,dn){return en.updateProgress(null,null,1,[on]),Promise.prototype.then.call(this,function(rn){return en.updateProgress(null,on),rn}).then(on,dn).then(function(rn){return en.updateProgress(1),rn})})},gn.prototype.thenCore=function(vn,fn,en){en=en||Promise.prototype.then,vn&&(vn=vn.bind(this)),fn&&(fn=fn.bind(this));var on=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:gn.convert(Object.assign({},this),Promise.prototype),dn=en.call(on,vn,fn);return gn.convert(dn,this.__proto__)},gn.prototype.thenExternal=function(vn,fn){return Promise.prototype.then.call(this,vn,fn)},gn.prototype.thenList=function(vn){var fn=this;return vn.forEach(function(en){fn=fn.thenCore(en)}),fn},gn.prototype.catch=function(vn){vn&&(vn=vn.bind(this));var fn=Promise.prototype.catch.call(this,vn);return gn.convert(fn,this)},gn.prototype.catchExternal=function(vn){return Promise.prototype.catch.call(this,vn)},gn.prototype.error=function(vn){return this.then(function(){throw new Error(vn)})},gn.prototype.using=gn.prototype.set,gn.prototype.saveAs=gn.prototype.save,gn.prototype.export=gn.prototype.output,gn.prototype.run=gn.prototype.then,E.getPageSize=function(vn,fn,en){if(_typeof(vn)==="object"){var on=vn;vn=on.orientation,fn=on.unit||fn,en=on.format||en}fn=fn||"mm",en=en||"a4",vn=(""+(vn||"P")).toLowerCase();var dn,rn=(""+en).toLowerCase(),an={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(fn){case"pt":dn=1;break;case"mm":dn=72/25.4;break;case"cm":dn=72/2.54;break;case"in":dn=72;break;case"px":dn=.75;break;case"pc":case"em":dn=12;break;case"ex":dn=6;break;default:throw"Invalid unit: "+fn}var nn,cn=0,hn=0;if(an.hasOwnProperty(rn))cn=an[rn][1]/dn,hn=an[rn][0]/dn;else try{cn=en[1],hn=en[0]}catch{throw new Error("Invalid format: "+en)}if(vn==="p"||vn==="portrait")vn="p",hn>cn&&(nn=hn,hn=cn,cn=nn);else{if(vn!=="l"&&vn!=="landscape")throw"Invalid orientation: "+vn;vn="l",cn>hn&&(nn=hn,hn=cn,cn=nn)}return{width:hn,height:cn,unit:fn,k:dn,orientation:vn}},St.html=function(vn,fn){(fn=fn||{}).callback=fn.callback||function(){},fn.html2canvas=fn.html2canvas||{},fn.html2canvas.canvas=fn.html2canvas.canvas||this.canvas,fn.jsPDF=fn.jsPDF||this,fn.fontFaces=fn.fontFaces?fn.fontFaces.map(jt):null;var en=new gn(fn);return fn.worker?en:en.from(vn).doCallback()}}(E.API),E.API.addJS=function(St){return Ht=St,this.internal.events.subscribe("postPutResources",function(){Ut=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ut+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),zt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ht+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ut!==void 0&&zt!==void 0&&this.internal.out("/Names <</JavaScript "+Ut+" 0 R>>")}),this},function(St){var e;St.events.push(["postPutResources",function(){var _e=this,tn=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var un=_e.outline.render().split(/\r\n/),gn=0;gn<un.length;gn++){var vn=un[gn],fn=tn.exec(vn);if(fn!=null){var en=fn[1];_e.internal.newObjectDeferredBegin(en,!1)}_e.internal.write(vn)}if(this.outline.createNamedDestinations){var on=this.internal.pages.length,dn=[];for(gn=0;gn<on;gn++){var rn=_e.internal.newObject();dn.push(rn);var an=_e.internal.getPageInfo(gn+1);_e.internal.write("<< /D["+an.objId+" 0 R /XYZ null null null]>> endobj")}var nn=_e.internal.newObject();for(_e.internal.write("<< /Names [ "),gn=0;gn<dn.length;gn++)_e.internal.write("(page_"+(gn+1)+")"+dn[gn]+" 0 R");_e.internal.write(" ] >>","endobj"),e=_e.internal.newObject(),_e.internal.write("<< /Dests "+nn+" 0 R"),_e.internal.write(">>","endobj")}}]),St.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),St.events.push(["initialized",function(){var _e=this;_e.outline={createNamedDestinations:!1,root:{children:[]}},_e.outline.add=function(tn,un,gn){var vn={title:un,options:gn,children:[]};return tn==null&&(tn=this.root),tn.children.push(vn),vn},_e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=_e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},_e.outline.genIds_r=function(tn){tn.id=_e.internal.newObjectDeferred();for(var un=0;un<tn.children.length;un++)this.genIds_r(tn.children[un])},_e.outline.renderRoot=function(tn){this.objStart(tn),this.line("/Type /Outlines"),tn.children.length>0&&(this.line("/First "+this.makeRef(tn.children[0])),this.line("/Last "+this.makeRef(tn.children[tn.children.length-1]))),this.line("/Count "+this.count_r({count:0},tn)),this.objEnd()},_e.outline.renderItems=function(tn){for(var un=this.ctx.pdf.internal.getVerticalCoordinateString,gn=0;gn<tn.children.length;gn++){var vn=tn.children[gn];this.objStart(vn),this.line("/Title "+this.makeString(vn.title)),this.line("/Parent "+this.makeRef(tn)),gn>0&&this.line("/Prev "+this.makeRef(tn.children[gn-1])),gn<tn.children.length-1&&this.line("/Next "+this.makeRef(tn.children[gn+1])),vn.children.length>0&&(this.line("/First "+this.makeRef(vn.children[0])),this.line("/Last "+this.makeRef(vn.children[vn.children.length-1])));var fn=this.count=this.count_r({count:0},vn);if(fn>0&&this.line("/Count "+fn),vn.options&&vn.options.pageNumber){var en=_e.internal.getPageInfo(vn.options.pageNumber);this.line("/Dest ["+en.objId+" 0 R /XYZ 0 "+un(0)+" 0]")}this.objEnd()}for(var on=0;on<tn.children.length;on++)this.renderItems(tn.children[on])},_e.outline.line=function(tn){this.ctx.val+=tn+`\r
`},_e.outline.makeRef=function(tn){return tn.id+" 0 R"},_e.outline.makeString=function(tn){return"("+_e.internal.pdfEscape(tn)+")"},_e.outline.objStart=function(tn){this.ctx.val+=`\r
`+tn.id+` 0 obj\r
<<\r
`},_e.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},_e.outline.count_r=function(tn,un){for(var gn=0;gn<un.children.length;gn++)tn.count++,this.count_r(tn,un.children[gn]);return tn.count}}])}(E.API),function(St){var e=[192,193,194,195,196,197,198,199];St.processJPEG=function(_e,tn,un,gn,vn,fn){var en,on=this.decode.DCT_DECODE,dn=null;if(typeof _e=="string"||this.__addimage__.isArrayBuffer(_e)||this.__addimage__.isArrayBufferView(_e)){switch(_e=vn||_e,_e=this.__addimage__.isArrayBuffer(_e)?new Uint8Array(_e):_e,(en=function(rn){for(var an,nn=256*rn.charCodeAt(4)+rn.charCodeAt(5),cn=rn.length,hn={width:0,height:0,numcomponents:1},sn=4;sn<cn;sn+=2){if(sn+=nn,e.indexOf(rn.charCodeAt(sn+1))!==-1){an=256*rn.charCodeAt(sn+5)+rn.charCodeAt(sn+6),hn={width:256*rn.charCodeAt(sn+7)+rn.charCodeAt(sn+8),height:an,numcomponents:rn.charCodeAt(sn+9)};break}nn=256*rn.charCodeAt(sn+2)+rn.charCodeAt(sn+3)}return hn}(_e=this.__addimage__.isArrayBufferView(_e)?this.__addimage__.arrayBufferToBinaryString(_e):_e)).numcomponents){case 1:fn=this.color_spaces.DEVICE_GRAY;break;case 4:fn=this.color_spaces.DEVICE_CMYK;break;case 3:fn=this.color_spaces.DEVICE_RGB}dn={data:_e,width:en.width,height:en.height,colorSpace:fn,bitsPerComponent:8,filter:on,index:tn,alias:un}}return dn}}(E.API);var Vt,Gt,Yt,Jt,Xt,Kt=function(){var St,e,_e;function tn(gn){var vn,fn,en,on,dn,rn,an,nn,cn,hn,sn,pn,mn,yn;for(this.data=gn,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},rn=null;;){switch(vn=this.readUInt32(),cn=function(){var _n,xn;for(xn=[],_n=0;_n<4;++_n)xn.push(String.fromCharCode(this.data[this.pos++]));return xn}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(vn);break;case"fcTL":rn&&this.animation.frames.push(rn),this.pos+=4,rn={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},dn=this.readUInt16(),on=this.readUInt16()||100,rn.delay=1e3*dn/on,rn.disposeOp=this.data[this.pos++],rn.blendOp=this.data[this.pos++],rn.data=[];break;case"IDAT":case"fdAT":for(cn==="fdAT"&&(this.pos+=4,vn-=4),gn=(rn!=null?rn.data:void 0)||this.imgData,pn=0;0<=vn?pn<vn:pn>vn;0<=vn?++pn:--pn)gn.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(en=this.palette.length/3,this.transparency.indexed=this.read(vn),this.transparency.indexed.length>en)throw new Error("More transparent colors than palette size");if((hn=en-this.transparency.indexed.length)>0)for(mn=0;0<=hn?mn<hn:mn>hn;0<=hn?++mn:--mn)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(vn)[0];break;case 2:this.transparency.rgb=this.read(vn)}break;case"tEXt":an=(sn=this.read(vn)).indexOf(0),nn=String.fromCharCode.apply(String,sn.slice(0,an)),this.text[nn]=String.fromCharCode.apply(String,sn.slice(an+1));break;case"IEND":return rn&&this.animation.frames.push(rn),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(yn=this.colorType)===4||yn===6,fn=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*fn,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=vn}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}tn.prototype.read=function(gn){var vn,fn;for(fn=[],vn=0;0<=gn?vn<gn:vn>gn;0<=gn?++vn:--vn)fn.push(this.data[this.pos++]);return fn},tn.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},tn.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},tn.prototype.decodePixels=function(gn){var vn=this.pixelBitlength/8,fn=new Uint8Array(this.width*this.height*vn),en=0,on=this;if(gn==null&&(gn=this.imgData),gn.length===0)return new Uint8Array(0);function dn(rn,an,nn,cn){var hn,sn,pn,mn,yn,_n,xn,Sn,Pn,Ln,In,Rn,Mn,Hn,Qn,Kn,nr,Zn,ir,Jn,Vn,Xn=Math.ceil((on.width-rn)/nn),Yn=Math.ceil((on.height-an)/cn),Tn=on.width==Xn&&on.height==Yn;for(Hn=vn*Xn,Rn=Tn?fn:new Uint8Array(Hn*Yn),_n=gn.length,Mn=0,sn=0;Mn<Yn&&en<_n;){switch(gn[en++]){case 0:for(mn=nr=0;nr<Hn;mn=nr+=1)Rn[sn++]=gn[en++];break;case 1:for(mn=Zn=0;Zn<Hn;mn=Zn+=1)hn=gn[en++],yn=mn<vn?0:Rn[sn-vn],Rn[sn++]=(hn+yn)%256;break;case 2:for(mn=ir=0;ir<Hn;mn=ir+=1)hn=gn[en++],pn=(mn-mn%vn)/vn,Qn=Mn&&Rn[(Mn-1)*Hn+pn*vn+mn%vn],Rn[sn++]=(Qn+hn)%256;break;case 3:for(mn=Jn=0;Jn<Hn;mn=Jn+=1)hn=gn[en++],pn=(mn-mn%vn)/vn,yn=mn<vn?0:Rn[sn-vn],Qn=Mn&&Rn[(Mn-1)*Hn+pn*vn+mn%vn],Rn[sn++]=(hn+Math.floor((yn+Qn)/2))%256;break;case 4:for(mn=Vn=0;Vn<Hn;mn=Vn+=1)hn=gn[en++],pn=(mn-mn%vn)/vn,yn=mn<vn?0:Rn[sn-vn],Mn===0?Qn=Kn=0:(Qn=Rn[(Mn-1)*Hn+pn*vn+mn%vn],Kn=pn&&Rn[(Mn-1)*Hn+(pn-1)*vn+mn%vn]),xn=yn+Qn-Kn,Sn=Math.abs(xn-yn),Ln=Math.abs(xn-Qn),In=Math.abs(xn-Kn),Pn=Sn<=Ln&&Sn<=In?yn:Ln<=In?Qn:Kn,Rn[sn++]=(hn+Pn)%256;break;default:throw new Error("Invalid filter algorithm: "+gn[en-1])}if(!Tn){var An=((an+Mn*cn)*on.width+rn)*vn,wn=Mn*Hn;for(mn=0;mn<Xn;mn+=1){for(var En=0;En<vn;En+=1)fn[An++]=Rn[wn++];An+=(nn-1)*vn}}Mn++}}return gn=unzlibSync(gn),on.interlaceMethod==1?(dn(0,0,8,8),dn(4,0,8,8),dn(0,4,4,8),dn(2,0,4,4),dn(0,2,2,4),dn(1,0,2,2),dn(0,1,1,2)):dn(0,0,1,1),fn},tn.prototype.decodePalette=function(){var gn,vn,fn,en,on,dn,rn,an,nn;for(fn=this.palette,dn=this.transparency.indexed||[],on=new Uint8Array((dn.length||0)+fn.length),en=0,gn=0,vn=rn=0,an=fn.length;rn<an;vn=rn+=3)on[en++]=fn[vn],on[en++]=fn[vn+1],on[en++]=fn[vn+2],on[en++]=(nn=dn[gn++])!=null?nn:255;return on},tn.prototype.copyToImageData=function(gn,vn){var fn,en,on,dn,rn,an,nn,cn,hn,sn,pn;if(en=this.colors,hn=null,fn=this.hasAlphaChannel,this.palette.length&&(hn=(pn=this._decodedPalette)!=null?pn:this._decodedPalette=this.decodePalette(),en=4,fn=!0),cn=(on=gn.data||gn).length,rn=hn||vn,dn=an=0,en===1)for(;dn<cn;)nn=hn?4*vn[dn/4]:an,sn=rn[nn++],on[dn++]=sn,on[dn++]=sn,on[dn++]=sn,on[dn++]=fn?rn[nn++]:255,an=nn;else for(;dn<cn;)nn=hn?4*vn[dn/4]:an,on[dn++]=rn[nn++],on[dn++]=rn[nn++],on[dn++]=rn[nn++],on[dn++]=fn?rn[nn++]:255,an=nn},tn.prototype.decode=function(){var gn;return gn=new Uint8Array(this.width*this.height*4),this.copyToImageData(gn,this.decodePixels()),gn};var un=function(){if(Object.prototype.toString.call(n)==="[object Window]"){try{e=n.document.createElement("canvas"),_e=e.getContext("2d")}catch{return!1}return!0}return!1};return un(),St=function(gn){var vn;if(un()===!0)return _e.width=gn.width,_e.height=gn.height,_e.clearRect(0,0,gn.width,gn.height),_e.putImageData(gn,0,0),(vn=new Image).src=e.toDataURL(),vn;throw new Error("This method requires a Browser with Canvas-capability.")},tn.prototype.decodeFrames=function(gn){var vn,fn,en,on,dn,rn,an,nn;if(this.animation){for(nn=[],fn=dn=0,rn=(an=this.animation.frames).length;dn<rn;fn=++dn)vn=an[fn],en=gn.createImageData(vn.width,vn.height),on=this.decodePixels(new Uint8Array(vn.data)),this.copyToImageData(en,on),vn.imageData=en,nn.push(vn.image=St(en));return nn}},tn.prototype.renderFrame=function(gn,vn){var fn,en,on;return fn=(en=this.animation.frames)[vn],on=en[vn-1],vn===0&&gn.clearRect(0,0,this.width,this.height),(on!=null?on.disposeOp:void 0)===1?gn.clearRect(on.xOffset,on.yOffset,on.width,on.height):(on!=null?on.disposeOp:void 0)===2&&gn.putImageData(on.imageData,on.xOffset,on.yOffset),fn.blendOp===0&&gn.clearRect(fn.xOffset,fn.yOffset,fn.width,fn.height),gn.drawImage(fn.image,fn.xOffset,fn.yOffset)},tn.prototype.animate=function(gn){var vn,fn,en,on,dn,rn,an=this;return fn=0,rn=this.animation,on=rn.numFrames,en=rn.frames,dn=rn.numPlays,(vn=function(){var nn,cn;if(nn=fn++%on,cn=en[nn],an.renderFrame(gn,nn),on>1&&fn/on<dn)return an.animation._timeout=setTimeout(vn,cn.delay)})()},tn.prototype.stopAnimation=function(){var gn;return clearTimeout((gn=this.animation)!=null?gn._timeout:void 0)},tn.prototype.render=function(gn){var vn,fn;return gn._png&&gn._png.stopAnimation(),gn._png=this,gn.width=this.width,gn.height=this.height,vn=gn.getContext("2d"),this.animation?(this.decodeFrames(vn),this.animate(vn)):(fn=vn.createImageData(this.width,this.height),this.copyToImageData(fn,this.decodePixels()),vn.putImageData(fn,0,0))},tn}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Zt(St){var e=0;if(St[e++]!==71||St[e++]!==73||St[e++]!==70||St[e++]!==56||(St[e++]+1&253)!=56||St[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var _e=St[e++]|St[e++]<<8,tn=St[e++]|St[e++]<<8,un=St[e++],gn=un>>7,vn=1<<(7&un)+1;St[e++],St[e++];var fn=null,en=null;gn&&(fn=e,en=vn,e+=3*vn);var on=!0,dn=[],rn=0,an=null,nn=0,cn=null;for(this.width=_e,this.height=tn;on&&e<St.length;)switch(St[e++]){case 33:switch(St[e++]){case 255:if(St[e]!==11||St[e+1]==78&&St[e+2]==69&&St[e+3]==84&&St[e+4]==83&&St[e+5]==67&&St[e+6]==65&&St[e+7]==80&&St[e+8]==69&&St[e+9]==50&&St[e+10]==46&&St[e+11]==48&&St[e+12]==3&&St[e+13]==1&&St[e+16]==0)e+=14,cn=St[e++]|St[e++]<<8,e++;else for(e+=12;;){if(!((Mn=St[e++])>=0))throw Error("Invalid block size");if(Mn===0)break;e+=Mn}break;case 249:if(St[e++]!==4||St[e+4]!==0)throw new Error("Invalid graphics extension block.");var hn=St[e++];rn=St[e++]|St[e++]<<8,an=St[e++],(1&hn)==0&&(an=null),nn=hn>>2&7,e++;break;case 254:for(;;){if(!((Mn=St[e++])>=0))throw Error("Invalid block size");if(Mn===0)break;e+=Mn}break;default:throw new Error("Unknown graphic control label: 0x"+St[e-1].toString(16))}break;case 44:var sn=St[e++]|St[e++]<<8,pn=St[e++]|St[e++]<<8,mn=St[e++]|St[e++]<<8,yn=St[e++]|St[e++]<<8,_n=St[e++],xn=_n>>6&1,Sn=1<<(7&_n)+1,Pn=fn,Ln=en,In=!1;_n>>7&&(In=!0,Pn=e,Ln=Sn,e+=3*Sn);var Rn=e;for(e++;;){var Mn;if(!((Mn=St[e++])>=0))throw Error("Invalid block size");if(Mn===0)break;e+=Mn}dn.push({x:sn,y:pn,width:mn,height:yn,has_local_palette:In,palette_offset:Pn,palette_size:Ln,data_offset:Rn,data_length:e-Rn,transparent_index:an,interlaced:!!xn,delay:rn,disposal:nn});break;case 59:on=!1;break;default:throw new Error("Unknown gif block: 0x"+St[e-1].toString(16))}this.numFrames=function(){return dn.length},this.loopCount=function(){return cn},this.frameInfo=function(Hn){if(Hn<0||Hn>=dn.length)throw new Error("Frame index out of range.");return dn[Hn]},this.decodeAndBlitFrameBGRA=function(Hn,Qn){var Kn=this.frameInfo(Hn),nr=Kn.width*Kn.height,Zn=new Uint8Array(nr);$t(St,Kn.data_offset,Zn,nr);var ir=Kn.palette_offset,Jn=Kn.transparent_index;Jn===null&&(Jn=256);var Vn=Kn.width,Xn=_e-Vn,Yn=Vn,Tn=4*(Kn.y*_e+Kn.x),An=4*((Kn.y+Kn.height)*_e+Kn.x),wn=Tn,En=4*Xn;Kn.interlaced===!0&&(En+=4*_e*7);for(var Nn=8,Fn=0,Un=Zn.length;Fn<Un;++Fn){var Gn=Zn[Fn];if(Yn===0&&(Yn=Vn,(wn+=En)>=An&&(En=4*Xn+4*_e*(Nn-1),wn=Tn+(Vn+Xn)*(Nn<<1),Nn>>=1)),Gn===Jn)wn+=4;else{var er=St[ir+3*Gn],On=St[ir+3*Gn+1],Bn=St[ir+3*Gn+2];Qn[wn++]=Bn,Qn[wn++]=On,Qn[wn++]=er,Qn[wn++]=255}--Yn}},this.decodeAndBlitFrameRGBA=function(Hn,Qn){var Kn=this.frameInfo(Hn),nr=Kn.width*Kn.height,Zn=new Uint8Array(nr);$t(St,Kn.data_offset,Zn,nr);var ir=Kn.palette_offset,Jn=Kn.transparent_index;Jn===null&&(Jn=256);var Vn=Kn.width,Xn=_e-Vn,Yn=Vn,Tn=4*(Kn.y*_e+Kn.x),An=4*((Kn.y+Kn.height)*_e+Kn.x),wn=Tn,En=4*Xn;Kn.interlaced===!0&&(En+=4*_e*7);for(var Nn=8,Fn=0,Un=Zn.length;Fn<Un;++Fn){var Gn=Zn[Fn];if(Yn===0&&(Yn=Vn,(wn+=En)>=An&&(En=4*Xn+4*_e*(Nn-1),wn=Tn+(Vn+Xn)*(Nn<<1),Nn>>=1)),Gn===Jn)wn+=4;else{var er=St[ir+3*Gn],On=St[ir+3*Gn+1],Bn=St[ir+3*Gn+2];Qn[wn++]=er,Qn[wn++]=On,Qn[wn++]=Bn,Qn[wn++]=255}--Yn}}}function $t(St,e,_e,tn){for(var un=St[e++],gn=1<<un,vn=gn+1,fn=vn+1,en=un+1,on=(1<<en)-1,dn=0,rn=0,an=0,nn=St[e++],cn=new Int32Array(4096),hn=null;;){for(;dn<16&&nn!==0;)rn|=St[e++]<<dn,dn+=8,nn===1?nn=St[e++]:--nn;if(dn<en)break;var sn=rn&on;if(rn>>=en,dn-=en,sn!==gn){if(sn===vn)break;for(var pn=sn<fn?sn:hn,mn=0,yn=pn;yn>gn;)yn=cn[yn]>>8,++mn;var _n=yn;if(an+mn+(pn!==sn?1:0)>tn)return void a.log("Warning, gif stream longer than expected.");_e[an++]=_n;var xn=an+=mn;for(pn!==sn&&(_e[an++]=_n),yn=pn;mn--;)yn=cn[yn],_e[--xn]=255&yn,yn>>=8;hn!==null&&fn<4096&&(cn[fn++]=hn<<8|_n,fn>=on+1&&en<12&&(++en,on=on<<1|1)),hn=sn}else fn=vn+1,on=(1<<(en=un+1))-1,hn=null}return an!==tn&&a.log("Warning, gif stream shorter than expected."),_e}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Qt(St){var e,_e,tn,un,gn,vn=Math.floor,fn=new Array(64),en=new Array(64),on=new Array(64),dn=new Array(64),rn=new Array(65535),an=new Array(65535),nn=new Array(64),cn=new Array(64),hn=[],sn=0,pn=7,mn=new Array(64),yn=new Array(64),_n=new Array(64),xn=new Array(256),Sn=new Array(2048),Pn=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Ln=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],In=[0,1,2,3,4,5,6,7,8,9,10,11],Rn=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Mn=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Hn=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Qn=[0,1,2,3,4,5,6,7,8,9,10,11],Kn=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],nr=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Zn(Tn,An){for(var wn=0,En=0,Nn=new Array,Fn=1;Fn<=16;Fn++){for(var Un=1;Un<=Tn[Fn];Un++)Nn[An[En]]=[],Nn[An[En]][0]=wn,Nn[An[En]][1]=Fn,En++,wn++;wn*=2}return Nn}function ir(Tn){for(var An=Tn[0],wn=Tn[1]-1;wn>=0;)An&1<<wn&&(sn|=1<<pn),wn--,--pn<0&&(sn==255?(Jn(255),Jn(0)):Jn(sn),pn=7,sn=0)}function Jn(Tn){hn.push(Tn)}function Vn(Tn){Jn(Tn>>8&255),Jn(255&Tn)}function Xn(Tn,An,wn,En,Nn){for(var Fn,Un=Nn[0],Gn=Nn[240],er=function(ar,vr){var dr,hr,_r,or,Er,Dr,Rr,Gr,Ir,ts,zr=0;for(Ir=0;Ir<8;++Ir){dr=ar[zr],hr=ar[zr+1],_r=ar[zr+2],or=ar[zr+3],Er=ar[zr+4],Dr=ar[zr+5],Rr=ar[zr+6];var ws=dr+(Gr=ar[zr+7]),es=dr-Gr,ps=hr+Rr,ys=hr-Rr,Or=_r+Dr,Wr=_r-Dr,xr=or+Er,br=or-Er,yr=ws+xr,qr=ws-xr,Yr=ps+Or,Jr=ps-Or;ar[zr]=yr+Yr,ar[zr+4]=yr-Yr;var Xr=.707106781*(Jr+qr);ar[zr+2]=qr+Xr,ar[zr+6]=qr-Xr;var as=.382683433*((yr=br+Wr)-(Jr=ys+es)),ks=.5411961*yr+as,us=1.306562965*Jr+as,ls=.707106781*(Yr=Wr+ys),As=es+ls,ns=es-ls;ar[zr+5]=ns+ks,ar[zr+3]=ns-ks,ar[zr+1]=As+us,ar[zr+7]=As-us,zr+=8}for(zr=0,Ir=0;Ir<8;++Ir){dr=ar[zr],hr=ar[zr+8],_r=ar[zr+16],or=ar[zr+24],Er=ar[zr+32],Dr=ar[zr+40],Rr=ar[zr+48];var Fs=dr+(Gr=ar[zr+56]),gs=dr-Gr,bs=hr+Rr,Ss=hr-Rr,Ts=_r+Dr,js=_r-Dr,Qs=or+Er,Ls=or-Er,Rs=Fs+Qs,Gs=Fs-Qs,go=bs+Ts,Ao=bs-Ts;ar[zr]=Rs+go,ar[zr+32]=Rs-go;var lo=.707106781*(Ao+Gs);ar[zr+16]=Gs+lo,ar[zr+48]=Gs-lo;var To=.382683433*((Rs=Ls+js)-(Ao=Ss+gs)),Sl=.5411961*Rs+To,Fl=1.306562965*Ao+To,Nl=.707106781*(go=js+Ss),Dl=gs+Nl,Ml=gs-Nl;ar[zr+40]=Ml+Sl,ar[zr+24]=Ml-Sl,ar[zr+8]=Dl+Fl,ar[zr+56]=Dl-Fl,zr++}for(Ir=0;Ir<64;++Ir)ts=ar[Ir]*vr[Ir],nn[Ir]=ts>0?ts+.5|0:ts-.5|0;return nn}(Tn,An),On=0;On<64;++On)cn[Pn[On]]=er[On];var Bn=cn[0]-wn;wn=cn[0],Bn==0?ir(En[0]):(ir(En[an[Fn=32767+Bn]]),ir(rn[Fn]));for(var $n=63;$n>0&&cn[$n]==0;)$n--;if($n==0)return ir(Un),wn;for(var qn,zn=1;zn<=$n;){for(var jn=zn;cn[zn]==0&&zn<=$n;)++zn;var ur=zn-jn;if(ur>=16){qn=ur>>4;for(var gr=1;gr<=qn;++gr)ir(Gn);ur&=15}Fn=32767+cn[zn],ir(Nn[(ur<<4)+an[Fn]]),ir(rn[Fn]),zn++}return $n!=63&&ir(Un),wn}function Yn(Tn){Tn=Math.min(Math.max(Tn,1),100),gn!=Tn&&(function(An){for(var wn=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],En=0;En<64;En++){var Nn=vn((wn[En]*An+50)/100);Nn=Math.min(Math.max(Nn,1),255),fn[Pn[En]]=Nn}for(var Fn=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Un=0;Un<64;Un++){var Gn=vn((Fn[Un]*An+50)/100);Gn=Math.min(Math.max(Gn,1),255),en[Pn[Un]]=Gn}for(var er=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],On=0,Bn=0;Bn<8;Bn++)for(var $n=0;$n<8;$n++)on[On]=1/(fn[Pn[On]]*er[Bn]*er[$n]*8),dn[On]=1/(en[Pn[On]]*er[Bn]*er[$n]*8),On++}(Tn<50?Math.floor(5e3/Tn):Math.floor(200-2*Tn)),gn=Tn)}this.encode=function(Tn,An){An&&Yn(An),hn=new Array,sn=0,pn=7,Vn(65496),Vn(65504),Vn(16),Jn(74),Jn(70),Jn(73),Jn(70),Jn(0),Jn(1),Jn(1),Jn(0),Vn(1),Vn(1),Jn(0),Jn(0),function(){Vn(65499),Vn(132),Jn(0);for(var hr=0;hr<64;hr++)Jn(fn[hr]);Jn(1);for(var _r=0;_r<64;_r++)Jn(en[_r])}(),function(hr,_r){Vn(65472),Vn(17),Jn(8),Vn(_r),Vn(hr),Jn(3),Jn(1),Jn(17),Jn(0),Jn(2),Jn(17),Jn(1),Jn(3),Jn(17),Jn(1)}(Tn.width,Tn.height),function(){Vn(65476),Vn(418),Jn(0);for(var hr=0;hr<16;hr++)Jn(Ln[hr+1]);for(var _r=0;_r<=11;_r++)Jn(In[_r]);Jn(16);for(var or=0;or<16;or++)Jn(Rn[or+1]);for(var Er=0;Er<=161;Er++)Jn(Mn[Er]);Jn(1);for(var Dr=0;Dr<16;Dr++)Jn(Hn[Dr+1]);for(var Rr=0;Rr<=11;Rr++)Jn(Qn[Rr]);Jn(17);for(var Gr=0;Gr<16;Gr++)Jn(Kn[Gr+1]);for(var Ir=0;Ir<=161;Ir++)Jn(nr[Ir])}(),Vn(65498),Vn(12),Jn(3),Jn(1),Jn(0),Jn(2),Jn(17),Jn(3),Jn(17),Jn(0),Jn(63),Jn(0);var wn=0,En=0,Nn=0;sn=0,pn=7,this.encode.displayName="_encode_";for(var Fn,Un,Gn,er,On,Bn,$n,qn,zn,jn=Tn.data,ur=Tn.width,gr=Tn.height,ar=4*ur,vr=0;vr<gr;){for(Fn=0;Fn<ar;){for(On=ar*vr+Fn,$n=-1,qn=0,zn=0;zn<64;zn++)Bn=On+(qn=zn>>3)*ar+($n=4*(7&zn)),vr+qn>=gr&&(Bn-=ar*(vr+1+qn-gr)),Fn+$n>=ar&&(Bn-=Fn+$n-ar+4),Un=jn[Bn++],Gn=jn[Bn++],er=jn[Bn++],mn[zn]=(Sn[Un]+Sn[Gn+256>>0]+Sn[er+512>>0]>>16)-128,yn[zn]=(Sn[Un+768>>0]+Sn[Gn+1024>>0]+Sn[er+1280>>0]>>16)-128,_n[zn]=(Sn[Un+1280>>0]+Sn[Gn+1536>>0]+Sn[er+1792>>0]>>16)-128;wn=Xn(mn,on,wn,e,tn),En=Xn(yn,dn,En,_e,un),Nn=Xn(_n,dn,Nn,_e,un),Fn+=32}vr+=8}if(pn>=0){var dr=[];dr[1]=pn+1,dr[0]=(1<<pn+1)-1,ir(dr)}return Vn(65497),new Uint8Array(hn)},St=St||50,function(){for(var Tn=String.fromCharCode,An=0;An<256;An++)xn[An]=Tn(An)}(),e=Zn(Ln,In),_e=Zn(Hn,Qn),tn=Zn(Rn,Mn),un=Zn(Kn,nr),function(){for(var Tn=1,An=2,wn=1;wn<=15;wn++){for(var En=Tn;En<An;En++)an[32767+En]=wn,rn[32767+En]=[],rn[32767+En][1]=wn,rn[32767+En][0]=En;for(var Nn=-(An-1);Nn<=-Tn;Nn++)an[32767+Nn]=wn,rn[32767+Nn]=[],rn[32767+Nn][1]=wn,rn[32767+Nn][0]=An-1+Nn;Tn<<=1,An<<=1}}(),function(){for(var Tn=0;Tn<256;Tn++)Sn[Tn]=19595*Tn,Sn[Tn+256>>0]=38470*Tn,Sn[Tn+512>>0]=7471*Tn+32768,Sn[Tn+768>>0]=-11059*Tn,Sn[Tn+1024>>0]=-21709*Tn,Sn[Tn+1280>>0]=32768*Tn+8421375,Sn[Tn+1536>>0]=-27439*Tn,Sn[Tn+1792>>0]=-5329*Tn}(),Yn(St)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function te(St,e){if(this.pos=0,this.buffer=St,this.datav=new DataView(St.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ee(St){function e(Ln){if(!Ln)throw Error("assert :P")}function _e(Ln,In,Rn){for(var Mn=0;4>Mn;Mn++)if(Ln[In+Mn]!=Rn.charCodeAt(Mn))return!0;return!1}function tn(Ln,In,Rn,Mn,Hn){for(var Qn=0;Qn<Hn;Qn++)Ln[In+Qn]=Rn[Mn+Qn]}function un(Ln,In,Rn,Mn){for(var Hn=0;Hn<Mn;Hn++)Ln[In+Hn]=Rn}function gn(Ln){return new Int32Array(Ln)}function vn(Ln,In){for(var Rn=[],Mn=0;Mn<Ln;Mn++)Rn.push(new In);return Rn}function fn(Ln,In){var Rn=[];return function Mn(Hn,Qn,Kn){for(var nr=Kn[Qn],Zn=0;Zn<nr&&(Hn.push(Kn.length>Qn+1?[]:new In),!(Kn.length<Qn+1));Zn++)Mn(Hn[Zn],Qn+1,Kn)}(Rn,0,Ln),Rn}var en=function(){var Ln=this;function In(bn,Cn){for(var Dn=1<<Cn-1>>>0;bn&Dn;)Dn>>>=1;return Dn?(bn&Dn-1)+Dn:bn}function Rn(bn,Cn,Dn,Wn,_i){e(!(Wn%Dn));do bn[Cn+(Wn-=Dn)]=_i;while(0<Wn)}function Mn(bn,Cn,Dn,Wn,_i){if(e(2328>=_i),512>=_i)var rr=gn(512);else if((rr=gn(_i))==null)return 0;return function(sr,lr,cr,pr,Sr,kr){var Lr,Tr,$r=lr,Fr=1<<cr,Cr=gn(16),Ar=gn(16);for(e(Sr!=0),e(pr!=null),e(sr!=null),e(0<cr),Tr=0;Tr<Sr;++Tr){if(15<pr[Tr])return 0;++Cr[pr[Tr]]}if(Cr[0]==Sr)return 0;for(Ar[1]=0,Lr=1;15>Lr;++Lr){if(Cr[Lr]>1<<Lr)return 0;Ar[Lr+1]=Ar[Lr]+Cr[Lr]}for(Tr=0;Tr<Sr;++Tr)Lr=pr[Tr],0<pr[Tr]&&(kr[Ar[Lr]++]=Tr);if(Ar[15]==1)return(pr=new Hn).g=0,pr.value=kr[0],Rn(sr,$r,1,Fr,pr),Fr;var jr,Hr=-1,Br=Fr-1,ss=0,Qr=1,cs=1,Zr=1<<cr;for(Tr=0,Lr=1,Sr=2;Lr<=cr;++Lr,Sr<<=1){if(Qr+=cs<<=1,0>(cs-=Cr[Lr]))return 0;for(;0<Cr[Lr];--Cr[Lr])(pr=new Hn).g=Lr,pr.value=kr[Tr++],Rn(sr,$r+ss,Sr,Zr,pr),ss=In(ss,Lr)}for(Lr=cr+1,Sr=2;15>=Lr;++Lr,Sr<<=1){if(Qr+=cs<<=1,0>(cs-=Cr[Lr]))return 0;for(;0<Cr[Lr];--Cr[Lr]){if(pr=new Hn,(ss&Br)!=Hr){for($r+=Zr,jr=1<<(Hr=Lr)-cr;15>Hr&&!(0>=(jr-=Cr[Hr]));)++Hr,jr<<=1;Fr+=Zr=1<<(jr=Hr-cr),sr[lr+(Hr=ss&Br)].g=jr+cr,sr[lr+Hr].value=$r-lr-Hr}pr.g=Lr-cr,pr.value=kr[Tr++],Rn(sr,$r+(ss>>cr),Sr,Zr,pr),ss=In(ss,Lr)}}return Qr!=2*Ar[15]-1?0:Fr}(bn,Cn,Dn,Wn,_i,rr)}function Hn(){this.value=this.g=0}function Qn(){this.value=this.g=0}function Kn(){this.G=vn(5,Hn),this.H=gn(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=vn($a,Qn)}function nr(bn,Cn,Dn,Wn){e(bn!=null),e(Cn!=null),e(2147483648>Wn),bn.Ca=254,bn.I=0,bn.b=-8,bn.Ka=0,bn.oa=Cn,bn.pa=Dn,bn.Jd=Cn,bn.Yc=Dn+Wn,bn.Zc=4<=Wn?Dn+Wn-4+1:Dn,Fn(bn)}function Zn(bn,Cn){for(var Dn=0;0<Cn--;)Dn|=Gn(bn,128)<<Cn;return Dn}function ir(bn,Cn){var Dn=Zn(bn,Cn);return Un(bn)?-Dn:Dn}function Jn(bn,Cn,Dn,Wn){var _i,rr=0;for(e(bn!=null),e(Cn!=null),e(4294967288>Wn),bn.Sb=Wn,bn.Ra=0,bn.u=0,bn.h=0,4<Wn&&(Wn=4),_i=0;_i<Wn;++_i)rr+=Cn[Dn+_i]<<8*_i;bn.Ra=rr,bn.bb=Wn,bn.oa=Cn,bn.pa=Dn}function Vn(bn){for(;8<=bn.u&&bn.bb<bn.Sb;)bn.Ra>>>=8,bn.Ra+=bn.oa[bn.pa+bn.bb]<<Ql-8>>>0,++bn.bb,bn.u-=8;wn(bn)&&(bn.h=1,bn.u=0)}function Xn(bn,Cn){if(e(0<=Cn),!bn.h&&Cn<=Jl){var Dn=An(bn)&Kl[Cn];return bn.u+=Cn,Vn(bn),Dn}return bn.h=1,bn.u=0}function Yn(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Tn(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function An(bn){return bn.Ra>>>(bn.u&Ql-1)>>>0}function wn(bn){return e(bn.bb<=bn.Sb),bn.h||bn.bb==bn.Sb&&bn.u>Ql}function En(bn,Cn){bn.u=Cn,bn.h=wn(bn)}function Nn(bn){bn.u>=Tu&&(e(bn.u>=Tu),Vn(bn))}function Fn(bn){e(bn!=null&&bn.oa!=null),bn.pa<bn.Zc?(bn.I=(bn.oa[bn.pa++]|bn.I<<8)>>>0,bn.b+=8):(e(bn!=null&&bn.oa!=null),bn.pa<bn.Yc?(bn.b+=8,bn.I=bn.oa[bn.pa++]|bn.I<<8):bn.Ka?bn.b=0:(bn.I<<=8,bn.b+=8,bn.Ka=1))}function Un(bn){return Zn(bn,1)}function Gn(bn,Cn){var Dn=bn.Ca;0>bn.b&&Fn(bn);var Wn=bn.b,_i=Dn*Cn>>>8,rr=(bn.I>>>Wn>_i)+0;for(rr?(Dn-=_i,bn.I-=_i+1<<Wn>>>0):Dn=_i+1,Wn=Dn,_i=0;256<=Wn;)_i+=8,Wn>>=8;return Wn=7^_i+to[Wn],bn.b-=Wn,bn.Ca=(Dn<<Wn)-1,rr}function er(bn,Cn,Dn){bn[Cn+0]=Dn>>24&255,bn[Cn+1]=Dn>>16&255,bn[Cn+2]=Dn>>8&255,bn[Cn+3]=Dn>>0&255}function On(bn,Cn){return bn[Cn+0]<<0|bn[Cn+1]<<8}function Bn(bn,Cn){return On(bn,Cn)|bn[Cn+2]<<16}function $n(bn,Cn){return On(bn,Cn)|On(bn,Cn+2)<<16}function qn(bn,Cn){var Dn=1<<Cn;return e(bn!=null),e(0<Cn),bn.X=gn(Dn),bn.X==null?0:(bn.Mb=32-Cn,bn.Xa=Cn,1)}function zn(bn,Cn){e(bn!=null),e(Cn!=null),e(bn.Xa==Cn.Xa),tn(Cn.X,0,bn.X,0,1<<Cn.Xa)}function jn(){this.X=[],this.Xa=this.Mb=0}function ur(bn,Cn,Dn,Wn){e(Dn!=null),e(Wn!=null);var _i=Dn[0],rr=Wn[0];return _i==0&&(_i=(bn*rr+Cn/2)/Cn),rr==0&&(rr=(Cn*_i+bn/2)/bn),0>=_i||0>=rr?0:(Dn[0]=_i,Wn[0]=rr,1)}function gr(bn,Cn){return bn+(1<<Cn)-1>>>Cn}function ar(bn,Cn){return((4278255360&bn)+(4278255360&Cn)>>>0&4278255360)+((16711935&bn)+(16711935&Cn)>>>0&16711935)>>>0}function vr(bn,Cn){Ln[Cn]=function(Dn,Wn,_i,rr,sr,lr,cr){var pr;for(pr=0;pr<sr;++pr){var Sr=Ln[bn](lr[cr+pr-1],_i,rr+pr);lr[cr+pr]=ar(Dn[Wn+pr],Sr)}}}function dr(){this.ud=this.hd=this.jd=0}function hr(bn,Cn){return((4278124286&(bn^Cn))>>>1)+(bn&Cn)>>>0}function _r(bn){return 0<=bn&&256>bn?bn:0>bn?0:255<bn?255:void 0}function or(bn,Cn){return _r(bn+(bn-Cn+.5>>1))}function Er(bn,Cn,Dn){return Math.abs(Cn-Dn)-Math.abs(bn-Dn)}function Dr(bn,Cn,Dn,Wn,_i,rr,sr){for(Wn=rr[sr-1],Dn=0;Dn<_i;++Dn)rr[sr+Dn]=Wn=ar(bn[Cn+Dn],Wn)}function Rr(bn,Cn,Dn,Wn,_i){var rr;for(rr=0;rr<Dn;++rr){var sr=bn[Cn+rr],lr=sr>>8&255,cr=16711935&(cr=(cr=16711935&sr)+((lr<<16)+lr));Wn[_i+rr]=(4278255360&sr)+cr>>>0}}function Gr(bn,Cn){Cn.jd=bn>>0&255,Cn.hd=bn>>8&255,Cn.ud=bn>>16&255}function Ir(bn,Cn,Dn,Wn,_i,rr){var sr;for(sr=0;sr<Wn;++sr){var lr=Cn[Dn+sr],cr=lr>>>8,pr=lr,Sr=255&(Sr=(Sr=lr>>>16)+((bn.jd<<24>>24)*(cr<<24>>24)>>>5));pr=255&(pr=(pr=pr+((bn.hd<<24>>24)*(cr<<24>>24)>>>5))+((bn.ud<<24>>24)*(Sr<<24>>24)>>>5)),_i[rr+sr]=(4278255360&lr)+(Sr<<16)+pr}}function ts(bn,Cn,Dn,Wn,_i){Ln[Cn]=function(rr,sr,lr,cr,pr,Sr,kr,Lr,Tr){for(cr=kr;cr<Lr;++cr)for(kr=0;kr<Tr;++kr)pr[Sr++]=_i(lr[Wn(rr[sr++])])},Ln[bn]=function(rr,sr,lr,cr,pr,Sr,kr){var Lr=8>>rr.b,Tr=rr.Ea,$r=rr.K[0],Fr=rr.w;if(8>Lr)for(rr=(1<<rr.b)-1,Fr=(1<<Lr)-1;sr<lr;++sr){var Cr,Ar=0;for(Cr=0;Cr<Tr;++Cr)Cr&rr||(Ar=Wn(cr[pr++])),Sr[kr++]=_i($r[Ar&Fr]),Ar>>=Lr}else Ln["VP8LMapColor"+Dn](cr,pr,$r,Fr,Sr,kr,sr,lr,Tr)}}function zr(bn,Cn,Dn,Wn,_i){for(Dn=Cn+Dn;Cn<Dn;){var rr=bn[Cn++];Wn[_i++]=rr>>16&255,Wn[_i++]=rr>>8&255,Wn[_i++]=rr>>0&255}}function ws(bn,Cn,Dn,Wn,_i){for(Dn=Cn+Dn;Cn<Dn;){var rr=bn[Cn++];Wn[_i++]=rr>>16&255,Wn[_i++]=rr>>8&255,Wn[_i++]=rr>>0&255,Wn[_i++]=rr>>24&255}}function es(bn,Cn,Dn,Wn,_i){for(Dn=Cn+Dn;Cn<Dn;){var rr=(sr=bn[Cn++])>>16&240|sr>>12&15,sr=sr>>0&240|sr>>28&15;Wn[_i++]=rr,Wn[_i++]=sr}}function ps(bn,Cn,Dn,Wn,_i){for(Dn=Cn+Dn;Cn<Dn;){var rr=(sr=bn[Cn++])>>16&248|sr>>13&7,sr=sr>>5&224|sr>>3&31;Wn[_i++]=rr,Wn[_i++]=sr}}function ys(bn,Cn,Dn,Wn,_i){for(Dn=Cn+Dn;Cn<Dn;){var rr=bn[Cn++];Wn[_i++]=rr>>0&255,Wn[_i++]=rr>>8&255,Wn[_i++]=rr>>16&255}}function Or(bn,Cn,Dn,Wn,_i,rr){if(rr==0)for(Dn=Cn+Dn;Cn<Dn;)er(Wn,((rr=bn[Cn++])[0]>>24|rr[1]>>8&65280|rr[2]<<8&16711680|rr[3]<<24)>>>0),_i+=32;else tn(Wn,_i,bn,Cn,Dn)}function Wr(bn,Cn){Ln[Cn][0]=Ln[bn+"0"],Ln[Cn][1]=Ln[bn+"1"],Ln[Cn][2]=Ln[bn+"2"],Ln[Cn][3]=Ln[bn+"3"],Ln[Cn][4]=Ln[bn+"4"],Ln[Cn][5]=Ln[bn+"5"],Ln[Cn][6]=Ln[bn+"6"],Ln[Cn][7]=Ln[bn+"7"],Ln[Cn][8]=Ln[bn+"8"],Ln[Cn][9]=Ln[bn+"9"],Ln[Cn][10]=Ln[bn+"10"],Ln[Cn][11]=Ln[bn+"11"],Ln[Cn][12]=Ln[bn+"12"],Ln[Cn][13]=Ln[bn+"13"],Ln[Cn][14]=Ln[bn+"0"],Ln[Cn][15]=Ln[bn+"0"]}function xr(bn){return bn==i1||bn==r1||bn==cp||bn==s1}function br(){this.eb=[],this.size=this.A=this.fb=0}function yr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function qr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new br,this.f.kb=new yr,this.sd=null}function Yr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Jr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Xr(bn){return alert("todo:WebPSamplerProcessPlane"),bn.T}function as(bn,Cn){var Dn=bn.T,Wn=Cn.ba.f.RGBA,_i=Wn.eb,rr=Wn.fb+bn.ka*Wn.A,sr=fo[Cn.ba.S],lr=bn.y,cr=bn.O,pr=bn.f,Sr=bn.N,kr=bn.ea,Lr=bn.W,Tr=Cn.cc,$r=Cn.dc,Fr=Cn.Mc,Cr=Cn.Nc,Ar=bn.ka,jr=bn.ka+bn.T,Hr=bn.U,Br=Hr+1>>1;for(Ar==0?sr(lr,cr,null,null,pr,Sr,kr,Lr,pr,Sr,kr,Lr,_i,rr,null,null,Hr):(sr(Cn.ec,Cn.fc,lr,cr,Tr,$r,Fr,Cr,pr,Sr,kr,Lr,_i,rr-Wn.A,_i,rr,Hr),++Dn);Ar+2<jr;Ar+=2)Tr=pr,$r=Sr,Fr=kr,Cr=Lr,Sr+=bn.Rc,Lr+=bn.Rc,rr+=2*Wn.A,sr(lr,(cr+=2*bn.fa)-bn.fa,lr,cr,Tr,$r,Fr,Cr,pr,Sr,kr,Lr,_i,rr-Wn.A,_i,rr,Hr);return cr+=bn.fa,bn.j+jr<bn.o?(tn(Cn.ec,Cn.fc,lr,cr,Hr),tn(Cn.cc,Cn.dc,pr,Sr,Br),tn(Cn.Mc,Cn.Nc,kr,Lr,Br),Dn--):1&jr||sr(lr,cr,null,null,pr,Sr,kr,Lr,pr,Sr,kr,Lr,_i,rr+Wn.A,null,null,Hr),Dn}function ks(bn,Cn,Dn){var Wn=bn.F,_i=[bn.J];if(Wn!=null){var rr=bn.U,sr=Cn.ba.S,lr=sr==lp||sr==cp;Cn=Cn.ba.f.RGBA;var cr=[0],pr=bn.ka;cr[0]=bn.T,bn.Kb&&(pr==0?--cr[0]:(--pr,_i[0]-=bn.width),bn.j+bn.ka+bn.T==bn.o&&(cr[0]=bn.o-bn.j-pr));var Sr=Cn.eb;pr=Cn.fb+pr*Cn.A,bn=ip(Wn,_i[0],bn.width,rr,cr,Sr,pr+(lr?0:3),Cn.A),e(Dn==cr),bn&&xr(sr)&&Yo(Sr,pr,lr,rr,cr,Cn.A)}return 0}function us(bn){var Cn=bn.ma,Dn=Cn.ba.S,Wn=11>Dn,_i=Dn==ap||Dn==op||Dn==lp||Dn==n1||Dn==12||xr(Dn);if(Cn.memory=null,Cn.Ib=null,Cn.Jb=null,Cn.Nd=null,!Cu(Cn.Oa,bn,_i?11:12))return 0;if(_i&&xr(Dn)&&Vr(),bn.da)alert("todo:use_scaling");else{if(Wn){if(Cn.Ib=Xr,bn.Kb){if(Dn=bn.U+1>>1,Cn.memory=gn(bn.U+2*Dn),Cn.memory==null)return 0;Cn.ec=Cn.memory,Cn.fc=0,Cn.cc=Cn.ec,Cn.dc=Cn.fc+bn.U,Cn.Mc=Cn.cc,Cn.Nc=Cn.dc+Dn,Cn.Ib=as,Vr()}}else alert("todo:EmitYUV");_i&&(Cn.Jb=ks,Wn&&Pr())}if(Wn&&!Z1){for(bn=0;256>bn;++bn)tm[bn]=89858*(bn-128)+hp>>up,im[bn]=-22014*(bn-128)+hp,nm[bn]=-45773*(bn-128),em[bn]=113618*(bn-128)+hp>>up;for(bn=Fu;bn<l1;++bn)Cn=76283*(bn-16)+hp>>up,rm[bn-Fu]=io(Cn,255),sm[bn-Fu]=io(Cn+8>>4,15);Z1=1}return 1}function ls(bn){var Cn=bn.ma,Dn=bn.U,Wn=bn.T;return e(!(1&bn.ka)),0>=Dn||0>=Wn?0:(Dn=Cn.Ib(bn,Cn),Cn.Jb!=null&&Cn.Jb(bn,Cn,Dn),Cn.Dc+=Dn,1)}function As(bn){bn.ma.memory=null}function ns(bn,Cn,Dn,Wn){return Xn(bn,8)!=47?0:(Cn[0]=Xn(bn,14)+1,Dn[0]=Xn(bn,14)+1,Wn[0]=Xn(bn,1),Xn(bn,3)!=0?0:!bn.h)}function Fs(bn,Cn){if(4>bn)return bn+1;var Dn=bn-2>>1;return(2+(1&bn)<<Dn)+Xn(Cn,Dn)+1}function gs(bn,Cn){return 120<Cn?Cn-120:1<=(Dn=((Dn=U0[Cn-1])>>4)*bn+(8-(15&Dn)))?Dn:1;var Dn}function bs(bn,Cn,Dn){var Wn=An(Dn),_i=bn[Cn+=255&Wn].g-8;return 0<_i&&(En(Dn,Dn.u+8),Wn=An(Dn),Cn+=bn[Cn].value,Cn+=Wn&(1<<_i)-1),En(Dn,Dn.u+bn[Cn].g),bn[Cn].value}function Ss(bn,Cn,Dn){return Dn.g+=bn.g,Dn.value+=bn.value<<Cn>>>0,e(8>=Dn.g),bn.g}function Ts(bn,Cn,Dn){var Wn=bn.xc;return e((Cn=Wn==0?0:bn.vc[bn.md*(Dn>>Wn)+(Cn>>Wn)])<bn.Wb),bn.Ya[Cn]}function js(bn,Cn,Dn,Wn){var _i=bn.ab,rr=bn.c*Cn,sr=bn.C;Cn=sr+Cn;var lr=Dn,cr=Wn;for(Wn=bn.Ta,Dn=bn.Ua;0<_i--;){var pr=bn.gc[_i],Sr=sr,kr=Cn,Lr=lr,Tr=cr,$r=(cr=Wn,lr=Dn,pr.Ea);switch(e(Sr<kr),e(kr<=pr.nc),pr.hc){case 2:np(Lr,Tr,(kr-Sr)*$r,cr,lr);break;case 0:var Fr=Sr,Cr=kr,Ar=cr,jr=lr,Hr=(Zr=pr).Ea;Fr==0&&(Qp(Lr,Tr,null,null,1,Ar,jr),Dr(Lr,Tr+1,0,0,Hr-1,Ar,jr+1),Tr+=Hr,jr+=Hr,++Fr);for(var Br=1<<Zr.b,ss=Br-1,Qr=gr(Hr,Zr.b),cs=Zr.K,Zr=Zr.w+(Fr>>Zr.b)*Qr;Fr<Cr;){var Cs=cs,Es=Zr,xs=1;for(Eu(Lr,Tr,Ar,jr-Hr,1,Ar,jr);xs<Hr;){var vs=(xs&~ss)+Br;vs>Hr&&(vs=Hr),(0,qo[Cs[Es++]>>8&15])(Lr,Tr+ +xs,Ar,jr+xs-Hr,vs-xs,Ar,jr+xs),xs=vs}Tr+=Hr,jr+=Hr,++Fr&ss||(Zr+=Qr)}kr!=pr.nc&&tn(cr,lr-$r,cr,lr+(kr-Sr-1)*$r,$r);break;case 1:for($r=Lr,Cr=Tr,Hr=(Lr=pr.Ea)-(jr=Lr&~(Ar=(Tr=1<<pr.b)-1)),Fr=gr(Lr,pr.b),Br=pr.K,pr=pr.w+(Sr>>pr.b)*Fr;Sr<kr;){for(ss=Br,Qr=pr,cs=new dr,Zr=Cr+jr,Cs=Cr+Lr;Cr<Zr;)Gr(ss[Qr++],cs),co(cs,$r,Cr,Tr,cr,lr),Cr+=Tr,lr+=Tr;Cr<Cs&&(Gr(ss[Qr++],cs),co(cs,$r,Cr,Hr,cr,lr),Cr+=Hr,lr+=Hr),++Sr&Ar||(pr+=Fr)}break;case 3:if(Lr==cr&&Tr==lr&&0<pr.b){for(Cr=cr,Lr=$r=lr+(kr-Sr)*$r-(jr=(kr-Sr)*gr(pr.Ea,pr.b)),Tr=cr,Ar=lr,Fr=[],jr=(Hr=jr)-1;0<=jr;--jr)Fr[jr]=Tr[Ar+jr];for(jr=Hr-1;0<=jr;--jr)Cr[Lr+jr]=Fr[jr];bo(pr,Sr,kr,cr,$r,cr,lr)}else bo(pr,Sr,kr,Lr,Tr,cr,lr)}lr=Wn,cr=Dn}cr!=Dn&&tn(Wn,Dn,lr,cr,rr)}function Qs(bn,Cn){var Dn=bn.V,Wn=bn.Ba+bn.c*bn.C,_i=Cn-bn.C;if(e(Cn<=bn.l.o),e(16>=_i),0<_i){var rr=bn.l,sr=bn.Ta,lr=bn.Ua,cr=rr.width;if(js(bn,_i,Dn,Wn),_i=lr=[lr],e((Dn=bn.C)<(Wn=Cn)),e(rr.v<rr.va),Wn>rr.o&&(Wn=rr.o),Dn<rr.j){var pr=rr.j-Dn;Dn=rr.j,_i[0]+=pr*cr}if(Dn>=Wn?Dn=0:(_i[0]+=4*rr.v,rr.ka=Dn-rr.j,rr.U=rr.va-rr.v,rr.T=Wn-Dn,Dn=1),Dn){if(lr=lr[0],11>(Dn=bn.ca).S){var Sr=Dn.f.RGBA,kr=(Wn=Dn.S,_i=rr.U,rr=rr.T,pr=Sr.eb,Sr.A),Lr=rr;for(Sr=Sr.fb+bn.Ma*Sr.A;0<Lr--;){var Tr=sr,$r=lr,Fr=_i,Cr=pr,Ar=Sr;switch(Wn){case sp:_o(Tr,$r,Fr,Cr,Ar);break;case ap:Vo(Tr,$r,Fr,Cr,Ar);break;case i1:Vo(Tr,$r,Fr,Cr,Ar),Yo(Cr,Ar,0,Fr,1,0);break;case W1:Zl(Tr,$r,Fr,Cr,Ar);break;case op:Or(Tr,$r,Fr,Cr,Ar,1);break;case r1:Or(Tr,$r,Fr,Cr,Ar,1),Yo(Cr,Ar,0,Fr,1,0);break;case lp:Or(Tr,$r,Fr,Cr,Ar,0);break;case cp:Or(Tr,$r,Fr,Cr,Ar,0),Yo(Cr,Ar,1,Fr,1,0);break;case n1:Po(Tr,$r,Fr,Cr,Ar);break;case s1:Po(Tr,$r,Fr,Cr,Ar),eu(Cr,Ar,Fr,1,0);break;case H1:Do(Tr,$r,Fr,Cr,Ar);break;default:e(0)}lr+=cr,Sr+=kr}bn.Ma+=rr}else alert("todo:EmitRescaledRowsYUVA");e(bn.Ma<=Dn.height)}}bn.C=Cn,e(bn.C<=bn.i)}function Ls(bn){var Cn;if(0<bn.ua)return 0;for(Cn=0;Cn<bn.Wb;++Cn){var Dn=bn.Ya[Cn].G,Wn=bn.Ya[Cn].H;if(0<Dn[1][Wn[1]+0].g||0<Dn[2][Wn[2]+0].g||0<Dn[3][Wn[3]+0].g)return 0}return 1}function Rs(bn,Cn,Dn,Wn,_i,rr){if(bn.Z!=0){var sr=bn.qd,lr=bn.rd;for(e(Jo[bn.Z]!=null);Cn<Dn;++Cn)Jo[bn.Z](sr,lr,Wn,_i,Wn,_i,rr),sr=Wn,lr=_i,_i+=rr;bn.qd=sr,bn.rd=lr}}function Gs(bn,Cn){var Dn=bn.l.ma,Wn=Dn.Z==0||Dn.Z==1?bn.l.j:bn.C;if(Wn=bn.C<Wn?Wn:bn.C,e(Cn<=bn.l.o),Cn>Wn){var _i=bn.l.width,rr=Dn.ca,sr=Dn.tb+_i*Wn,lr=bn.V,cr=bn.Ba+bn.c*Wn,pr=bn.gc;e(bn.ab==1),e(pr[0].hc==3),Zp(pr[0],Wn,Cn,lr,cr,rr,sr),Rs(Dn,Wn,Cn,rr,sr,_i)}bn.C=bn.Ma=Cn}function go(bn,Cn,Dn,Wn,_i,rr,sr){var lr=bn.$/Wn,cr=bn.$%Wn,pr=bn.m,Sr=bn.s,kr=Dn+bn.$,Lr=kr;_i=Dn+Wn*_i;var Tr=Dn+Wn*rr,$r=280+Sr.ua,Fr=bn.Pb?lr:16777216,Cr=0<Sr.ua?Sr.Wa:null,Ar=Sr.wc,jr=kr<Tr?Ts(Sr,cr,lr):null;e(bn.C<rr),e(Tr<=_i);var Hr=!1;t:for(;;){for(;Hr||kr<Tr;){var Br=0;if(lr>=Fr){var ss=kr-Dn;e((Fr=bn).Pb),Fr.wd=Fr.m,Fr.xd=ss,0<Fr.s.ua&&zn(Fr.s.Wa,Fr.s.vb),Fr=lr+W0}if(cr&Ar||(jr=Ts(Sr,cr,lr)),e(jr!=null),jr.Qb&&(Cn[kr]=jr.qb,Hr=!0),!Hr)if(Nn(pr),jr.jc){Br=pr,ss=Cn;var Qr=kr,cs=jr.pd[An(Br)&$a-1];e(jr.jc),256>cs.g?(En(Br,Br.u+cs.g),ss[Qr]=cs.value,Br=0):(En(Br,Br.u+cs.g-256),e(256<=cs.value),Br=cs.value),Br==0&&(Hr=!0)}else Br=bs(jr.G[0],jr.H[0],pr);if(pr.h)break;if(Hr||256>Br){if(!Hr)if(jr.nd)Cn[kr]=(jr.qb|Br<<8)>>>0;else{if(Nn(pr),Hr=bs(jr.G[1],jr.H[1],pr),Nn(pr),ss=bs(jr.G[2],jr.H[2],pr),Qr=bs(jr.G[3],jr.H[3],pr),pr.h)break;Cn[kr]=(Qr<<24|Hr<<16|Br<<8|ss)>>>0}if(Hr=!1,++kr,++cr>=Wn&&(cr=0,++lr,sr!=null&&lr<=rr&&!(lr%16)&&sr(bn,lr),Cr!=null))for(;Lr<kr;)Br=Cn[Lr++],Cr.X[(506832829*Br&4294967295)>>>Cr.Mb]=Br}else if(280>Br){if(Br=Fs(Br-256,pr),ss=bs(jr.G[4],jr.H[4],pr),Nn(pr),ss=gs(Wn,ss=Fs(ss,pr)),pr.h)break;if(kr-Dn<ss||_i-kr<Br)break t;for(Qr=0;Qr<Br;++Qr)Cn[kr+Qr]=Cn[kr+Qr-ss];for(kr+=Br,cr+=Br;cr>=Wn;)cr-=Wn,++lr,sr!=null&&lr<=rr&&!(lr%16)&&sr(bn,lr);if(e(kr<=_i),cr&Ar&&(jr=Ts(Sr,cr,lr)),Cr!=null)for(;Lr<kr;)Br=Cn[Lr++],Cr.X[(506832829*Br&4294967295)>>>Cr.Mb]=Br}else{if(!(Br<$r))break t;for(Hr=Br-280,e(Cr!=null);Lr<kr;)Br=Cn[Lr++],Cr.X[(506832829*Br&4294967295)>>>Cr.Mb]=Br;Br=kr,e(!(Hr>>>(ss=Cr).Xa)),Cn[Br]=ss.X[Hr],Hr=!0}Hr||e(pr.h==wn(pr))}if(bn.Pb&&pr.h&&kr<_i)e(bn.m.h),bn.a=5,bn.m=bn.wd,bn.$=bn.xd,0<bn.s.ua&&zn(bn.s.vb,bn.s.Wa);else{if(pr.h)break t;sr!=null&&sr(bn,lr>rr?rr:lr),bn.a=0,bn.$=kr-Dn}return 1}return bn.a=3,0}function Ao(bn){e(bn!=null),bn.vc=null,bn.yc=null,bn.Ya=null;var Cn=bn.Wa;Cn!=null&&(Cn.X=null),bn.vb=null,e(bn!=null)}function lo(){var bn=new Jp;return bn==null?null:(bn.a=0,bn.xb=X1,Wr("Predictor","VP8LPredictors"),Wr("Predictor","VP8LPredictors_C"),Wr("PredictorAdd","VP8LPredictorsAdd"),Wr("PredictorAdd","VP8LPredictorsAdd_C"),np=Rr,co=Ir,_o=zr,Vo=ws,Po=es,Do=ps,Zl=ys,Ln.VP8LMapColor32b=Pu,Ln.VP8LMapColor8b=t1,bn)}function To(bn,Cn,Dn,Wn,_i){var rr=1,sr=[bn],lr=[Cn],cr=Wn.m,pr=Wn.s,Sr=null,kr=0;t:for(;;){if(Dn)for(;rr&&Xn(cr,1);){var Lr=sr,Tr=lr,$r=Wn,Fr=1,Cr=$r.m,Ar=$r.gc[$r.ab],jr=Xn(Cr,2);if($r.Oc&1<<jr)rr=0;else{switch($r.Oc|=1<<jr,Ar.hc=jr,Ar.Ea=Lr[0],Ar.nc=Tr[0],Ar.K=[null],++$r.ab,e(4>=$r.ab),jr){case 0:case 1:Ar.b=Xn(Cr,3)+2,Fr=To(gr(Ar.Ea,Ar.b),gr(Ar.nc,Ar.b),0,$r,Ar.K),Ar.K=Ar.K[0];break;case 3:var Hr,Br=Xn(Cr,8)+1,ss=16<Br?0:4<Br?1:2<Br?2:3;if(Lr[0]=gr(Ar.Ea,ss),Ar.b=ss,Hr=Fr=To(Br,1,0,$r,Ar.K)){var Qr,cs=Br,Zr=Ar,Cs=1<<(8>>Zr.b),Es=gn(Cs);if(Es==null)Hr=0;else{var xs=Zr.K[0],vs=Zr.w;for(Es[0]=Zr.K[0][0],Qr=1;Qr<1*cs;++Qr)Es[Qr]=ar(xs[vs+Qr],Es[Qr-1]);for(;Qr<4*Cs;++Qr)Es[Qr]=0;Zr.K[0]=null,Zr.K[0]=Es,Hr=1}}Fr=Hr;break;case 2:break;default:e(0)}rr=Fr}}if(sr=sr[0],lr=lr[0],rr&&Xn(cr,1)&&!(rr=1<=(kr=Xn(cr,4))&&11>=kr)){Wn.a=3;break t}var Ns;if(Ns=rr)e:{var Os,ds,qs,eo=Wn,Vs=sr,no=lr,Ps=kr,so=Dn,ao=eo.m,Ks=eo.s,Zs=[null],ba=1,po=0,ko=z0[Ps];n:for(;;){if(so&&Xn(ao,1)){var Js=Xn(ao,3)+2,Bo=gr(Vs,Js),Ol=gr(no,Js),nu=Bo*Ol;if(!To(Bo,Ol,0,eo,Zs))break n;for(Zs=Zs[0],Ks.xc=Js,Os=0;Os<nu;++Os){var Qo=Zs[Os]>>8&65535;Zs[Os]=Qo,Qo>=ba&&(ba=Qo+1)}}if(ao.h)break n;for(ds=0;5>ds;++ds){var $s=q1[ds];!ds&&0<Ps&&($s+=1<<Ps),po<$s&&(po=$s)}var c1=vn(ba*ko,Hn),n0=ba,i0=vn(n0,Kn);if(i0==null)var dp=null;else e(65536>=n0),dp=i0;var Nu=gn(po);if(dp==null||Nu==null||c1==null){eo.a=1;break n}var pp=c1;for(Os=qs=0;Os<ba;++Os){var Co=dp[Os],iu=Co.G,ru=Co.H,r0=0,gp=1,s0=0;for(ds=0;5>ds;++ds){$s=q1[ds],iu[ds]=pp,ru[ds]=qs,!ds&&0<Ps&&($s+=1<<Ps);r:{var mp,u1=$s,vp=eo,Du=Nu,lm=pp,cm=qs,h1=0,Zo=vp.m,um=Xn(Zo,1);if(un(Du,0,0,u1),um){var hm=Xn(Zo,1)+1,fm=Xn(Zo,1),a0=Xn(Zo,fm==0?1:8);Du[a0]=1,hm==2&&(Du[a0=Xn(Zo,8)]=1);var yp=1}else{var o0=gn(19),l0=Xn(Zo,4)+4;if(19<l0){vp.a=3;var bp=0;break r}for(mp=0;mp<l0;++mp)o0[$0[mp]]=Xn(Zo,3);var f1=void 0,Mu=void 0,c0=vp,dm=o0,_p=u1,u0=Du,d1=0,yl=c0.m,h0=8,f0=vn(128,Hn);i:for(;Mn(f0,0,7,dm,19);){if(Xn(yl,1)){var pm=2+2*Xn(yl,3);if((f1=2+Xn(yl,pm))>_p)break i}else f1=_p;for(Mu=0;Mu<_p&&f1--;){Nn(yl);var d0=f0[0+(127&An(yl))];En(yl,yl.u+d0.g);var su=d0.value;if(16>su)u0[Mu++]=su,su!=0&&(h0=su);else{var gm=su==16,p0=su-16,mm=j0[p0],g0=Xn(yl,I0[p0])+mm;if(Mu+g0>_p)break i;for(var vm=gm?h0:0;0<g0--;)u0[Mu++]=vm}}d1=1;break i}d1||(c0.a=3),yp=d1}(yp=yp&&!Zo.h)&&(h1=Mn(lm,cm,8,Du,u1)),yp&&h1!=0?bp=h1:(vp.a=3,bp=0)}if(bp==0)break n;if(gp&&B0[ds]==1&&(gp=pp[qs].g==0),r0+=pp[qs].g,qs+=bp,3>=ds){var Ru,p1=Nu[0];for(Ru=1;Ru<$s;++Ru)Nu[Ru]>p1&&(p1=Nu[Ru]);s0+=p1}}if(Co.nd=gp,Co.Qb=0,gp&&(Co.qb=(iu[3][ru[3]+0].value<<24|iu[1][ru[1]+0].value<<16|iu[2][ru[2]+0].value)>>>0,r0==0&&256>iu[0][ru[0]+0].value&&(Co.Qb=1,Co.qb+=iu[0][ru[0]+0].value<<8)),Co.jc=!Co.Qb&&6>s0,Co.jc){var xp,$o=Co;for(xp=0;xp<$a;++xp){var _l=xp,xl=$o.pd[_l],wp=$o.G[0][$o.H[0]+_l];256<=wp.value?(xl.g=wp.g+256,xl.value=wp.value):(xl.g=0,xl.value=0,_l>>=Ss(wp,8,xl),_l>>=Ss($o.G[1][$o.H[1]+_l],16,xl),_l>>=Ss($o.G[2][$o.H[2]+_l],0,xl),Ss($o.G[3][$o.H[3]+_l],24,xl))}}}Ks.vc=Zs,Ks.Wb=ba,Ks.Ya=dp,Ks.yc=c1,Ns=1;break e}Ns=0}if(!(rr=Ns)){Wn.a=3;break t}if(0<kr){if(pr.ua=1<<kr,!qn(pr.Wa,kr)){Wn.a=1,rr=0;break t}}else pr.ua=0;var g1=Wn,m0=sr,ym=lr,m1=g1.s,v1=m1.xc;if(g1.c=m0,g1.i=ym,m1.md=gr(m0,v1),m1.wc=v1==0?-1:(1<<v1)-1,Dn){Wn.xb=K0;break t}if((Sr=gn(sr*lr))==null){Wn.a=1,rr=0;break t}rr=(rr=go(Wn,Sr,0,sr,lr,lr,null))&&!cr.h;break t}return rr?(_i!=null?_i[0]=Sr:(e(Sr==null),e(Dn)),Wn.$=0,Dn||Ao(pr)):Ao(pr),rr}function Sl(bn,Cn){var Dn=bn.c*bn.i,Wn=Dn+Cn+16*Cn;return e(bn.c<=Cn),bn.V=gn(Wn),bn.V==null?(bn.Ta=null,bn.Ua=0,bn.a=1,0):(bn.Ta=bn.V,bn.Ua=bn.Ba+Dn+Cn,1)}function Fl(bn,Cn){var Dn=bn.C,Wn=Cn-Dn,_i=bn.V,rr=bn.Ba+bn.c*Dn;for(e(Cn<=bn.l.o);0<Wn;){var sr=16<Wn?16:Wn,lr=bn.l.ma,cr=bn.l.width,pr=cr*sr,Sr=lr.ca,kr=lr.tb+cr*Dn,Lr=bn.Ta,Tr=bn.Ua;js(bn,sr,_i,rr),I1(Lr,Tr,Sr,kr,pr),Rs(lr,Dn,Dn+sr,Sr,kr,cr),Wn-=sr,_i+=sr*bn.c,Dn+=sr}e(Dn==Cn),bn.C=bn.Ma=Cn}function Nl(){this.ub=this.yd=this.td=this.Rb=0}function Dl(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ml(){this.Fb=this.Bb=this.Cb=0,this.Zb=gn(4),this.Lb=gn(4)}function Bu(){this.Yb=function(){var bn=[];return function Cn(Dn,Wn,_i){for(var rr=_i[Wn],sr=0;sr<rr&&(Dn.push(_i.length>Wn+1?[]:0),!(_i.length<Wn+1));sr++)Cn(Dn[sr],Wn+1,_i)}(bn,0,[3,11]),bn}()}function Pp(){this.jb=gn(3),this.Wc=fn([4,8],Bu),this.Xc=fn([4,17],Bu)}function kp(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new gn(4),this.od=new gn(4)}function Rl(){this.ld=this.La=this.dd=this.tc=0}function $u(){this.Na=this.la=0}function Lp(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function lu(){this.ad=gn(384),this.Za=0,this.Ob=gn(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Op(){this.uc=this.M=this.Nb=0,this.wa=Array(new Rl),this.Y=0,this.ya=Array(new lu),this.aa=0,this.l=new Il}function Uu(){this.y=gn(16),this.f=gn(8),this.ea=gn(8)}function Fp(){this.cb=this.a=0,this.sc="",this.m=new Yn,this.Od=new Nl,this.Kc=new Dl,this.ed=new kp,this.Qa=new Ml,this.Ic=this.$c=this.Aa=0,this.D=new Op,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=vn(8,Yn),this.ia=0,this.pb=vn(4,Lp),this.Pa=new Pp,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Uu),this.Hd=0,this.rb=Array(new $u),this.sb=0,this.wa=Array(new Rl),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new lu),this.L=this.aa=0,this.gd=fn([4,2],Rl),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Il(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Np(){var bn=new Fp;return bn!=null&&(bn.a=0,bn.sc="OK",bn.cb=0,bn.Xb=0,Ou||(Ou=Hu)),bn}function Us(bn,Cn,Dn){return bn.a==0&&(bn.a=Cn,bn.sc=Dn,bn.cb=0),0}function zu(bn,Cn,Dn){return 3<=Dn&&bn[Cn+0]==157&&bn[Cn+1]==1&&bn[Cn+2]==42}function Wu(bn,Cn){if(bn==null)return 0;if(bn.a=0,bn.sc="OK",Cn==null)return Us(bn,2,"null VP8Io passed to VP8GetHeaders()");var Dn=Cn.data,Wn=Cn.w,_i=Cn.ha;if(4>_i)return Us(bn,7,"Truncated header.");var rr=Dn[Wn+0]|Dn[Wn+1]<<8|Dn[Wn+2]<<16,sr=bn.Od;if(sr.Rb=!(1&rr),sr.td=rr>>1&7,sr.yd=rr>>4&1,sr.ub=rr>>5,3<sr.td)return Us(bn,3,"Incorrect keyframe parameters.");if(!sr.yd)return Us(bn,4,"Frame not displayable.");Wn+=3,_i-=3;var lr=bn.Kc;if(sr.Rb){if(7>_i)return Us(bn,7,"cannot parse picture header");if(!zu(Dn,Wn,_i))return Us(bn,3,"Bad code word");lr.c=16383&(Dn[Wn+4]<<8|Dn[Wn+3]),lr.Td=Dn[Wn+4]>>6,lr.i=16383&(Dn[Wn+6]<<8|Dn[Wn+5]),lr.Ud=Dn[Wn+6]>>6,Wn+=7,_i-=7,bn.za=lr.c+15>>4,bn.Ub=lr.i+15>>4,Cn.width=lr.c,Cn.height=lr.i,Cn.Da=0,Cn.j=0,Cn.v=0,Cn.va=Cn.width,Cn.o=Cn.height,Cn.da=0,Cn.ib=Cn.width,Cn.hb=Cn.height,Cn.U=Cn.width,Cn.T=Cn.height,un((rr=bn.Pa).jb,0,255,rr.jb.length),e((rr=bn.Qa)!=null),rr.Cb=0,rr.Bb=0,rr.Fb=1,un(rr.Zb,0,0,rr.Zb.length),un(rr.Lb,0,0,rr.Lb)}if(sr.ub>_i)return Us(bn,7,"bad partition length");nr(rr=bn.m,Dn,Wn,sr.ub),Wn+=sr.ub,_i-=sr.ub,sr.Rb&&(lr.Ld=Un(rr),lr.Kd=Un(rr)),lr=bn.Qa;var cr,pr=bn.Pa;if(e(rr!=null),e(lr!=null),lr.Cb=Un(rr),lr.Cb){if(lr.Bb=Un(rr),Un(rr)){for(lr.Fb=Un(rr),cr=0;4>cr;++cr)lr.Zb[cr]=Un(rr)?ir(rr,7):0;for(cr=0;4>cr;++cr)lr.Lb[cr]=Un(rr)?ir(rr,6):0}if(lr.Bb)for(cr=0;3>cr;++cr)pr.jb[cr]=Un(rr)?Zn(rr,8):255}else lr.Bb=0;if(rr.Ka)return Us(bn,3,"cannot parse segment header");if((lr=bn.ed).zd=Un(rr),lr.Tb=Zn(rr,6),lr.wb=Zn(rr,3),lr.Pc=Un(rr),lr.Pc&&Un(rr)){for(pr=0;4>pr;++pr)Un(rr)&&(lr.vd[pr]=ir(rr,6));for(pr=0;4>pr;++pr)Un(rr)&&(lr.od[pr]=ir(rr,6))}if(bn.L=lr.Tb==0?0:lr.zd?1:2,rr.Ka)return Us(bn,3,"cannot parse filter header");var Sr=_i;if(_i=cr=Wn,Wn=cr+Sr,lr=Sr,bn.Xb=(1<<Zn(bn.m,2))-1,Sr<3*(pr=bn.Xb))Dn=7;else{for(cr+=3*pr,lr-=3*pr,Sr=0;Sr<pr;++Sr){var kr=Dn[_i+0]|Dn[_i+1]<<8|Dn[_i+2]<<16;kr>lr&&(kr=lr),nr(bn.Jc[+Sr],Dn,cr,kr),cr+=kr,lr-=kr,_i+=3}nr(bn.Jc[+pr],Dn,cr,lr),Dn=cr<Wn?0:5}if(Dn!=0)return Us(bn,Dn,"cannot parse partitions");for(Dn=Zn(cr=bn.m,7),_i=Un(cr)?ir(cr,4):0,Wn=Un(cr)?ir(cr,4):0,lr=Un(cr)?ir(cr,4):0,pr=Un(cr)?ir(cr,4):0,cr=Un(cr)?ir(cr,4):0,Sr=bn.Qa,kr=0;4>kr;++kr){if(Sr.Cb){var Lr=Sr.Zb[kr];Sr.Fb||(Lr+=Dn)}else{if(0<kr){bn.pb[kr]=bn.pb[0];continue}Lr=Dn}var Tr=bn.pb[kr];Tr.Sc[0]=a1[io(Lr+_i,127)],Tr.Sc[1]=o1[io(Lr+0,127)],Tr.Eb[0]=2*a1[io(Lr+Wn,127)],Tr.Eb[1]=101581*o1[io(Lr+lr,127)]>>16,8>Tr.Eb[1]&&(Tr.Eb[1]=8),Tr.Qc[0]=a1[io(Lr+pr,117)],Tr.Qc[1]=o1[io(Lr+cr,127)],Tr.lc=Lr+cr}if(!sr.Rb)return Us(bn,4,"Not a key frame.");for(Un(rr),sr=bn.Pa,Dn=0;4>Dn;++Dn){for(_i=0;8>_i;++_i)for(Wn=0;3>Wn;++Wn)for(lr=0;11>lr;++lr)pr=Gn(rr,G0[Dn][_i][Wn][lr])?Zn(rr,8):V0[Dn][_i][Wn][lr],sr.Wc[Dn][_i].Yb[Wn][lr]=pr;for(_i=0;17>_i;++_i)sr.Xc[Dn][_i]=sr.Wc[Dn][Y0[_i]]}return bn.kc=Un(rr),bn.kc&&(bn.Bd=Zn(rr,8)),bn.cb=1}function Hu(bn,Cn,Dn,Wn,_i,rr,sr){var lr=Cn[_i].Yb[Dn];for(Dn=0;16>_i;++_i){if(!Gn(bn,lr[Dn+0]))return _i;for(;!Gn(bn,lr[Dn+1]);)if(lr=Cn[++_i].Yb[0],Dn=0,_i==16)return 16;var cr=Cn[_i+1].Yb;if(Gn(bn,lr[Dn+2])){var pr=bn,Sr=0;if(Gn(pr,(Lr=lr)[(kr=Dn)+3]))if(Gn(pr,Lr[kr+6])){for(lr=0,kr=2*(Sr=Gn(pr,Lr[kr+8]))+(Lr=Gn(pr,Lr[kr+9+Sr])),Sr=0,Lr=H0[kr];Lr[lr];++lr)Sr+=Sr+Gn(pr,Lr[lr]);Sr+=3+(8<<kr)}else Gn(pr,Lr[kr+7])?(Sr=7+2*Gn(pr,165),Sr+=Gn(pr,145)):Sr=5+Gn(pr,159);else Sr=Gn(pr,Lr[kr+4])?3+Gn(pr,Lr[kr+5]):2;lr=cr[2]}else Sr=1,lr=cr[1];cr=sr+q0[_i],0>(pr=bn).b&&Fn(pr);var kr,Lr=pr.b,Tr=(kr=pr.Ca>>1)-(pr.I>>Lr)>>31;--pr.b,pr.Ca+=Tr,pr.Ca|=1,pr.I-=(kr+1&Tr)<<Lr,rr[cr]=((Sr^Tr)-Tr)*Wn[(0<_i)+0]}return 16}function cu(bn){var Cn=bn.rb[bn.sb-1];Cn.la=0,Cn.Na=0,un(bn.zc,0,0,bn.zc.length),bn.ja=0}function Dp(bn,Cn){if(bn==null)return 0;if(Cn==null)return Us(bn,2,"NULL VP8Io parameter in VP8Decode().");if(!bn.cb&&!Wu(bn,Cn))return 0;if(e(bn.cb),Cn.ac==null||Cn.ac(Cn)){Cn.ob&&(bn.L=0);var Dn=fp[bn.L];if(bn.L==2?(bn.yb=0,bn.zb=0):(bn.yb=Cn.v-Dn>>4,bn.zb=Cn.j-Dn>>4,0>bn.yb&&(bn.yb=0),0>bn.zb&&(bn.zb=0)),bn.Va=Cn.o+15+Dn>>4,bn.Hb=Cn.va+15+Dn>>4,bn.Hb>bn.za&&(bn.Hb=bn.za),bn.Va>bn.Ub&&(bn.Va=bn.Ub),0<bn.L){var Wn=bn.ed;for(Dn=0;4>Dn;++Dn){var _i;if(bn.Qa.Cb){var rr=bn.Qa.Lb[Dn];bn.Qa.Fb||(rr+=Wn.Tb)}else rr=Wn.Tb;for(_i=0;1>=_i;++_i){var sr=bn.gd[Dn][_i],lr=rr;if(Wn.Pc&&(lr+=Wn.vd[0],_i&&(lr+=Wn.od[0])),0<(lr=0>lr?0:63<lr?63:lr)){var cr=lr;0<Wn.wb&&(cr=4<Wn.wb?cr>>2:cr>>1)>9-Wn.wb&&(cr=9-Wn.wb),1>cr&&(cr=1),sr.dd=cr,sr.tc=2*lr+cr,sr.ld=40<=lr?2:15<=lr?1:0}else sr.tc=0;sr.La=_i}}}Dn=0}else Us(bn,6,"Frame setup failed"),Dn=bn.a;if(Dn=Dn==0){if(Dn){bn.$c=0,0<bn.Aa||(bn.Ic=om);t:{Dn=bn.Ic,Wn=4*(cr=bn.za);var pr=32*cr,Sr=cr+1,kr=0<bn.L?cr*(0<bn.Aa?2:1):0,Lr=(bn.Aa==2?2:1)*cr;if((sr=Wn+832+(_i=3*(16*Dn+fp[bn.L])/2*pr)+(rr=bn.Fa!=null&&0<bn.Fa.length?bn.Kc.c*bn.Kc.i:0))!=sr)Dn=0;else{if(sr>bn.Vb){if(bn.Vb=0,bn.Ec=gn(sr),bn.Fc=0,bn.Ec==null){Dn=Us(bn,1,"no memory during frame initialization.");break t}bn.Vb=sr}sr=bn.Ec,lr=bn.Fc,bn.Ac=sr,bn.Bc=lr,lr+=Wn,bn.Gd=vn(pr,Uu),bn.Hd=0,bn.rb=vn(Sr+1,$u),bn.sb=1,bn.wa=kr?vn(kr,Rl):null,bn.Y=0,bn.D.Nb=0,bn.D.wa=bn.wa,bn.D.Y=bn.Y,0<bn.Aa&&(bn.D.Y+=cr),e(!0),bn.oc=sr,bn.pc=lr,lr+=832,bn.ya=vn(Lr,lu),bn.aa=0,bn.D.ya=bn.ya,bn.D.aa=bn.aa,bn.Aa==2&&(bn.D.aa+=cr),bn.R=16*cr,bn.B=8*cr,cr=(pr=fp[bn.L])*bn.R,pr=pr/2*bn.B,bn.sa=sr,bn.ta=lr+cr,bn.qa=bn.sa,bn.ra=bn.ta+16*Dn*bn.R+pr,bn.Ha=bn.qa,bn.Ia=bn.ra+8*Dn*bn.B+pr,bn.$c=0,lr+=_i,bn.mb=rr?sr:null,bn.nb=rr?lr:null,e(lr+rr<=bn.Fc+bn.Vb),cu(bn),un(bn.Ac,bn.Bc,0,Wn),Dn=1}}if(Dn){if(Cn.ka=0,Cn.y=bn.sa,Cn.O=bn.ta,Cn.f=bn.qa,Cn.N=bn.ra,Cn.ea=bn.Ha,Cn.Vd=bn.Ia,Cn.fa=bn.R,Cn.Rc=bn.B,Cn.F=null,Cn.J=0,!z1){for(Dn=-255;255>=Dn;++Dn)j1[255+Dn]=0>Dn?-Dn:Dn;for(Dn=-1020;1020>=Dn;++Dn)B1[1020+Dn]=-128>Dn?-128:127<Dn?127:Dn;for(Dn=-112;112>=Dn;++Dn)$1[112+Dn]=-16>Dn?-16:15<Dn?15:Dn;for(Dn=-255;510>=Dn;++Dn)U1[255+Dn]=0>Dn?0:255<Dn?255:Dn;z1=1}xo=Ip,_c=Mp,Xo=Vu,wo=Rp,Mo=Xu,ku=qu,Pl=gu,tu=Tl,Ll=Kp,Go=mu,Lu=Yp,uo=Hl,Ro=vu,Ds=_d,Ms=_f,zs=Fo,Xs=zo,Io=Gp,So[0]=Eo,So[1]=jp,So[2]=zp,So[3]=Wp,So[4]=Ku,So[5]=zl,So[6]=Ju,So[7]=fu,So[8]=qp,So[9]=Hp,Ko[0]=Gu,Ko[1]=$p,Ko[2]=Oo,Ko[3]=$l,Ko[4]=na,Ko[5]=Up,Ko[6]=Yu,jo[0]=Uo,jo[1]=Bp,jo[2]=Vp,jo[3]=du,jo[4]=Al,jo[5]=Xp,jo[6]=pu,Dn=1}else Dn=0}Dn&&(Dn=function(Tr,$r){for(Tr.M=0;Tr.M<Tr.Va;++Tr.M){var Fr,Cr=Tr.Jc[Tr.M&Tr.Xb],Ar=Tr.m,jr=Tr;for(Fr=0;Fr<jr.za;++Fr){var Hr=Ar,Br=jr,ss=Br.Ac,Qr=Br.Bc+4*Fr,cs=Br.zc,Zr=Br.ya[Br.aa+Fr];if(Br.Qa.Bb?Zr.$b=Gn(Hr,Br.Pa.jb[0])?2+Gn(Hr,Br.Pa.jb[2]):Gn(Hr,Br.Pa.jb[1]):Zr.$b=0,Br.kc&&(Zr.Ad=Gn(Hr,Br.Bd)),Zr.Za=!Gn(Hr,145)+0,Zr.Za){var Cs=Zr.Ob,Es=0;for(Br=0;4>Br;++Br){var xs,vs=cs[0+Br];for(xs=0;4>xs;++xs){vs=X0[ss[Qr+xs]][vs];for(var Ns=V1[Gn(Hr,vs[0])];0<Ns;)Ns=V1[2*Ns+Gn(Hr,vs[Ns])];vs=-Ns,ss[Qr+xs]=vs}tn(Cs,Es,ss,Qr,4),Es+=4,cs[0+Br]=vs}}else vs=Gn(Hr,156)?Gn(Hr,128)?1:3:Gn(Hr,163)?2:0,Zr.Ob[0]=vs,un(ss,Qr,vs,4),un(cs,0,vs,4);Zr.Dd=Gn(Hr,142)?Gn(Hr,114)?Gn(Hr,183)?1:3:2:0}if(jr.m.Ka)return Us(Tr,7,"Premature end-of-partition0 encountered.");for(;Tr.ja<Tr.za;++Tr.ja){if(jr=Cr,Hr=(Ar=Tr).rb[Ar.sb-1],ss=Ar.rb[Ar.sb+Ar.ja],Fr=Ar.ya[Ar.aa+Ar.ja],Qr=Ar.kc?Fr.Ad:0)Hr.la=ss.la=0,Fr.Za||(Hr.Na=ss.Na=0),Fr.Hc=0,Fr.Gc=0,Fr.ia=0;else{var Os,ds;if(Hr=ss,ss=jr,Qr=Ar.Pa.Xc,cs=Ar.ya[Ar.aa+Ar.ja],Zr=Ar.pb[cs.$b],Br=cs.ad,Cs=0,Es=Ar.rb[Ar.sb-1],vs=xs=0,un(Br,Cs,0,384),cs.Za)var qs=0,eo=Qr[3];else{Ns=gn(16);var Vs=Hr.Na+Es.Na;if(Vs=Ou(ss,Qr[1],Vs,Zr.Eb,0,Ns,0),Hr.Na=Es.Na=(0<Vs)+0,1<Vs)xo(Ns,0,Br,Cs);else{var no=Ns[0]+3>>3;for(Ns=0;256>Ns;Ns+=16)Br[Cs+Ns]=no}qs=1,eo=Qr[0]}var Ps=15&Hr.la,so=15&Es.la;for(Ns=0;4>Ns;++Ns){var ao=1&so;for(no=ds=0;4>no;++no)Ps=Ps>>1|(ao=(Vs=Ou(ss,eo,Vs=ao+(1&Ps),Zr.Sc,qs,Br,Cs))>qs)<<7,ds=ds<<2|(3<Vs?3:1<Vs?2:Br[Cs+0]!=0),Cs+=16;Ps>>=4,so=so>>1|ao<<7,xs=(xs<<8|ds)>>>0}for(eo=Ps,qs=so>>4,Os=0;4>Os;Os+=2){for(ds=0,Ps=Hr.la>>4+Os,so=Es.la>>4+Os,Ns=0;2>Ns;++Ns){for(ao=1&so,no=0;2>no;++no)Vs=ao+(1&Ps),Ps=Ps>>1|(ao=0<(Vs=Ou(ss,Qr[2],Vs,Zr.Qc,0,Br,Cs)))<<3,ds=ds<<2|(3<Vs?3:1<Vs?2:Br[Cs+0]!=0),Cs+=16;Ps>>=2,so=so>>1|ao<<5}vs|=ds<<4*Os,eo|=Ps<<4<<Os,qs|=(240&so)<<Os}Hr.la=eo,Es.la=qs,cs.Hc=xs,cs.Gc=vs,cs.ia=43690&vs?0:Zr.ia,Qr=!(xs|vs)}if(0<Ar.L&&(Ar.wa[Ar.Y+Ar.ja]=Ar.gd[Fr.$b][Fr.Za],Ar.wa[Ar.Y+Ar.ja].La|=!Qr),jr.Ka)return Us(Tr,7,"Premature end-of-file encountered.")}if(cu(Tr),Ar=$r,jr=1,Fr=(Cr=Tr).D,Hr=0<Cr.L&&Cr.M>=Cr.zb&&Cr.M<=Cr.Va,Cr.Aa==0)t:{if(Fr.M=Cr.M,Fr.uc=Hr,Su(Cr,Fr),jr=1,Fr=(ds=Cr.D).Nb,Hr=(vs=fp[Cr.L])*Cr.R,ss=vs/2*Cr.B,Ns=16*Fr*Cr.R,no=8*Fr*Cr.B,Qr=Cr.sa,cs=Cr.ta-Hr+Ns,Zr=Cr.qa,Br=Cr.ra-ss+no,Cs=Cr.Ha,Es=Cr.Ia-ss+no,so=(Ps=ds.M)==0,xs=Ps>=Cr.Va-1,Cr.Aa==2&&Su(Cr,ds),ds.uc)for(ao=(Vs=Cr).D.M,e(Vs.D.uc),ds=Vs.yb;ds<Vs.Hb;++ds){qs=ds,eo=ao;var Ks=(Zs=($s=Vs).D).Nb;Os=$s.R;var Zs=Zs.wa[Zs.Y+qs],ba=$s.sa,po=$s.ta+16*Ks*Os+16*qs,ko=Zs.dd,Js=Zs.tc;if(Js!=0)if(e(3<=Js),$s.L==1)0<qs&&zs(ba,po,Os,Js+4),Zs.La&&Io(ba,po,Os,Js),0<eo&&Ms(ba,po,Os,Js+4),Zs.La&&Xs(ba,po,Os,Js);else{var Bo=$s.B,Ol=$s.qa,nu=$s.ra+8*Ks*Bo+8*qs,Qo=$s.Ha,$s=$s.Ia+8*Ks*Bo+8*qs;Ks=Zs.ld,0<qs&&(tu(ba,po,Os,Js+4,ko,Ks),Go(Ol,nu,Qo,$s,Bo,Js+4,ko,Ks)),Zs.La&&(uo(ba,po,Os,Js,ko,Ks),Ds(Ol,nu,Qo,$s,Bo,Js,ko,Ks)),0<eo&&(Pl(ba,po,Os,Js+4,ko,Ks),Ll(Ol,nu,Qo,$s,Bo,Js+4,ko,Ks)),Zs.La&&(Lu(ba,po,Os,Js,ko,Ks),Ro(Ol,nu,Qo,$s,Bo,Js,ko,Ks))}}if(Cr.ia&&alert("todo:DitherRow"),Ar.put!=null){if(ds=16*Ps,Ps=16*(Ps+1),so?(Ar.y=Cr.sa,Ar.O=Cr.ta+Ns,Ar.f=Cr.qa,Ar.N=Cr.ra+no,Ar.ea=Cr.Ha,Ar.W=Cr.Ia+no):(ds-=vs,Ar.y=Qr,Ar.O=cs,Ar.f=Zr,Ar.N=Br,Ar.ea=Cs,Ar.W=Es),xs||(Ps-=vs),Ps>Ar.o&&(Ps=Ar.o),Ar.F=null,Ar.J=null,Cr.Fa!=null&&0<Cr.Fa.length&&ds<Ps&&(Ar.J=xu(Cr,Ar,ds,Ps-ds),Ar.F=Cr.mb,Ar.F==null&&Ar.F.length==0)){jr=Us(Cr,3,"Could not decode alpha data.");break t}ds<Ar.j&&(vs=Ar.j-ds,ds=Ar.j,e(!(1&vs)),Ar.O+=Cr.R*vs,Ar.N+=Cr.B*(vs>>1),Ar.W+=Cr.B*(vs>>1),Ar.F!=null&&(Ar.J+=Ar.width*vs)),ds<Ps&&(Ar.O+=Ar.v,Ar.N+=Ar.v>>1,Ar.W+=Ar.v>>1,Ar.F!=null&&(Ar.J+=Ar.v),Ar.ka=ds-Ar.j,Ar.U=Ar.va-Ar.v,Ar.T=Ps-ds,jr=Ar.put(Ar))}Fr+1!=Cr.Ic||xs||(tn(Cr.sa,Cr.ta-Hr,Qr,cs+16*Cr.R,Hr),tn(Cr.qa,Cr.ra-ss,Zr,Br+8*Cr.B,ss),tn(Cr.Ha,Cr.Ia-ss,Cs,Es+8*Cr.B,ss))}if(!jr)return Us(Tr,6,"Output aborted.")}return 1}(bn,Cn)),Cn.bc!=null&&Cn.bc(Cn),Dn&=1}return Dn?(bn.cb=0,Dn):0}function mo(bn,Cn,Dn,Wn,_i){_i=bn[Cn+Dn+32*Wn]+(_i>>3),bn[Cn+Dn+32*Wn]=-256&_i?0>_i?0:255:_i}function Bl(bn,Cn,Dn,Wn,_i,rr){mo(bn,Cn,0,Dn,Wn+_i),mo(bn,Cn,1,Dn,Wn+rr),mo(bn,Cn,2,Dn,Wn-rr),mo(bn,Cn,3,Dn,Wn-_i)}function xa(bn){return(20091*bn>>16)+bn}function uu(bn,Cn,Dn,Wn){var _i,rr=0,sr=gn(16);for(_i=0;4>_i;++_i){var lr=bn[Cn+0]+bn[Cn+8],cr=bn[Cn+0]-bn[Cn+8],pr=(35468*bn[Cn+4]>>16)-xa(bn[Cn+12]),Sr=xa(bn[Cn+4])+(35468*bn[Cn+12]>>16);sr[rr+0]=lr+Sr,sr[rr+1]=cr+pr,sr[rr+2]=cr-pr,sr[rr+3]=lr-Sr,rr+=4,Cn++}for(_i=rr=0;4>_i;++_i)lr=(bn=sr[rr+0]+4)+sr[rr+8],cr=bn-sr[rr+8],pr=(35468*sr[rr+4]>>16)-xa(sr[rr+12]),mo(Dn,Wn,0,0,lr+(Sr=xa(sr[rr+4])+(35468*sr[rr+12]>>16))),mo(Dn,Wn,1,0,cr+pr),mo(Dn,Wn,2,0,cr-pr),mo(Dn,Wn,3,0,lr-Sr),rr++,Wn+=32}function qu(bn,Cn,Dn,Wn){var _i=bn[Cn+0]+4,rr=35468*bn[Cn+4]>>16,sr=xa(bn[Cn+4]),lr=35468*bn[Cn+1]>>16;Bl(Dn,Wn,0,_i+sr,bn=xa(bn[Cn+1]),lr),Bl(Dn,Wn,1,_i+rr,bn,lr),Bl(Dn,Wn,2,_i-rr,bn,lr),Bl(Dn,Wn,3,_i-sr,bn,lr)}function Mp(bn,Cn,Dn,Wn,_i){uu(bn,Cn,Dn,Wn),_i&&uu(bn,Cn+16,Dn,Wn+4)}function Vu(bn,Cn,Dn,Wn){_c(bn,Cn+0,Dn,Wn,1),_c(bn,Cn+32,Dn,Wn+128,1)}function Rp(bn,Cn,Dn,Wn){var _i;for(bn=bn[Cn+0]+4,_i=0;4>_i;++_i)for(Cn=0;4>Cn;++Cn)mo(Dn,Wn,Cn,_i,bn)}function Xu(bn,Cn,Dn,Wn){bn[Cn+0]&&wo(bn,Cn+0,Dn,Wn),bn[Cn+16]&&wo(bn,Cn+16,Dn,Wn+4),bn[Cn+32]&&wo(bn,Cn+32,Dn,Wn+128),bn[Cn+48]&&wo(bn,Cn+48,Dn,Wn+128+4)}function Ip(bn,Cn,Dn,Wn){var _i,rr=gn(16);for(_i=0;4>_i;++_i){var sr=bn[Cn+0+_i]+bn[Cn+12+_i],lr=bn[Cn+4+_i]+bn[Cn+8+_i],cr=bn[Cn+4+_i]-bn[Cn+8+_i],pr=bn[Cn+0+_i]-bn[Cn+12+_i];rr[0+_i]=sr+lr,rr[8+_i]=sr-lr,rr[4+_i]=pr+cr,rr[12+_i]=pr-cr}for(_i=0;4>_i;++_i)sr=(bn=rr[0+4*_i]+3)+rr[3+4*_i],lr=rr[1+4*_i]+rr[2+4*_i],cr=rr[1+4*_i]-rr[2+4*_i],pr=bn-rr[3+4*_i],Dn[Wn+0]=sr+lr>>3,Dn[Wn+16]=pr+cr>>3,Dn[Wn+32]=sr-lr>>3,Dn[Wn+48]=pr-cr>>3,Wn+=64}function hu(bn,Cn,Dn){var Wn,_i=Cn-32,rr=ro,sr=255-bn[_i-1];for(Wn=0;Wn<Dn;++Wn){var lr,cr=rr,pr=sr+bn[Cn-1];for(lr=0;lr<Dn;++lr)bn[Cn+lr]=cr[pr+bn[_i+lr]];Cn+=32}}function jp(bn,Cn){hu(bn,Cn,4)}function Bp(bn,Cn){hu(bn,Cn,8)}function $p(bn,Cn){hu(bn,Cn,16)}function Oo(bn,Cn){var Dn;for(Dn=0;16>Dn;++Dn)tn(bn,Cn+32*Dn,bn,Cn-32,16)}function $l(bn,Cn){var Dn;for(Dn=16;0<Dn;--Dn)un(bn,Cn,bn[Cn-1],16),Cn+=32}function Ul(bn,Cn,Dn){var Wn;for(Wn=0;16>Wn;++Wn)un(Cn,Dn+32*Wn,bn,16)}function Gu(bn,Cn){var Dn,Wn=16;for(Dn=0;16>Dn;++Dn)Wn+=bn[Cn-1+32*Dn]+bn[Cn+Dn-32];Ul(Wn>>5,bn,Cn)}function na(bn,Cn){var Dn,Wn=8;for(Dn=0;16>Dn;++Dn)Wn+=bn[Cn-1+32*Dn];Ul(Wn>>4,bn,Cn)}function Up(bn,Cn){var Dn,Wn=8;for(Dn=0;16>Dn;++Dn)Wn+=bn[Cn+Dn-32];Ul(Wn>>4,bn,Cn)}function Yu(bn,Cn){Ul(128,bn,Cn)}function hs(bn,Cn,Dn){return bn+2*Cn+Dn+2>>2}function zp(bn,Cn){var Dn,Wn=Cn-32;for(Wn=new Uint8Array([hs(bn[Wn-1],bn[Wn+0],bn[Wn+1]),hs(bn[Wn+0],bn[Wn+1],bn[Wn+2]),hs(bn[Wn+1],bn[Wn+2],bn[Wn+3]),hs(bn[Wn+2],bn[Wn+3],bn[Wn+4])]),Dn=0;4>Dn;++Dn)tn(bn,Cn+32*Dn,Wn,0,Wn.length)}function Wp(bn,Cn){var Dn=bn[Cn-1],Wn=bn[Cn-1+32],_i=bn[Cn-1+64],rr=bn[Cn-1+96];er(bn,Cn+0,16843009*hs(bn[Cn-1-32],Dn,Wn)),er(bn,Cn+32,16843009*hs(Dn,Wn,_i)),er(bn,Cn+64,16843009*hs(Wn,_i,rr)),er(bn,Cn+96,16843009*hs(_i,rr,rr))}function Eo(bn,Cn){var Dn,Wn=4;for(Dn=0;4>Dn;++Dn)Wn+=bn[Cn+Dn-32]+bn[Cn-1+32*Dn];for(Wn>>=3,Dn=0;4>Dn;++Dn)un(bn,Cn+32*Dn,Wn,4)}function Ku(bn,Cn){var Dn=bn[Cn-1+0],Wn=bn[Cn-1+32],_i=bn[Cn-1+64],rr=bn[Cn-1-32],sr=bn[Cn+0-32],lr=bn[Cn+1-32],cr=bn[Cn+2-32],pr=bn[Cn+3-32];bn[Cn+0+96]=hs(Wn,_i,bn[Cn-1+96]),bn[Cn+1+96]=bn[Cn+0+64]=hs(Dn,Wn,_i),bn[Cn+2+96]=bn[Cn+1+64]=bn[Cn+0+32]=hs(rr,Dn,Wn),bn[Cn+3+96]=bn[Cn+2+64]=bn[Cn+1+32]=bn[Cn+0+0]=hs(sr,rr,Dn),bn[Cn+3+64]=bn[Cn+2+32]=bn[Cn+1+0]=hs(lr,sr,rr),bn[Cn+3+32]=bn[Cn+2+0]=hs(cr,lr,sr),bn[Cn+3+0]=hs(pr,cr,lr)}function Ju(bn,Cn){var Dn=bn[Cn+1-32],Wn=bn[Cn+2-32],_i=bn[Cn+3-32],rr=bn[Cn+4-32],sr=bn[Cn+5-32],lr=bn[Cn+6-32],cr=bn[Cn+7-32];bn[Cn+0+0]=hs(bn[Cn+0-32],Dn,Wn),bn[Cn+1+0]=bn[Cn+0+32]=hs(Dn,Wn,_i),bn[Cn+2+0]=bn[Cn+1+32]=bn[Cn+0+64]=hs(Wn,_i,rr),bn[Cn+3+0]=bn[Cn+2+32]=bn[Cn+1+64]=bn[Cn+0+96]=hs(_i,rr,sr),bn[Cn+3+32]=bn[Cn+2+64]=bn[Cn+1+96]=hs(rr,sr,lr),bn[Cn+3+64]=bn[Cn+2+96]=hs(sr,lr,cr),bn[Cn+3+96]=hs(lr,cr,cr)}function zl(bn,Cn){var Dn=bn[Cn-1+0],Wn=bn[Cn-1+32],_i=bn[Cn-1+64],rr=bn[Cn-1-32],sr=bn[Cn+0-32],lr=bn[Cn+1-32],cr=bn[Cn+2-32],pr=bn[Cn+3-32];bn[Cn+0+0]=bn[Cn+1+64]=rr+sr+1>>1,bn[Cn+1+0]=bn[Cn+2+64]=sr+lr+1>>1,bn[Cn+2+0]=bn[Cn+3+64]=lr+cr+1>>1,bn[Cn+3+0]=cr+pr+1>>1,bn[Cn+0+96]=hs(_i,Wn,Dn),bn[Cn+0+64]=hs(Wn,Dn,rr),bn[Cn+0+32]=bn[Cn+1+96]=hs(Dn,rr,sr),bn[Cn+1+32]=bn[Cn+2+96]=hs(rr,sr,lr),bn[Cn+2+32]=bn[Cn+3+96]=hs(sr,lr,cr),bn[Cn+3+32]=hs(lr,cr,pr)}function fu(bn,Cn){var Dn=bn[Cn+0-32],Wn=bn[Cn+1-32],_i=bn[Cn+2-32],rr=bn[Cn+3-32],sr=bn[Cn+4-32],lr=bn[Cn+5-32],cr=bn[Cn+6-32],pr=bn[Cn+7-32];bn[Cn+0+0]=Dn+Wn+1>>1,bn[Cn+1+0]=bn[Cn+0+64]=Wn+_i+1>>1,bn[Cn+2+0]=bn[Cn+1+64]=_i+rr+1>>1,bn[Cn+3+0]=bn[Cn+2+64]=rr+sr+1>>1,bn[Cn+0+32]=hs(Dn,Wn,_i),bn[Cn+1+32]=bn[Cn+0+96]=hs(Wn,_i,rr),bn[Cn+2+32]=bn[Cn+1+96]=hs(_i,rr,sr),bn[Cn+3+32]=bn[Cn+2+96]=hs(rr,sr,lr),bn[Cn+3+64]=hs(sr,lr,cr),bn[Cn+3+96]=hs(lr,cr,pr)}function Hp(bn,Cn){var Dn=bn[Cn-1+0],Wn=bn[Cn-1+32],_i=bn[Cn-1+64],rr=bn[Cn-1+96];bn[Cn+0+0]=Dn+Wn+1>>1,bn[Cn+2+0]=bn[Cn+0+32]=Wn+_i+1>>1,bn[Cn+2+32]=bn[Cn+0+64]=_i+rr+1>>1,bn[Cn+1+0]=hs(Dn,Wn,_i),bn[Cn+3+0]=bn[Cn+1+32]=hs(Wn,_i,rr),bn[Cn+3+32]=bn[Cn+1+64]=hs(_i,rr,rr),bn[Cn+3+64]=bn[Cn+2+64]=bn[Cn+0+96]=bn[Cn+1+96]=bn[Cn+2+96]=bn[Cn+3+96]=rr}function qp(bn,Cn){var Dn=bn[Cn-1+0],Wn=bn[Cn-1+32],_i=bn[Cn-1+64],rr=bn[Cn-1+96],sr=bn[Cn-1-32],lr=bn[Cn+0-32],cr=bn[Cn+1-32],pr=bn[Cn+2-32];bn[Cn+0+0]=bn[Cn+2+32]=Dn+sr+1>>1,bn[Cn+0+32]=bn[Cn+2+64]=Wn+Dn+1>>1,bn[Cn+0+64]=bn[Cn+2+96]=_i+Wn+1>>1,bn[Cn+0+96]=rr+_i+1>>1,bn[Cn+3+0]=hs(lr,cr,pr),bn[Cn+2+0]=hs(sr,lr,cr),bn[Cn+1+0]=bn[Cn+3+32]=hs(Dn,sr,lr),bn[Cn+1+32]=bn[Cn+3+64]=hs(Wn,Dn,sr),bn[Cn+1+64]=bn[Cn+3+96]=hs(_i,Wn,Dn),bn[Cn+1+96]=hs(rr,_i,Wn)}function Vp(bn,Cn){var Dn;for(Dn=0;8>Dn;++Dn)tn(bn,Cn+32*Dn,bn,Cn-32,8)}function du(bn,Cn){var Dn;for(Dn=0;8>Dn;++Dn)un(bn,Cn,bn[Cn-1],8),Cn+=32}function Cl(bn,Cn,Dn){var Wn;for(Wn=0;8>Wn;++Wn)un(Cn,Dn+32*Wn,bn,8)}function Uo(bn,Cn){var Dn,Wn=8;for(Dn=0;8>Dn;++Dn)Wn+=bn[Cn+Dn-32]+bn[Cn-1+32*Dn];Cl(Wn>>4,bn,Cn)}function Xp(bn,Cn){var Dn,Wn=4;for(Dn=0;8>Dn;++Dn)Wn+=bn[Cn+Dn-32];Cl(Wn>>3,bn,Cn)}function Al(bn,Cn){var Dn,Wn=4;for(Dn=0;8>Dn;++Dn)Wn+=bn[Cn-1+32*Dn];Cl(Wn>>3,bn,Cn)}function pu(bn,Cn){Cl(128,bn,Cn)}function Wl(bn,Cn,Dn){var Wn=bn[Cn-Dn],_i=bn[Cn+0],rr=3*(_i-Wn)+e1[1020+bn[Cn-2*Dn]-bn[Cn+Dn]],sr=rp[112+(rr+4>>3)];bn[Cn-Dn]=ro[255+Wn+rp[112+(rr+3>>3)]],bn[Cn+0]=ro[255+_i-sr]}function Qu(bn,Cn,Dn,Wn){var _i=bn[Cn+0],rr=bn[Cn+Dn];return ho[255+bn[Cn-2*Dn]-bn[Cn-Dn]]>Wn||ho[255+rr-_i]>Wn}function Zu(bn,Cn,Dn,Wn){return 4*ho[255+bn[Cn-Dn]-bn[Cn+0]]+ho[255+bn[Cn-2*Dn]-bn[Cn+Dn]]<=Wn}function _h(bn,Cn,Dn,Wn,_i){var rr=bn[Cn-3*Dn],sr=bn[Cn-2*Dn],lr=bn[Cn-Dn],cr=bn[Cn+0],pr=bn[Cn+Dn],Sr=bn[Cn+2*Dn],kr=bn[Cn+3*Dn];return 4*ho[255+lr-cr]+ho[255+sr-pr]>Wn?0:ho[255+bn[Cn-4*Dn]-rr]<=_i&&ho[255+rr-sr]<=_i&&ho[255+sr-lr]<=_i&&ho[255+kr-Sr]<=_i&&ho[255+Sr-pr]<=_i&&ho[255+pr-cr]<=_i}function _f(bn,Cn,Dn,Wn){var _i=2*Wn+1;for(Wn=0;16>Wn;++Wn)Zu(bn,Cn+Wn,Dn,_i)&&Wl(bn,Cn+Wn,Dn)}function Fo(bn,Cn,Dn,Wn){var _i=2*Wn+1;for(Wn=0;16>Wn;++Wn)Zu(bn,Cn+Wn*Dn,1,_i)&&Wl(bn,Cn+Wn*Dn,1)}function zo(bn,Cn,Dn,Wn){var _i;for(_i=3;0<_i;--_i)_f(bn,Cn+=4*Dn,Dn,Wn)}function Gp(bn,Cn,Dn,Wn){var _i;for(_i=3;0<_i;--_i)Fo(bn,Cn+=4,Dn,Wn)}function Wo(bn,Cn,Dn,Wn,_i,rr,sr,lr){for(rr=2*rr+1;0<_i--;){if(_h(bn,Cn,Dn,rr,sr))if(Qu(bn,Cn,Dn,lr))Wl(bn,Cn,Dn);else{var cr=bn,pr=Cn,Sr=Dn,kr=cr[pr-2*Sr],Lr=cr[pr-Sr],Tr=cr[pr+0],$r=cr[pr+Sr],Fr=cr[pr+2*Sr],Cr=27*(jr=e1[1020+3*(Tr-Lr)+e1[1020+kr-$r]])+63>>7,Ar=18*jr+63>>7,jr=9*jr+63>>7;cr[pr-3*Sr]=ro[255+cr[pr-3*Sr]+jr],cr[pr-2*Sr]=ro[255+kr+Ar],cr[pr-Sr]=ro[255+Lr+Cr],cr[pr+0]=ro[255+Tr-Cr],cr[pr+Sr]=ro[255+$r-Ar],cr[pr+2*Sr]=ro[255+Fr-jr]}Cn+=Wn}}function vo(bn,Cn,Dn,Wn,_i,rr,sr,lr){for(rr=2*rr+1;0<_i--;){if(_h(bn,Cn,Dn,rr,sr))if(Qu(bn,Cn,Dn,lr))Wl(bn,Cn,Dn);else{var cr=bn,pr=Cn,Sr=Dn,kr=cr[pr-Sr],Lr=cr[pr+0],Tr=cr[pr+Sr],$r=rp[112+((Fr=3*(Lr-kr))+4>>3)],Fr=rp[112+(Fr+3>>3)],Cr=$r+1>>1;cr[pr-2*Sr]=ro[255+cr[pr-2*Sr]+Cr],cr[pr-Sr]=ro[255+kr+Fr],cr[pr+0]=ro[255+Lr-$r],cr[pr+Sr]=ro[255+Tr-Cr]}Cn+=Wn}}function gu(bn,Cn,Dn,Wn,_i,rr){Wo(bn,Cn,Dn,1,16,Wn,_i,rr)}function Tl(bn,Cn,Dn,Wn,_i,rr){Wo(bn,Cn,1,Dn,16,Wn,_i,rr)}function Yp(bn,Cn,Dn,Wn,_i,rr){var sr;for(sr=3;0<sr;--sr)vo(bn,Cn+=4*Dn,Dn,1,16,Wn,_i,rr)}function Hl(bn,Cn,Dn,Wn,_i,rr){var sr;for(sr=3;0<sr;--sr)vo(bn,Cn+=4,1,Dn,16,Wn,_i,rr)}function Kp(bn,Cn,Dn,Wn,_i,rr,sr,lr){Wo(bn,Cn,_i,1,8,rr,sr,lr),Wo(Dn,Wn,_i,1,8,rr,sr,lr)}function mu(bn,Cn,Dn,Wn,_i,rr,sr,lr){Wo(bn,Cn,1,_i,8,rr,sr,lr),Wo(Dn,Wn,1,_i,8,rr,sr,lr)}function vu(bn,Cn,Dn,Wn,_i,rr,sr,lr){vo(bn,Cn+4*_i,_i,1,8,rr,sr,lr),vo(Dn,Wn+4*_i,_i,1,8,rr,sr,lr)}function _d(bn,Cn,Dn,Wn,_i,rr,sr,lr){vo(bn,Cn+4,1,_i,8,rr,sr,lr),vo(Dn,Wn+4,1,_i,8,rr,sr,lr)}function Vl(){this.ba=new qr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Jr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function yu(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function bu(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function tp(){this.ua=0,this.Wa=new jn,this.vb=new jn,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Kn,this.yc=new Hn}function Jp(){this.xb=this.a=0,this.l=new Il,this.ca=new qr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Tn,this.Pb=0,this.wd=new Tn,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new tp,this.ab=0,this.gc=vn(4,bu),this.Oc=0}function Xl(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Il,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function El(bn,Cn,Dn,Wn,_i,rr,sr){for(bn=bn==null?0:bn[Cn+0],Cn=0;Cn<sr;++Cn)_i[rr+Cn]=bn+Dn[Wn+Cn]&255,bn=_i[rr+Cn]}function _u(bn,Cn,Dn,Wn,_i,rr,sr){var lr;if(bn==null)El(null,null,Dn,Wn,_i,rr,sr);else for(lr=0;lr<sr;++lr)_i[rr+lr]=bn[Cn+lr]+Dn[Wn+lr]&255}function Ho(bn,Cn,Dn,Wn,_i,rr,sr){if(bn==null)El(null,null,Dn,Wn,_i,rr,sr);else{var lr,cr=bn[Cn+0],pr=cr,Sr=cr;for(lr=0;lr<sr;++lr)pr=Sr+(cr=bn[Cn+lr])-pr,Sr=Dn[Wn+lr]+(-256&pr?0>pr?0:255:pr)&255,pr=cr,_i[rr+lr]=Sr}}function xu(bn,Cn,Dn,Wn){var _i=Cn.width,rr=Cn.o;if(e(bn!=null&&Cn!=null),0>Dn||0>=Wn||Dn+Wn>rr)return null;if(!bn.Cc){if(bn.ga==null){var sr;if(bn.ga=new Xl,(sr=bn.ga==null)||(sr=Cn.width*Cn.o,e(bn.Gb.length==0),bn.Gb=gn(sr),bn.Uc=0,bn.Gb==null?sr=0:(bn.mb=bn.Gb,bn.nb=bn.Uc,bn.rc=null,sr=1),sr=!sr),!sr){sr=bn.ga;var lr=bn.Fa,cr=bn.P,pr=bn.qc,Sr=bn.mb,kr=bn.nb,Lr=cr+1,Tr=pr-1,$r=sr.l;if(e(lr!=null&&Sr!=null&&Cn!=null),Jo[0]=null,Jo[1]=El,Jo[2]=_u,Jo[3]=Ho,sr.ca=Sr,sr.tb=kr,sr.c=Cn.width,sr.i=Cn.height,e(0<sr.c&&0<sr.i),1>=pr)Cn=0;else if(sr.$a=lr[cr+0]>>0&3,sr.Z=lr[cr+0]>>2&3,sr.Lc=lr[cr+0]>>4&3,cr=lr[cr+0]>>6&3,0>sr.$a||1<sr.$a||4<=sr.Z||1<sr.Lc||cr)Cn=0;else if($r.put=ls,$r.ac=us,$r.bc=As,$r.ma=sr,$r.width=Cn.width,$r.height=Cn.height,$r.Da=Cn.Da,$r.v=Cn.v,$r.va=Cn.va,$r.j=Cn.j,$r.o=Cn.o,sr.$a)t:{e(sr.$a==1),Cn=lo();e:for(;;){if(Cn==null){Cn=0;break t}if(e(sr!=null),sr.mc=Cn,Cn.c=sr.c,Cn.i=sr.i,Cn.l=sr.l,Cn.l.ma=sr,Cn.l.width=sr.c,Cn.l.height=sr.i,Cn.a=0,Jn(Cn.m,lr,Lr,Tr),!To(sr.c,sr.i,1,Cn,null)||(Cn.ab==1&&Cn.gc[0].hc==3&&Ls(Cn.s)?(sr.ic=1,lr=Cn.c*Cn.i,Cn.Ta=null,Cn.Ua=0,Cn.V=gn(lr),Cn.Ba=0,Cn.V==null?(Cn.a=1,Cn=0):Cn=1):(sr.ic=0,Cn=Sl(Cn,sr.c)),!Cn))break e;Cn=1;break t}sr.mc=null,Cn=0}else Cn=Tr>=sr.c*sr.i;sr=!Cn}if(sr)return null;bn.ga.Lc!=1?bn.Ga=0:Wn=rr-Dn}e(bn.ga!=null),e(Dn+Wn<=rr);t:{if(Cn=(lr=bn.ga).c,rr=lr.l.o,lr.$a==0){if(Lr=bn.rc,Tr=bn.Vc,$r=bn.Fa,cr=bn.P+1+Dn*Cn,pr=bn.mb,Sr=bn.nb+Dn*Cn,e(cr<=bn.P+bn.qc),lr.Z!=0)for(e(Jo[lr.Z]!=null),sr=0;sr<Wn;++sr)Jo[lr.Z](Lr,Tr,$r,cr,pr,Sr,Cn),Lr=pr,Tr=Sr,Sr+=Cn,cr+=Cn;else for(sr=0;sr<Wn;++sr)tn(pr,Sr,$r,cr,Cn),Lr=pr,Tr=Sr,Sr+=Cn,cr+=Cn;bn.rc=Lr,bn.Vc=Tr}else{if(e(lr.mc!=null),Cn=Dn+Wn,e((sr=lr.mc)!=null),e(Cn<=sr.i),sr.C>=Cn)Cn=1;else if(lr.ic||Pr(),lr.ic){lr=sr.V,Lr=sr.Ba,Tr=sr.c;var Fr=sr.i,Cr=($r=1,cr=sr.$/Tr,pr=sr.$%Tr,Sr=sr.m,kr=sr.s,sr.$),Ar=Tr*Fr,jr=Tr*Cn,Hr=kr.wc,Br=Cr<jr?Ts(kr,pr,cr):null;e(Cr<=Ar),e(Cn<=Fr),e(Ls(kr));e:for(;;){for(;!Sr.h&&Cr<jr;){if(pr&Hr||(Br=Ts(kr,pr,cr)),e(Br!=null),Nn(Sr),256>(Fr=bs(Br.G[0],Br.H[0],Sr)))lr[Lr+Cr]=Fr,++Cr,++pr>=Tr&&(pr=0,++cr<=Cn&&!(cr%16)&&Gs(sr,cr));else{if(!(280>Fr)){$r=0;break e}Fr=Fs(Fr-256,Sr);var ss,Qr=bs(Br.G[4],Br.H[4],Sr);if(Nn(Sr),!(Cr>=(Qr=gs(Tr,Qr=Fs(Qr,Sr)))&&Ar-Cr>=Fr)){$r=0;break e}for(ss=0;ss<Fr;++ss)lr[Lr+Cr+ss]=lr[Lr+Cr+ss-Qr];for(Cr+=Fr,pr+=Fr;pr>=Tr;)pr-=Tr,++cr<=Cn&&!(cr%16)&&Gs(sr,cr);Cr<jr&&pr&Hr&&(Br=Ts(kr,pr,cr))}e(Sr.h==wn(Sr))}Gs(sr,cr>Cn?Cn:cr);break e}!$r||Sr.h&&Cr<Ar?($r=0,sr.a=Sr.h?5:3):sr.$=Cr,Cn=$r}else Cn=go(sr,sr.V,sr.Ba,sr.c,sr.i,Cn,Fl);if(!Cn){Wn=0;break t}}Dn+Wn>=rr&&(bn.Cc=1),Wn=1}if(!Wn)return null;if(bn.Cc&&((Wn=bn.ga)!=null&&(Wn.mc=null),bn.ga=null,0<bn.Ga))return alert("todo:WebPDequantizeLevels"),null}return bn.nb+Dn*_i}function kn(bn,Cn,Dn,Wn,_i,rr){for(;0<_i--;){var sr,lr=bn,cr=Cn+(Dn?1:0),pr=bn,Sr=Cn+(Dn?0:3);for(sr=0;sr<Wn;++sr){var kr=pr[Sr+4*sr];kr!=255&&(kr*=32897,lr[cr+4*sr+0]=lr[cr+4*sr+0]*kr>>23,lr[cr+4*sr+1]=lr[cr+4*sr+1]*kr>>23,lr[cr+4*sr+2]=lr[cr+4*sr+2]*kr>>23)}Cn+=rr}}function tr(bn,Cn,Dn,Wn,_i){for(;0<Wn--;){var rr;for(rr=0;rr<Dn;++rr){var sr=bn[Cn+2*rr+0],lr=15&(pr=bn[Cn+2*rr+1]),cr=4369*lr,pr=(240&pr|pr>>4)*cr>>16;bn[Cn+2*rr+0]=(240&sr|sr>>4)*cr>>16&240|(15&sr|sr<<4)*cr>>16>>4&15,bn[Cn+2*rr+1]=240&pr|lr}Cn+=_i}}function mr(bn,Cn,Dn,Wn,_i,rr,sr,lr){var cr,pr,Sr=255;for(pr=0;pr<_i;++pr){for(cr=0;cr<Wn;++cr){var kr=bn[Cn+cr];rr[sr+4*cr]=kr,Sr&=kr}Cn+=Dn,sr+=lr}return Sr!=255}function wr(bn,Cn,Dn,Wn,_i){var rr;for(rr=0;rr<_i;++rr)Dn[Wn+rr]=bn[Cn+rr]>>8}function Pr(){Yo=kn,eu=tr,ip=mr,I1=wr}function Nr(bn,Cn,Dn){Ln[bn]=function(Wn,_i,rr,sr,lr,cr,pr,Sr,kr,Lr,Tr,$r,Fr,Cr,Ar,jr,Hr){var Br,ss=Hr-1>>1,Qr=lr[cr+0]|pr[Sr+0]<<16,cs=kr[Lr+0]|Tr[$r+0]<<16;e(Wn!=null);var Zr=3*Qr+cs+131074>>2;for(Cn(Wn[_i+0],255&Zr,Zr>>16,Fr,Cr),rr!=null&&(Zr=3*cs+Qr+131074>>2,Cn(rr[sr+0],255&Zr,Zr>>16,Ar,jr)),Br=1;Br<=ss;++Br){var Cs=lr[cr+Br]|pr[Sr+Br]<<16,Es=kr[Lr+Br]|Tr[$r+Br]<<16,xs=Qr+Cs+cs+Es+524296,vs=xs+2*(Cs+cs)>>3;Zr=vs+Qr>>1,Qr=(xs=xs+2*(Qr+Es)>>3)+Cs>>1,Cn(Wn[_i+2*Br-1],255&Zr,Zr>>16,Fr,Cr+(2*Br-1)*Dn),Cn(Wn[_i+2*Br-0],255&Qr,Qr>>16,Fr,Cr+(2*Br-0)*Dn),rr!=null&&(Zr=xs+cs>>1,Qr=vs+Es>>1,Cn(rr[sr+2*Br-1],255&Zr,Zr>>16,Ar,jr+(2*Br-1)*Dn),Cn(rr[sr+2*Br+0],255&Qr,Qr>>16,Ar,jr+(2*Br+0)*Dn)),Qr=Cs,cs=Es}1&Hr||(Zr=3*Qr+cs+131074>>2,Cn(Wn[_i+Hr-1],255&Zr,Zr>>16,Fr,Cr+(Hr-1)*Dn),rr!=null&&(Zr=3*cs+Qr+131074>>2,Cn(rr[sr+Hr-1],255&Zr,Zr>>16,Ar,jr+(Hr-1)*Dn)))}}function Vr(){fo[sp]=J0,fo[ap]=G1,fo[W1]=Q0,fo[op]=Y1,fo[lp]=K1,fo[n1]=J1,fo[H1]=Z0,fo[i1]=G1,fo[r1]=Y1,fo[cp]=K1,fo[s1]=J1}function rs(bn){return bn&~_g?0>bn?0:255:bn>>Q1}function os(bn,Cn){return rs((19077*bn>>8)+(26149*Cn>>8)-14234)}function fs(bn,Cn,Dn){return rs((19077*bn>>8)-(6419*Cn>>8)-(13320*Dn>>8)+8708)}function ms(bn,Cn){return rs((19077*bn>>8)+(33050*Cn>>8)-17685)}function _s(bn,Cn,Dn,Wn,_i){Wn[_i+0]=os(bn,Dn),Wn[_i+1]=fs(bn,Cn,Dn),Wn[_i+2]=ms(bn,Cn)}function Is(bn,Cn,Dn,Wn,_i){Wn[_i+0]=ms(bn,Cn),Wn[_i+1]=fs(bn,Cn,Dn),Wn[_i+2]=os(bn,Dn)}function Bs(bn,Cn,Dn,Wn,_i){var rr=fs(bn,Cn,Dn);Cn=rr<<3&224|ms(bn,Cn)>>3,Wn[_i+0]=248&os(bn,Dn)|rr>>5,Wn[_i+1]=Cn}function Hs(bn,Cn,Dn,Wn,_i){var rr=240&ms(bn,Cn)|15;Wn[_i+0]=240&os(bn,Dn)|fs(bn,Cn,Dn)>>4,Wn[_i+1]=rr}function ga(bn,Cn,Dn,Wn,_i){Wn[_i+0]=255,_s(bn,Cn,Dn,Wn,_i+1)}function Ys(bn,Cn,Dn,Wn,_i){Is(bn,Cn,Dn,Wn,_i),Wn[_i+3]=255}function yo(bn,Cn,Dn,Wn,_i){_s(bn,Cn,Dn,Wn,_i),Wn[_i+3]=255}function io(bn,Cn){return 0>bn?0:bn>Cn?Cn:bn}function No(bn,Cn,Dn){Ln[bn]=function(Wn,_i,rr,sr,lr,cr,pr,Sr,kr){for(var Lr=Sr+(-2&kr)*Dn;Sr!=Lr;)Cn(Wn[_i+0],rr[sr+0],lr[cr+0],pr,Sr),Cn(Wn[_i+1],rr[sr+0],lr[cr+0],pr,Sr+Dn),_i+=2,++sr,++cr,Sr+=2*Dn;1&kr&&Cn(Wn[_i+0],rr[sr+0],lr[cr+0],pr,Sr)}}function ep(bn,Cn,Dn){return Dn==0?bn==0?Cn==0?6:5:Cn==0?4:0:Dn}function wu(bn,Cn,Dn,Wn,_i){switch(bn>>>30){case 3:_c(Cn,Dn,Wn,_i,0);break;case 2:ku(Cn,Dn,Wn,_i);break;case 1:wo(Cn,Dn,Wn,_i)}}function Su(bn,Cn){var Dn,Wn,_i=Cn.M,rr=Cn.Nb,sr=bn.oc,lr=bn.pc+40,cr=bn.oc,pr=bn.pc+584,Sr=bn.oc,kr=bn.pc+600;for(Dn=0;16>Dn;++Dn)sr[lr+32*Dn-1]=129;for(Dn=0;8>Dn;++Dn)cr[pr+32*Dn-1]=129,Sr[kr+32*Dn-1]=129;for(0<_i?sr[lr-1-32]=cr[pr-1-32]=Sr[kr-1-32]=129:(un(sr,lr-32-1,127,21),un(cr,pr-32-1,127,9),un(Sr,kr-32-1,127,9)),Wn=0;Wn<bn.za;++Wn){var Lr=Cn.ya[Cn.aa+Wn];if(0<Wn){for(Dn=-1;16>Dn;++Dn)tn(sr,lr+32*Dn-4,sr,lr+32*Dn+12,4);for(Dn=-1;8>Dn;++Dn)tn(cr,pr+32*Dn-4,cr,pr+32*Dn+4,4),tn(Sr,kr+32*Dn-4,Sr,kr+32*Dn+4,4)}var Tr=bn.Gd,$r=bn.Hd+Wn,Fr=Lr.ad,Cr=Lr.Hc;if(0<_i&&(tn(sr,lr-32,Tr[$r].y,0,16),tn(cr,pr-32,Tr[$r].f,0,8),tn(Sr,kr-32,Tr[$r].ea,0,8)),Lr.Za){var Ar=sr,jr=lr-32+16;for(0<_i&&(Wn>=bn.za-1?un(Ar,jr,Tr[$r].y[15],4):tn(Ar,jr,Tr[$r+1].y,0,4)),Dn=0;4>Dn;Dn++)Ar[jr+128+Dn]=Ar[jr+256+Dn]=Ar[jr+384+Dn]=Ar[jr+0+Dn];for(Dn=0;16>Dn;++Dn,Cr<<=2)Ar=sr,jr=lr+t0[Dn],So[Lr.Ob[Dn]](Ar,jr),wu(Cr,Fr,16*+Dn,Ar,jr)}else if(Ar=ep(Wn,_i,Lr.Ob[0]),Ko[Ar](sr,lr),Cr!=0)for(Dn=0;16>Dn;++Dn,Cr<<=2)wu(Cr,Fr,16*+Dn,sr,lr+t0[Dn]);for(Dn=Lr.Gc,Ar=ep(Wn,_i,Lr.Dd),jo[Ar](cr,pr),jo[Ar](Sr,kr),Cr=Fr,Ar=cr,jr=pr,255&(Lr=Dn>>0)&&(170&Lr?Xo(Cr,256,Ar,jr):Mo(Cr,256,Ar,jr)),Lr=Sr,Cr=kr,255&(Dn>>=8)&&(170&Dn?Xo(Fr,320,Lr,Cr):Mo(Fr,320,Lr,Cr)),_i<bn.Ub-1&&(tn(Tr[$r].y,0,sr,lr+480,16),tn(Tr[$r].f,0,cr,pr+224,8),tn(Tr[$r].ea,0,Sr,kr+224,8)),Dn=8*rr*bn.B,Tr=bn.sa,$r=bn.ta+16*Wn+16*rr*bn.R,Fr=bn.qa,Lr=bn.ra+8*Wn+Dn,Cr=bn.Ha,Ar=bn.Ia+8*Wn+Dn,Dn=0;16>Dn;++Dn)tn(Tr,$r+Dn*bn.R,sr,lr+32*Dn,16);for(Dn=0;8>Dn;++Dn)tn(Fr,Lr+Dn*bn.B,cr,pr+32*Dn,8),tn(Cr,Ar+Dn*bn.B,Sr,kr+32*Dn,8)}}function Gl(bn,Cn,Dn,Wn,_i,rr,sr,lr,cr){var pr=[0],Sr=[0],kr=0,Lr=cr!=null?cr.kd:0,Tr=cr!=null?cr:new yu;if(bn==null||12>Dn)return 7;Tr.data=bn,Tr.w=Cn,Tr.ha=Dn,Cn=[Cn],Dn=[Dn],Tr.gb=[Tr.gb];t:{var $r=Cn,Fr=Dn,Cr=Tr.gb;if(e(bn!=null),e(Fr!=null),e(Cr!=null),Cr[0]=0,12<=Fr[0]&&!_e(bn,$r[0],"RIFF")){if(_e(bn,$r[0]+8,"WEBP")){Cr=3;break t}var Ar=$n(bn,$r[0]+4);if(12>Ar||4294967286<Ar){Cr=3;break t}if(Lr&&Ar>Fr[0]-8){Cr=7;break t}Cr[0]=Ar,$r[0]+=12,Fr[0]-=12}Cr=0}if(Cr!=0)return Cr;for(Ar=0<Tr.gb[0],Dn=Dn[0];;){t:{var jr=bn;Fr=Cn,Cr=Dn;var Hr=pr,Br=Sr,ss=$r=[0];if((Zr=kr=[kr])[0]=0,8>Cr[0])Cr=7;else{if(!_e(jr,Fr[0],"VP8X")){if($n(jr,Fr[0]+4)!=10){Cr=3;break t}if(18>Cr[0]){Cr=7;break t}var Qr=$n(jr,Fr[0]+8),cs=1+Bn(jr,Fr[0]+12);if(2147483648<=cs*(jr=1+Bn(jr,Fr[0]+15))){Cr=3;break t}ss!=null&&(ss[0]=Qr),Hr!=null&&(Hr[0]=cs),Br!=null&&(Br[0]=jr),Fr[0]+=18,Cr[0]-=18,Zr[0]=1}Cr=0}}if(kr=kr[0],$r=$r[0],Cr!=0)return Cr;if(Fr=!!(2&$r),!Ar&&kr)return 3;if(rr!=null&&(rr[0]=!!(16&$r)),sr!=null&&(sr[0]=Fr),lr!=null&&(lr[0]=0),sr=pr[0],$r=Sr[0],kr&&Fr&&cr==null){Cr=0;break}if(4>Dn){Cr=7;break}if(Ar&&kr||!Ar&&!kr&&!_e(bn,Cn[0],"ALPH")){Dn=[Dn],Tr.na=[Tr.na],Tr.P=[Tr.P],Tr.Sa=[Tr.Sa];t:{Qr=bn,Cr=Cn,Ar=Dn;var Zr=Tr.gb;Hr=Tr.na,Br=Tr.P,ss=Tr.Sa,cs=22,e(Qr!=null),e(Ar!=null),jr=Cr[0];var Cs=Ar[0];for(e(Hr!=null),e(ss!=null),Hr[0]=null,Br[0]=null,ss[0]=0;;){if(Cr[0]=jr,Ar[0]=Cs,8>Cs){Cr=7;break t}var Es=$n(Qr,jr+4);if(4294967286<Es){Cr=3;break t}var xs=8+Es+1&-2;if(cs+=xs,0<Zr&&cs>Zr){Cr=3;break t}if(!_e(Qr,jr,"VP8 ")||!_e(Qr,jr,"VP8L")){Cr=0;break t}if(Cs[0]<xs){Cr=7;break t}_e(Qr,jr,"ALPH")||(Hr[0]=Qr,Br[0]=jr+8,ss[0]=Es),jr+=xs,Cs-=xs}}if(Dn=Dn[0],Tr.na=Tr.na[0],Tr.P=Tr.P[0],Tr.Sa=Tr.Sa[0],Cr!=0)break}Dn=[Dn],Tr.Ja=[Tr.Ja],Tr.xa=[Tr.xa];t:if(Zr=bn,Cr=Cn,Ar=Dn,Hr=Tr.gb[0],Br=Tr.Ja,ss=Tr.xa,Qr=Cr[0],jr=!_e(Zr,Qr,"VP8 "),cs=!_e(Zr,Qr,"VP8L"),e(Zr!=null),e(Ar!=null),e(Br!=null),e(ss!=null),8>Ar[0])Cr=7;else{if(jr||cs){if(Zr=$n(Zr,Qr+4),12<=Hr&&Zr>Hr-12){Cr=3;break t}if(Lr&&Zr>Ar[0]-8){Cr=7;break t}Br[0]=Zr,Cr[0]+=8,Ar[0]-=8,ss[0]=cs}else ss[0]=5<=Ar[0]&&Zr[Qr+0]==47&&!(Zr[Qr+4]>>5),Br[0]=Ar[0];Cr=0}if(Dn=Dn[0],Tr.Ja=Tr.Ja[0],Tr.xa=Tr.xa[0],Cn=Cn[0],Cr!=0)break;if(4294967286<Tr.Ja)return 3;if(lr==null||Fr||(lr[0]=Tr.xa?2:1),sr=[sr],$r=[$r],Tr.xa){if(5>Dn){Cr=7;break}lr=sr,Lr=$r,Fr=rr,bn==null||5>Dn?bn=0:5<=Dn&&bn[Cn+0]==47&&!(bn[Cn+4]>>5)?(Ar=[0],Zr=[0],Hr=[0],Jn(Br=new Tn,bn,Cn,Dn),ns(Br,Ar,Zr,Hr)?(lr!=null&&(lr[0]=Ar[0]),Lr!=null&&(Lr[0]=Zr[0]),Fr!=null&&(Fr[0]=Hr[0]),bn=1):bn=0):bn=0}else{if(10>Dn){Cr=7;break}lr=$r,bn==null||10>Dn||!zu(bn,Cn+3,Dn-3)?bn=0:(Lr=bn[Cn+0]|bn[Cn+1]<<8|bn[Cn+2]<<16,Fr=16383&(bn[Cn+7]<<8|bn[Cn+6]),bn=16383&(bn[Cn+9]<<8|bn[Cn+8]),1&Lr||3<(Lr>>1&7)||!(Lr>>4&1)||Lr>>5>=Tr.Ja||!Fr||!bn?bn=0:(sr&&(sr[0]=Fr),lr&&(lr[0]=bn),bn=1))}if(!bn||(sr=sr[0],$r=$r[0],kr&&(pr[0]!=sr||Sr[0]!=$r)))return 3;cr!=null&&(cr[0]=Tr,cr.offset=Cn-cr.w,e(4294967286>Cn-cr.w),e(cr.offset==cr.ha-Dn));break}return Cr==0||Cr==7&&kr&&cr==null?(rr!=null&&(rr[0]|=Tr.na!=null&&0<Tr.na.length),Wn!=null&&(Wn[0]=sr),_i!=null&&(_i[0]=$r),0):Cr}function Cu(bn,Cn,Dn){var Wn=Cn.width,_i=Cn.height,rr=0,sr=0,lr=Wn,cr=_i;if(Cn.Da=bn!=null&&0<bn.Da,Cn.Da&&(lr=bn.cd,cr=bn.bd,rr=bn.v,sr=bn.j,11>Dn||(rr&=-2,sr&=-2),0>rr||0>sr||0>=lr||0>=cr||rr+lr>Wn||sr+cr>_i))return 0;if(Cn.v=rr,Cn.j=sr,Cn.va=rr+lr,Cn.o=sr+cr,Cn.U=lr,Cn.T=cr,Cn.da=bn!=null&&0<bn.da,Cn.da){if(!ur(lr,cr,Dn=[bn.ib],rr=[bn.hb]))return 0;Cn.ib=Dn[0],Cn.hb=rr[0]}return Cn.ob=bn!=null&&bn.ob,Cn.Kb=bn==null||!bn.Sd,Cn.da&&(Cn.ob=Cn.ib<3*Wn/4&&Cn.hb<3*_i/4,Cn.Kb=0),1}function Au(bn){if(bn==null)return 2;if(11>bn.S){var Cn=bn.f.RGBA;Cn.fb+=(bn.height-1)*Cn.A,Cn.A=-Cn.A}else Cn=bn.f.kb,bn=bn.height,Cn.O+=(bn-1)*Cn.fa,Cn.fa=-Cn.fa,Cn.N+=(bn-1>>1)*Cn.Ab,Cn.Ab=-Cn.Ab,Cn.W+=(bn-1>>1)*Cn.Db,Cn.Db=-Cn.Db,Cn.F!=null&&(Cn.J+=(bn-1)*Cn.lb,Cn.lb=-Cn.lb);return 0}function Yl(bn,Cn,Dn,Wn){if(Wn==null||0>=bn||0>=Cn)return 2;if(Dn!=null){if(Dn.Da){var _i=Dn.cd,rr=Dn.bd,sr=-2&Dn.v,lr=-2&Dn.j;if(0>sr||0>lr||0>=_i||0>=rr||sr+_i>bn||lr+rr>Cn)return 2;bn=_i,Cn=rr}if(Dn.da){if(!ur(bn,Cn,_i=[Dn.ib],rr=[Dn.hb]))return 2;bn=_i[0],Cn=rr[0]}}Wn.width=bn,Wn.height=Cn;t:{var cr=Wn.width,pr=Wn.height;if(bn=Wn.S,0>=cr||0>=pr||!(bn>=sp&&13>bn))bn=2;else{if(0>=Wn.Rd&&Wn.sd==null){sr=rr=_i=Cn=0;var Sr=(lr=cr*e0[bn])*pr;if(11>bn||(rr=(pr+1)/2*(Cn=(cr+1)/2),bn==12&&(sr=(_i=cr)*pr)),(pr=gn(Sr+2*rr+sr))==null){bn=1;break t}Wn.sd=pr,11>bn?((cr=Wn.f.RGBA).eb=pr,cr.fb=0,cr.A=lr,cr.size=Sr):((cr=Wn.f.kb).y=pr,cr.O=0,cr.fa=lr,cr.Fd=Sr,cr.f=pr,cr.N=0+Sr,cr.Ab=Cn,cr.Cd=rr,cr.ea=pr,cr.W=0+Sr+rr,cr.Db=Cn,cr.Ed=rr,bn==12&&(cr.F=pr,cr.J=0+Sr+2*rr),cr.Tc=sr,cr.lb=_i)}if(Cn=1,_i=Wn.S,rr=Wn.width,sr=Wn.height,_i>=sp&&13>_i)if(11>_i)bn=Wn.f.RGBA,Cn&=(lr=Math.abs(bn.A))*(sr-1)+rr<=bn.size,Cn&=lr>=rr*e0[_i],Cn&=bn.eb!=null;else{bn=Wn.f.kb,lr=(rr+1)/2,Sr=(sr+1)/2,cr=Math.abs(bn.fa),pr=Math.abs(bn.Ab);var kr=Math.abs(bn.Db),Lr=Math.abs(bn.lb),Tr=Lr*(sr-1)+rr;Cn&=cr*(sr-1)+rr<=bn.Fd,Cn&=pr*(Sr-1)+lr<=bn.Cd,Cn=(Cn&=kr*(Sr-1)+lr<=bn.Ed)&cr>=rr&pr>=lr&kr>=lr,Cn&=bn.y!=null,Cn&=bn.f!=null,Cn&=bn.ea!=null,_i==12&&(Cn&=Lr>=rr,Cn&=Tr<=bn.Tc,Cn&=bn.F!=null)}else Cn=0;bn=Cn?0:2}}return bn!=0||Dn!=null&&Dn.fd&&(bn=Au(Wn)),bn}var $a=64,Kl=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Jl=24,Ql=32,Tu=8,to=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];vr("Predictor0","PredictorAdd0"),Ln.Predictor0=function(){return 4278190080},Ln.Predictor1=function(bn){return bn},Ln.Predictor2=function(bn,Cn,Dn){return Cn[Dn+0]},Ln.Predictor3=function(bn,Cn,Dn){return Cn[Dn+1]},Ln.Predictor4=function(bn,Cn,Dn){return Cn[Dn-1]},Ln.Predictor5=function(bn,Cn,Dn){return hr(hr(bn,Cn[Dn+1]),Cn[Dn+0])},Ln.Predictor6=function(bn,Cn,Dn){return hr(bn,Cn[Dn-1])},Ln.Predictor7=function(bn,Cn,Dn){return hr(bn,Cn[Dn+0])},Ln.Predictor8=function(bn,Cn,Dn){return hr(Cn[Dn-1],Cn[Dn+0])},Ln.Predictor9=function(bn,Cn,Dn){return hr(Cn[Dn+0],Cn[Dn+1])},Ln.Predictor10=function(bn,Cn,Dn){return hr(hr(bn,Cn[Dn-1]),hr(Cn[Dn+0],Cn[Dn+1]))},Ln.Predictor11=function(bn,Cn,Dn){var Wn=Cn[Dn+0];return 0>=Er(Wn>>24&255,bn>>24&255,(Cn=Cn[Dn-1])>>24&255)+Er(Wn>>16&255,bn>>16&255,Cn>>16&255)+Er(Wn>>8&255,bn>>8&255,Cn>>8&255)+Er(255&Wn,255&bn,255&Cn)?Wn:bn},Ln.Predictor12=function(bn,Cn,Dn){var Wn=Cn[Dn+0];return(_r((bn>>24&255)+(Wn>>24&255)-((Cn=Cn[Dn-1])>>24&255))<<24|_r((bn>>16&255)+(Wn>>16&255)-(Cn>>16&255))<<16|_r((bn>>8&255)+(Wn>>8&255)-(Cn>>8&255))<<8|_r((255&bn)+(255&Wn)-(255&Cn)))>>>0},Ln.Predictor13=function(bn,Cn,Dn){var Wn=Cn[Dn-1];return(or((bn=hr(bn,Cn[Dn+0]))>>24&255,Wn>>24&255)<<24|or(bn>>16&255,Wn>>16&255)<<16|or(bn>>8&255,Wn>>8&255)<<8|or(bn>>0&255,Wn>>0&255))>>>0};var Qp=Ln.PredictorAdd0;Ln.PredictorAdd1=Dr,vr("Predictor2","PredictorAdd2"),vr("Predictor3","PredictorAdd3"),vr("Predictor4","PredictorAdd4"),vr("Predictor5","PredictorAdd5"),vr("Predictor6","PredictorAdd6"),vr("Predictor7","PredictorAdd7"),vr("Predictor8","PredictorAdd8"),vr("Predictor9","PredictorAdd9"),vr("Predictor10","PredictorAdd10"),vr("Predictor11","PredictorAdd11"),vr("Predictor12","PredictorAdd12"),vr("Predictor13","PredictorAdd13");var Eu=Ln.PredictorAdd2;ts("ColorIndexInverseTransform","MapARGB","32b",function(bn){return bn>>8&255},function(bn){return bn}),ts("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(bn){return bn},function(bn){return bn>>8&255});var np,bo=Ln.ColorIndexInverseTransform,Pu=Ln.MapARGB,Zp=Ln.VP8LColorIndexInverseTransformAlpha,t1=Ln.MapAlpha,qo=Ln.VP8LPredictorsAdd=[];qo.length=16,(Ln.VP8LPredictors=[]).length=16,(Ln.VP8LPredictorsAdd_C=[]).length=16,(Ln.VP8LPredictors_C=[]).length=16;var co,_o,Vo,Po,Do,Zl,xo,_c,ku,Xo,wo,Mo,Pl,tu,Ll,Go,Lu,uo,Ro,Ds,Ms,zs,Xs,Io,Yo,eu,ip,I1,j1=gn(511),B1=gn(2041),$1=gn(225),U1=gn(767),z1=0,e1=B1,rp=$1,ro=U1,ho=j1,sp=0,ap=1,W1=2,op=3,lp=4,n1=5,H1=6,i1=7,r1=8,cp=9,s1=10,I0=[2,3,7],j0=[3,3,11],q1=[280,256,256,256,40],B0=[0,1,1,1,0],$0=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],U0=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],z0=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],W0=8,a1=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],o1=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ou=null,H0=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],q0=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],V1=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],V0=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],X0=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],G0=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Y0=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ko=[],So=[],jo=[],K0=1,X1=2,Jo=[],fo=[];Nr("UpsampleRgbLinePair",_s,3),Nr("UpsampleBgrLinePair",Is,3),Nr("UpsampleRgbaLinePair",yo,4),Nr("UpsampleBgraLinePair",Ys,4),Nr("UpsampleArgbLinePair",ga,4),Nr("UpsampleRgba4444LinePair",Hs,2),Nr("UpsampleRgb565LinePair",Bs,2);var J0=Ln.UpsampleRgbLinePair,Q0=Ln.UpsampleBgrLinePair,G1=Ln.UpsampleRgbaLinePair,Y1=Ln.UpsampleBgraLinePair,K1=Ln.UpsampleArgbLinePair,J1=Ln.UpsampleRgba4444LinePair,Z0=Ln.UpsampleRgb565LinePair,up=16,hp=1<<up-1,Fu=-227,l1=482,Q1=6,_g=(256<<Q1)-1,Z1=0,tm=gn(256),em=gn(256),nm=gn(256),im=gn(256),rm=gn(l1-Fu),sm=gn(l1-Fu);No("YuvToRgbRow",_s,3),No("YuvToBgrRow",Is,3),No("YuvToRgbaRow",yo,4),No("YuvToBgraRow",Ys,4),No("YuvToArgbRow",ga,4),No("YuvToRgba4444Row",Hs,2),No("YuvToRgb565Row",Bs,2);var t0=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],fp=[0,2,8],am=[8,7,6,4,4,2,2,2,1,1,1,1],om=1;this.WebPDecodeRGBA=function(bn,Cn,Dn,Wn,_i){var rr=ap,sr=new Vl,lr=new qr;sr.ba=lr,lr.S=rr,lr.width=[lr.width],lr.height=[lr.height];var cr=lr.width,pr=lr.height,Sr=new Yr;if(Sr==null||bn==null)var kr=2;else e(Sr!=null),kr=Gl(bn,Cn,Dn,Sr.width,Sr.height,Sr.Pd,Sr.Qd,Sr.format,null);if(kr!=0?cr=0:(cr!=null&&(cr[0]=Sr.width[0]),pr!=null&&(pr[0]=Sr.height[0]),cr=1),cr){lr.width=lr.width[0],lr.height=lr.height[0],Wn!=null&&(Wn[0]=lr.width),_i!=null&&(_i[0]=lr.height);t:{if(Wn=new Il,(_i=new yu).data=bn,_i.w=Cn,_i.ha=Dn,_i.kd=1,Cn=[0],e(_i!=null),((bn=Gl(_i.data,_i.w,_i.ha,null,null,null,Cn,null,_i))==0||bn==7)&&Cn[0]&&(bn=4),(Cn=bn)==0){if(e(sr!=null),Wn.data=_i.data,Wn.w=_i.w+_i.offset,Wn.ha=_i.ha-_i.offset,Wn.put=ls,Wn.ac=us,Wn.bc=As,Wn.ma=sr,_i.xa){if((bn=lo())==null){sr=1;break t}if(function(Lr,Tr){var $r=[0],Fr=[0],Cr=[0];e:for(;;){if(Lr==null)return 0;if(Tr==null)return Lr.a=2,0;if(Lr.l=Tr,Lr.a=0,Jn(Lr.m,Tr.data,Tr.w,Tr.ha),!ns(Lr.m,$r,Fr,Cr)){Lr.a=3;break e}if(Lr.xb=X1,Tr.width=$r[0],Tr.height=Fr[0],!To($r[0],Fr[0],1,Lr,null))break e;return 1}return e(Lr.a!=0),0}(bn,Wn)){if(Wn=(Cn=Yl(Wn.width,Wn.height,sr.Oa,sr.ba))==0){e:{Wn=bn;n:for(;;){if(Wn==null){Wn=0;break e}if(e(Wn.s.yc!=null),e(Wn.s.Ya!=null),e(0<Wn.s.Wb),e((Dn=Wn.l)!=null),e((_i=Dn.ma)!=null),Wn.xb!=0){if(Wn.ca=_i.ba,Wn.tb=_i.tb,e(Wn.ca!=null),!Cu(_i.Oa,Dn,op)){Wn.a=2;break n}if(!Sl(Wn,Dn.width)||Dn.da)break n;if((Dn.da||xr(Wn.ca.S))&&Pr(),11>Wn.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Wn.ca.f.kb.F!=null&&Pr()),Wn.Pb&&0<Wn.s.ua&&Wn.s.vb.X==null&&!qn(Wn.s.vb,Wn.s.Wa.Xa)){Wn.a=1;break n}Wn.xb=0}if(!go(Wn,Wn.V,Wn.Ba,Wn.c,Wn.i,Dn.o,Qs))break n;_i.Dc=Wn.Ma,Wn=1;break e}e(Wn.a!=0),Wn=0}Wn=!Wn}Wn&&(Cn=bn.a)}else Cn=bn.a}else{if((bn=new Np)==null){sr=1;break t}if(bn.Fa=_i.na,bn.P=_i.P,bn.qc=_i.Sa,Wu(bn,Wn)){if((Cn=Yl(Wn.width,Wn.height,sr.Oa,sr.ba))==0){if(bn.Aa=0,Dn=sr.Oa,e((_i=bn)!=null),Dn!=null){if(0<(cr=0>(cr=Dn.Md)?0:100<cr?255:255*cr/100)){for(pr=Sr=0;4>pr;++pr)12>(kr=_i.pb[pr]).lc&&(kr.ia=cr*am[0>kr.lc?0:kr.lc]>>3),Sr|=kr.ia;Sr&&(alert("todo:VP8InitRandom"),_i.ia=1)}_i.Ga=Dn.Id,100<_i.Ga?_i.Ga=100:0>_i.Ga&&(_i.Ga=0)}Dp(bn,Wn)||(Cn=bn.a)}}else Cn=bn.a}Cn==0&&sr.Oa!=null&&sr.Oa.fd&&(Cn=Au(sr.ba))}sr=Cn}rr=sr!=0?null:11>rr?lr.f.RGBA.eb:lr.f.kb.y}else rr=null;return rr};var e0=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function on(Ln,In){for(var Rn="",Mn=0;Mn<4;Mn++)Rn+=String.fromCharCode(Ln[In++]);return Rn}function dn(Ln,In){return(Ln[In+0]<<0|Ln[In+1]<<8|Ln[In+2]<<16)>>>0}function rn(Ln,In){return(Ln[In+0]<<0|Ln[In+1]<<8|Ln[In+2]<<16|Ln[In+3]<<24)>>>0}new en;var an=[0],nn=[0],cn=[],hn=new en,sn=St,pn=function(Ln,In){var Rn={},Mn=0,Hn=!1,Qn=0,Kn=0;if(Rn.frames=[],!function(An,wn,En,Nn){for(var Fn=0;Fn<Nn;Fn++)if(An[wn+Fn]!=En.charCodeAt(Fn))return!0;return!1}(Ln,In,"RIFF",4)){var nr,Zn;for(rn(Ln,In+=4),In+=8;In<Ln.length;){var ir=on(Ln,In),Jn=rn(Ln,In+=4);In+=4;var Vn=Jn+(1&Jn);switch(ir){case"VP8 ":case"VP8L":Rn.frames[Mn]===void 0&&(Rn.frames[Mn]={}),(Tn=Rn.frames[Mn]).src_off=Hn?Kn:In-8,Tn.src_size=Qn+Jn+8,Mn++,Hn&&(Hn=!1,Qn=0,Kn=0);break;case"VP8X":(Tn=Rn.header={}).feature_flags=Ln[In];var Xn=In+4;Tn.canvas_width=1+dn(Ln,Xn),Xn+=3,Tn.canvas_height=1+dn(Ln,Xn),Xn+=3;break;case"ALPH":Hn=!0,Qn=Vn+8,Kn=In-8;break;case"ANIM":(Tn=Rn.header).bgcolor=rn(Ln,In),Xn=In+4,Tn.loop_count=(nr=Ln)[(Zn=Xn)+0]<<0|nr[Zn+1]<<8,Xn+=2;break;case"ANMF":var Yn,Tn;(Tn=Rn.frames[Mn]={}).offset_x=2*dn(Ln,In),In+=3,Tn.offset_y=2*dn(Ln,In),In+=3,Tn.width=1+dn(Ln,In),In+=3,Tn.height=1+dn(Ln,In),In+=3,Tn.duration=dn(Ln,In),In+=3,Yn=Ln[In++],Tn.dispose=1&Yn,Tn.blend=Yn>>1&1}ir!="ANMF"&&(In+=Vn)}return Rn}}(sn,0);pn.response=sn,pn.rgbaoutput=!0,pn.dataurl=!1;var mn=pn.header?pn.header:null,yn=pn.frames?pn.frames:null;if(mn){mn.loop_counter=mn.loop_count,an=[mn.canvas_height],nn=[mn.canvas_width];for(var _n=0;_n<yn.length&&yn[_n].blend!=0;_n++);}var xn=yn[0],Sn=hn.WebPDecodeRGBA(sn,xn.src_off,xn.src_size,nn,an);xn.rgba=Sn,xn.imgwidth=nn[0],xn.imgheight=an[0];for(var Pn=0;Pn<nn[0]*an[0]*4;Pn++)cn[Pn]=Sn[Pn];return this.width=nn,this.height=an,this.data=cn,this}(function(St){var e=function(){return typeof zlibSync=="function"},_e=function(an,nn,cn,hn){var sn=4,pn=vn;switch(hn){case St.image_compression.FAST:sn=1,pn=gn;break;case St.image_compression.MEDIUM:sn=6,pn=fn;break;case St.image_compression.SLOW:sn=9,pn=en}an=tn(an,nn,cn,pn);var mn=zlibSync(an,{level:sn});return St.__addimage__.arrayBufferToBinaryString(mn)},tn=function(an,nn,cn,hn){for(var sn,pn,mn,yn=an.length/nn,_n=new Uint8Array(an.length+yn),xn=dn(),Sn=0;Sn<yn;Sn+=1){if(mn=Sn*nn,sn=an.subarray(mn,mn+nn),hn)_n.set(hn(sn,cn,pn),mn+Sn);else{for(var Pn,Ln=xn.length,In=[];Pn<Ln;Pn+=1)In[Pn]=xn[Pn](sn,cn,pn);var Rn=rn(In.concat());_n.set(In[Rn],mn+Sn)}pn=sn}return _n},un=function(an){var nn=Array.apply([],an);return nn.unshift(0),nn},gn=function(an,nn){var cn,hn=[],sn=an.length;hn[0]=1;for(var pn=0;pn<sn;pn+=1)cn=an[pn-nn]||0,hn[pn+1]=an[pn]-cn+256&255;return hn},vn=function(an,nn,cn){var hn,sn=[],pn=an.length;sn[0]=2;for(var mn=0;mn<pn;mn+=1)hn=cn&&cn[mn]||0,sn[mn+1]=an[mn]-hn+256&255;return sn},fn=function(an,nn,cn){var hn,sn,pn=[],mn=an.length;pn[0]=3;for(var yn=0;yn<mn;yn+=1)hn=an[yn-nn]||0,sn=cn&&cn[yn]||0,pn[yn+1]=an[yn]+256-(hn+sn>>>1)&255;return pn},en=function(an,nn,cn){var hn,sn,pn,mn,yn=[],_n=an.length;yn[0]=4;for(var xn=0;xn<_n;xn+=1)hn=an[xn-nn]||0,sn=cn&&cn[xn]||0,pn=cn&&cn[xn-nn]||0,mn=on(hn,sn,pn),yn[xn+1]=an[xn]-mn+256&255;return yn},on=function(an,nn,cn){if(an===nn&&nn===cn)return an;var hn=Math.abs(nn-cn),sn=Math.abs(an-cn),pn=Math.abs(an+nn-cn-cn);return hn<=sn&&hn<=pn?an:sn<=pn?nn:cn},dn=function(){return[un,gn,vn,fn,en]},rn=function(an){var nn=an.map(function(cn){return cn.reduce(function(hn,sn){return hn+Math.abs(sn)},0)});return nn.indexOf(Math.min.apply(null,nn))};St.processPNG=function(an,nn,cn,hn){var sn,pn,mn,yn,_n,xn,Sn,Pn,Ln,In,Rn,Mn,Hn,Qn,Kn,nr=this.decode.FLATE_DECODE,Zn="";if(this.__addimage__.isArrayBuffer(an)&&(an=new Uint8Array(an)),this.__addimage__.isArrayBufferView(an)){if(an=(mn=new Kt(an)).imgData,pn=mn.bits,sn=mn.colorSpace,_n=mn.colors,[4,6].indexOf(mn.colorType)!==-1){if(mn.bits===8){Ln=(Pn=mn.pixelBitlength==32?new Uint32Array(mn.decodePixels().buffer):mn.pixelBitlength==16?new Uint16Array(mn.decodePixels().buffer):new Uint8Array(mn.decodePixels().buffer)).length,Rn=new Uint8Array(Ln*mn.colors),In=new Uint8Array(Ln);var ir,Jn=mn.pixelBitlength-mn.bits;for(Qn=0,Kn=0;Qn<Ln;Qn++){for(Hn=Pn[Qn],ir=0;ir<Jn;)Rn[Kn++]=Hn>>>ir&255,ir+=mn.bits;In[Qn]=Hn>>>ir&255}}if(mn.bits===16){Ln=(Pn=new Uint32Array(mn.decodePixels().buffer)).length,Rn=new Uint8Array(Ln*(32/mn.pixelBitlength)*mn.colors),In=new Uint8Array(Ln*(32/mn.pixelBitlength)),Mn=mn.colors>1,Qn=0,Kn=0;for(var Vn=0;Qn<Ln;)Hn=Pn[Qn++],Rn[Kn++]=Hn>>>0&255,Mn&&(Rn[Kn++]=Hn>>>16&255,Hn=Pn[Qn++],Rn[Kn++]=Hn>>>0&255),In[Vn++]=Hn>>>16&255;pn=8}hn!==St.image_compression.NONE&&e()?(an=_e(Rn,mn.width*mn.colors,mn.colors,hn),Sn=_e(In,mn.width,1,hn)):(an=Rn,Sn=In,nr=void 0)}if(mn.colorType===3&&(sn=this.color_spaces.INDEXED,xn=mn.palette,mn.transparency.indexed)){var Xn=mn.transparency.indexed,Yn=0;for(Qn=0,Ln=Xn.length;Qn<Ln;++Qn)Yn+=Xn[Qn];if((Yn/=255)===Ln-1&&Xn.indexOf(0)!==-1)yn=[Xn.indexOf(0)];else if(Yn!==Ln){for(Pn=mn.decodePixels(),In=new Uint8Array(Pn.length),Qn=0,Ln=Pn.length;Qn<Ln;Qn++)In[Qn]=Xn[Pn[Qn]];Sn=_e(In,mn.width,1)}}var Tn=function(An){var wn;switch(An){case St.image_compression.FAST:wn=11;break;case St.image_compression.MEDIUM:wn=13;break;case St.image_compression.SLOW:wn=14;break;default:wn=12}return wn}(hn);return nr===this.decode.FLATE_DECODE&&(Zn="/Predictor "+Tn+" "),Zn+="/Colors "+_n+" /BitsPerComponent "+pn+" /Columns "+mn.width,(this.__addimage__.isArrayBuffer(an)||this.__addimage__.isArrayBufferView(an))&&(an=this.__addimage__.arrayBufferToBinaryString(an)),(Sn&&this.__addimage__.isArrayBuffer(Sn)||this.__addimage__.isArrayBufferView(Sn))&&(Sn=this.__addimage__.arrayBufferToBinaryString(Sn)),{alias:cn,data:an,index:nn,filter:nr,decodeParameters:Zn,transparency:yn,palette:xn,sMask:Sn,predictor:Tn,width:mn.width,height:mn.height,bitsPerComponent:pn,colorSpace:sn}}}})(E.API),function(St){St.processGIF89A=function(e,_e,tn,un){var gn=new Zt(e),vn=gn.width,fn=gn.height,en=[];gn.decodeAndBlitFrameRGBA(0,en);var on={data:en,width:vn,height:fn},dn=new Qt(100).encode(on,100);return St.processJPEG.call(this,dn,_e,tn,un)},St.processGIF87A=St.processGIF89A}(E.API),te.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var St=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(St);for(var e=0;e<St;e++){var _e=this.datav.getUint8(this.pos++,!0),tn=this.datav.getUint8(this.pos++,!0),un=this.datav.getUint8(this.pos++,!0),gn=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:un,green:tn,blue:_e,quad:gn}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},te.prototype.parseBGR=function(){this.pos=this.offset;try{var St="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[St]()}catch(_e){a.log("bit decode error:"+_e)}},te.prototype.bit1=function(){var St,e=Math.ceil(this.width/8),_e=e%4;for(St=this.height-1;St>=0;St--){for(var tn=this.bottom_up?St:this.height-1-St,un=0;un<e;un++)for(var gn=this.datav.getUint8(this.pos++,!0),vn=tn*this.width*4+8*un*4,fn=0;fn<8&&8*un+fn<this.width;fn++){var en=this.palette[gn>>7-fn&1];this.data[vn+4*fn]=en.blue,this.data[vn+4*fn+1]=en.green,this.data[vn+4*fn+2]=en.red,this.data[vn+4*fn+3]=255}_e!==0&&(this.pos+=4-_e)}},te.prototype.bit4=function(){for(var St=Math.ceil(this.width/2),e=St%4,_e=this.height-1;_e>=0;_e--){for(var tn=this.bottom_up?_e:this.height-1-_e,un=0;un<St;un++){var gn=this.datav.getUint8(this.pos++,!0),vn=tn*this.width*4+2*un*4,fn=gn>>4,en=15&gn,on=this.palette[fn];if(this.data[vn]=on.blue,this.data[vn+1]=on.green,this.data[vn+2]=on.red,this.data[vn+3]=255,2*un+1>=this.width)break;on=this.palette[en],this.data[vn+4]=on.blue,this.data[vn+4+1]=on.green,this.data[vn+4+2]=on.red,this.data[vn+4+3]=255}e!==0&&(this.pos+=4-e)}},te.prototype.bit8=function(){for(var St=this.width%4,e=this.height-1;e>=0;e--){for(var _e=this.bottom_up?e:this.height-1-e,tn=0;tn<this.width;tn++){var un=this.datav.getUint8(this.pos++,!0),gn=_e*this.width*4+4*tn;if(un<this.palette.length){var vn=this.palette[un];this.data[gn]=vn.red,this.data[gn+1]=vn.green,this.data[gn+2]=vn.blue,this.data[gn+3]=255}else this.data[gn]=255,this.data[gn+1]=255,this.data[gn+2]=255,this.data[gn+3]=255}St!==0&&(this.pos+=4-St)}},te.prototype.bit15=function(){for(var St=this.width%3,e=parseInt("11111",2),_e=this.height-1;_e>=0;_e--){for(var tn=this.bottom_up?_e:this.height-1-_e,un=0;un<this.width;un++){var gn=this.datav.getUint16(this.pos,!0);this.pos+=2;var vn=(gn&e)/e*255|0,fn=(gn>>5&e)/e*255|0,en=(gn>>10&e)/e*255|0,on=gn>>15?255:0,dn=tn*this.width*4+4*un;this.data[dn]=en,this.data[dn+1]=fn,this.data[dn+2]=vn,this.data[dn+3]=on}this.pos+=St}},te.prototype.bit16=function(){for(var St=this.width%3,e=parseInt("11111",2),_e=parseInt("111111",2),tn=this.height-1;tn>=0;tn--){for(var un=this.bottom_up?tn:this.height-1-tn,gn=0;gn<this.width;gn++){var vn=this.datav.getUint16(this.pos,!0);this.pos+=2;var fn=(vn&e)/e*255|0,en=(vn>>5&_e)/_e*255|0,on=(vn>>11)/e*255|0,dn=un*this.width*4+4*gn;this.data[dn]=on,this.data[dn+1]=en,this.data[dn+2]=fn,this.data[dn+3]=255}this.pos+=St}},te.prototype.bit24=function(){for(var St=this.height-1;St>=0;St--){for(var e=this.bottom_up?St:this.height-1-St,_e=0;_e<this.width;_e++){var tn=this.datav.getUint8(this.pos++,!0),un=this.datav.getUint8(this.pos++,!0),gn=this.datav.getUint8(this.pos++,!0),vn=e*this.width*4+4*_e;this.data[vn]=gn,this.data[vn+1]=un,this.data[vn+2]=tn,this.data[vn+3]=255}this.pos+=this.width%4}},te.prototype.bit32=function(){for(var St=this.height-1;St>=0;St--)for(var e=this.bottom_up?St:this.height-1-St,_e=0;_e<this.width;_e++){var tn=this.datav.getUint8(this.pos++,!0),un=this.datav.getUint8(this.pos++,!0),gn=this.datav.getUint8(this.pos++,!0),vn=this.datav.getUint8(this.pos++,!0),fn=e*this.width*4+4*_e;this.data[fn]=gn,this.data[fn+1]=un,this.data[fn+2]=tn,this.data[fn+3]=vn}},te.prototype.getData=function(){return this.data},function(St){St.processBMP=function(e,_e,tn,un){var gn=new te(e,!1),vn=gn.width,fn=gn.height,en={data:gn.getData(),width:vn,height:fn},on=new Qt(100).encode(en,100);return St.processJPEG.call(this,on,_e,tn,un)}}(E.API),ee.prototype.getData=function(){return this.data},function(St){St.processWEBP=function(e,_e,tn,un){var gn=new ee(e),vn=gn.width,fn=gn.height,en={data:gn.getData(),width:vn,height:fn},on=new Qt(100).encode(en,100);return St.processJPEG.call(this,on,_e,tn,un)}}(E.API),E.API.processRGBA=function(St,e,_e){for(var tn=St.data,un=tn.length,gn=new Uint8Array(un/4*3),vn=new Uint8Array(un/4),fn=0,en=0,on=0;on<un;on+=4){var dn=tn[on],rn=tn[on+1],an=tn[on+2],nn=tn[on+3];gn[fn++]=dn,gn[fn++]=rn,gn[fn++]=an,vn[en++]=nn}var cn=this.__addimage__.arrayBufferToBinaryString(gn);return{alpha:this.__addimage__.arrayBufferToBinaryString(vn),data:cn,index:e,alias:_e,colorSpace:"DeviceRGB",bitsPerComponent:8,width:St.width,height:St.height}},E.API.setLanguage=function(St){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[St]!==void 0&&(this.internal.languageSettings.languageCode=St,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Vt=E.API,Gt=Vt.getCharWidthsArray=function(St,e){var _e,tn,un=(e=e||{}).font||this.internal.getFont(),gn=e.fontSize||this.internal.getFontSize(),vn=e.charSpace||this.internal.getCharSpace(),fn=e.widths?e.widths:un.metadata.Unicode.widths,en=fn.fof?fn.fof:1,on=e.kerning?e.kerning:un.metadata.Unicode.kerning,dn=on.fof?on.fof:1,rn=e.doKerning!==!1,an=0,nn=St.length,cn=0,hn=fn[0]||en,sn=[];for(_e=0;_e<nn;_e++)tn=St.charCodeAt(_e),typeof un.metadata.widthOfString=="function"?sn.push((un.metadata.widthOfGlyph(un.metadata.characterToGlyph(tn))+vn*(1e3/gn)||0)/1e3):(an=rn&&_typeof(on[tn])==="object"&&!isNaN(parseInt(on[tn][cn],10))?on[tn][cn]/dn:0,sn.push((fn[tn]||hn)/en+an)),cn=tn;return sn},Yt=Vt.getStringUnitWidth=function(St,e){var _e=(e=e||{}).fontSize||this.internal.getFontSize(),tn=e.font||this.internal.getFont(),un=e.charSpace||this.internal.getCharSpace();return Vt.processArabic&&(St=Vt.processArabic(St)),typeof tn.metadata.widthOfString=="function"?tn.metadata.widthOfString(St,_e,un)/_e:Gt.apply(this,arguments).reduce(function(gn,vn){return gn+vn},0)},Jt=function(St,e,_e,tn){for(var un=[],gn=0,vn=St.length,fn=0;gn!==vn&&fn+e[gn]<_e;)fn+=e[gn],gn++;un.push(St.slice(0,gn));var en=gn;for(fn=0;gn!==vn;)fn+e[gn]>tn&&(un.push(St.slice(en,gn)),fn=0,en=gn),fn+=e[gn],gn++;return en!==gn&&un.push(St.slice(en,gn)),un},Xt=function(St,e,_e){_e||(_e={});var tn,un,gn,vn,fn,en,on,dn=[],rn=[dn],an=_e.textIndent||0,nn=0,cn=0,hn=St.split(" "),sn=Gt.apply(this,[" ",_e])[0];if(en=_e.lineIndent===-1?hn[0].length+2:_e.lineIndent||0){var pn=Array(en).join(" "),mn=[];hn.map(function(_n){(_n=_n.split(/\s*\n/)).length>1?mn=mn.concat(_n.map(function(xn,Sn){return(Sn&&xn.length?`
`:"")+xn})):mn.push(_n[0])}),hn=mn,en=Yt.apply(this,[pn,_e])}for(gn=0,vn=hn.length;gn<vn;gn++){var yn=0;if(tn=hn[gn],en&&tn[0]==`
`&&(tn=tn.substr(1),yn=1),an+nn+(cn=(un=Gt.apply(this,[tn,_e])).reduce(function(_n,xn){return _n+xn},0))>e||yn){if(cn>e){for(fn=Jt.apply(this,[tn,un,e-(an+nn),e]),dn.push(fn.shift()),dn=[fn.pop()];fn.length;)rn.push([fn.shift()]);cn=un.slice(tn.length-(dn[0]?dn[0].length:0)).reduce(function(_n,xn){return _n+xn},0)}else dn=[tn];rn.push(dn),an=cn+en,nn=sn}else dn.push(tn),an+=nn+cn,nn=sn}return on=en?function(_n,xn){return(xn?pn:"")+_n.join(" ")}:function(_n){return _n.join(" ")},rn.map(on)},Vt.splitTextToSize=function(St,e,_e){var tn,un=(_e=_e||{}).fontSize||this.internal.getFontSize(),gn=function(dn){if(dn.widths&&dn.kerning)return{widths:dn.widths,kerning:dn.kerning};var rn=this.internal.getFont(dn.fontName,dn.fontStyle);return rn.metadata.Unicode?{widths:rn.metadata.Unicode.widths||{0:1},kerning:rn.metadata.Unicode.kerning||{}}:{font:rn.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,_e);tn=Array.isArray(St)?St:String(St).split(/\r?\n/);var vn=1*this.internal.scaleFactor*e/un;gn.textIndent=_e.textIndent?1*_e.textIndent*this.internal.scaleFactor/un:0,gn.lineIndent=_e.lineIndent;var fn,en,on=[];for(fn=0,en=tn.length;fn<en;fn++)on=on.concat(Xt.apply(this,[tn[fn],vn,gn]));return on},function(St){St.__fontmetrics__=St.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",_e={},tn={},un=0;un<e.length;un++)_e[e[un]]="0123456789abcdef"[un],tn["0123456789abcdef"[un]]=e[un];var gn=function(rn){return"0x"+parseInt(rn,10).toString(16)},vn=St.__fontmetrics__.compress=function(rn){var an,nn,cn,hn,sn=["{"];for(var pn in rn){if(an=rn[pn],isNaN(parseInt(pn,10))?nn="'"+pn+"'":(pn=parseInt(pn,10),nn=(nn=gn(pn).slice(2)).slice(0,-1)+tn[nn.slice(-1)]),typeof an=="number")an<0?(cn=gn(an).slice(3),hn="-"):(cn=gn(an).slice(2),hn=""),cn=hn+cn.slice(0,-1)+tn[cn.slice(-1)];else{if(_typeof(an)!=="object")throw new Error("Don't know what to do with value type "+_typeof(an)+".");cn=vn(an)}sn.push(nn+cn)}return sn.push("}"),sn.join("")},fn=St.__fontmetrics__.uncompress=function(rn){if(typeof rn!="string")throw new Error("Invalid argument passed to uncompress.");for(var an,nn,cn,hn,sn={},pn=1,mn=sn,yn=[],_n="",xn="",Sn=rn.length-1,Pn=1;Pn<Sn;Pn+=1)(hn=rn[Pn])=="'"?an?(cn=an.join(""),an=void 0):an=[]:an?an.push(hn):hn=="{"?(yn.push([mn,cn]),mn={},cn=void 0):hn=="}"?((nn=yn.pop())[0][nn[1]]=mn,cn=void 0,mn=nn[0]):hn=="-"?pn=-1:cn===void 0?_e.hasOwnProperty(hn)?(_n+=_e[hn],cn=parseInt(_n,16)*pn,pn=1,_n=""):_n+=hn:_e.hasOwnProperty(hn)?(xn+=_e[hn],mn[cn]=parseInt(xn,16)*pn,pn=1,cn=void 0,xn=""):xn+=hn;return sn},en={codePages:["WinAnsiEncoding"],WinAnsiEncoding:fn("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},on={Unicode:{Courier:en,"Courier-Bold":en,"Courier-BoldOblique":en,"Courier-Oblique":en,Helvetica:en,"Helvetica-Bold":en,"Helvetica-BoldOblique":en,"Helvetica-Oblique":en,"Times-Roman":en,"Times-Bold":en,"Times-BoldItalic":en,"Times-Italic":en}},dn={Unicode:{"Courier-Oblique":fn("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":fn("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":fn("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:fn("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":fn("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":fn("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:fn("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:fn("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":fn("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:fn("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":fn("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":fn("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":fn("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":fn("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};St.events.push(["addFont",function(rn){var an=rn.font,nn=dn.Unicode[an.postScriptName];nn&&(an.metadata.Unicode={},an.metadata.Unicode.widths=nn.widths,an.metadata.Unicode.kerning=nn.kerning);var cn=on.Unicode[an.postScriptName];cn&&(an.metadata.Unicode.encoding=cn,an.encoding=cn.codePages[0])}])}(E.API),function(St){var e=function(_e){for(var tn=_e.length,un=new Uint8Array(tn),gn=0;gn<tn;gn++)un[gn]=_e.charCodeAt(gn);return un};St.API.events.push(["addFont",function(_e){var tn=void 0,un=_e.font,gn=_e.instance;if(!un.isStandardFont){if(gn===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+un.postScriptName+"').");if(typeof(tn=gn.existsFileInVFS(un.postScriptName)===!1?gn.loadFile(un.postScriptName):gn.getFileFromVFS(un.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+un.postScriptName+"').");(function(vn,fn){fn=/^\x00\x01\x00\x00/.test(fn)?e(fn):e(u(fn)),vn.metadata=St.API.TTFFont.open(fn),vn.metadata.Unicode=vn.metadata.Unicode||{encoding:{},kerning:{},widths:[]},vn.metadata.glyIdsUsed=[0]})(un,tn)}}])}(E),function(St){function e(){return(n.canvg?Promise.resolve(n.canvg):__vitePreload(()=>import("./index.es.44388b6b.js"),[])).catch(function(_e){return Promise.reject(new Error("Could not load canvg: "+_e))}).then(function(_e){return _e.default?_e.default:_e})}E.API.addSvgAsImage=function(_e,tn,un,gn,vn,fn,en,on){if(isNaN(tn)||isNaN(un))throw a.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(gn)||isNaN(vn))throw a.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var dn=document.createElement("canvas");dn.width=gn,dn.height=vn;var rn=dn.getContext("2d");rn.fillStyle="#fff",rn.fillRect(0,0,dn.width,dn.height);var an={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},nn=this;return e().then(function(cn){return cn.fromString(rn,_e,an)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(cn){return cn.render(an)}).then(function(){nn.addImage(dn.toDataURL("image/jpeg",1),tn,un,gn,vn,en,on)})}}(),E.API.putTotalPages=function(St){var e,_e=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(St,"g"),_e=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(St,this.internal.getFont()),"g"),_e=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var tn=1;tn<=this.internal.getNumberOfPages();tn++)for(var un=0;un<this.internal.pages[tn].length;un++)this.internal.pages[tn][un]=this.internal.pages[tn][un].replace(e,_e);return this},E.API.viewerPreferences=function(St,e){var _e;St=St||{},e=e||!1;var tn,un,gn,vn={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},fn=Object.keys(vn),en=[],on=0,dn=0,rn=0;function an(cn,hn){var sn,pn=!1;for(sn=0;sn<cn.length;sn+=1)cn[sn]===hn&&(pn=!0);return pn}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(vn)),this.internal.viewerpreferences.isSubscribed=!1),_e=this.internal.viewerpreferences.configuration,St==="reset"||e===!0){var nn=fn.length;for(rn=0;rn<nn;rn+=1)_e[fn[rn]].value=_e[fn[rn]].defaultValue,_e[fn[rn]].explicitSet=!1}if(_typeof(St)==="object"){for(un in St)if(gn=St[un],an(fn,un)&&gn!==void 0){if(_e[un].type==="boolean"&&typeof gn=="boolean")_e[un].value=gn;else if(_e[un].type==="name"&&an(_e[un].valueSet,gn))_e[un].value=gn;else if(_e[un].type==="integer"&&Number.isInteger(gn))_e[un].value=gn;else if(_e[un].type==="array"){for(on=0;on<gn.length;on+=1)if(tn=!0,gn[on].length===1&&typeof gn[on][0]=="number")en.push(String(gn[on]-1));else if(gn[on].length>1){for(dn=0;dn<gn[on].length;dn+=1)typeof gn[on][dn]!="number"&&(tn=!1);tn===!0&&en.push([gn[on][0]-1,gn[on][1]-1].join(" "))}_e[un].value="["+en.join(" ")+"]"}else _e[un].value=_e[un].defaultValue;_e[un].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var cn,hn=[];for(cn in _e)_e[cn].explicitSet===!0&&(_e[cn].type==="name"?hn.push("/"+cn+" /"+_e[cn].value):hn.push("/"+cn+" "+_e[cn].value));hn.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+hn.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=_e,this},function(St){var e=function(){var tn='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',un=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),gn=unescape(encodeURIComponent(tn)),vn=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),fn=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),en=unescape(encodeURIComponent("</x:xmpmeta>")),on=gn.length+vn.length+fn.length+un.length+en.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+on+" >>"),this.internal.write("stream"),this.internal.write(un+gn+vn+fn+en),this.internal.write("endstream"),this.internal.write("endobj")},_e=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};St.addMetadata=function(tn,un){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:tn,namespaceuri:un||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",_e),this.internal.events.subscribe("postPutResources",e)),this}}(E.API),function(St){var e=St.API,_e=e.pdfEscape16=function(gn,vn){for(var fn,en=vn.metadata.Unicode.widths,on=["","0","00","000","0000"],dn=[""],rn=0,an=gn.length;rn<an;++rn){if(fn=vn.metadata.characterToGlyph(gn.charCodeAt(rn)),vn.metadata.glyIdsUsed.push(fn),vn.metadata.toUnicode[fn]=gn.charCodeAt(rn),en.indexOf(fn)==-1&&(en.push(fn),en.push([parseInt(vn.metadata.widthOfGlyph(fn),10)])),fn=="0")return dn.join("");fn=fn.toString(16),dn.push(on[4-fn.length],fn)}return dn.join("")},tn=function(gn){var vn,fn,en,on,dn,rn,an;for(dn=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,en=[],rn=0,an=(fn=Object.keys(gn).sort(function(nn,cn){return nn-cn})).length;rn<an;rn++)vn=fn[rn],en.length>=100&&(dn+=`
`+en.length+` beginbfchar
`+en.join(`
`)+`
endbfchar`,en=[]),gn[vn]!==void 0&&gn[vn]!==null&&typeof gn[vn].toString=="function"&&(on=("0000"+gn[vn].toString(16)).slice(-4),vn=("0000"+(+vn).toString(16)).slice(-4),en.push("<"+vn+"><"+on+">"));return en.length&&(dn+=`
`+en.length+` beginbfchar
`+en.join(`
`)+`
endbfchar
`),dn+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(gn){(function(vn){var fn=vn.font,en=vn.out,on=vn.newObject,dn=vn.putStream;if(fn.metadata instanceof St.API.TTFFont&&fn.encoding==="Identity-H"){for(var rn=fn.metadata.Unicode.widths,an=fn.metadata.subset.encode(fn.metadata.glyIdsUsed,1),nn="",cn=0;cn<an.length;cn++)nn+=String.fromCharCode(an[cn]);var hn=on();dn({data:nn,addLength1:!0,objectId:hn}),en("endobj");var sn=on();dn({data:tn(fn.metadata.toUnicode),addLength1:!0,objectId:sn}),en("endobj");var pn=on();en("<<"),en("/Type /FontDescriptor"),en("/FontName /"+F(fn.fontName)),en("/FontFile2 "+hn+" 0 R"),en("/FontBBox "+St.API.PDFObject.convert(fn.metadata.bbox)),en("/Flags "+fn.metadata.flags),en("/StemV "+fn.metadata.stemV),en("/ItalicAngle "+fn.metadata.italicAngle),en("/Ascent "+fn.metadata.ascender),en("/Descent "+fn.metadata.decender),en("/CapHeight "+fn.metadata.capHeight),en(">>"),en("endobj");var mn=on();en("<<"),en("/Type /Font"),en("/BaseFont /"+F(fn.fontName)),en("/FontDescriptor "+pn+" 0 R"),en("/W "+St.API.PDFObject.convert(rn)),en("/CIDToGIDMap /Identity"),en("/DW 1000"),en("/Subtype /CIDFontType2"),en("/CIDSystemInfo"),en("<<"),en("/Supplement 0"),en("/Registry (Adobe)"),en("/Ordering ("+fn.encoding+")"),en(">>"),en(">>"),en("endobj"),fn.objectNumber=on(),en("<<"),en("/Type /Font"),en("/Subtype /Type0"),en("/ToUnicode "+sn+" 0 R"),en("/BaseFont /"+F(fn.fontName)),en("/Encoding /"+fn.encoding),en("/DescendantFonts ["+mn+" 0 R]"),en(">>"),en("endobj"),fn.isAlreadyPutted=!0}})(gn)}]),e.events.push(["putFont",function(gn){(function(vn){var fn=vn.font,en=vn.out,on=vn.newObject,dn=vn.putStream;if(fn.metadata instanceof St.API.TTFFont&&fn.encoding==="WinAnsiEncoding"){for(var rn=fn.metadata.rawData,an="",nn=0;nn<rn.length;nn++)an+=String.fromCharCode(rn[nn]);var cn=on();dn({data:an,addLength1:!0,objectId:cn}),en("endobj");var hn=on();dn({data:tn(fn.metadata.toUnicode),addLength1:!0,objectId:hn}),en("endobj");var sn=on();en("<<"),en("/Descent "+fn.metadata.decender),en("/CapHeight "+fn.metadata.capHeight),en("/StemV "+fn.metadata.stemV),en("/Type /FontDescriptor"),en("/FontFile2 "+cn+" 0 R"),en("/Flags 96"),en("/FontBBox "+St.API.PDFObject.convert(fn.metadata.bbox)),en("/FontName /"+F(fn.fontName)),en("/ItalicAngle "+fn.metadata.italicAngle),en("/Ascent "+fn.metadata.ascender),en(">>"),en("endobj"),fn.objectNumber=on();for(var pn=0;pn<fn.metadata.hmtx.widths.length;pn++)fn.metadata.hmtx.widths[pn]=parseInt(fn.metadata.hmtx.widths[pn]*(1e3/fn.metadata.head.unitsPerEm));en("<</Subtype/TrueType/Type/Font/ToUnicode "+hn+" 0 R/BaseFont/"+F(fn.fontName)+"/FontDescriptor "+sn+" 0 R/Encoding/"+fn.encoding+" /FirstChar 29 /LastChar 255 /Widths "+St.API.PDFObject.convert(fn.metadata.hmtx.widths)+">>"),en("endobj"),fn.isAlreadyPutted=!0}})(gn)}]);var un=function(gn){var vn,fn=gn.text||"",en=gn.x,on=gn.y,dn=gn.options||{},rn=gn.mutex||{},an=rn.pdfEscape,nn=rn.activeFontKey,cn=rn.fonts,hn=nn,sn="",pn=0,mn="",yn=cn[hn].encoding;if(cn[hn].encoding!=="Identity-H")return{text:fn,x:en,y:on,options:dn,mutex:rn};for(mn=fn,hn=nn,Array.isArray(fn)&&(mn=fn[0]),pn=0;pn<mn.length;pn+=1)cn[hn].metadata.hasOwnProperty("cmap")&&(vn=cn[hn].metadata.cmap.unicode.codeMap[mn[pn].charCodeAt(0)]),vn||mn[pn].charCodeAt(0)<256&&cn[hn].metadata.hasOwnProperty("Unicode")?sn+=mn[pn]:sn+="";var _n="";return parseInt(hn.slice(1))<14||yn==="WinAnsiEncoding"?_n=an(sn,hn).split("").map(function(xn){return xn.charCodeAt(0).toString(16)}).join(""):yn==="Identity-H"&&(_n=_e(sn,cn[hn])),rn.isHex=!0,{text:_n,x:en,y:on,options:dn,mutex:rn}};e.events.push(["postProcessText",function(gn){var vn=gn.text||"",fn=[],en={text:vn,x:gn.x,y:gn.y,options:gn.options,mutex:gn.mutex};if(Array.isArray(vn)){var on=0;for(on=0;on<vn.length;on+=1)Array.isArray(vn[on])&&vn[on].length===3?fn.push([un(Object.assign({},en,{text:vn[on][0]})).text,vn[on][1],vn[on][2]]):fn.push(un(Object.assign({},en,{text:vn[on]})).text);gn.text=fn}else gn.text=un(Object.assign({},en,{text:vn})).text}])}(E),function(St){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};St.existsFileInVFS=function(_e){return e.call(this),this.internal.vFS[_e]!==void 0},St.addFileToVFS=function(_e,tn){return e.call(this),this.internal.vFS[_e]=tn,this},St.getFileFromVFS=function(_e){return e.call(this),this.internal.vFS[_e]!==void 0?this.internal.vFS[_e]:null}}(E.API),function(St){St.__bidiEngine__=St.prototype.__bidiEngine__=function(tn){var un,gn,vn,fn,en,on,dn,rn=e,an=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],nn=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],cn={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},hn={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},sn=["(",")","(","<",">","<","[","]","[","{","}","{","\xAB","\xBB","\xAB","\u2039","\u203A","\u2039","\u2045","\u2046","\u2045","\u207D","\u207E","\u207D","\u208D","\u208E","\u208D","\u2264","\u2265","\u2264","\u2329","\u232A","\u2329","\uFE59","\uFE5A","\uFE59","\uFE5B","\uFE5C","\uFE5B","\uFE5D","\uFE5E","\uFE5D","\uFE64","\uFE65","\uFE64"],pn=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),mn=!1,yn=0;this.__bidiEngine__={};var _n=function(Mn){var Hn=Mn.charCodeAt(),Qn=Hn>>8,Kn=hn[Qn];return Kn!==void 0?rn[256*Kn+(255&Hn)]:Qn===252||Qn===253?"AL":pn.test(Qn)?"L":Qn===8?"R":"N"},xn=function(Mn){for(var Hn,Qn=0;Qn<Mn.length;Qn++){if((Hn=_n(Mn.charAt(Qn)))==="L")return!1;if(Hn==="R")return!0}return!1},Sn=function(Mn,Hn,Qn,Kn){var nr,Zn,ir,Jn,Vn=Hn[Kn];switch(Vn){case"L":case"R":mn=!1;break;case"N":case"AN":break;case"EN":mn&&(Vn="AN");break;case"AL":mn=!0,Vn="R";break;case"WS":Vn="N";break;case"CS":Kn<1||Kn+1>=Hn.length||(nr=Qn[Kn-1])!=="EN"&&nr!=="AN"||(Zn=Hn[Kn+1])!=="EN"&&Zn!=="AN"?Vn="N":mn&&(Zn="AN"),Vn=Zn===nr?Zn:"N";break;case"ES":Vn=(nr=Kn>0?Qn[Kn-1]:"B")==="EN"&&Kn+1<Hn.length&&Hn[Kn+1]==="EN"?"EN":"N";break;case"ET":if(Kn>0&&Qn[Kn-1]==="EN"){Vn="EN";break}if(mn){Vn="N";break}for(ir=Kn+1,Jn=Hn.length;ir<Jn&&Hn[ir]==="ET";)ir++;Vn=ir<Jn&&Hn[ir]==="EN"?"EN":"N";break;case"NSM":if(vn&&!fn){for(Jn=Hn.length,ir=Kn+1;ir<Jn&&Hn[ir]==="NSM";)ir++;if(ir<Jn){var Xn=Mn[Kn],Yn=Xn>=1425&&Xn<=2303||Xn===64286;if(nr=Hn[ir],Yn&&(nr==="R"||nr==="AL")){Vn="R";break}}}Vn=Kn<1||(nr=Hn[Kn-1])==="B"?"N":Qn[Kn-1];break;case"B":mn=!1,un=!0,Vn=yn;break;case"S":gn=!0,Vn="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":mn=!1;break;case"BN":Vn="N"}return Vn},Pn=function(Mn,Hn,Qn){var Kn=Mn.split("");return Qn&&Ln(Kn,Qn,{hiLevel:yn}),Kn.reverse(),Hn&&Hn.reverse(),Kn.join("")},Ln=function(Mn,Hn,Qn){var Kn,nr,Zn,ir,Jn,Vn=-1,Xn=Mn.length,Yn=0,Tn=[],An=yn?nn:an,wn=[];for(mn=!1,un=!1,gn=!1,nr=0;nr<Xn;nr++)wn[nr]=_n(Mn[nr]);for(Zn=0;Zn<Xn;Zn++){if(Jn=Yn,Tn[Zn]=Sn(Mn,wn,Tn,Zn),Kn=240&(Yn=An[Jn][cn[Tn[Zn]]]),Yn&=15,Hn[Zn]=ir=An[Yn][5],Kn>0)if(Kn===16){for(nr=Vn;nr<Zn;nr++)Hn[nr]=1;Vn=-1}else Vn=-1;if(An[Yn][6])Vn===-1&&(Vn=Zn);else if(Vn>-1){for(nr=Vn;nr<Zn;nr++)Hn[nr]=ir;Vn=-1}wn[Zn]==="B"&&(Hn[Zn]=0),Qn.hiLevel|=ir}gn&&function(En,Nn,Fn){for(var Un=0;Un<Fn;Un++)if(En[Un]==="S"){Nn[Un]=yn;for(var Gn=Un-1;Gn>=0&&En[Gn]==="WS";Gn--)Nn[Gn]=yn}}(wn,Hn,Xn)},In=function(Mn,Hn,Qn,Kn,nr){if(!(nr.hiLevel<Mn)){if(Mn===1&&yn===1&&!un)return Hn.reverse(),void(Qn&&Qn.reverse());for(var Zn,ir,Jn,Vn,Xn=Hn.length,Yn=0;Yn<Xn;){if(Kn[Yn]>=Mn){for(Jn=Yn+1;Jn<Xn&&Kn[Jn]>=Mn;)Jn++;for(Vn=Yn,ir=Jn-1;Vn<ir;Vn++,ir--)Zn=Hn[Vn],Hn[Vn]=Hn[ir],Hn[ir]=Zn,Qn&&(Zn=Qn[Vn],Qn[Vn]=Qn[ir],Qn[ir]=Zn);Yn=Jn}Yn++}}},Rn=function(Mn,Hn,Qn){var Kn=Mn.split(""),nr={hiLevel:yn};return Qn||(Qn=[]),Ln(Kn,Qn,nr),function(Zn,ir,Jn){if(Jn.hiLevel!==0&&dn)for(var Vn,Xn=0;Xn<Zn.length;Xn++)ir[Xn]===1&&(Vn=sn.indexOf(Zn[Xn]))>=0&&(Zn[Xn]=sn[Vn+1])}(Kn,Qn,nr),In(2,Kn,Hn,Qn,nr),In(1,Kn,Hn,Qn,nr),Kn.join("")};return this.__bidiEngine__.doBidiReorder=function(Mn,Hn,Qn){if(function(nr,Zn){if(Zn)for(var ir=0;ir<nr.length;ir++)Zn[ir]=ir;fn===void 0&&(fn=xn(nr)),on===void 0&&(on=xn(nr))}(Mn,Hn),vn||!en||on)if(vn&&en&&fn^on)yn=fn?1:0,Mn=Pn(Mn,Hn,Qn);else if(!vn&&en&&on)yn=fn?1:0,Mn=Rn(Mn,Hn,Qn),Mn=Pn(Mn,Hn);else if(!vn||fn||en||on){if(vn&&!en&&fn^on)Mn=Pn(Mn,Hn),fn?(yn=0,Mn=Rn(Mn,Hn,Qn)):(yn=1,Mn=Rn(Mn,Hn,Qn),Mn=Pn(Mn,Hn));else if(vn&&fn&&!en&&on)yn=1,Mn=Rn(Mn,Hn,Qn),Mn=Pn(Mn,Hn);else if(!vn&&!en&&fn^on){var Kn=dn;fn?(yn=1,Mn=Rn(Mn,Hn,Qn),yn=0,dn=!1,Mn=Rn(Mn,Hn,Qn),dn=Kn):(yn=0,Mn=Rn(Mn,Hn,Qn),Mn=Pn(Mn,Hn),yn=1,dn=!1,Mn=Rn(Mn,Hn,Qn),dn=Kn,Mn=Pn(Mn,Hn))}}else yn=0,Mn=Rn(Mn,Hn,Qn);else yn=fn?1:0,Mn=Rn(Mn,Hn,Qn);return Mn},this.__bidiEngine__.setOptions=function(Mn){Mn&&(vn=Mn.isInputVisual,en=Mn.isOutputVisual,fn=Mn.isInputRtl,on=Mn.isOutputRtl,dn=Mn.isSymmetricSwapping)},this.__bidiEngine__.setOptions(tn),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],_e=new St.__bidiEngine__({isInputVisual:!0});St.API.events.push(["postProcessText",function(tn){var un=tn.text,gn=(tn.x,tn.y,tn.options||{}),vn=(tn.mutex,gn.lang,[]);if(gn.isInputVisual=typeof gn.isInputVisual!="boolean"||gn.isInputVisual,_e.setOptions(gn),Object.prototype.toString.call(un)==="[object Array]"){var fn=0;for(vn=[],fn=0;fn<un.length;fn+=1)Object.prototype.toString.call(un[fn])==="[object Array]"?vn.push([_e.doBidiReorder(un[fn][0]),un[fn][1],un[fn][2]]):vn.push([_e.doBidiReorder(un[fn])]);tn.text=vn}else tn.text=_e.doBidiReorder(un);_e.setOptions({isInputVisual:!0})}])}(E),E.API.TTFFont=function(){function St(e){var _e;if(this.rawData=e,_e=this.contents=new ne(e),this.contents.pos=4,_e.readString(4)==="ttcf")throw new Error("TTCF not supported.");_e.pos=0,this.parse(),this.subset=new Le(this),this.registerTTF()}return St.open=function(e){return new St(e)},St.prototype.parse=function(){return this.directory=new ie(this.contents),this.head=new se(this),this.name=new pe(this),this.cmap=new ue(this),this.toUnicode={},this.hhea=new he(this),this.maxp=new ge(this),this.hmtx=new me(this),this.post=new fe(this),this.os2=new le(this),this.loca=new Ne(this),this.glyf=new be(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},St.prototype.registerTTF=function(){var e,_e,tn,un,gn;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var vn,fn,en,on;for(on=[],vn=0,fn=(en=this.bbox).length;vn<fn;vn++)e=en[vn],on.push(Math.round(e*this.scaleFactor));return on}.call(this),this.stemV=0,this.post.exists?(tn=255&(un=this.post.italic_angle),(32768&(_e=un>>16))!=0&&(_e=-(1+(65535^_e))),this.italicAngle=+(_e+"."+tn)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(gn=this.familyClass)===1||gn===2||gn===3||gn===4||gn===5||gn===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},St.prototype.characterToGlyph=function(e){var _e;return((_e=this.cmap.unicode)!=null?_e.codeMap[e]:void 0)||0},St.prototype.widthOfGlyph=function(e){var _e;return _e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*_e},St.prototype.widthOfString=function(e,_e,tn){var un,gn,vn,fn;for(vn=0,gn=0,fn=(e=""+e).length;0<=fn?gn<fn:gn>fn;gn=0<=fn?++gn:--gn)un=e.charCodeAt(gn),vn+=this.widthOfGlyph(this.characterToGlyph(un))+tn*(1e3/_e)||0;return vn*(_e/1e3)},St.prototype.lineHeight=function(e,_e){var tn;return _e==null&&(_e=!1),tn=_e?this.lineGap:0,(this.ascender+tn-this.decender)/1e3*e},St}();var re,ne=function(){function St(e){this.data=e!=null?e:[],this.pos=0,this.length=this.data.length}return St.prototype.readByte=function(){return this.data[this.pos++]},St.prototype.writeByte=function(e){return this.data[this.pos++]=e},St.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},St.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},St.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},St.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},St.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},St.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},St.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},St.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},St.prototype.readString=function(e){var _e,tn;for(tn=[],_e=0;0<=e?_e<e:_e>e;_e=0<=e?++_e:--_e)tn[_e]=String.fromCharCode(this.readByte());return tn.join("")},St.prototype.writeString=function(e){var _e,tn,un;for(un=[],_e=0,tn=e.length;0<=tn?_e<tn:_e>tn;_e=0<=tn?++_e:--_e)un.push(this.writeByte(e.charCodeAt(_e)));return un},St.prototype.readShort=function(){return this.readInt16()},St.prototype.writeShort=function(e){return this.writeInt16(e)},St.prototype.readLongLong=function(){var e,_e,tn,un,gn,vn,fn,en;return e=this.readByte(),_e=this.readByte(),tn=this.readByte(),un=this.readByte(),gn=this.readByte(),vn=this.readByte(),fn=this.readByte(),en=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^_e)+1099511627776*(255^tn)+4294967296*(255^un)+16777216*(255^gn)+65536*(255^vn)+256*(255^fn)+(255^en)+1):72057594037927940*e+281474976710656*_e+1099511627776*tn+4294967296*un+16777216*gn+65536*vn+256*fn+en},St.prototype.writeLongLong=function(e){var _e,tn;return _e=Math.floor(e/4294967296),tn=4294967295&e,this.writeByte(_e>>24&255),this.writeByte(_e>>16&255),this.writeByte(_e>>8&255),this.writeByte(255&_e),this.writeByte(tn>>24&255),this.writeByte(tn>>16&255),this.writeByte(tn>>8&255),this.writeByte(255&tn)},St.prototype.readInt=function(){return this.readInt32()},St.prototype.writeInt=function(e){return this.writeInt32(e)},St.prototype.read=function(e){var _e,tn;for(_e=[],tn=0;0<=e?tn<e:tn>e;tn=0<=e?++tn:--tn)_e.push(this.readByte());return _e},St.prototype.write=function(e){var _e,tn,un,gn;for(gn=[],tn=0,un=e.length;tn<un;tn++)_e=e[tn],gn.push(this.writeByte(_e));return gn},St}(),ie=function(){var St;function e(_e){var tn,un,gn;for(this.scalarType=_e.readInt(),this.tableCount=_e.readShort(),this.searchRange=_e.readShort(),this.entrySelector=_e.readShort(),this.rangeShift=_e.readShort(),this.tables={},un=0,gn=this.tableCount;0<=gn?un<gn:un>gn;un=0<=gn?++un:--un)tn={tag:_e.readString(4),checksum:_e.readInt(),offset:_e.readInt(),length:_e.readInt()},this.tables[tn.tag]=tn}return e.prototype.encode=function(_e){var tn,un,gn,vn,fn,en,on,dn,rn,an,nn,cn,hn;for(hn in nn=Object.keys(_e).length,en=Math.log(2),rn=16*Math.floor(Math.log(nn)/en),vn=Math.floor(rn/en),dn=16*nn-rn,(un=new ne).writeInt(this.scalarType),un.writeShort(nn),un.writeShort(rn),un.writeShort(vn),un.writeShort(dn),gn=16*nn,on=un.pos+gn,fn=null,cn=[],_e)for(an=_e[hn],un.writeString(hn),un.writeInt(St(an)),un.writeInt(on),un.writeInt(an.length),cn=cn.concat(an),hn==="head"&&(fn=on),on+=an.length;on%4;)cn.push(0),on++;return un.write(cn),tn=2981146554-St(un.data),un.pos=fn+8,un.writeUInt32(tn),un.data},St=function(_e){var tn,un,gn,vn;for(_e=ve.call(_e);_e.length%4;)_e.push(0);for(gn=new ne(_e),un=0,tn=0,vn=_e.length;tn<vn;tn=tn+=4)un+=gn.readUInt32();return 4294967295&un},e}(),ae={}.hasOwnProperty,oe=function(St,e){for(var _e in e)ae.call(e,_e)&&(St[_e]=e[_e]);function tn(){this.constructor=St}return tn.prototype=e.prototype,St.prototype=new tn,St.__super__=e.prototype,St};re=function(){function St(e){var _e;this.file=e,_e=this.file.directory.tables[this.tag],this.exists=!!_e,_e&&(this.offset=_e.offset,this.length=_e.length,this.parse(this.file.contents))}return St.prototype.parse=function(){},St.prototype.encode=function(){},St.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},St}();var se=function(St){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="head",e.prototype.parse=function(_e){return _e.pos=this.offset,this.version=_e.readInt(),this.revision=_e.readInt(),this.checkSumAdjustment=_e.readInt(),this.magicNumber=_e.readInt(),this.flags=_e.readShort(),this.unitsPerEm=_e.readShort(),this.created=_e.readLongLong(),this.modified=_e.readLongLong(),this.xMin=_e.readShort(),this.yMin=_e.readShort(),this.xMax=_e.readShort(),this.yMax=_e.readShort(),this.macStyle=_e.readShort(),this.lowestRecPPEM=_e.readShort(),this.fontDirectionHint=_e.readShort(),this.indexToLocFormat=_e.readShort(),this.glyphDataFormat=_e.readShort()},e.prototype.encode=function(_e){var tn;return(tn=new ne).writeInt(this.version),tn.writeInt(this.revision),tn.writeInt(this.checkSumAdjustment),tn.writeInt(this.magicNumber),tn.writeShort(this.flags),tn.writeShort(this.unitsPerEm),tn.writeLongLong(this.created),tn.writeLongLong(this.modified),tn.writeShort(this.xMin),tn.writeShort(this.yMin),tn.writeShort(this.xMax),tn.writeShort(this.yMax),tn.writeShort(this.macStyle),tn.writeShort(this.lowestRecPPEM),tn.writeShort(this.fontDirectionHint),tn.writeShort(_e),tn.writeShort(this.glyphDataFormat),tn.data},e}(),ce=function(){function St(e,_e){var tn,un,gn,vn,fn,en,on,dn,rn,an,nn,cn,hn,sn,pn,mn,yn;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=_e+e.readInt(),rn=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(en=0;en<256;++en)this.codeMap[en]=e.readByte();break;case 4:for(nn=e.readUInt16(),an=nn/2,e.pos+=6,gn=function(){var _n,xn;for(xn=[],en=_n=0;0<=an?_n<an:_n>an;en=0<=an?++_n:--_n)xn.push(e.readUInt16());return xn}(),e.pos+=2,hn=function(){var _n,xn;for(xn=[],en=_n=0;0<=an?_n<an:_n>an;en=0<=an?++_n:--_n)xn.push(e.readUInt16());return xn}(),on=function(){var _n,xn;for(xn=[],en=_n=0;0<=an?_n<an:_n>an;en=0<=an?++_n:--_n)xn.push(e.readUInt16());return xn}(),dn=function(){var _n,xn;for(xn=[],en=_n=0;0<=an?_n<an:_n>an;en=0<=an?++_n:--_n)xn.push(e.readUInt16());return xn}(),un=(this.length-e.pos+this.offset)/2,fn=function(){var _n,xn;for(xn=[],en=_n=0;0<=un?_n<un:_n>un;en=0<=un?++_n:--_n)xn.push(e.readUInt16());return xn}(),en=pn=0,yn=gn.length;pn<yn;en=++pn)for(sn=gn[en],tn=mn=cn=hn[en];cn<=sn?mn<=sn:mn>=sn;tn=cn<=sn?++mn:--mn)dn[en]===0?vn=tn+on[en]:(vn=fn[dn[en]/2+(tn-cn)-(an-en)]||0)!==0&&(vn+=on[en]),this.codeMap[tn]=65535&vn}e.pos=rn}return St.encode=function(e,_e){var tn,un,gn,vn,fn,en,on,dn,rn,an,nn,cn,hn,sn,pn,mn,yn,_n,xn,Sn,Pn,Ln,In,Rn,Mn,Hn,Qn,Kn,nr,Zn,ir,Jn,Vn,Xn,Yn,Tn,An,wn,En,Nn,Fn,Un,Gn,er,On,Bn;switch(Kn=new ne,vn=Object.keys(e).sort(function($n,qn){return $n-qn}),_e){case"macroman":for(hn=0,sn=function(){var $n=[];for(cn=0;cn<256;++cn)$n.push(0);return $n}(),mn={0:0},gn={},nr=0,Vn=vn.length;nr<Vn;nr++)mn[Gn=e[un=vn[nr]]]==null&&(mn[Gn]=++hn),gn[un]={old:e[un],new:mn[e[un]]},sn[un]=mn[e[un]];return Kn.writeUInt16(1),Kn.writeUInt16(0),Kn.writeUInt32(12),Kn.writeUInt16(0),Kn.writeUInt16(262),Kn.writeUInt16(0),Kn.write(sn),{charMap:gn,subtable:Kn.data,maxGlyphID:hn+1};case"unicode":for(Hn=[],rn=[],yn=0,mn={},tn={},pn=on=null,Zn=0,Xn=vn.length;Zn<Xn;Zn++)mn[xn=e[un=vn[Zn]]]==null&&(mn[xn]=++yn),tn[un]={old:xn,new:mn[xn]},fn=mn[xn]-un,pn!=null&&fn===on||(pn&&rn.push(pn),Hn.push(un),on=fn),pn=un;for(pn&&rn.push(pn),rn.push(65535),Hn.push(65535),Rn=2*(In=Hn.length),Ln=2*Math.pow(Math.log(In)/Math.LN2,2),an=Math.log(Ln/2)/Math.LN2,Pn=2*In-Ln,en=[],Sn=[],nn=[],cn=ir=0,Yn=Hn.length;ir<Yn;cn=++ir){if(Mn=Hn[cn],dn=rn[cn],Mn===65535){en.push(0),Sn.push(0);break}if(Mn-(Qn=tn[Mn].new)>=32768)for(en.push(0),Sn.push(2*(nn.length+In-cn)),un=Jn=Mn;Mn<=dn?Jn<=dn:Jn>=dn;un=Mn<=dn?++Jn:--Jn)nn.push(tn[un].new);else en.push(Qn-Mn),Sn.push(0)}for(Kn.writeUInt16(3),Kn.writeUInt16(1),Kn.writeUInt32(12),Kn.writeUInt16(4),Kn.writeUInt16(16+8*In+2*nn.length),Kn.writeUInt16(0),Kn.writeUInt16(Rn),Kn.writeUInt16(Ln),Kn.writeUInt16(an),Kn.writeUInt16(Pn),Fn=0,Tn=rn.length;Fn<Tn;Fn++)un=rn[Fn],Kn.writeUInt16(un);for(Kn.writeUInt16(0),Un=0,An=Hn.length;Un<An;Un++)un=Hn[Un],Kn.writeUInt16(un);for(er=0,wn=en.length;er<wn;er++)fn=en[er],Kn.writeUInt16(fn);for(On=0,En=Sn.length;On<En;On++)_n=Sn[On],Kn.writeUInt16(_n);for(Bn=0,Nn=nn.length;Bn<Nn;Bn++)hn=nn[Bn],Kn.writeUInt16(hn);return{charMap:tn,subtable:Kn.data,maxGlyphID:yn+1}}},St}(),ue=function(St){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="cmap",e.prototype.parse=function(_e){var tn,un,gn;for(_e.pos=this.offset,this.version=_e.readUInt16(),gn=_e.readUInt16(),this.tables=[],this.unicode=null,un=0;0<=gn?un<gn:un>gn;un=0<=gn?++un:--un)tn=new ce(_e,this.offset),this.tables.push(tn),tn.isUnicode&&this.unicode==null&&(this.unicode=tn);return!0},e.encode=function(_e,tn){var un,gn;return tn==null&&(tn="macroman"),un=ce.encode(_e,tn),(gn=new ne).writeUInt16(0),gn.writeUInt16(1),un.table=gn.data.concat(un.subtable),un},e}(),he=function(St){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="hhea",e.prototype.parse=function(_e){return _e.pos=this.offset,this.version=_e.readInt(),this.ascender=_e.readShort(),this.decender=_e.readShort(),this.lineGap=_e.readShort(),this.advanceWidthMax=_e.readShort(),this.minLeftSideBearing=_e.readShort(),this.minRightSideBearing=_e.readShort(),this.xMaxExtent=_e.readShort(),this.caretSlopeRise=_e.readShort(),this.caretSlopeRun=_e.readShort(),this.caretOffset=_e.readShort(),_e.pos+=8,this.metricDataFormat=_e.readShort(),this.numberOfMetrics=_e.readUInt16()},e}(),le=function(St){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="OS/2",e.prototype.parse=function(_e){if(_e.pos=this.offset,this.version=_e.readUInt16(),this.averageCharWidth=_e.readShort(),this.weightClass=_e.readUInt16(),this.widthClass=_e.readUInt16(),this.type=_e.readShort(),this.ySubscriptXSize=_e.readShort(),this.ySubscriptYSize=_e.readShort(),this.ySubscriptXOffset=_e.readShort(),this.ySubscriptYOffset=_e.readShort(),this.ySuperscriptXSize=_e.readShort(),this.ySuperscriptYSize=_e.readShort(),this.ySuperscriptXOffset=_e.readShort(),this.ySuperscriptYOffset=_e.readShort(),this.yStrikeoutSize=_e.readShort(),this.yStrikeoutPosition=_e.readShort(),this.familyClass=_e.readShort(),this.panose=function(){var tn,un;for(un=[],tn=0;tn<10;++tn)un.push(_e.readByte());return un}(),this.charRange=function(){var tn,un;for(un=[],tn=0;tn<4;++tn)un.push(_e.readInt());return un}(),this.vendorID=_e.readString(4),this.selection=_e.readShort(),this.firstCharIndex=_e.readShort(),this.lastCharIndex=_e.readShort(),this.version>0&&(this.ascent=_e.readShort(),this.descent=_e.readShort(),this.lineGap=_e.readShort(),this.winAscent=_e.readShort(),this.winDescent=_e.readShort(),this.codePageRange=function(){var tn,un;for(un=[],tn=0;tn<2;tn=++tn)un.push(_e.readInt());return un}(),this.version>1))return this.xHeight=_e.readShort(),this.capHeight=_e.readShort(),this.defaultChar=_e.readShort(),this.breakChar=_e.readShort(),this.maxContext=_e.readShort()},e}(),fe=function(St){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="post",e.prototype.parse=function(_e){var tn,un,gn;switch(_e.pos=this.offset,this.format=_e.readInt(),this.italicAngle=_e.readInt(),this.underlinePosition=_e.readShort(),this.underlineThickness=_e.readShort(),this.isFixedPitch=_e.readInt(),this.minMemType42=_e.readInt(),this.maxMemType42=_e.readInt(),this.minMemType1=_e.readInt(),this.maxMemType1=_e.readInt(),this.format){case 65536:break;case 131072:var vn;for(un=_e.readUInt16(),this.glyphNameIndex=[],vn=0;0<=un?vn<un:vn>un;vn=0<=un?++vn:--vn)this.glyphNameIndex.push(_e.readUInt16());for(this.names=[],gn=[];_e.pos<this.offset+this.length;)tn=_e.readByte(),gn.push(this.names.push(_e.readString(tn)));return gn;case 151552:return un=_e.readUInt16(),this.offsets=_e.read(un);case 196608:break;case 262144:return this.map=function(){var fn,en,on;for(on=[],vn=fn=0,en=this.file.maxp.numGlyphs;0<=en?fn<en:fn>en;vn=0<=en?++fn:--fn)on.push(_e.readUInt32());return on}.call(this)}},e}(),de=function(St,e){this.raw=St,this.length=St.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},pe=function(St){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="name",e.prototype.parse=function(_e){var tn,un,gn,vn,fn,en,on,dn,rn,an,nn;for(_e.pos=this.offset,_e.readShort(),tn=_e.readShort(),en=_e.readShort(),un=[],vn=0;0<=tn?vn<tn:vn>tn;vn=0<=tn?++vn:--vn)un.push({platformID:_e.readShort(),encodingID:_e.readShort(),languageID:_e.readShort(),nameID:_e.readShort(),length:_e.readShort(),offset:this.offset+en+_e.readShort()});for(on={},vn=rn=0,an=un.length;rn<an;vn=++rn)gn=un[vn],_e.pos=gn.offset,dn=_e.readString(gn.length),fn=new de(dn,gn),on[nn=gn.nameID]==null&&(on[nn]=[]),on[gn.nameID].push(fn);this.strings=on,this.copyright=on[0],this.fontFamily=on[1],this.fontSubfamily=on[2],this.uniqueSubfamily=on[3],this.fontName=on[4],this.version=on[5];try{this.postscriptName=on[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=on[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=on[7],this.manufacturer=on[8],this.designer=on[9],this.description=on[10],this.vendorUrl=on[11],this.designerUrl=on[12],this.license=on[13],this.licenseUrl=on[14],this.preferredFamily=on[15],this.preferredSubfamily=on[17],this.compatibleFull=on[18],this.sampleText=on[19]},e}(),ge=function(St){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="maxp",e.prototype.parse=function(_e){return _e.pos=this.offset,this.version=_e.readInt(),this.numGlyphs=_e.readUInt16(),this.maxPoints=_e.readUInt16(),this.maxContours=_e.readUInt16(),this.maxCompositePoints=_e.readUInt16(),this.maxComponentContours=_e.readUInt16(),this.maxZones=_e.readUInt16(),this.maxTwilightPoints=_e.readUInt16(),this.maxStorage=_e.readUInt16(),this.maxFunctionDefs=_e.readUInt16(),this.maxInstructionDefs=_e.readUInt16(),this.maxStackElements=_e.readUInt16(),this.maxSizeOfInstructions=_e.readUInt16(),this.maxComponentElements=_e.readUInt16(),this.maxComponentDepth=_e.readUInt16()},e}(),me=function(St){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="hmtx",e.prototype.parse=function(_e){var tn,un,gn,vn,fn,en,on;for(_e.pos=this.offset,this.metrics=[],tn=0,en=this.file.hhea.numberOfMetrics;0<=en?tn<en:tn>en;tn=0<=en?++tn:--tn)this.metrics.push({advance:_e.readUInt16(),lsb:_e.readInt16()});for(gn=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var dn,rn;for(rn=[],tn=dn=0;0<=gn?dn<gn:dn>gn;tn=0<=gn?++dn:--dn)rn.push(_e.readInt16());return rn}(),this.widths=function(){var dn,rn,an,nn;for(nn=[],dn=0,rn=(an=this.metrics).length;dn<rn;dn++)vn=an[dn],nn.push(vn.advance);return nn}.call(this),un=this.widths[this.widths.length-1],on=[],tn=fn=0;0<=gn?fn<gn:fn>gn;tn=0<=gn?++fn:--fn)on.push(this.widths.push(un));return on},e.prototype.forGlyph=function(_e){return _e in this.metrics?this.metrics[_e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[_e-this.metrics.length]}},e}(),ve=[].slice,be=function(St){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(_e){var tn,un,gn,vn,fn,en,on,dn,rn,an;return _e in this.cache?this.cache[_e]:(vn=this.file.loca,tn=this.file.contents,un=vn.indexOf(_e),(gn=vn.lengthOf(_e))===0?this.cache[_e]=null:(tn.pos=this.offset+un,fn=(en=new ne(tn.read(gn))).readShort(),dn=en.readShort(),an=en.readShort(),on=en.readShort(),rn=en.readShort(),this.cache[_e]=fn===-1?new we(en,dn,an,on,rn):new ye(en,fn,dn,an,on,rn),this.cache[_e]))},e.prototype.encode=function(_e,tn,un){var gn,vn,fn,en,on;for(fn=[],vn=[],en=0,on=tn.length;en<on;en++)gn=_e[tn[en]],vn.push(fn.length),gn&&(fn=fn.concat(gn.encode(un)));return vn.push(fn.length),{table:fn,offsets:vn}},e}(),ye=function(){function St(e,_e,tn,un,gn,vn){this.raw=e,this.numberOfContours=_e,this.xMin=tn,this.yMin=un,this.xMax=gn,this.yMax=vn,this.compound=!1}return St.prototype.encode=function(){return this.raw.data},St}(),we=function(){function St(e,_e,tn,un,gn){var vn,fn;for(this.raw=e,this.xMin=_e,this.yMin=tn,this.xMax=un,this.yMax=gn,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],vn=this.raw;fn=vn.readShort(),this.glyphOffsets.push(vn.pos),this.glyphIDs.push(vn.readUInt16()),32&fn;)vn.pos+=1&fn?4:2,128&fn?vn.pos+=8:64&fn?vn.pos+=4:8&fn&&(vn.pos+=2)}return St.prototype.encode=function(){var e,_e,tn;for(_e=new ne(ve.call(this.raw.data)),e=0,tn=this.glyphIDs.length;e<tn;++e)_e.pos=this.glyphOffsets[e];return _e.data},St}(),Ne=function(St){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="loca",e.prototype.parse=function(_e){var tn,un;return _e.pos=this.offset,tn=this.file.head.indexToLocFormat,this.offsets=tn===0?function(){var gn,vn;for(vn=[],un=0,gn=this.length;un<gn;un+=2)vn.push(2*_e.readUInt16());return vn}.call(this):function(){var gn,vn;for(vn=[],un=0,gn=this.length;un<gn;un+=4)vn.push(_e.readUInt32());return vn}.call(this)},e.prototype.indexOf=function(_e){return this.offsets[_e]},e.prototype.lengthOf=function(_e){return this.offsets[_e+1]-this.offsets[_e]},e.prototype.encode=function(_e,tn){for(var un=new Uint32Array(this.offsets.length),gn=0,vn=0,fn=0;fn<un.length;++fn)if(un[fn]=gn,vn<tn.length&&tn[vn]==fn){++vn,un[fn]=gn;var en=this.offsets[fn],on=this.offsets[fn+1]-en;on>0&&(gn+=on)}for(var dn=new Array(4*un.length),rn=0;rn<un.length;++rn)dn[4*rn+3]=255&un[rn],dn[4*rn+2]=(65280&un[rn])>>8,dn[4*rn+1]=(16711680&un[rn])>>16,dn[4*rn]=(4278190080&un[rn])>>24;return dn},e}(),Le=function(){function St(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return St.prototype.generateCmap=function(){var e,_e,tn,un,gn;for(_e in un=this.font.cmap.tables[0].codeMap,e={},gn=this.subset)tn=gn[_e],e[_e]=un[tn];return e},St.prototype.glyphsFor=function(e){var _e,tn,un,gn,vn,fn,en;for(un={},vn=0,fn=e.length;vn<fn;vn++)un[gn=e[vn]]=this.font.glyf.glyphFor(gn);for(gn in _e=[],un)(tn=un[gn])!=null&&tn.compound&&_e.push.apply(_e,tn.glyphIDs);if(_e.length>0)for(gn in en=this.glyphsFor(_e))tn=en[gn],un[gn]=tn;return un},St.prototype.encode=function(e,_e){var tn,un,gn,vn,fn,en,on,dn,rn,an,nn,cn,hn,sn,pn;for(un in tn=ue.encode(this.generateCmap(),"unicode"),vn=this.glyphsFor(e),nn={0:0},pn=tn.charMap)nn[(en=pn[un]).old]=en.new;for(cn in an=tn.maxGlyphID,vn)cn in nn||(nn[cn]=an++);return dn=function(mn){var yn,_n;for(yn in _n={},mn)_n[mn[yn]]=yn;return _n}(nn),rn=Object.keys(dn).sort(function(mn,yn){return mn-yn}),hn=function(){var mn,yn,_n;for(_n=[],mn=0,yn=rn.length;mn<yn;mn++)fn=rn[mn],_n.push(dn[fn]);return _n}(),gn=this.font.glyf.encode(vn,hn,nn),on=this.font.loca.encode(gn.offsets,hn),sn={cmap:this.font.cmap.raw(),glyf:gn.table,loca:on,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(_e)},this.font.os2.exists&&(sn["OS/2"]=this.font.os2.raw()),this.font.directory.encode(sn)},St}();E.API.PDFObject=function(){var St;function e(){}return St=function(_e,tn){return(Array(tn+1).join("0")+_e).slice(-tn)},e.convert=function(_e){var tn,un,gn,vn;if(Array.isArray(_e))return"["+function(){var fn,en,on;for(on=[],fn=0,en=_e.length;fn<en;fn++)tn=_e[fn],on.push(e.convert(tn));return on}().join(" ")+"]";if(typeof _e=="string")return"/"+_e;if(_e!=null&&_e.isString)return"("+_e+")";if(_e instanceof Date)return"(D:"+St(_e.getUTCFullYear(),4)+St(_e.getUTCMonth(),2)+St(_e.getUTCDate(),2)+St(_e.getUTCHours(),2)+St(_e.getUTCMinutes(),2)+St(_e.getUTCSeconds(),2)+"Z)";if({}.toString.call(_e)==="[object Object]"){for(un in gn=["<<"],_e)vn=_e[un],gn.push("/"+un+" "+e.convert(vn));return gn.push(">>"),gn.join(`
`)}return""+_e},e}();const ProgressBarIcon=()=>jsx("svg",{width:"543",height:"63",viewBox:"0 0 543 63",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsx("path",{d:"M539.817 58.801C523.388 49.5565 509.817 37.917 508.483 22.1103C507.15 6.3036 511.817 3.33386 514.245 3.33386C516.674 3.33386 521.483 7.74058 521.579 21.0086C521.674 34.2767 517.579 47.9279 490.341 55.1606C463.102 62.3934 395.96 58.8489 379.674 55.7833C360.722 52.1909 343.864 40.6472 344.626 20.6254C345.531 -2.12663 359.531 3.62126 359.436 20.6254C359.388 29.7741 356.007 40.9825 338.198 50.227C319.055 60.1421 271.341 59.6632 271.341 59.6632C271.341 59.6632 223.817 60.1421 204.722 50.227C186.96 40.9825 183.579 29.822 183.579 20.6254C183.483 3.62126 197.483 -2.12663 198.341 20.6254C199.102 40.6472 182.293 52.1909 163.436 55.7833C147.198 58.8489 80.293 62.3934 53.1501 55.1606C26.0073 47.9279 21.912 34.3246 22.0072 21.0086C22.1025 7.69268 26.8644 3.33386 29.293 3.33386C31.7215 3.33386 36.3882 6.3036 35.0549 22.1103C33.7215 37.917 20.2453 49.5565 3.81677 58.801",stroke:"#F2F2F2",strokeWidth:"6",strokeMiterlimit:"10",strokeLinecap:"round"})}),Pencil=()=>jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsx("path",{d:"M3.75 16.25H4.66667L13.8958 7.02079L12.9792 6.10413L3.75 15.3333V16.25ZM16.5417 6.12496L13.875 3.45829L14.75 2.58329C14.9861 2.34718 15.2778 2.22913 15.625 2.22913C15.9722 2.22913 16.2639 2.34718 16.5 2.58329L17.4167 3.49996C17.6528 3.73607 17.7708 4.02774 17.7708 4.37496C17.7708 4.72218 17.6528 5.01385 17.4167 5.24996L16.5417 6.12496ZM15.6667 6.99996L5.16667 17.5H2.5V14.8333L13 4.33329L15.6667 6.99996ZM13.4375 6.56246L12.9792 6.10413L13.8958 7.02079L13.4375 6.56246Z",fill:"#E5E6F2",className:"fill-current"})}),UploadIcon=()=>jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsx("path",{d:"M1.5 16C1.1 16 0.75 15.85 0.45 15.55C0.15 15.25 0 14.9 0 14.5V10.925H1.5V14.5H14.5V10.925H16V14.5C16 14.9 15.85 15.25 15.55 15.55C15.25 15.85 14.9 16 14.5 16H1.5ZM7.25 12.175V2.9L4.25 5.9L3.175 4.825L8 0L12.825 4.825L11.75 5.9L8.75 2.9V12.175H7.25Z",fill:"#828282",className:"fill-current"})}),LastIcon=()=>jsx("svg",{width:"14",height:"13",viewBox:"0 0 14 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsx("path",{d:"M2.83337 12.8334V11.5834H8.85421C9.82643 11.5834 10.6632 11.2605 11.3646 10.6146C12.066 9.96879 12.4167 9.16671 12.4167 8.20837C12.4167 7.25004 12.066 6.44796 11.3646 5.80212C10.6632 5.15629 9.82643 4.83337 8.85421 4.83337H2.70837L5.08337 7.20837L4.20837 8.08337L0.333374 4.20837L4.20837 0.333374L5.08337 1.20837L2.70837 3.58337H8.83338C10.1528 3.58337 11.2882 4.02782 12.2396 4.91671C13.191 5.8056 13.6667 6.90282 13.6667 8.20837C13.6667 9.51393 13.191 10.6112 12.2396 11.5C11.2882 12.3889 10.1528 12.8334 8.83338 12.8334H2.83337Z",fill:"#BDBDBD",className:"fill-current"})}),NextIcon=()=>jsx("svg",{width:"14",height:"13",viewBox:"0 0 14 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsx("path",{d:"M5.16671 12.8334C3.84726 12.8334 2.71185 12.3889 1.76046 11.5C0.809069 10.6112 0.333374 9.51393 0.333374 8.20837C0.333374 6.90282 0.809069 5.8056 1.76046 4.91671C2.71185 4.02782 3.84726 3.58337 5.16671 3.58337H11.2917L8.91671 1.20837L9.79171 0.333374L13.6667 4.20837L9.79171 8.08337L8.91671 7.20837L11.2917 4.83337H5.14587C4.17365 4.83337 3.33685 5.15629 2.63546 5.80212C1.93407 6.44796 1.58337 7.25004 1.58337 8.20837C1.58337 9.16671 1.93407 9.96879 2.63546 10.6146C3.33685 11.2605 4.17365 11.5834 5.14587 11.5834H11.1667V12.8334H5.16671Z",fill:"#787CDA",className:"fill-current"})}),TrashcanIcon=()=>jsxs("svg",{width:"34",height:"45",viewBox:"0 0 34 45",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsx("path",{d:"M33.5666 25.9319C33.3962 27.068 33.2542 28.2325 33.0554 29.3687C32.7714 31.158 32.5157 32.919 32.2317 34.7084C32.0045 36.157 31.7773 37.5771 31.55 39.0257C31.3796 40.1334 31.1808 41.2411 31.0104 42.3488C30.7547 43.7974 29.505 44.8483 28.0281 44.8483C27.2612 44.8483 26.4943 44.8483 25.7274 44.8483C25.6706 44.5926 25.4434 44.5642 25.2446 44.5642C24.7617 44.621 24.6765 44.3938 24.6765 43.9678C24.7049 42.7748 24.6765 41.6103 24.6765 40.4174C24.6765 34.964 24.6765 29.4823 24.6765 24.0289C24.6765 23.404 24.6765 23.404 25.273 23.3756C25.5002 23.3756 25.7274 23.3756 25.7842 23.0916C27.318 23.0916 28.8801 23.0632 30.4139 23.0916C31.4648 23.12 32.3169 23.546 32.9418 24.4265C33.311 24.881 33.3962 25.4206 33.5666 25.9319Z",fill:"#595ED3"}),jsx("path",{d:"M33.5667 25.9319C33.3679 25.4207 33.2826 24.881 32.9702 24.4266C32.3454 23.5461 31.4933 23.12 30.4424 23.0916C28.9086 23.0632 27.3464 23.0916 25.8127 23.0916C23.9949 23.0916 22.1487 23.0916 20.3309 23.0916C17.803 23.0916 15.2752 23.0916 12.7757 23.0916C10.4183 23.1484 8.03243 22.9496 5.67498 23.262C5.07852 23.3472 5.02171 23.3472 5.02171 23.9721C5.02171 30.6184 5.02171 37.2931 5.02171 43.9394C5.02171 44.1666 5.05012 44.3938 5.10692 44.6211C4.14122 44.4506 3.20392 43.4565 3.03351 42.3488C2.66427 40.105 2.32343 37.8612 1.9826 35.6457C1.64176 33.5439 1.30093 31.4137 0.960091 29.3119C0.676061 27.4941 0.335226 25.6763 0.108002 23.8301C-0.00560987 22.8644 0.392032 21.9839 1.15891 21.3306C1.32933 21.1886 1.55655 21.1034 1.69857 20.8762C2.40864 20.649 3.11872 20.5922 3.85719 20.5922C5.73179 20.6206 7.57798 20.5922 9.45257 20.5922C9.6798 20.5922 9.90702 20.5922 10.1058 20.5922C16.8941 20.5922 23.6825 20.5922 30.4708 20.5922C30.982 20.5922 31.4933 20.6206 32.0045 20.7626C33.4531 21.3874 34.22 22.836 33.7939 24.7106C33.7371 25.1366 33.7655 25.5627 33.5667 25.9319Z",fill:"#595ED3",fillOpacity:"0.8"}),jsx("path",{d:"M5.10678 44.6494C5.04998 44.4221 5.02158 44.1949 5.02158 43.9677C5.02158 37.3214 5.02158 30.6467 5.02158 24.0004C5.02158 23.3756 5.04998 23.3756 5.67484 23.2904C8.03229 22.9495 10.4181 23.1767 12.7756 23.1199C12.4063 23.546 12.4916 24.0856 12.4916 24.5969C12.4916 28.8005 12.4916 32.9758 12.4916 37.1794C11.8951 37.2078 11.2986 37.2078 10.7022 37.2362C10.0489 37.2362 9.36723 37.2362 8.71396 37.2362C8.34472 37.2362 8.00389 37.2078 7.63465 37.2362C6.86777 37.2646 6.27131 37.8611 6.2429 38.6279C6.2145 39.196 6.2429 39.7641 6.2429 40.3321C6.2429 40.957 6.52693 41.4114 7.09499 41.6671C7.63465 41.8943 8.1743 41.7807 8.71396 41.7807C9.36723 41.8091 10.0489 41.8375 10.7022 41.7807C11.327 41.8091 11.9519 41.8375 12.6052 41.7807C12.9744 41.7807 13.372 41.8091 13.7413 41.8091C13.7413 42.3771 13.7413 42.9736 13.7413 43.5417C13.7413 44.0529 13.7129 44.5358 14.1105 44.905C11.3838 44.905 8.65715 44.905 5.93047 44.905C5.64644 44.8482 5.36241 44.8198 5.10678 44.6494Z",fill:"#595ED3",fillOpacity:"0.4"}),jsx("path",{d:"M14.1106 44.8483C13.713 44.479 13.713 43.9678 13.7414 43.4849C13.7414 42.9169 13.7414 42.3204 13.7414 41.7523C14.8207 41.4967 15.2751 41.0707 15.3319 40.247C15.3603 39.7073 15.3603 39.1677 15.3319 38.6564C15.3035 37.8327 14.6503 37.2079 13.8266 37.2079C13.4289 37.2079 13.0029 37.2079 12.6052 37.2363C12.5768 37.2079 12.5484 37.2079 12.52 37.1795C12.52 32.9758 12.52 28.8006 12.52 24.5969C12.52 24.0857 12.4348 23.5744 12.8041 23.12C15.3319 23.12 17.8598 23.12 20.3593 23.12C20.274 23.404 19.99 23.3756 19.7912 23.404C19.4504 23.4324 19.3367 23.546 19.3367 23.8869C19.3367 30.6184 19.3367 37.3499 19.3367 44.0814C19.3367 44.3938 19.422 44.5358 19.7628 44.5926C19.9616 44.621 20.2172 44.5926 20.3024 44.8767C18.2006 44.8483 16.1556 44.8483 14.1106 44.8483Z",fill:"#595ED3",fillOpacity:"0.6"}),jsx("path",{d:"M20.2458 44.8482C20.1606 44.5642 19.9049 44.5926 19.7061 44.5642C19.3937 44.5358 19.2801 44.3654 19.2801 44.0529C19.2801 37.3214 19.2801 30.5899 19.2801 23.8584C19.2801 23.5176 19.4221 23.3756 19.7345 23.3756C19.9617 23.3756 20.2174 23.3756 20.3026 23.0916C22.1204 23.0916 23.9665 23.0916 25.7843 23.0916C25.7275 23.3756 25.4719 23.3756 25.2731 23.3756C24.6766 23.404 24.6766 23.404 24.6766 24.0288C24.6766 29.4822 24.6766 34.964 24.6766 40.4174C24.6766 41.6103 24.705 42.7748 24.6766 43.9677C24.6766 44.3938 24.7618 44.621 25.2447 44.5642C25.4435 44.5358 25.6707 44.5642 25.7275 44.8482C23.9097 44.8482 22.0635 44.8482 20.2458 44.8482Z",fill:"#595ED3",fillOpacity:"0.8"}),jsx("path",{d:"M16.8374 16.8713C17.4055 16.985 17.6611 16.7009 17.8031 16.1613C17.9735 15.4512 18.2007 14.7695 18.854 14.3435C19.1664 14.1447 19.4789 13.9742 19.8481 13.9458C20.7854 13.9174 21.6943 13.9742 22.6316 13.8606C22.7452 13.8322 22.8872 13.8322 23.0008 13.9458C22.9724 15.8488 23.0576 17.7518 22.802 19.6264C20.8138 19.6264 18.8256 19.6264 16.8374 19.6264C16.8374 18.6891 16.8374 17.7802 16.8374 16.8713Z",fill:"#595ED3",fillOpacity:"0.6"}),jsx("path",{d:"M22.802 19.5979C23.0576 17.7234 22.9724 15.8204 23.0008 13.9174C24.705 13.9174 26.4092 13.9174 28.1134 13.9174C28.1134 15.8204 28.1418 17.695 28.0281 19.5979C26.2672 19.5979 24.5346 19.5979 22.802 19.5979Z",fill:"#595ED3",fillOpacity:"0.8"}),jsx("path",{d:"M31.976 19.5981C30.641 19.5981 29.3345 19.5981 27.9996 19.5981C28.1132 17.6951 28.0848 15.8205 28.0848 13.9175C28.8233 13.9459 29.5901 13.8323 30.3286 14.0027C31.2943 14.2299 31.9192 15.0536 31.976 16.0193C32.0896 17.2407 32.0044 18.4052 31.976 19.5981Z",fill:"#595ED3"}),jsx("path",{d:"M10.4182 19.598C10.0774 19.598 9.73656 19.598 9.39572 19.598C6.83946 19.598 4.31159 19.598 1.75532 19.598C1.5565 17.979 2.74943 16.7861 4.25478 16.8429C5.87375 16.8997 7.49272 16.8713 9.11169 16.8713C9.11169 17.1837 9.08329 17.4678 9.11169 17.7802C9.1685 18.5187 9.62294 18.8027 10.3046 18.5755C10.5034 18.8879 10.3898 19.2571 10.4182 19.598Z",fill:"#595ED3",fillOpacity:"0.2"}),jsx("path",{d:"M10.4184 19.598C10.39 19.2572 10.5036 18.8879 10.3332 18.5471C10.532 18.3199 10.7308 18.0927 10.674 17.7518C10.6172 17.4678 10.6172 17.1554 10.5888 16.8713C12.6906 16.8713 14.764 16.8713 16.8658 16.8713C16.8658 17.7802 16.8658 18.6891 16.8658 19.598C14.7072 19.598 12.5486 19.598 10.4184 19.598Z",fill:"#595ED3",fillOpacity:"0.4"}),jsx("path",{d:"M24.8184 3.63551C24.8752 3.66391 25.0172 3.69232 25.1024 3.74912C25.8409 4.23197 26.3521 4.88524 26.6646 5.70893C26.8066 6.10657 26.6362 6.419 26.2669 6.61782C25.8977 6.78824 25.5285 6.70303 25.3296 6.36219C25.0172 5.79414 24.6764 5.31129 24.1651 4.88524C23.9379 4.68642 23.9095 4.37399 24.0515 4.08996C24.1935 3.80593 24.4207 3.60711 24.8184 3.63551Z",fill:"#E3FEC7"}),jsx("path",{d:"M19.1949 7.49821C18.3996 7.29939 17.9168 6.70293 17.5191 6.04966C17.2635 5.65202 17.0647 5.22597 17.0363 4.74312C17.4339 4.74312 17.86 4.71472 18.2576 4.71472C18.5984 4.71472 18.9393 4.74312 19.2801 4.74312C19.2801 5.4816 19.2801 6.22008 19.2801 6.95855C19.3085 7.15738 19.3653 7.3562 19.1949 7.49821Z",fill:"#595ED3",fillOpacity:"0.8"}),jsx("path",{d:"M25.5855 10.6227C25.0742 10.6227 24.6766 10.1114 24.8754 9.65696C25.1026 9.14571 25.3299 8.66286 25.5571 8.1516C25.6991 7.81077 26.0115 7.69716 26.3808 7.78236C26.75 7.89598 27.0056 8.1516 26.9488 8.54924C26.8636 9.23092 26.5512 9.88418 26.0967 10.4238C25.9831 10.5375 25.7843 10.5943 25.5855 10.6227Z",fill:"#E3FEC7"}),jsx("path",{d:"M17.0363 3.20948C17.2635 1.90294 18.002 0.965642 19.1949 0.397583C19.1949 1.33488 19.1949 2.27218 19.1949 3.20948C18.8825 3.20948 18.57 3.23788 18.2576 3.23788C17.86 3.23788 17.4339 3.23788 17.0363 3.20948Z",fill:"#595ED3",fillOpacity:"0.8"}),jsx("path",{d:"M19.1946 3.20945C19.1946 2.27215 19.1946 1.33486 19.1946 0.397559C19.649 0.170335 20.1035 0.0283203 20.6147 0.0283203C20.5295 0.255544 20.5295 0.511171 20.5295 0.766797C20.5295 1.59048 20.5863 2.41417 20.4443 3.23785C20.2455 3.23785 20.0751 3.26626 19.8763 3.26626C19.649 3.23785 19.4218 3.23785 19.1946 3.20945Z",fill:"#595ED3",fillOpacity:"0.5"}),jsx("path",{d:"M18.7402 13.1505C18.5414 13.1505 18.2857 13.1505 18.0301 13.0937C17.6325 13.0085 17.4052 12.7245 17.4052 12.3268C17.4336 11.9292 17.6609 11.6736 18.0585 11.6168C18.5414 11.56 19.0242 11.56 19.5071 11.5884C19.9047 11.6168 20.2171 11.986 20.1887 12.3552C20.1603 12.7529 19.9331 13.0369 19.5071 13.0937C19.2798 13.1505 19.0526 13.1505 18.7402 13.1505Z",fill:"#E3FEC7"}),jsx("path",{d:"M22.4327 12.6961C22.0351 12.6393 21.7511 12.4973 21.6659 12.1281C21.5807 11.7873 21.6659 11.4464 22.0067 11.276C22.4611 11.0488 22.944 10.8784 23.4552 10.7363C23.7961 10.6227 24.1085 10.7932 24.2789 11.134C24.4494 11.4748 24.3925 11.8157 24.1085 12.0145C23.5973 12.3837 23.0008 12.5257 22.4327 12.6961Z",fill:"#E3FEC7"}),jsx("path",{d:"M19.1946 7.49821C19.365 7.3562 19.2798 7.15738 19.2798 6.95855C19.2798 6.22008 19.2798 5.4816 19.2798 4.74312C19.4786 4.74312 19.649 4.71472 19.8478 4.71472C20.0751 4.71472 20.2739 4.74312 20.5011 4.74312C20.5011 5.79403 20.5011 6.87335 20.5011 7.92426C20.0751 7.81064 19.5638 7.92426 19.1946 7.49821Z",fill:"#595ED3",fillOpacity:"0.5"}),jsx("path",{d:"M20.4445 3.20953C20.5866 2.38585 20.5298 1.56216 20.5298 0.738477C20.5298 0.48285 20.5582 0.255627 20.615 0C21.5807 0.0568059 22.1487 0.568059 22.0067 1.24973C21.8931 1.84619 21.6091 2.32904 21.183 2.75509C21.0694 2.8687 20.899 2.95391 20.899 3.18113C20.8706 3.18113 20.8422 3.20953 20.8138 3.20953C20.7002 3.23794 20.5582 3.23794 20.4445 3.20953Z",fill:"#595ED3",fillOpacity:"0.2"}),jsx("path",{d:"M20.5297 7.95282C20.5297 6.90191 20.5297 5.8226 20.5297 4.77169C20.6149 4.77169 20.7285 4.74329 20.8138 4.74329C20.8422 4.74329 20.8706 4.77169 20.899 4.77169C21.2966 5.25454 21.6942 5.73739 21.9215 6.33385C22.2055 7.07233 21.9499 7.58358 21.2114 7.83921C20.9842 7.89601 20.7854 8.00963 20.5297 7.95282Z",fill:"#595ED3",fillOpacity:"0.2"}),jsx("path",{d:"M14.9912 11.6168C15.5309 11.5883 15.8717 11.8156 15.9285 12.27C15.9853 12.7245 15.7013 13.0653 15.1616 13.1505C14.8492 13.2073 14.5368 13.2641 14.2243 13.2925C13.7983 13.3209 13.4859 13.0937 13.3722 12.6961C13.287 12.3268 13.5143 11.9292 13.9119 11.8156C14.2811 11.7304 14.622 11.6736 14.9912 11.6168Z",fill:"#E3FEC7"}),jsx("path",{d:"M10.8726 15.1387C10.3329 15.1387 9.93531 14.5138 10.2193 14.031C10.4466 13.6618 10.759 13.3209 11.1566 13.1221C11.6395 12.8665 12.2075 13.2641 12.2075 13.8038C12.2075 14.2582 11.3271 15.1387 10.8726 15.1387Z",fill:"#E3FEC7"}),jsx("path",{d:"M10.5887 16.8713C10.6171 17.1553 10.6455 17.4678 10.6739 17.7518C10.7024 18.0926 10.5319 18.3199 10.3331 18.5471C9.62304 18.7743 9.19699 18.4903 9.14019 17.7518C9.11178 17.4678 9.14019 17.1553 9.14019 16.8429C9.59463 16.1896 10.0775 16.1896 10.5887 16.8713Z",fill:"#E3FEC7"}),jsx("path",{d:"M17.0361 3.20947C17.4338 3.20947 17.8598 3.23788 18.2574 3.23788C18.2574 3.72073 18.2574 4.23198 18.2574 4.71483C17.8598 4.71483 17.4338 4.74323 17.0361 4.74323C16.4681 4.68643 16.1272 4.4024 16.1272 4.00476C16.0988 3.57871 16.4397 3.29468 17.0361 3.20947Z",fill:"#E3FEC7"}),jsx("path",{d:"M20.9275 4.77167C20.8991 4.77167 20.8707 4.74327 20.8423 4.74327C20.8423 4.26042 20.8423 3.74917 20.8423 3.26632C20.8707 3.26632 20.8991 3.23792 20.9275 3.23792C21.2683 3.23792 21.6092 3.23792 21.9784 3.26632C22.4329 3.29472 22.7169 3.60715 22.7169 4.0048C22.7169 4.40244 22.4044 4.74327 21.9784 4.77167C21.6092 4.77167 21.2683 4.77167 20.9275 4.77167Z",fill:"#E3FEC7",fillOpacity:"0.3"}),jsx("path",{d:"M12.5769 37.1794C12.9746 37.1794 13.4006 37.151 13.7983 37.151C14.6219 37.1794 15.2468 37.7759 15.3036 38.5996C15.332 39.1392 15.332 39.6789 15.3036 40.1901C15.2752 41.0138 14.7924 41.4398 13.7131 41.6955C13.3438 41.6955 12.9462 41.6671 12.5769 41.6671C12.6053 40.1901 12.5769 38.6848 12.5769 37.1794Z",fill:"#E3FEC7"}),jsx("path",{d:"M8.7141 41.6955C8.17444 41.6955 7.63479 41.8091 7.09513 41.5819C6.52707 41.3262 6.24304 40.8718 6.24304 40.2469C6.24304 39.6789 6.24304 39.1108 6.24304 38.5427C6.27144 37.7759 6.86791 37.1794 7.63479 37.151C8.00403 37.151 8.34486 37.151 8.7141 37.151C8.7141 38.6848 8.7141 40.1901 8.7141 41.6955Z",fill:"#E3FEC7",fillOpacity:"0.4"}),jsx("path",{d:"M8.7139 41.6955C8.7139 40.1902 8.7139 38.6848 8.7139 37.2079C9.36717 37.2079 10.0488 37.2079 10.7021 37.2079C10.7021 38.7132 10.7021 40.2186 10.7021 41.6955C10.0488 41.724 9.36717 41.724 8.7139 41.6955Z",fill:"#E3FEC7",fillOpacity:"0.6"}),jsx("path",{d:"M10.7021 41.6955C10.7021 40.1901 10.7021 38.6848 10.7021 37.2078C11.2986 37.1794 11.895 37.1794 12.4915 37.151C12.5199 37.1794 12.5483 37.1794 12.5767 37.2078C12.5767 38.7132 12.5767 40.2185 12.5767 41.6955C11.9518 41.7239 11.327 41.7239 10.7021 41.6955Z",fill:"#E3FEC7",fillOpacity:"0.8"}),jsx("path",{d:"M18.2574 4.74327C18.2574 4.26042 18.2574 3.74917 18.2574 3.26632C18.5699 3.26632 18.8823 3.23792 19.1947 3.23792C19.422 3.23792 19.6492 3.26632 19.848 3.26632C19.848 3.74917 19.848 4.26042 19.848 4.74327C19.6492 4.74327 19.4788 4.77167 19.28 4.77167C18.9675 4.74327 18.5983 4.74327 18.2574 4.74327Z",fill:"#E3FEC7",fillOpacity:"0.8"}),jsx("path",{d:"M19.8764 4.74327C19.8764 4.26042 19.8764 3.74917 19.8764 3.26632C20.0752 3.26632 20.2456 3.23792 20.4445 3.23792C20.5581 3.23792 20.7001 3.26632 20.8137 3.26632C20.8137 3.74917 20.8137 4.26042 20.8137 4.74327C20.7285 4.74327 20.6149 4.77167 20.5297 4.77167C20.3024 4.74327 20.1036 4.74327 19.8764 4.74327Z",fill:"#E3FEC7",fillOpacity:"0.6"})]}),ArrowIcon=()=>jsx("svg",{width:"10",height:"16",viewBox:"0 0 10 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsx("path",{className:"fill-current",fillRule:"evenodd",clipRule:"evenodd",d:"M9.23965 0.26035C9.58679 0.607482 9.58679 1.1703 9.23965 1.51743L2.75708 8L9.23965 14.4826C9.58679 14.8297 9.58679 15.3925 9.23965 15.7397C8.89252 16.0868 8.32971 16.0868 7.98258 15.7397L0.871464 8.62854C0.524331 8.28141 0.524331 7.71859 0.871464 7.37146L7.98258 0.26035C8.32971 -0.0867832 8.89252 -0.0867832 9.23965 0.26035Z",fill:"#BDBDBD"})});function commonjsRequire(St){throw new Error('Could not dynamically require "'+St+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(e,_e){module.exports=_e()})(globalThis,()=>(()=>{var __webpack_modules__=[,(St,e,_e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.UNSUPPORTED_FEATURES=e.TextRenderingMode=e.StreamType=e.RenderingIntentFlag=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FontType=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.AnnotationType=e.AnnotationStateModelType=e.AnnotationReviewState=e.AnnotationReplyType=e.AnnotationMode=e.AnnotationMarkedState=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.arrayByteLength=ur,e.arraysToBytes=gr,e.assert=An,e.bytesToString=zn,e.createPromiseCapability=Wr,e.createValidAbsoluteUrl=En,e.escapeString=Ir,e.getModificationDate=Or,e.getVerbosityLevel=Vn,e.info=Xn,e.isArrayBuffer=ps,e.isArrayEqual=ys,e.isAscii=ts,e.objectFromMap=dr,e.objectSize=vr,e.setVerbosityLevel=Jn,e.shadow=Nn,e.string32=ar,e.stringToBytes=jn,e.stringToPDFString=Gr,e.stringToUTF16BEString=zr,e.stringToUTF8String=ws,e.unreachable=Tn,e.utf8StringToString=es,e.warn=Yn,_e(2);const tn=[1,0,0,1,0,0];e.IDENTITY_MATRIX=tn;const un=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=un;const gn=1.35;e.LINE_FACTOR=gn;const vn=.35;e.LINE_DESCENT_FACTOR=vn;const fn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=fn;const en={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=en;const on="pdfjs_internal_editor_";e.AnnotationEditorPrefix=on;const dn={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};e.AnnotationEditorType=dn;const rn={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};e.AnnotationEditorParamsType=rn;const an={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=an;const nn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=nn;const cn={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=cn;const hn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=hn;const sn={MARKED:"Marked",REVIEW:"Review"};e.AnnotationStateModelType=sn;const pn={MARKED:"Marked",UNMARKED:"Unmarked"};e.AnnotationMarkedState=pn;const mn={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};e.AnnotationReviewState=mn;const yn={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=yn;const _n={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=_n;const xn={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=xn;const Sn={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=Sn;const Pn={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=Pn;const Ln={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=Ln;const In={O:"PageOpen",C:"PageClose"};e.PageActionEventType=In;const Rn={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};e.StreamType=Rn;const Mn={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};e.FontType=Mn;const Hn={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=Hn;const Qn={NONE:0,BINARY:1,STREAM:2};e.CMapCompressionType=Qn;const Kn={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=Kn;const nr={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};e.UNSUPPORTED_FEATURES=nr;const Zn={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=Zn;let ir=Hn.WARNINGS;function Jn(xr){Number.isInteger(xr)&&(ir=xr)}function Vn(){return ir}function Xn(xr){ir>=Hn.INFOS&&console.log(`Info: ${xr}`)}function Yn(xr){ir>=Hn.WARNINGS&&console.log(`Warning: ${xr}`)}function Tn(xr){throw new Error(xr)}function An(xr,br){xr||Tn(br)}function wn(xr){if(!xr)return!1;switch(xr.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function En(xr,br=null,yr=null){if(!xr)return null;try{if(yr&&typeof xr=="string"){if(yr.addDefaultProtocol&&xr.startsWith("www.")){const Yr=xr.match(/\./g);Yr&&Yr.length>=2&&(xr=`http://${xr}`)}if(yr.tryConvertEncoding)try{xr=ws(xr)}catch{}}const qr=br?new URL(xr,br):new URL(xr);if(wn(qr))return qr}catch{}return null}function Nn(xr,br,yr){return Object.defineProperty(xr,br,{value:yr,enumerable:!0,configurable:!0,writable:!1}),yr}const Fn=function(){function br(yr,qr){this.constructor===br&&Tn("Cannot initialize BaseException."),this.message=yr,this.name=qr}return br.prototype=new Error,br.constructor=br,br}();e.BaseException=Fn;class Un extends Fn{constructor(br,yr){super(br,"PasswordException"),this.code=yr}}e.PasswordException=Un;class Gn extends Fn{constructor(br,yr){super(br,"UnknownErrorException"),this.details=yr}}e.UnknownErrorException=Gn;class er extends Fn{constructor(br){super(br,"InvalidPDFException")}}e.InvalidPDFException=er;class On extends Fn{constructor(br){super(br,"MissingPDFException")}}e.MissingPDFException=On;class Bn extends Fn{constructor(br,yr){super(br,"UnexpectedResponseException"),this.status=yr}}e.UnexpectedResponseException=Bn;class $n extends Fn{constructor(br){super(br,"FormatError")}}e.FormatError=$n;class qn extends Fn{constructor(br){super(br,"AbortException")}}e.AbortException=qn;function zn(xr){(typeof xr!="object"||xr===null||xr.length===void 0)&&Tn("Invalid argument for bytesToString");const br=xr.length,yr=8192;if(br<yr)return String.fromCharCode.apply(null,xr);const qr=[];for(let Yr=0;Yr<br;Yr+=yr){const Jr=Math.min(Yr+yr,br),Xr=xr.subarray(Yr,Jr);qr.push(String.fromCharCode.apply(null,Xr))}return qr.join("")}function jn(xr){typeof xr!="string"&&Tn("Invalid argument for stringToBytes");const br=xr.length,yr=new Uint8Array(br);for(let qr=0;qr<br;++qr)yr[qr]=xr.charCodeAt(qr)&255;return yr}function ur(xr){if(xr.length!==void 0)return xr.length;if(xr.byteLength!==void 0)return xr.byteLength;Tn("Invalid argument for arrayByteLength")}function gr(xr){const br=xr.length;if(br===1&&xr[0]instanceof Uint8Array)return xr[0];let yr=0;for(let Jr=0;Jr<br;Jr++)yr+=ur(xr[Jr]);let qr=0;const Yr=new Uint8Array(yr);for(let Jr=0;Jr<br;Jr++){let Xr=xr[Jr];Xr instanceof Uint8Array||(typeof Xr=="string"?Xr=jn(Xr):Xr=new Uint8Array(Xr));const as=Xr.byteLength;Yr.set(Xr,qr),qr+=as}return Yr}function ar(xr){return String.fromCharCode(xr>>24&255,xr>>16&255,xr>>8&255,xr&255)}function vr(xr){return Object.keys(xr).length}function dr(xr){const br=Object.create(null);for(const[yr,qr]of xr)br[yr]=qr;return br}function hr(){const xr=new Uint8Array(4);return xr[0]=1,new Uint32Array(xr.buffer,0,1)[0]===1}function _r(){try{return new Function(""),!0}catch{return!1}}class or{static get isLittleEndian(){return Nn(this,"isLittleEndian",hr())}static get isEvalSupported(){return Nn(this,"isEvalSupported",_r())}static get isOffscreenCanvasSupported(){return Nn(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}}e.FeatureTest=or;const Er=[...Array(256).keys()].map(xr=>xr.toString(16).padStart(2,"0"));class Dr{static makeHexColor(br,yr,qr){return`#${Er[br]}${Er[yr]}${Er[qr]}`}static scaleMinMax(br,yr){let qr;br[0]?(br[0]<0&&(qr=yr[0],yr[0]=yr[1],yr[1]=qr),yr[0]*=br[0],yr[1]*=br[0],br[3]<0&&(qr=yr[2],yr[2]=yr[3],yr[3]=qr),yr[2]*=br[3],yr[3]*=br[3]):(qr=yr[0],yr[0]=yr[2],yr[2]=qr,qr=yr[1],yr[1]=yr[3],yr[3]=qr,br[1]<0&&(qr=yr[2],yr[2]=yr[3],yr[3]=qr),yr[2]*=br[1],yr[3]*=br[1],br[2]<0&&(qr=yr[0],yr[0]=yr[1],yr[1]=qr),yr[0]*=br[2],yr[1]*=br[2]),yr[0]+=br[4],yr[1]+=br[4],yr[2]+=br[5],yr[3]+=br[5]}static transform(br,yr){return[br[0]*yr[0]+br[2]*yr[1],br[1]*yr[0]+br[3]*yr[1],br[0]*yr[2]+br[2]*yr[3],br[1]*yr[2]+br[3]*yr[3],br[0]*yr[4]+br[2]*yr[5]+br[4],br[1]*yr[4]+br[3]*yr[5]+br[5]]}static applyTransform(br,yr){const qr=br[0]*yr[0]+br[1]*yr[2]+yr[4],Yr=br[0]*yr[1]+br[1]*yr[3]+yr[5];return[qr,Yr]}static applyInverseTransform(br,yr){const qr=yr[0]*yr[3]-yr[1]*yr[2],Yr=(br[0]*yr[3]-br[1]*yr[2]+yr[2]*yr[5]-yr[4]*yr[3])/qr,Jr=(-br[0]*yr[1]+br[1]*yr[0]+yr[4]*yr[1]-yr[5]*yr[0])/qr;return[Yr,Jr]}static getAxialAlignedBoundingBox(br,yr){const qr=Dr.applyTransform(br,yr),Yr=Dr.applyTransform(br.slice(2,4),yr),Jr=Dr.applyTransform([br[0],br[3]],yr),Xr=Dr.applyTransform([br[2],br[1]],yr);return[Math.min(qr[0],Yr[0],Jr[0],Xr[0]),Math.min(qr[1],Yr[1],Jr[1],Xr[1]),Math.max(qr[0],Yr[0],Jr[0],Xr[0]),Math.max(qr[1],Yr[1],Jr[1],Xr[1])]}static inverseTransform(br){const yr=br[0]*br[3]-br[1]*br[2];return[br[3]/yr,-br[1]/yr,-br[2]/yr,br[0]/yr,(br[2]*br[5]-br[4]*br[3])/yr,(br[4]*br[1]-br[5]*br[0])/yr]}static apply3dTransform(br,yr){return[br[0]*yr[0]+br[1]*yr[1]+br[2]*yr[2],br[3]*yr[0]+br[4]*yr[1]+br[5]*yr[2],br[6]*yr[0]+br[7]*yr[1]+br[8]*yr[2]]}static singularValueDecompose2dScale(br){const yr=[br[0],br[2],br[1],br[3]],qr=br[0]*yr[0]+br[1]*yr[2],Yr=br[0]*yr[1]+br[1]*yr[3],Jr=br[2]*yr[0]+br[3]*yr[2],Xr=br[2]*yr[1]+br[3]*yr[3],as=(qr+Xr)/2,ks=Math.sqrt((qr+Xr)**2-4*(qr*Xr-Jr*Yr))/2,us=as+ks||1,ls=as-ks||1;return[Math.sqrt(us),Math.sqrt(ls)]}static normalizeRect(br){const yr=br.slice(0);return br[0]>br[2]&&(yr[0]=br[2],yr[2]=br[0]),br[1]>br[3]&&(yr[1]=br[3],yr[3]=br[1]),yr}static intersect(br,yr){const qr=Math.max(Math.min(br[0],br[2]),Math.min(yr[0],yr[2])),Yr=Math.min(Math.max(br[0],br[2]),Math.max(yr[0],yr[2]));if(qr>Yr)return null;const Jr=Math.max(Math.min(br[1],br[3]),Math.min(yr[1],yr[3])),Xr=Math.min(Math.max(br[1],br[3]),Math.max(yr[1],yr[3]));return Jr>Xr?null:[qr,Jr,Yr,Xr]}static bezierBoundingBox(br,yr,qr,Yr,Jr,Xr,as,ks){const us=[],ls=[[],[]];let As,ns,Fs,gs,bs,Ss,Ts,js;for(let Gs=0;Gs<2;++Gs){if(Gs===0?(ns=6*br-12*qr+6*Jr,As=-3*br+9*qr-9*Jr+3*as,Fs=3*qr-3*br):(ns=6*yr-12*Yr+6*Xr,As=-3*yr+9*Yr-9*Xr+3*ks,Fs=3*Yr-3*yr),Math.abs(As)<1e-12){if(Math.abs(ns)<1e-12)continue;gs=-Fs/ns,0<gs&&gs<1&&us.push(gs);continue}Ts=ns*ns-4*Fs*As,js=Math.sqrt(Ts),!(Ts<0)&&(bs=(-ns+js)/(2*As),0<bs&&bs<1&&us.push(bs),Ss=(-ns-js)/(2*As),0<Ss&&Ss<1&&us.push(Ss))}let Qs=us.length,Ls;const Rs=Qs;for(;Qs--;)gs=us[Qs],Ls=1-gs,ls[0][Qs]=Ls*Ls*Ls*br+3*Ls*Ls*gs*qr+3*Ls*gs*gs*Jr+gs*gs*gs*as,ls[1][Qs]=Ls*Ls*Ls*yr+3*Ls*Ls*gs*Yr+3*Ls*gs*gs*Xr+gs*gs*gs*ks;return ls[0][Rs]=br,ls[1][Rs]=yr,ls[0][Rs+1]=as,ls[1][Rs+1]=ks,ls[0].length=ls[1].length=Rs+2,[Math.min(...ls[0]),Math.min(...ls[1]),Math.max(...ls[0]),Math.max(...ls[1])]}}e.Util=Dr;const Rr=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Gr(xr){if(xr[0]>="\xEF"){let yr;if(xr[0]==="\xFE"&&xr[1]==="\xFF"?yr="utf-16be":xr[0]==="\xFF"&&xr[1]==="\xFE"?yr="utf-16le":xr[0]==="\xEF"&&xr[1]==="\xBB"&&xr[2]==="\xBF"&&(yr="utf-8"),yr)try{const qr=new TextDecoder(yr,{fatal:!0}),Yr=jn(xr);return qr.decode(Yr)}catch(qr){Yn(`stringToPDFString: "${qr}".`)}}const br=[];for(let yr=0,qr=xr.length;yr<qr;yr++){const Yr=Rr[xr.charCodeAt(yr)];br.push(Yr?String.fromCharCode(Yr):xr.charAt(yr))}return br.join("")}function Ir(xr){return xr.replace(/([()\\\n\r])/g,br=>br===`
`?"\\n":br==="\r"?"\\r":`\\${br}`)}function ts(xr){return/^[\x00-\x7F]*$/.test(xr)}function zr(xr){const br=["\xFE\xFF"];for(let yr=0,qr=xr.length;yr<qr;yr++){const Yr=xr.charCodeAt(yr);br.push(String.fromCharCode(Yr>>8&255),String.fromCharCode(Yr&255))}return br.join("")}function ws(xr){return decodeURIComponent(escape(xr))}function es(xr){return unescape(encodeURIComponent(xr))}function ps(xr){return typeof xr=="object"&&xr!==null&&xr.byteLength!==void 0}function ys(xr,br){if(xr.length!==br.length)return!1;for(let yr=0,qr=xr.length;yr<qr;yr++)if(xr[yr]!==br[yr])return!1;return!0}function Or(xr=new Date){return[xr.getUTCFullYear().toString(),(xr.getUTCMonth()+1).toString().padStart(2,"0"),xr.getUTCDate().toString().padStart(2,"0"),xr.getUTCHours().toString().padStart(2,"0"),xr.getUTCMinutes().toString().padStart(2,"0"),xr.getUTCSeconds().toString().padStart(2,"0")].join("")}function Wr(){const xr=Object.create(null);let br=!1;return Object.defineProperty(xr,"settled",{get(){return br}}),xr.promise=new Promise(function(yr,qr){xr.resolve=function(Yr){br=!0,yr(Yr)},xr.reject=function(Yr){br=!0,qr(Yr)}}),xr}},(St,e,_e)=>{_e(3)},(St,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeJS=void 0;const _e=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=_e},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var St,_e,tn,un,gn,vn,fn,en,on,_1,rn,an;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(5),_display_utils=__w_pdfjs_require__(8),_font_loader=__w_pdfjs_require__(11),_canvas=__w_pdfjs_require__(12),_worker_options=__w_pdfjs_require__(15),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(16),_metadata=__w_pdfjs_require__(17),_optional_content_config=__w_pdfjs_require__(18),_transport_stream=__w_pdfjs_require__(19),_xfa_text=__w_pdfjs_require__(20);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:cn,NodeCMapReaderFactory:hn,NodeStandardFontDataFactory:sn}=__w_pdfjs_require__(21);exports.DefaultCanvasFactory=DefaultCanvasFactory=cn,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=hn,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=sn}let createPDFNetworkStream;function setPDFNetworkStreamFactory(cn){createPDFNetworkStream=cn}function getDocument(cn){const hn=new PDFDocumentLoadingTask;let sn;if(typeof cn=="string"||cn instanceof URL)sn={url:cn};else if((0,_util.isArrayBuffer)(cn))sn={data:cn};else if(cn instanceof PDFDataRangeTransport)sn={range:cn};else{if(typeof cn!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!cn.url&&!cn.data&&!cn.range)throw new Error("Invalid parameter object: need either .data, .range or .url");sn=cn}const pn=Object.create(null);let mn=null,yn=null;for(const xn in sn){const Sn=sn[xn];switch(xn){case"url":if(typeof window<"u")try{pn[xn]=new URL(Sn,window.location).href;continue}catch(Pn){(0,_util.warn)(`Cannot create valid URL: "${Pn}".`)}else if(typeof Sn=="string"||Sn instanceof URL){pn[xn]=Sn.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":mn=Sn;continue;case"worker":yn=Sn;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&Sn instanceof Buffer)pn[xn]=new Uint8Array(Sn);else{if(Sn instanceof Uint8Array)break;if(typeof Sn=="string")pn[xn]=(0,_util.stringToBytes)(Sn);else if(typeof Sn=="object"&&Sn!==null&&!isNaN(Sn.length))pn[xn]=new Uint8Array(Sn);else if((0,_util.isArrayBuffer)(Sn))pn[xn]=new Uint8Array(Sn);else throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}continue}pn[xn]=Sn}if(pn.CMapReaderFactory=pn.CMapReaderFactory||DefaultCMapReaderFactory,pn.StandardFontDataFactory=pn.StandardFontDataFactory||DefaultStandardFontDataFactory,pn.ignoreErrors=pn.stopAtErrors!==!0,pn.fontExtraProperties=pn.fontExtraProperties===!0,pn.pdfBug=pn.pdfBug===!0,pn.enableXfa=pn.enableXfa===!0,(!Number.isInteger(pn.rangeChunkSize)||pn.rangeChunkSize<1)&&(pn.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof pn.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(pn.docBaseUrl))&&(pn.docBaseUrl=null),(!Number.isInteger(pn.maxImageSize)||pn.maxImageSize<-1)&&(pn.maxImageSize=-1),typeof pn.cMapUrl!="string"&&(pn.cMapUrl=null),typeof pn.standardFontDataUrl!="string"&&(pn.standardFontDataUrl=null),typeof pn.useWorkerFetch!="boolean"&&(pn.useWorkerFetch=pn.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&pn.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof pn.isEvalSupported!="boolean"&&(pn.isEvalSupported=!0),typeof pn.disableFontFace!="boolean"&&(pn.disableFontFace=_is_node.isNodeJS),typeof pn.useSystemFonts!="boolean"&&(pn.useSystemFonts=!_is_node.isNodeJS&&!pn.disableFontFace),(typeof pn.ownerDocument!="object"||pn.ownerDocument===null)&&(pn.ownerDocument=globalThis.document),typeof pn.disableRange!="boolean"&&(pn.disableRange=!1),typeof pn.disableStream!="boolean"&&(pn.disableStream=!1),typeof pn.disableAutoFetch!="boolean"&&(pn.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(pn.verbosity),!yn){const xn={verbosity:pn.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};yn=xn.port?PDFWorker.fromPort(xn):new PDFWorker(xn),hn._worker=yn}const _n=hn.docId;return yn.promise.then(function(){if(hn.destroyed)throw new Error("Loading aborted");const xn=_fetchDocument(yn,pn,mn,_n),Sn=new Promise(function(Pn){let Ln;mn?Ln=new _transport_stream.PDFDataTransportStream({length:pn.length,initialData:pn.initialData,progressiveDone:pn.progressiveDone,contentDispositionFilename:pn.contentDispositionFilename,disableRange:pn.disableRange,disableStream:pn.disableStream},mn):pn.data||(Ln=createPDFNetworkStream({url:pn.url,length:pn.length,httpHeaders:pn.httpHeaders,withCredentials:pn.withCredentials,rangeChunkSize:pn.rangeChunkSize,disableRange:pn.disableRange,disableStream:pn.disableStream})),Pn(Ln)});return Promise.all([xn,Sn]).then(function([Pn,Ln]){if(hn.destroyed)throw new Error("Loading aborted");const In=new _message_handler.MessageHandler(_n,Pn,yn.port),Rn=new WorkerTransport(In,hn,Ln,pn);hn._transport=Rn,In.send("Ready",null)})}).catch(hn._capability.reject),hn}async function _fetchDocument(cn,hn,sn,pn){if(cn.destroyed)throw new Error("Worker was destroyed");sn&&(hn.length=sn.length,hn.initialData=sn.initialData,hn.progressiveDone=sn.progressiveDone,hn.contentDispositionFilename=sn.contentDispositionFilename);const mn=await cn.messageHandler.sendWithPromise("GetDocRequest",{docId:pn,apiVersion:"2.16.105",source:{data:hn.data,url:hn.url,password:hn.password,disableAutoFetch:hn.disableAutoFetch,rangeChunkSize:hn.rangeChunkSize,length:hn.length},maxImageSize:hn.maxImageSize,disableFontFace:hn.disableFontFace,docBaseUrl:hn.docBaseUrl,ignoreErrors:hn.ignoreErrors,isEvalSupported:hn.isEvalSupported,fontExtraProperties:hn.fontExtraProperties,enableXfa:hn.enableXfa,useSystemFonts:hn.useSystemFonts,cMapUrl:hn.useWorkerFetch?hn.cMapUrl:null,standardFontDataUrl:hn.useWorkerFetch?hn.standardFontDataUrl:null});if(hn.data&&(hn.data=null),cn.destroyed)throw new Error("Worker was destroyed");return mn}const e=class{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${b1(e,St)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var hn;this.destroyed=!0,await((hn=this._transport)==null?void 0:hn.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=e;St=new WeakMap,Mr(PDFDocumentLoadingTask,St,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(hn,sn,pn=!1,mn=null){this.length=hn,this.initialData=sn,this.progressiveDone=pn,this.contentDispositionFilename=mn,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(hn){this._rangeListeners.push(hn)}addProgressListener(hn){this._progressListeners.push(hn)}addProgressiveReadListener(hn){this._progressiveReadListeners.push(hn)}addProgressiveDoneListener(hn){this._progressiveDoneListeners.push(hn)}onDataRange(hn,sn){for(const pn of this._rangeListeners)pn(hn,sn)}onDataProgress(hn,sn){this._readyCapability.promise.then(()=>{for(const pn of this._progressListeners)pn(hn,sn)})}onDataProgressiveRead(hn){this._readyCapability.promise.then(()=>{for(const sn of this._progressiveReadListeners)sn(hn)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const hn of this._progressiveDoneListeners)hn()})}transportReady(){this._readyCapability.resolve()}requestDataRange(hn,sn){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(hn,sn){this._pdfInfo=hn,this._transport=sn,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(hn){return this._transport.getPage(hn)}getPageIndex(hn){return this._transport.getPageIndex(hn)}getDestinations(){return this._transport.getDestinations()}getDestination(hn){return this._transport.getDestination(hn)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(hn=!1){return this._transport.startCleanup(hn||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(hn,sn,pn,mn,yn=!1){this._pageIndex=hn,this._pageInfo=sn,this._ownerDocument=mn,this._transport=pn,this._stats=yn?new _display_utils.StatTimer:null,this._pdfBug=yn,this.commonObjs=pn.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:hn,rotation:sn=this.rotate,offsetX:pn=0,offsetY:mn=0,dontFlip:yn=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:hn,rotation:sn,offsetX:pn,offsetY:mn,dontFlip:yn})}getAnnotations({intent:hn="display"}={}){const sn=this._transport.getRenderingIntent(hn);let pn=this._annotationPromises.get(sn.cacheKey);return pn||(pn=this._transport.getAnnotations(this._pageIndex,sn.renderingIntent),this._annotationPromises.set(sn.cacheKey,pn),pn=pn.then(mn=>{for(const yn of mn)yn.titleObj!==void 0&&Object.defineProperty(yn,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),yn.titleObj.str}}),yn.contentsObj!==void 0&&Object.defineProperty(yn,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),yn.contentsObj.str}});return mn})),pn}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var hn;return((hn=this._transport._htmlForXfa)==null?void 0:hn.children[this._pageIndex])||null}render({canvasContext:hn,viewport:sn,intent:pn="display",annotationMode:mn=_util.AnnotationMode.ENABLE,transform:yn=null,imageLayer:_n=null,canvasFactory:xn=null,background:Sn=null,optionalContentConfigPromise:Pn=null,annotationCanvasMap:Ln=null,pageColors:In=null,printAnnotationStorage:Rn=null}){var Jn,Vn;((Jn=arguments[0])==null?void 0:Jn.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&mn===_util.AnnotationMode.ENABLE&&(mn=_util.AnnotationMode.ENABLE_FORMS)),((Vn=arguments[0])==null?void 0:Vn.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&mn===_util.AnnotationMode.ENABLE&&(mn=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const Mn=this._transport.getRenderingIntent(pn,mn,Rn);this.pendingCleanup=!1,Pn||(Pn=this._transport.getOptionalContentConfig());let Hn=this._intentStates.get(Mn.cacheKey);Hn||(Hn=Object.create(null),this._intentStates.set(Mn.cacheKey,Hn)),Hn.streamReaderCancelTimeout&&(clearTimeout(Hn.streamReaderCancelTimeout),Hn.streamReaderCancelTimeout=null);const Qn=xn||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),Kn=!!(Mn.renderingIntent&_util.RenderingIntentFlag.PRINT);Hn.displayReadyCapability||(Hn.displayReadyCapability=(0,_util.createPromiseCapability)(),Hn.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(Mn));const nr=Xn=>{Hn.renderTasks.delete(Zn),(this.cleanupAfterRender||Kn)&&(this.pendingCleanup=!0),this._tryCleanup(),Xn?(Zn.capability.reject(Xn),this._abortOperatorList({intentState:Hn,reason:Xn instanceof Error?Xn:new Error(Xn)})):Zn.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},Zn=new InternalRenderTask({callback:nr,params:{canvasContext:hn,viewport:sn,transform:yn,imageLayer:_n,background:Sn},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Ln,operatorList:Hn.operatorList,pageIndex:this._pageIndex,canvasFactory:Qn,useRequestAnimationFrame:!Kn,pdfBug:this._pdfBug,pageColors:In});(Hn.renderTasks||(Hn.renderTasks=new Set)).add(Zn);const ir=Zn.task;return Promise.all([Hn.displayReadyCapability.promise,Pn]).then(([Xn,Yn])=>{if(this.pendingCleanup){nr();return}this._stats&&this._stats.time("Rendering"),Zn.initializeGraphics({transparency:Xn,optionalContentConfig:Yn}),Zn.operatorListChanged()}).catch(nr),ir}getOperatorList({intent:hn="display",annotationMode:sn=_util.AnnotationMode.ENABLE,printAnnotationStorage:pn=null}={}){function mn(){_n.operatorList.lastChunk&&(_n.opListReadCapability.resolve(_n.operatorList),_n.renderTasks.delete(xn))}const yn=this._transport.getRenderingIntent(hn,sn,pn,!0);let _n=this._intentStates.get(yn.cacheKey);_n||(_n=Object.create(null),this._intentStates.set(yn.cacheKey,_n));let xn;return _n.opListReadCapability||(xn=Object.create(null),xn.operatorListChanged=mn,_n.opListReadCapability=(0,_util.createPromiseCapability)(),(_n.renderTasks||(_n.renderTasks=new Set)).add(xn),_n.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(yn)),_n.opListReadCapability.promise}streamTextContent({disableCombineTextItems:hn=!1,includeMarkedContent:sn=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:hn!==!0,includeMarkedContent:sn===!0},{highWaterMark:100,size(mn){return mn.items.length}})}getTextContent(hn={}){if(this._transport._htmlForXfa)return this.getXfa().then(pn=>_xfa_text.XfaText.textContent(pn));const sn=this.streamTextContent(hn);return new Promise(function(pn,mn){function yn(){_n.read().then(function({value:Sn,done:Pn}){if(Pn){pn(xn);return}Object.assign(xn.styles,Sn.styles),xn.items.push(...Sn.items),yn()},mn)}const _n=sn.getReader(),xn={items:[],styles:Object.create(null)};yn()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const hn=[];for(const sn of this._intentStates.values())if(this._abortOperatorList({intentState:sn,reason:new Error("Page was destroyed."),force:!0}),!sn.opListReadCapability)for(const pn of sn.renderTasks)hn.push(pn.completed),pn.cancel();this.objs.clear();for(const sn of this._bitmaps)sn.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(hn)}cleanup(hn=!1){return this.pendingCleanup=!0,this._tryCleanup(hn)}_tryCleanup(hn=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:sn,operatorList:pn}of this._intentStates.values())if(sn.size>0||!pn.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,hn&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const sn of this._bitmaps)sn.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(hn,sn){const pn=this._intentStates.get(sn);!pn||(this._stats&&this._stats.timeEnd("Page Request"),pn.displayReadyCapability&&pn.displayReadyCapability.resolve(hn))}_renderPageChunk(hn,sn){for(let pn=0,mn=hn.length;pn<mn;pn++)sn.operatorList.fnArray.push(hn.fnArray[pn]),sn.operatorList.argsArray.push(hn.argsArray[pn]);sn.operatorList.lastChunk=hn.lastChunk,sn.operatorList.separateAnnots=hn.separateAnnots;for(const pn of sn.renderTasks)pn.operatorListChanged();hn.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:hn,cacheKey:sn,annotationStorageMap:pn}){const yn=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:hn,cacheKey:sn,annotationStorage:pn}).getReader(),_n=this._intentStates.get(sn);_n.streamReader=yn;const xn=()=>{yn.read().then(({value:Sn,done:Pn})=>{if(Pn){_n.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Sn,_n),xn())},Sn=>{if(_n.streamReader=null,!this._transport.destroyed){if(_n.operatorList){_n.operatorList.lastChunk=!0;for(const Pn of _n.renderTasks)Pn.operatorListChanged();this._tryCleanup()}if(_n.displayReadyCapability)_n.displayReadyCapability.reject(Sn);else if(_n.opListReadCapability)_n.opListReadCapability.reject(Sn);else throw Sn}})};xn()}_abortOperatorList({intentState:hn,reason:sn,force:pn=!1}){if(!!hn.streamReader){if(!pn){if(hn.renderTasks.size>0)return;if(sn instanceof _display_utils.RenderingCancelledException){hn.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:hn,reason:sn,force:!0}),hn.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(hn.streamReader.cancel(new _util.AbortException(sn.message)).catch(()=>{}),hn.streamReader=null,!this._transport.destroyed){for(const[mn,yn]of this._intentStates)if(yn===hn){this._intentStates.delete(mn);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(hn,sn){const pn={data:structuredClone(hn,sn)};this._deferred.then(()=>{for(const mn of this._listeners)mn.call(this,pn)})}addEventListener(hn,sn){this._listeners.push(sn)}removeEventListener(hn,sn){const pn=this._listeners.indexOf(sn);this._listeners.splice(pn,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const cn=(_e=document==null?void 0:document.currentScript)==null?void 0:_e.src;cn&&(PDFWorkerUtil.fallbackWorkerSrc=cn.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(cn,hn){let sn;try{if(sn=new URL(cn),!sn.origin||sn.origin==="null")return!1}catch{return!1}const pn=new URL(hn,sn);return sn.origin===pn.origin},PDFWorkerUtil.createCDNWrapper=function(cn){const hn=`importScripts("${cn}");`;return URL.createObjectURL(new Blob([hn]))}}const _PDFWorker=class{constructor({name:cn=null,port:hn=null,verbosity:sn=(0,_util.getVerbosityLevel)()}={}){if(hn&&fr(_PDFWorker,tn).has(hn))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=cn,this.destroyed=!1,this.verbosity=sn,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,hn){fr(_PDFWorker,tn).set(hn,this),this._initializeFromPort(hn);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(cn){this._port=cn,this._messageHandler=new _message_handler.MessageHandler("main","worker",cn),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:cn}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,cn)||(cn=PDFWorkerUtil.createCDNWrapper(new URL(cn,window.location).href));const hn=new Worker(cn),sn=new _message_handler.MessageHandler("main","worker",hn),pn=()=>{hn.removeEventListener("error",mn),sn.destroy(),hn.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},mn=()=>{this._webWorker||pn()};hn.addEventListener("error",mn),sn.on("test",_n=>{if(hn.removeEventListener("error",mn),this.destroyed){pn();return}_n?(this._messageHandler=sn,this._port=hn,this._webWorker=hn,this._readyCapability.resolve(),sn.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),sn.destroy(),hn.terminate())}),sn.on("ready",_n=>{if(hn.removeEventListener("error",mn),this.destroyed){pn();return}try{yn()}catch{this._setupFakeWorker()}});const yn=()=>{const _n=new Uint8Array;sn.send("test",_n,[_n.buffer])};yn();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(cn=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const hn=new LoopbackPort;this._port=hn;const sn=`fake${PDFWorkerUtil.fakeWorkerId++}`,pn=new _message_handler.MessageHandler(sn+"_worker",sn,hn);cn.setup(pn,hn);const mn=new _message_handler.MessageHandler(sn,sn+"_worker",hn);this._messageHandler=mn,this._readyCapability.resolve(),mn.send("configure",{verbosity:this.verbosity})}).catch(cn=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${cn.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),fr(_PDFWorker,tn).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(cn){if(!(cn!=null&&cn.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return fr(this,tn).has(cn.port)?fr(this,tn).get(cn.port):new _PDFWorker(cn)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var cn;try{return((cn=globalThis.pdfjsWorker)==null?void 0:cn.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;tn=new WeakMap,Mr(PDFWorker,tn,new WeakMap),exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(hn,sn,pn,mn){Mr(this,un,null);Mr(this,gn,new Map);Mr(this,vn,new Map);Mr(this,fn,null);this.messageHandler=hn,this.loadingTask=sn,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:sn.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:mn.ownerDocument,styleElement:mn.styleElement}),this._params=mn,mn.useWorkerFetch||(this.CMapReaderFactory=new mn.CMapReaderFactory({baseUrl:mn.cMapUrl,isCompressed:mn.cMapPacked}),this.StandardFontDataFactory=new mn.StandardFontDataFactory({baseUrl:mn.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=pn,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return fr(this,un)}getRenderingIntent(hn,sn=_util.AnnotationMode.ENABLE,pn=null,mn=!1){let yn=_util.RenderingIntentFlag.DISPLAY,_n=null;switch(hn){case"any":yn=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":yn=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${hn}`)}switch(sn){case _util.AnnotationMode.DISABLE:yn+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:yn+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:yn+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,_n=(yn&_util.RenderingIntentFlag.PRINT&&pn instanceof _annotation_storage.PrintAnnotationStorage?pn:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${sn}`)}return mn&&(yn+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:yn,cacheKey:`${yn}_${_annotation_storage.AnnotationStorage.getHash(_n)}`,annotationStorageMap:_n}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const hn=[];for(const pn of fr(this,gn).values())hn.push(pn._destroy());fr(this,gn).clear(),fr(this,vn).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const sn=this.messageHandler.sendWithPromise("Terminate",null);return hn.push(sn),Promise.all(hn).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),Kr(this,fn,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:hn,loadingTask:sn}=this;hn.on("GetReader",(pn,mn)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=yn=>{this._lastProgress={loaded:yn.loaded,total:yn.total}},mn.onPull=()=>{this._fullReader.read().then(function({value:yn,done:_n}){if(_n){mn.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(yn),"GetReader - expected an ArrayBuffer."),mn.enqueue(new Uint8Array(yn),1,[yn])}).catch(yn=>{mn.error(yn)})},mn.onCancel=yn=>{this._fullReader.cancel(yn),mn.ready.catch(_n=>{if(!this.destroyed)throw _n})}}),hn.on("ReaderHeadersReady",pn=>{const mn=(0,_util.createPromiseCapability)(),yn=this._fullReader;return yn.headersReady.then(()=>{var _n;(!yn.isStreamingSupported||!yn.isRangeSupported)&&(this._lastProgress&&((_n=sn.onProgress)==null||_n.call(sn,this._lastProgress)),yn.onProgress=xn=>{var Sn;(Sn=sn.onProgress)==null||Sn.call(sn,{loaded:xn.loaded,total:xn.total})}),mn.resolve({isStreamingSupported:yn.isStreamingSupported,isRangeSupported:yn.isRangeSupported,contentLength:yn.contentLength})},mn.reject),mn.promise}),hn.on("GetRangeReader",(pn,mn)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const yn=this._networkStream.getRangeReader(pn.begin,pn.end);if(!yn){mn.close();return}mn.onPull=()=>{yn.read().then(function({value:_n,done:xn}){if(xn){mn.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(_n),"GetRangeReader - expected an ArrayBuffer."),mn.enqueue(new Uint8Array(_n),1,[_n])}).catch(_n=>{mn.error(_n)})},mn.onCancel=_n=>{yn.cancel(_n),mn.ready.catch(xn=>{if(!this.destroyed)throw xn})}}),hn.on("GetDoc",({pdfInfo:pn})=>{this._numPages=pn.numPages,this._htmlForXfa=pn.htmlForXfa,delete pn.htmlForXfa,sn._capability.resolve(new PDFDocumentProxy(pn,this))}),hn.on("DocException",function(pn){let mn;switch(pn.name){case"PasswordException":mn=new _util.PasswordException(pn.message,pn.code);break;case"InvalidPDFException":mn=new _util.InvalidPDFException(pn.message);break;case"MissingPDFException":mn=new _util.MissingPDFException(pn.message);break;case"UnexpectedResponseException":mn=new _util.UnexpectedResponseException(pn.message,pn.status);break;case"UnknownErrorException":mn=new _util.UnknownErrorException(pn.message,pn.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}sn._capability.reject(mn)}),hn.on("PasswordRequest",pn=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),sn.onPassword){const mn=yn=>{yn instanceof Error?this._passwordCapability.reject(yn):this._passwordCapability.resolve({password:yn})};try{sn.onPassword(mn,pn.code)}catch(yn){this._passwordCapability.reject(yn)}}else this._passwordCapability.reject(new _util.PasswordException(pn.message,pn.code));return this._passwordCapability.promise}),hn.on("DataLoaded",pn=>{var mn;(mn=sn.onProgress)==null||mn.call(sn,{loaded:pn.length,total:pn.length}),this.downloadInfoCapability.resolve(pn)}),hn.on("StartRenderPage",pn=>{if(this.destroyed)return;fr(this,gn).get(pn.pageIndex)._startRenderPage(pn.transparency,pn.cacheKey)}),hn.on("commonobj",([pn,mn,yn])=>{var _n;if(!this.destroyed&&!this.commonObjs.has(pn))switch(mn){case"Font":const xn=this._params;if("error"in yn){const Ln=yn.error;(0,_util.warn)(`Error during font loading: ${Ln}`),this.commonObjs.resolve(pn,Ln);break}let Sn=null;xn.pdfBug&&((_n=globalThis.FontInspector)==null?void 0:_n.enabled)&&(Sn={registerFont(Ln,In){globalThis.FontInspector.fontAdded(Ln,In)}});const Pn=new _font_loader.FontFaceObject(yn,{isEvalSupported:xn.isEvalSupported,disableFontFace:xn.disableFontFace,ignoreErrors:xn.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:Sn});this.fontLoader.bind(Pn).catch(Ln=>hn.sendWithPromise("FontFallback",{id:pn})).finally(()=>{!xn.fontExtraProperties&&Pn.data&&(Pn.data=null),this.commonObjs.resolve(pn,Pn)});break;case"FontPath":case"Image":this.commonObjs.resolve(pn,yn);break;default:throw new Error(`Got unknown common object type ${mn}`)}}),hn.on("obj",([pn,mn,yn,_n])=>{var Sn;if(this.destroyed)return;const xn=fr(this,gn).get(mn);if(!xn.objs.has(pn))switch(yn){case"Image":xn.objs.resolve(pn,_n);const Pn=8e6;if(_n){let Ln;if(_n.bitmap){const{bitmap:In,width:Rn,height:Mn}=_n;Ln=Rn*Mn*4,xn._bitmaps.add(In)}else Ln=((Sn=_n.data)==null?void 0:Sn.length)||0;Ln>Pn&&(xn.cleanupAfterRender=!0)}break;case"Pattern":xn.objs.resolve(pn,_n);break;default:throw new Error(`Got unknown object type ${yn}`)}}),hn.on("DocProgress",pn=>{var mn;this.destroyed||(mn=sn.onProgress)==null||mn.call(sn,{loaded:pn.loaded,total:pn.total})}),hn.on("DocStats",pn=>{this.destroyed||Kr(this,un,Object.freeze({streamTypes:Object.freeze(pn.streamTypes),fontTypes:Object.freeze(pn.fontTypes)}))}),hn.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),hn.on("FetchBuiltInCMap",pn=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(pn):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),hn.on("FetchStandardFontData",pn=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(pn):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:hn}){var sn,pn;this.destroyed||(pn=(sn=this.loadingTask).onUnsupportedFeature)==null||pn.call(sn,hn)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(hn){if(!Number.isInteger(hn)||hn<=0||hn>this._numPages)return Promise.reject(new Error("Invalid page request."));const sn=hn-1,pn=fr(this,vn).get(sn);if(pn)return pn;const mn=this.messageHandler.sendWithPromise("GetPage",{pageIndex:sn}).then(yn=>{if(this.destroyed)throw new Error("Transport destroyed");const _n=new PDFPageProxy(sn,yn,this,this._params.ownerDocument,this._params.pdfBug);return fr(this,gn).set(sn,_n),_n});return fr(this,vn).set(sn,mn),mn}getPageIndex(hn){return typeof hn!="object"||hn===null||!Number.isInteger(hn.num)||hn.num<0||!Number.isInteger(hn.gen)||hn.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:hn.num,gen:hn.gen})}getAnnotations(hn,sn){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:hn,intent:sn})}saveDocument(){var hn,sn;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(sn=(hn=this._fullReader)==null?void 0:hn.filename)!=null?sn:null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(hn){return typeof hn!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:hn})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(hn){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:hn})}getStructTree(hn){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:hn})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(hn=>new _optional_content_config.OptionalContentConfig(hn))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return fr(this,fn)||Kr(this,fn,this.messageHandler.sendWithPromise("GetMetadata",null).then(hn=>{var sn,pn,mn,yn;return{info:hn[0],metadata:hn[1]?new _metadata.Metadata(hn[1]):null,contentDispositionFilename:(pn=(sn=this._fullReader)==null?void 0:sn.filename)!=null?pn:null,contentLength:(yn=(mn=this._fullReader)==null?void 0:mn.contentLength)!=null?yn:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(hn=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const sn of fr(this,gn).values())if(!sn.cleanup())throw new Error(`startCleanup: Page ${sn.pageNumber} is currently rendering.`);this.commonObjs.clear(),hn||this.fontLoader.clear(),Kr(this,fn,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const hn=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:hn.disableAutoFetch,enableXfa:hn.enableXfa})}}un=new WeakMap,gn=new WeakMap,vn=new WeakMap,fn=new WeakMap;class PDFObjects{constructor(){Mr(this,on);Mr(this,en,Object.create(null))}get(hn,sn=null){if(sn){const mn=Ur(this,on,_1).call(this,hn);return mn.capability.promise.then(()=>sn(mn.data)),null}const pn=fr(this,en)[hn];if(!(pn!=null&&pn.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${hn}.`);return pn.data}has(hn){const sn=fr(this,en)[hn];return(sn==null?void 0:sn.capability.settled)||!1}resolve(hn,sn=null){const pn=Ur(this,on,_1).call(this,hn);pn.data=sn,pn.capability.resolve()}clear(){Kr(this,en,Object.create(null))}}en=new WeakMap,on=new WeakSet,_1=function(hn){const sn=fr(this,en)[hn];return sn||(fr(this,en)[hn]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(hn){Mr(this,rn,null);Kr(this,rn,hn),this.onContinue=null}get promise(){return fr(this,rn).capability.promise}cancel(){fr(this,rn).cancel()}get separateAnnots(){const{separateAnnots:hn}=fr(this,rn).operatorList;if(!hn)return!1;const{annotationCanvasMap:sn}=fr(this,rn);return hn.form||hn.canvas&&(sn==null?void 0:sn.size)>0}}rn=new WeakMap,exports.RenderTask=RenderTask;const nn=class{constructor({callback:hn,params:sn,objs:pn,commonObjs:mn,annotationCanvasMap:yn,operatorList:_n,pageIndex:xn,canvasFactory:Sn,useRequestAnimationFrame:Pn=!1,pdfBug:Ln=!1,pageColors:In=null}){this.callback=hn,this.params=sn,this.objs=pn,this.commonObjs=mn,this.annotationCanvasMap=yn,this.operatorListIdx=null,this.operatorList=_n,this._pageIndex=xn,this.canvasFactory=Sn,this._pdfBug=Ln,this.pageColors=In,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Pn===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=sn.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:hn=!1,optionalContentConfig:sn}){var Sn;if(this.cancelled)return;if(this._canvas){if(fr(nn,an).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");fr(nn,an).add(this._canvas)}this._pdfBug&&((Sn=globalThis.StepperManager)==null?void 0:Sn.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:pn,viewport:mn,transform:yn,imageLayer:_n,background:xn}=this.params;this.gfx=new _canvas.CanvasGraphics(pn,this.commonObjs,this.objs,this.canvasFactory,_n,sn,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:yn,viewport:mn,transparency:hn,background:xn}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(hn=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&fr(nn,an).delete(this._canvas),this.callback(hn||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&fr(nn,an).delete(this._canvas),this.callback())))}};let InternalRenderTask=nn;an=new WeakMap,Mr(InternalRenderTask,an,new WeakSet);const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build},(St,e,_e)=>{var en,v0,dn;Object.defineProperty(e,"__esModule",{value:!0}),e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var tn=_e(1),un=_e(6),gn=_e(10);class vn{constructor(){Mr(this,en);this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(an,nn){const cn=this._storage.get(an);return cn===void 0?nn:Object.assign(nn,cn)}getRawValue(an){return this._storage.get(an)}remove(an){if(this._storage.delete(an),this._storage.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const nn of this._storage.values())if(nn instanceof un.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(an,nn){const cn=this._storage.get(an);let hn=!1;if(cn!==void 0)for(const[sn,pn]of Object.entries(nn))cn[sn]!==pn&&(hn=!0,cn[sn]=pn);else hn=!0,this._storage.set(an,nn);hn&&Ur(this,en,v0).call(this),nn instanceof un.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(nn.constructor._type)}has(an){return this._storage.has(an)}getAll(){return this._storage.size>0?(0,tn.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new fn(this)}get serializable(){if(this._storage.size===0)return null;const an=new Map;for(const[nn,cn]of this._storage){const hn=cn instanceof un.AnnotationEditor?cn.serialize():cn;hn&&an.set(nn,hn)}return an}static getHash(an){if(!an)return"";const nn=new gn.MurmurHash3_64;for(const[cn,hn]of an)nn.update(`${cn}:${JSON.stringify(hn)}`);return nn.hexdigest()}}en=new WeakSet,v0=function(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=vn;class fn extends vn{constructor(nn){super();Mr(this,dn,null);Kr(this,dn,structuredClone(nn.serializable))}get print(){(0,tn.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return fr(this,dn)}}dn=new WeakMap,e.PrintAnnotationStorage=fn},(St,e,_e)=>{var vn,fn,en,on,dn,rn;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var tn=_e(7),un=_e(1);const an=class{constructor(cn){Mr(this,vn,this.focusin.bind(this));Mr(this,fn,this.focusout.bind(this));Mr(this,en,!1);Mr(this,on,!1);Mr(this,dn,!1);Mr(this,rn,an._zIndex++);this.constructor===an&&(0,un.unreachable)("Cannot initialize AnnotationEditor."),this.parent=cn.parent,this.id=cn.id,this.width=this.height=null,this.pageIndex=cn.parent.pageIndex,this.name=cn.name,this.div=null;const[hn,sn]=this.parent.viewportBaseDimensions;this.x=cn.x/hn,this.y=cn.y/sn,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,un.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=fr(this,rn)}focusin(cn){fr(this,en)?Kr(this,en,!1):this.parent.setSelected(this)}focusout(cn){if(!this.isAttachedToDOM)return;const hn=cn.relatedTarget;hn!=null&&hn.closest(`#${this.id}`)||(cn.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(cn){const hn=this.parent.div.getBoundingClientRect();this.startX=cn.clientX-hn.x,this.startY=cn.clientY-hn.y,cn.dataTransfer.setData("text/plain",this.id),cn.dataTransfer.effectAllowed="move"}setAt(cn,hn,sn,pn){const[mn,yn]=this.parent.viewportBaseDimensions;[sn,pn]=this.screenToPageTranslation(sn,pn),this.x=(cn+sn)/mn,this.y=(hn+pn)/yn,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(cn,hn){const[sn,pn]=this.parent.viewportBaseDimensions;[cn,hn]=this.screenToPageTranslation(cn,hn),this.x+=cn/sn,this.y+=hn/pn,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(cn,hn){const{rotation:sn}=this.parent.viewport;switch(sn){case 90:return[hn,-cn];case 180:return[-cn,-hn];case 270:return[-hn,cn];default:return[cn,hn]}}setDims(cn,hn){const[sn,pn]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*cn/sn}%`,this.div.style.height=`${100*hn/pn}%`}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",fr(this,vn)),this.div.addEventListener("focusout",fr(this,fn));const[cn,hn]=this.getInitialTranslation();return this.translate(cn,hn),(0,tn.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(cn){const hn=tn.KeyboardManager.platform.isMac;if(cn.button!==0||cn.ctrlKey&&hn){cn.preventDefault();return}cn.ctrlKey&&!hn||cn.shiftKey||cn.metaKey&&hn?this.parent.toggleSelected(this):this.parent.setSelected(this),Kr(this,en,!0)}getRect(cn,hn){const[sn,pn]=this.parent.viewportBaseDimensions,[mn,yn]=this.parent.pageDimensions,_n=mn*cn/sn,xn=yn*hn/pn,Sn=this.x*mn,Pn=this.y*yn,Ln=this.width*mn,In=this.height*yn;switch(this.rotation){case 0:return[Sn+_n,yn-Pn-xn-In,Sn+_n+Ln,yn-Pn-xn];case 90:return[Sn+xn,yn-Pn+_n,Sn+xn+In,yn-Pn+_n+Ln];case 180:return[Sn-_n-Ln,yn-Pn+xn,Sn-_n,yn-Pn+xn+In];case 270:return[Sn-xn-In,yn-Pn-_n-Ln,Sn-xn,yn-Pn-_n];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(cn,hn){const[sn,pn,mn,yn]=cn,_n=mn-sn,xn=yn-pn;switch(this.rotation){case 0:return[sn,hn-yn,_n,xn];case 90:return[sn,hn-pn,xn,_n];case 180:return[mn,hn-pn,_n,xn];case 270:return[mn,hn-yn,xn,_n];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){Kr(this,dn,!0)}disableEditMode(){Kr(this,dn,!1)}isInEditMode(){return fr(this,dn)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var cn;(cn=this.div)==null||cn.addEventListener("focusin",fr(this,vn))}serialize(){(0,un.unreachable)("An editor must be serializable")}static deserialize(cn,hn){const sn=new this.prototype.constructor({parent:hn,id:hn.getNextId()});sn.rotation=cn.rotation;const[pn,mn]=hn.pageDimensions,[yn,_n,xn,Sn]=sn.getRectInCurrentCoords(cn.rect,mn);return sn.x=yn/pn,sn.y=_n/mn,sn.width=xn/pn,sn.height=Sn/mn,sn}remove(){this.div.removeEventListener("focusin",fr(this,vn)),this.div.removeEventListener("focusout",fr(this,fn)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var cn;(cn=this.div)==null||cn.classList.add("selectedEditor")}unselect(){var cn;(cn=this.div)==null||cn.classList.remove("selectedEditor")}updateParams(cn,hn){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return fr(this,on)}set isEditing(cn){Kr(this,on,cn),cn?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};let gn=an;vn=new WeakMap,fn=new WeakMap,en=new WeakMap,on=new WeakMap,dn=new WeakMap,rn=new WeakMap,Ws(gn,"_colorManager",new tn.ColorManager),Ws(gn,"_zIndex",1),e.AnnotationEditor=gn},(St,e,_e)=>{var nn,cn,hn,sn,pn,mn,y0,xn,Pn,Ln,In,Rn,Mn,Hn,Qn,Kn,nr,Zn,ir,Jn,Vn,Xn,Yn,Tn,An,wn,b0,Nn,x1,Un,oo,er,Iu,Bn,_0,qn,x0,jn,w1,gr,ju,vr,Sp;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=gn,e.opacityToHex=vn;var tn=_e(1),un=_e(8);function gn(_r,or,Er){for(const Dr of Er)or.addEventListener(Dr,_r[Dr].bind(_r))}function vn(_r){return Math.round(Math.min(255,Math.max(1,255*_r))).toString(16).padStart(2,"0")}class fn{constructor(){Mr(this,nn,0)}getId(){return`${tn.AnnotationEditorPrefix}${b1(this,nn)._++}`}}nn=new WeakMap;class en{constructor(or=128){Mr(this,cn,[]);Mr(this,hn,!1);Mr(this,sn,void 0);Mr(this,pn,-1);Kr(this,sn,or)}add({cmd:or,undo:Er,mustExec:Dr,type:Rr=NaN,overwriteIfSameType:Gr=!1,keepUndo:Ir=!1}){if(Dr&&or(),fr(this,hn))return;const ts={cmd:or,undo:Er,type:Rr};if(fr(this,pn)===-1){fr(this,cn).length>0&&(fr(this,cn).length=0),Kr(this,pn,0),fr(this,cn).push(ts);return}if(Gr&&fr(this,cn)[fr(this,pn)].type===Rr){Ir&&(ts.undo=fr(this,cn)[fr(this,pn)].undo),fr(this,cn)[fr(this,pn)]=ts;return}const zr=fr(this,pn)+1;zr===fr(this,sn)?fr(this,cn).splice(0,1):(Kr(this,pn,zr),zr<fr(this,cn).length&&fr(this,cn).splice(zr)),fr(this,cn).push(ts)}undo(){fr(this,pn)!==-1&&(Kr(this,hn,!0),fr(this,cn)[fr(this,pn)].undo(),Kr(this,hn,!1),Kr(this,pn,fr(this,pn)-1))}redo(){fr(this,pn)<fr(this,cn).length-1&&(Kr(this,pn,fr(this,pn)+1),Kr(this,hn,!0),fr(this,cn)[fr(this,pn)].cmd(),Kr(this,hn,!1))}hasSomethingToUndo(){return fr(this,pn)!==-1}hasSomethingToRedo(){return fr(this,pn)<fr(this,cn).length-1}destroy(){Kr(this,cn,null)}}cn=new WeakMap,hn=new WeakMap,sn=new WeakMap,pn=new WeakMap,e.CommandManager=en;const _n=class{constructor(or){Mr(this,mn);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const Er=_n.platform.isMac;for(const[Dr,Rr]of or)for(const Gr of Dr){const Ir=Gr.startsWith("mac+");Er&&Ir?(this.callbacks.set(Gr.slice(4),Rr),this.allKeys.add(Gr.split("+").at(-1))):!Er&&!Ir&&(this.callbacks.set(Gr,Rr),this.allKeys.add(Gr.split("+").at(-1)))}}static get platform(){const or=typeof navigator<"u"?navigator.platform:"";return(0,tn.shadow)(this,"platform",{isWin:or.includes("Win"),isMac:or.includes("Mac")})}exec(or,Er){if(!this.allKeys.has(Er.key))return;const Dr=this.callbacks.get(Ur(this,mn,y0).call(this,Er));!Dr||(Dr.bind(or)(),Er.stopPropagation(),Er.preventDefault())}};let on=_n;mn=new WeakSet,y0=function(or){or.altKey&&this.buffer.push("alt"),or.ctrlKey&&this.buffer.push("ctrl"),or.metaKey&&this.buffer.push("meta"),or.shiftKey&&this.buffer.push("shift"),this.buffer.push(or.key);const Er=this.buffer.join("+");return this.buffer.length=0,Er},e.KeyboardManager=on;class dn{constructor(){Mr(this,xn,null)}copy(or){!or||(Array.isArray(or)?Kr(this,xn,or.map(Er=>Er.serialize())):Kr(this,xn,[or.serialize()]),Kr(this,xn,fr(this,xn).filter(Er=>!!Er)),fr(this,xn).length===0&&Kr(this,xn,null))}paste(){return fr(this,xn)}isEmpty(){return fr(this,xn)===null}destroy(){Kr(this,xn,null)}}xn=new WeakMap;const Sn=class{get _colors(){const or=new Map([["CanvasText",null],["Canvas",null]]);return(0,un.getColorValues)(or),(0,tn.shadow)(this,"_colors",or)}convert(or){const Er=(0,un.getRGB)(or);if(!window.matchMedia("(forced-colors: active)").matches)return Er;for(const[Dr,Rr]of this._colors)if(Rr.every((Gr,Ir)=>Gr===Er[Ir]))return Sn._colorsMapping.get(Dr);return Er}getHexCode(or){const Er=this._colors.get(or);return Er?tn.Util.makeHexColor(...Er):or}};let rn=Sn;Ws(rn,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),e.ColorManager=rn;const hr=class{constructor(or,Er){Mr(this,wn);Mr(this,Nn);Mr(this,Un);Mr(this,er);Mr(this,Bn);Mr(this,qn);Mr(this,jn);Mr(this,gr);Mr(this,vr);Mr(this,Pn,null);Mr(this,Ln,new Map);Mr(this,In,new Map);Mr(this,Rn,new dn);Mr(this,Mn,new en);Mr(this,Hn,0);Mr(this,Qn,null);Mr(this,Kn,null);Mr(this,nr,new fn);Mr(this,Zn,!1);Mr(this,ir,tn.AnnotationEditorType.NONE);Mr(this,Jn,new Set);Mr(this,Vn,this.keydown.bind(this));Mr(this,Xn,this.onEditingAction.bind(this));Mr(this,Yn,this.onPageChanging.bind(this));Mr(this,Tn,{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});Mr(this,An,null);Kr(this,An,or),Kr(this,Kn,Er),fr(this,Kn)._on("editingaction",fr(this,Xn)),fr(this,Kn)._on("pagechanging",fr(this,Yn))}destroy(){Ur(this,Nn,x1).call(this),fr(this,Kn)._off("editingaction",fr(this,Xn)),fr(this,Kn)._off("pagechanging",fr(this,Yn));for(const or of fr(this,In).values())or.destroy();fr(this,In).clear(),fr(this,Ln).clear(),Kr(this,Pn,null),fr(this,Jn).clear(),fr(this,Rn).destroy(),fr(this,Mn).destroy()}onPageChanging({pageNumber:or}){Kr(this,Hn,or-1)}focusMainContainer(){fr(this,An).focus()}keydown(or){var Er;(Er=this.getActive())!=null&&Er.shouldGetKeyboardEvents()||hr._keyboardManager.exec(this,or)}onEditingAction(or){["undo","redo","cut","copy","paste","delete","selectAll"].includes(or.name)&&this[or.name]()}setEditingState(or){or?(Ur(this,wn,b0).call(this),Ur(this,Un,oo).call(this,{isEditing:fr(this,ir)!==tn.AnnotationEditorType.NONE,isEmpty:Ur(this,gr,ju).call(this),hasSomethingToUndo:fr(this,Mn).hasSomethingToUndo(),hasSomethingToRedo:fr(this,Mn).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:fr(this,Rn).isEmpty()})):(Ur(this,Nn,x1).call(this),Ur(this,Un,oo).call(this,{isEditing:!1}))}registerEditorTypes(or){Kr(this,Qn,or);for(const Er of fr(this,Qn))Ur(this,er,Iu).call(this,Er.defaultPropertiesToUpdate)}getId(){return fr(this,nr).getId()}addLayer(or){fr(this,In).set(or.pageIndex,or),fr(this,Zn)?or.enable():or.disable()}removeLayer(or){fr(this,In).delete(or.pageIndex)}updateMode(or){if(Kr(this,ir,or),or===tn.AnnotationEditorType.NONE)this.setEditingState(!1),Ur(this,qn,x0).call(this);else{this.setEditingState(!0),Ur(this,Bn,_0).call(this);for(const Er of fr(this,In).values())Er.updateMode(or)}}updateToolbar(or){or!==fr(this,ir)&&fr(this,Kn).dispatch("switchannotationeditormode",{source:this,mode:or})}updateParams(or,Er){for(const Dr of fr(this,Jn))Dr.updateParams(or,Er);for(const Dr of fr(this,Qn))Dr.updateDefaultParams(or,Er)}getEditors(or){const Er=[];for(const Dr of fr(this,Ln).values())Dr.pageIndex===or&&Er.push(Dr);return Er}getEditor(or){return fr(this,Ln).get(or)}addEditor(or){fr(this,Ln).set(or.id,or)}removeEditor(or){fr(this,Ln).delete(or.id),this.unselect(or)}setActiveEditor(or){fr(this,Pn)!==or&&(Kr(this,Pn,or),or&&Ur(this,er,Iu).call(this,or.propertiesToUpdate))}toggleSelected(or){if(fr(this,Jn).has(or)){fr(this,Jn).delete(or),or.unselect(),Ur(this,Un,oo).call(this,{hasSelectedEditor:this.hasSelection});return}fr(this,Jn).add(or),or.select(),Ur(this,er,Iu).call(this,or.propertiesToUpdate),Ur(this,Un,oo).call(this,{hasSelectedEditor:!0})}setSelected(or){for(const Er of fr(this,Jn))Er!==or&&Er.unselect();fr(this,Jn).clear(),fr(this,Jn).add(or),or.select(),Ur(this,er,Iu).call(this,or.propertiesToUpdate),Ur(this,Un,oo).call(this,{hasSelectedEditor:!0})}isSelected(or){return fr(this,Jn).has(or)}unselect(or){or.unselect(),fr(this,Jn).delete(or),Ur(this,Un,oo).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return fr(this,Jn).size!==0}undo(){fr(this,Mn).undo(),Ur(this,Un,oo).call(this,{hasSomethingToUndo:fr(this,Mn).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Ur(this,gr,ju).call(this)})}redo(){fr(this,Mn).redo(),Ur(this,Un,oo).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:fr(this,Mn).hasSomethingToRedo(),isEmpty:Ur(this,gr,ju).call(this)})}addCommands(or){fr(this,Mn).add(or),Ur(this,Un,oo).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Ur(this,gr,ju).call(this)})}delete(){if(fr(this,Pn)&&fr(this,Pn).commitOrRemove(),!this.hasSelection)return;const or=[...fr(this,Jn)],Er=()=>{for(const Rr of or)Rr.remove()},Dr=()=>{for(const Rr of or)Ur(this,jn,w1).call(this,Rr)};this.addCommands({cmd:Er,undo:Dr,mustExec:!0})}copy(){if(fr(this,Pn)&&fr(this,Pn).commitOrRemove(),this.hasSelection){const or=[];for(const Er of fr(this,Jn))Er.isEmpty()||or.push(Er);if(or.length===0)return;fr(this,Rn).copy(or),Ur(this,Un,oo).call(this,{hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(fr(this,Rn).isEmpty())return;this.unselectAll();const or=fr(this,In).get(fr(this,Hn)),Er=fr(this,Rn).paste().map(Gr=>or.deserialize(Gr)),Dr=()=>{for(const Gr of Er)Ur(this,jn,w1).call(this,Gr);Ur(this,vr,Sp).call(this,Er)},Rr=()=>{for(const Gr of Er)Gr.remove()};this.addCommands({cmd:Dr,undo:Rr,mustExec:!0})}selectAll(){for(const or of fr(this,Jn))or.commit();Ur(this,vr,Sp).call(this,fr(this,Ln).values())}unselectAll(){if(fr(this,Pn)){fr(this,Pn).commitOrRemove();return}if(Ur(this,vr,Sp).size!==0){for(const or of fr(this,Jn))or.unselect();fr(this,Jn).clear(),Ur(this,Un,oo).call(this,{hasSelectedEditor:!1})}}isActive(or){return fr(this,Pn)===or}getActive(){return fr(this,Pn)}getMode(){return fr(this,ir)}};let an=hr;Pn=new WeakMap,Ln=new WeakMap,In=new WeakMap,Rn=new WeakMap,Mn=new WeakMap,Hn=new WeakMap,Qn=new WeakMap,Kn=new WeakMap,nr=new WeakMap,Zn=new WeakMap,ir=new WeakMap,Jn=new WeakMap,Vn=new WeakMap,Xn=new WeakMap,Yn=new WeakMap,Tn=new WeakMap,An=new WeakMap,wn=new WeakSet,b0=function(){fr(this,An).addEventListener("keydown",fr(this,Vn))},Nn=new WeakSet,x1=function(){fr(this,An).removeEventListener("keydown",fr(this,Vn))},Un=new WeakSet,oo=function(or){Object.entries(or).some(([Dr,Rr])=>fr(this,Tn)[Dr]!==Rr)&&fr(this,Kn).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(fr(this,Tn),or)})},er=new WeakSet,Iu=function(or){fr(this,Kn).dispatch("annotationeditorparamschanged",{source:this,details:or})},Bn=new WeakSet,_0=function(){if(!fr(this,Zn)){Kr(this,Zn,!0);for(const or of fr(this,In).values())or.enable()}},qn=new WeakSet,x0=function(){if(this.unselectAll(),fr(this,Zn)){Kr(this,Zn,!1);for(const or of fr(this,In).values())or.disable()}},jn=new WeakSet,w1=function(or){const Er=fr(this,In).get(or.pageIndex);Er?Er.addOrRebuild(or):this.addEditor(or)},gr=new WeakSet,ju=function(){if(fr(this,Ln).size===0)return!0;if(fr(this,Ln).size===1)for(const or of fr(this,Ln).values())return or.isEmpty();return!1},vr=new WeakSet,Sp=function(or){fr(this,Jn).clear();for(const Er of or)Er.isEmpty()||(fr(this,Jn).add(Er),Er.select());Ur(this,Un,oo).call(this,{hasSelectedEditor:!0})},Ws(an,"_keyboardManager",new on([[["ctrl+a","mac+meta+a"],hr.prototype.selectAll],[["ctrl+c","mac+meta+c"],hr.prototype.copy],[["ctrl+v","mac+meta+v"],hr.prototype.paste],[["ctrl+x","mac+meta+x"],hr.prototype.cut],[["ctrl+z","mac+meta+z"],hr.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],hr.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],hr.prototype.delete],[["Escape","mac+Escape"],hr.prototype.unselectAll]])),e.AnnotationEditorUIManager=an},(St,e,_e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=e.AnnotationPrefix=void 0,e.deprecated=Sn,e.getColorValues=Mn,e.getCurrentTransform=Hn,e.getCurrentTransformInverse=Qn,e.getFilenameFromUrl=pn,e.getPdfFilenameFromUrl=mn,e.getRGB=Rn,e.getXfaPageViewport=In,e.isDataScheme=hn,e.isPdfFile=sn,e.isValidFetchUrl=_n,e.loadScript=xn;var tn=_e(9),un=_e(1);const gn="http://www.w3.org/2000/svg",vn="pdfjs_internal_id_";e.AnnotationPrefix=vn;const Kn=class{};let fn=Kn;Ws(fn,"CSS",96),Ws(fn,"PDF",72),Ws(fn,"PDF_TO_CSS_UNITS",Kn.CSS/Kn.PDF),e.PixelsPerInch=fn;class en extends tn.BaseCanvasFactory{constructor({ownerDocument:Zn=globalThis.document}={}){super(),this._document=Zn}_createCanvas(Zn,ir){const Jn=this._document.createElement("canvas");return Jn.width=Zn,Jn.height=ir,Jn}}e.DOMCanvasFactory=en;async function on(nr,Zn=!1){if(_n(nr,document.baseURI)){const ir=await fetch(nr);if(!ir.ok)throw new Error(ir.statusText);return Zn?new Uint8Array(await ir.arrayBuffer()):(0,un.stringToBytes)(await ir.text())}return new Promise((ir,Jn)=>{const Vn=new XMLHttpRequest;Vn.open("GET",nr,!0),Zn&&(Vn.responseType="arraybuffer"),Vn.onreadystatechange=()=>{if(Vn.readyState===XMLHttpRequest.DONE){if(Vn.status===200||Vn.status===0){let Xn;if(Zn&&Vn.response?Xn=new Uint8Array(Vn.response):!Zn&&Vn.responseText&&(Xn=(0,un.stringToBytes)(Vn.responseText)),Xn){ir(Xn);return}}Jn(new Error(Vn.statusText))}},Vn.send(null)})}class dn extends tn.BaseCMapReaderFactory{_fetchData(Zn,ir){return on(Zn,this.isCompressed).then(Jn=>({cMapData:Jn,compressionType:ir}))}}e.DOMCMapReaderFactory=dn;class rn extends tn.BaseStandardFontDataFactory{_fetchData(Zn){return on(Zn,!0)}}e.DOMStandardFontDataFactory=rn;class an extends tn.BaseSVGFactory{_createSVG(Zn){return document.createElementNS(gn,Zn)}}e.DOMSVGFactory=an;class nn{constructor({viewBox:Zn,scale:ir,rotation:Jn,offsetX:Vn=0,offsetY:Xn=0,dontFlip:Yn=!1}){this.viewBox=Zn,this.scale=ir,this.rotation=Jn,this.offsetX=Vn,this.offsetY=Xn;const Tn=(Zn[2]+Zn[0])/2,An=(Zn[3]+Zn[1])/2;let wn,En,Nn,Fn;switch(Jn%=360,Jn<0&&(Jn+=360),Jn){case 180:wn=-1,En=0,Nn=0,Fn=1;break;case 90:wn=0,En=1,Nn=1,Fn=0;break;case 270:wn=0,En=-1,Nn=-1,Fn=0;break;case 0:wn=1,En=0,Nn=0,Fn=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Yn&&(Nn=-Nn,Fn=-Fn);let Un,Gn,er,On;wn===0?(Un=Math.abs(An-Zn[1])*ir+Vn,Gn=Math.abs(Tn-Zn[0])*ir+Xn,er=Math.abs(Zn[3]-Zn[1])*ir,On=Math.abs(Zn[2]-Zn[0])*ir):(Un=Math.abs(Tn-Zn[0])*ir+Vn,Gn=Math.abs(An-Zn[1])*ir+Xn,er=Math.abs(Zn[2]-Zn[0])*ir,On=Math.abs(Zn[3]-Zn[1])*ir),this.transform=[wn*ir,En*ir,Nn*ir,Fn*ir,Un-wn*ir*Tn-Nn*ir*An,Gn-En*ir*Tn-Fn*ir*An],this.width=er,this.height=On}clone({scale:Zn=this.scale,rotation:ir=this.rotation,offsetX:Jn=this.offsetX,offsetY:Vn=this.offsetY,dontFlip:Xn=!1}={}){return new nn({viewBox:this.viewBox.slice(),scale:Zn,rotation:ir,offsetX:Jn,offsetY:Vn,dontFlip:Xn})}convertToViewportPoint(Zn,ir){return un.Util.applyTransform([Zn,ir],this.transform)}convertToViewportRectangle(Zn){const ir=un.Util.applyTransform([Zn[0],Zn[1]],this.transform),Jn=un.Util.applyTransform([Zn[2],Zn[3]],this.transform);return[ir[0],ir[1],Jn[0],Jn[1]]}convertToPdfPoint(Zn,ir){return un.Util.applyInverseTransform([Zn,ir],this.transform)}}e.PageViewport=nn;class cn extends un.BaseException{constructor(Zn,ir){super(Zn,"RenderingCancelledException"),this.type=ir}}e.RenderingCancelledException=cn;function hn(nr){const Zn=nr.length;let ir=0;for(;ir<Zn&&nr[ir].trim()==="";)ir++;return nr.substring(ir,ir+5).toLowerCase()==="data:"}function sn(nr){return typeof nr=="string"&&/\.pdf$/i.test(nr)}function pn(nr){const Zn=nr.indexOf("#"),ir=nr.indexOf("?"),Jn=Math.min(Zn>0?Zn:nr.length,ir>0?ir:nr.length);return nr.substring(nr.lastIndexOf("/",Jn)+1,Jn)}function mn(nr,Zn="document.pdf"){if(typeof nr!="string")return Zn;if(hn(nr))return(0,un.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Zn;const ir=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Jn=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Vn=ir.exec(nr);let Xn=Jn.exec(Vn[1])||Jn.exec(Vn[2])||Jn.exec(Vn[3]);if(Xn&&(Xn=Xn[0],Xn.includes("%")))try{Xn=Jn.exec(decodeURIComponent(Xn))[0]}catch{}return Xn||Zn}class yn{constructor(){this.started=Object.create(null),this.times=[]}time(Zn){Zn in this.started&&(0,un.warn)(`Timer is already running for ${Zn}`),this.started[Zn]=Date.now()}timeEnd(Zn){Zn in this.started||(0,un.warn)(`Timer has not been started for ${Zn}`),this.times.push({name:Zn,start:this.started[Zn],end:Date.now()}),delete this.started[Zn]}toString(){const Zn=[];let ir=0;for(const Jn of this.times){const Vn=Jn.name;Vn.length>ir&&(ir=Vn.length)}for(const Jn of this.times){const Vn=Jn.end-Jn.start;Zn.push(`${Jn.name.padEnd(ir)} ${Vn}ms
`)}return Zn.join("")}}e.StatTimer=yn;function _n(nr,Zn){try{const{protocol:ir}=Zn?new URL(nr,Zn):new URL(nr);return ir==="http:"||ir==="https:"}catch{return!1}}function xn(nr,Zn=!1){return new Promise((ir,Jn)=>{const Vn=document.createElement("script");Vn.src=nr,Vn.onload=function(Xn){Zn&&Vn.remove(),ir(Xn)},Vn.onerror=function(){Jn(new Error(`Cannot load script at: ${Vn.src}`))},(document.head||document.documentElement).append(Vn)})}function Sn(nr){console.log("Deprecated API usage: "+nr)}let Pn;class Ln{static toDateObject(Zn){if(!Zn||typeof Zn!="string")return null;Pn||(Pn=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const ir=Pn.exec(Zn);if(!ir)return null;const Jn=parseInt(ir[1],10);let Vn=parseInt(ir[2],10);Vn=Vn>=1&&Vn<=12?Vn-1:0;let Xn=parseInt(ir[3],10);Xn=Xn>=1&&Xn<=31?Xn:1;let Yn=parseInt(ir[4],10);Yn=Yn>=0&&Yn<=23?Yn:0;let Tn=parseInt(ir[5],10);Tn=Tn>=0&&Tn<=59?Tn:0;let An=parseInt(ir[6],10);An=An>=0&&An<=59?An:0;const wn=ir[7]||"Z";let En=parseInt(ir[8],10);En=En>=0&&En<=23?En:0;let Nn=parseInt(ir[9],10)||0;return Nn=Nn>=0&&Nn<=59?Nn:0,wn==="-"?(Yn+=En,Tn+=Nn):wn==="+"&&(Yn-=En,Tn-=Nn),new Date(Date.UTC(Jn,Vn,Xn,Yn,Tn,An))}}e.PDFDateString=Ln;function In(nr,{scale:Zn=1,rotation:ir=0}){const{width:Jn,height:Vn}=nr.attributes.style,Xn=[0,0,parseInt(Jn),parseInt(Vn)];return new nn({viewBox:Xn,scale:Zn,rotation:ir})}function Rn(nr){if(nr.startsWith("#")){const Zn=parseInt(nr.slice(1),16);return[(Zn&16711680)>>16,(Zn&65280)>>8,Zn&255]}return nr.startsWith("rgb(")?nr.slice(4,-1).split(",").map(Zn=>parseInt(Zn)):nr.startsWith("rgba(")?nr.slice(5,-1).split(",").map(Zn=>parseInt(Zn)).slice(0,3):((0,un.warn)(`Not a valid color format: "${nr}"`),[0,0,0])}function Mn(nr){const Zn=document.createElement("span");Zn.style.visibility="hidden",document.body.append(Zn);for(const ir of nr.keys()){Zn.style.color=ir;const Jn=window.getComputedStyle(Zn).color;nr.set(ir,Rn(Jn))}Zn.remove()}function Hn(nr){const{a:Zn,b:ir,c:Jn,d:Vn,e:Xn,f:Yn}=nr.getTransform();return[Zn,ir,Jn,Vn,Xn,Yn]}function Qn(nr){const{a:Zn,b:ir,c:Jn,d:Vn,e:Xn,f:Yn}=nr.getTransform().invertSelf();return[Zn,ir,Jn,Vn,Xn,Yn]}},(St,e,_e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var tn=_e(1);class un{constructor(){this.constructor===un&&(0,tn.unreachable)("Cannot initialize BaseCanvasFactory.")}create(on,dn){if(on<=0||dn<=0)throw new Error("Invalid canvas size");const rn=this._createCanvas(on,dn);return{canvas:rn,context:rn.getContext("2d")}}reset(on,dn,rn){if(!on.canvas)throw new Error("Canvas is not specified");if(dn<=0||rn<=0)throw new Error("Invalid canvas size");on.canvas.width=dn,on.canvas.height=rn}destroy(on){if(!on.canvas)throw new Error("Canvas is not specified");on.canvas.width=0,on.canvas.height=0,on.canvas=null,on.context=null}_createCanvas(on,dn){(0,tn.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=un;class gn{constructor({baseUrl:on=null,isCompressed:dn=!1}){this.constructor===gn&&(0,tn.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=on,this.isCompressed=dn}async fetch({name:on}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!on)throw new Error("CMap name must be specified.");const dn=this.baseUrl+on+(this.isCompressed?".bcmap":""),rn=this.isCompressed?tn.CMapCompressionType.BINARY:tn.CMapCompressionType.NONE;return this._fetchData(dn,rn).catch(an=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${dn}`)})}_fetchData(on,dn){(0,tn.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=gn;class vn{constructor({baseUrl:on=null}){this.constructor===vn&&(0,tn.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=on}async fetch({filename:on}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!on)throw new Error("Font filename must be specified.");const dn=`${this.baseUrl}${on}`;return this._fetchData(dn).catch(rn=>{throw new Error(`Unable to load font data at: ${dn}`)})}_fetchData(on){(0,tn.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=vn;class fn{constructor(){this.constructor===fn&&(0,tn.unreachable)("Cannot initialize BaseSVGFactory.")}create(on,dn,rn=!1){if(on<=0||dn<=0)throw new Error("Invalid SVG dimensions");const an=this._createSVG("svg:svg");return an.setAttribute("version","1.1"),rn||(an.setAttribute("width",`${on}px`),an.setAttribute("height",`${dn}px`)),an.setAttribute("preserveAspectRatio","none"),an.setAttribute("viewBox",`0 0 ${on} ${dn}`),an}createElement(on){if(typeof on!="string")throw new Error("Invalid SVG element type");return this._createSVG(on)}_createSVG(on){(0,tn.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=fn},(St,e,_e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var tn=_e(1);const un=3285377520,gn=4294901760,vn=65535;class fn{constructor(on){this.h1=on?on&4294967295:un,this.h2=on?on&4294967295:un}update(on){let dn,rn;if(typeof on=="string"){dn=new Uint8Array(on.length*2),rn=0;for(let Pn=0,Ln=on.length;Pn<Ln;Pn++){const In=on.charCodeAt(Pn);In<=255?dn[rn++]=In:(dn[rn++]=In>>>8,dn[rn++]=In&255)}}else if((0,tn.isArrayBuffer)(on))dn=on.slice(),rn=dn.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const an=rn>>2,nn=rn-an*4,cn=new Uint32Array(dn.buffer,0,an);let hn=0,sn=0,pn=this.h1,mn=this.h2;const yn=3432918353,_n=461845907,xn=yn&vn,Sn=_n&vn;for(let Pn=0;Pn<an;Pn++)Pn&1?(hn=cn[Pn],hn=hn*yn&gn|hn*xn&vn,hn=hn<<15|hn>>>17,hn=hn*_n&gn|hn*Sn&vn,pn^=hn,pn=pn<<13|pn>>>19,pn=pn*5+3864292196):(sn=cn[Pn],sn=sn*yn&gn|sn*xn&vn,sn=sn<<15|sn>>>17,sn=sn*_n&gn|sn*Sn&vn,mn^=sn,mn=mn<<13|mn>>>19,mn=mn*5+3864292196);switch(hn=0,nn){case 3:hn^=dn[an*4+2]<<16;case 2:hn^=dn[an*4+1]<<8;case 1:hn^=dn[an*4],hn=hn*yn&gn|hn*xn&vn,hn=hn<<15|hn>>>17,hn=hn*_n&gn|hn*Sn&vn,an&1?pn^=hn:mn^=hn}this.h1=pn,this.h2=mn}hexdigest(){let on=this.h1,dn=this.h2;on^=dn>>>1,on=on*3981806797&gn|on*36045&vn,dn=dn*4283543511&gn|((dn<<16|on>>>16)*2950163797&gn)>>>16,on^=dn>>>1,on=on*444984403&gn|on*60499&vn,dn=dn*3301882366&gn|((dn<<16|on>>>16)*3120437893&gn)>>>16,on^=dn>>>1;const rn=(on>>>0).toString(16),an=(dn>>>0).toString(16);return rn.padStart(8,"0")+an.padStart(8,"0")}}e.MurmurHash3_64=fn},(St,e,_e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var tn=_e(1);class un{constructor({docId:en,onUnsupportedFeature:on,ownerDocument:dn=globalThis.document,styleElement:rn=null}){this.constructor===un&&(0,tn.unreachable)("Cannot initialize BaseFontLoader."),this.docId=en,this._onUnsupportedFeature=on,this._document=dn,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(en){this.nativeFontFaces.push(en),this._document.fonts.add(en)}insertRule(en){let on=this.styleElement;on||(on=this.styleElement=this._document.createElement("style"),on.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(on));const dn=on.sheet;dn.insertRule(en,dn.cssRules.length)}clear(){for(const en of this.nativeFontFaces)this._document.fonts.delete(en);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(en){if(en.attached||en.missingFile)return;if(en.attached=!0,this.isFontLoadingAPISupported){const dn=en.createNativeFontFace();if(dn){this.addNativeFontFace(dn);try{await dn.loaded}catch(rn){throw this._onUnsupportedFeature({featureId:tn.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,tn.warn)(`Failed to load font '${dn.family}': '${rn}'.`),en.disableFontFace=!0,rn}}return}const on=en.createFontFaceRule();if(on){if(this.insertRule(on),this.isSyncFontLoadingSupported)return;await new Promise(dn=>{const rn=this._queueLoadingCallback(dn);this._prepareFontLoadEvent([on],[en],rn)})}}_queueLoadingCallback(en){(0,tn.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var on;const en=!!((on=this._document)!=null&&on.fonts);return(0,tn.shadow)(this,"isFontLoadingAPISupported",en)}get isSyncFontLoadingSupported(){(0,tn.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,tn.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(en,on,dn){(0,tn.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let gn;e.FontLoader=gn,e.FontLoader=gn=class extends un{constructor(en){super(en),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let en=!1;if(typeof navigator>"u")en=!0;else{const on=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(on==null?void 0:on[1])>=14&&(en=!0)}return(0,tn.shadow)(this,"isSyncFontLoadingSupported",en)}_queueLoadingCallback(en){function on(){for((0,tn.assert)(!rn.done,"completeRequest() cannot be called twice."),rn.done=!0;dn.requests.length>0&&dn.requests[0].done;){const an=dn.requests.shift();setTimeout(an.callback,0)}}const dn=this.loadingContext,rn={id:`pdfjs-font-loading-${dn.nextRequestId++}`,done:!1,complete:on,callback:en};return dn.requests.push(rn),rn}get _loadTestFont(){const en=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,tn.shadow)(this,"_loadTestFont",en())}_prepareFontLoadEvent(en,on,dn){function rn(Qn,Kn){return Qn.charCodeAt(Kn)<<24|Qn.charCodeAt(Kn+1)<<16|Qn.charCodeAt(Kn+2)<<8|Qn.charCodeAt(Kn+3)&255}function an(Qn,Kn,nr,Zn){const ir=Qn.substring(0,Kn),Jn=Qn.substring(Kn+nr);return ir+Zn+Jn}let nn,cn;const hn=this._document.createElement("canvas");hn.width=1,hn.height=1;const sn=hn.getContext("2d");let pn=0;function mn(Qn,Kn){if(pn++,pn>30){(0,tn.warn)("Load test font never loaded."),Kn();return}if(sn.font="30px "+Qn,sn.fillText(".",0,20),sn.getImageData(0,0,1,1).data[3]>0){Kn();return}setTimeout(mn.bind(null,Qn,Kn))}const yn=`lt${Date.now()}${this.loadTestFontId++}`;let _n=this._loadTestFont;_n=an(_n,976,yn.length,yn);const Sn=16,Pn=1482184792;let Ln=rn(_n,Sn);for(nn=0,cn=yn.length-3;nn<cn;nn+=4)Ln=Ln-Pn+rn(yn,nn)|0;nn<yn.length&&(Ln=Ln-Pn+rn(yn+"XXX",nn)|0),_n=an(_n,Sn,4,(0,tn.string32)(Ln));const In=`url(data:font/opentype;base64,${btoa(_n)});`,Rn=`@font-face {font-family:"${yn}";src:${In}}`;this.insertRule(Rn);const Mn=[];for(const Qn of on)Mn.push(Qn.loadedName);Mn.push(yn);const Hn=this._document.createElement("div");Hn.style.visibility="hidden",Hn.style.width=Hn.style.height="10px",Hn.style.position="absolute",Hn.style.top=Hn.style.left="0px";for(const Qn of Mn){const Kn=this._document.createElement("span");Kn.textContent="Hi",Kn.style.fontFamily=Qn,Hn.append(Kn)}this._document.body.append(Hn),mn(yn,()=>{Hn.remove(),dn.complete()})}};class vn{constructor(en,{isEvalSupported:on=!0,disableFontFace:dn=!1,ignoreErrors:rn=!1,onUnsupportedFeature:an,fontRegistry:nn=null}){this.compiledGlyphs=Object.create(null);for(const cn in en)this[cn]=en[cn];this.isEvalSupported=on!==!1,this.disableFontFace=dn===!0,this.ignoreErrors=rn===!0,this._onUnsupportedFeature=an,this.fontRegistry=nn}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let en;if(!this.cssFontInfo)en=new FontFace(this.loadedName,this.data,{});else{const on={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(on.style=`oblique ${this.cssFontInfo.italicAngle}deg`),en=new FontFace(this.cssFontInfo.fontFamily,this.data,on)}return this.fontRegistry&&this.fontRegistry.registerFont(this),en}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const en=(0,tn.bytesToString)(this.data),on=`url(data:${this.mimetype};base64,${btoa(en)});`;let dn;if(!this.cssFontInfo)dn=`@font-face {font-family:"${this.loadedName}";src:${on}}`;else{let rn=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(rn+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),dn=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${rn}src:${on}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,on),dn}getPathGenerator(en,on){if(this.compiledGlyphs[on]!==void 0)return this.compiledGlyphs[on];let dn;try{dn=en.get(this.loadedName+"_path_"+on)}catch(rn){if(!this.ignoreErrors)throw rn;return this._onUnsupportedFeature({featureId:tn.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,tn.warn)(`getPathGenerator - ignoring character: "${rn}".`),this.compiledGlyphs[on]=function(an,nn){}}if(this.isEvalSupported&&tn.FeatureTest.isEvalSupported){const rn=[];for(const an of dn){const nn=an.args!==void 0?an.args.join(","):"";rn.push("c.",an.cmd,"(",nn,`);
`)}return this.compiledGlyphs[on]=new Function("c","size",rn.join(""))}return this.compiledGlyphs[on]=function(rn,an){for(const nn of dn)nn.cmd==="scale"&&(nn.args=[an,-an]),rn[nn.cmd].apply(rn,nn.args)}}}e.FontFaceObject=vn},(St,e,_e)=>{var Vn,S1;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var tn=_e(8),un=_e(1),gn=_e(13),vn=_e(14),fn=_e(3);const en=16,on=100,dn=4096,rn=15,an=10,nn=fn.isNodeJS&&typeof Path2D>"u"?-1:1e3,cn=16;function hn(Tn,An){if(Tn._removeMirroring)throw new Error("Context is already forwarding operations.");Tn.__originalSave=Tn.save,Tn.__originalRestore=Tn.restore,Tn.__originalRotate=Tn.rotate,Tn.__originalScale=Tn.scale,Tn.__originalTranslate=Tn.translate,Tn.__originalTransform=Tn.transform,Tn.__originalSetTransform=Tn.setTransform,Tn.__originalResetTransform=Tn.resetTransform,Tn.__originalClip=Tn.clip,Tn.__originalMoveTo=Tn.moveTo,Tn.__originalLineTo=Tn.lineTo,Tn.__originalBezierCurveTo=Tn.bezierCurveTo,Tn.__originalRect=Tn.rect,Tn.__originalClosePath=Tn.closePath,Tn.__originalBeginPath=Tn.beginPath,Tn._removeMirroring=()=>{Tn.save=Tn.__originalSave,Tn.restore=Tn.__originalRestore,Tn.rotate=Tn.__originalRotate,Tn.scale=Tn.__originalScale,Tn.translate=Tn.__originalTranslate,Tn.transform=Tn.__originalTransform,Tn.setTransform=Tn.__originalSetTransform,Tn.resetTransform=Tn.__originalResetTransform,Tn.clip=Tn.__originalClip,Tn.moveTo=Tn.__originalMoveTo,Tn.lineTo=Tn.__originalLineTo,Tn.bezierCurveTo=Tn.__originalBezierCurveTo,Tn.rect=Tn.__originalRect,Tn.closePath=Tn.__originalClosePath,Tn.beginPath=Tn.__originalBeginPath,delete Tn._removeMirroring},Tn.save=function(){An.save(),this.__originalSave()},Tn.restore=function(){An.restore(),this.__originalRestore()},Tn.translate=function(En,Nn){An.translate(En,Nn),this.__originalTranslate(En,Nn)},Tn.scale=function(En,Nn){An.scale(En,Nn),this.__originalScale(En,Nn)},Tn.transform=function(En,Nn,Fn,Un,Gn,er){An.transform(En,Nn,Fn,Un,Gn,er),this.__originalTransform(En,Nn,Fn,Un,Gn,er)},Tn.setTransform=function(En,Nn,Fn,Un,Gn,er){An.setTransform(En,Nn,Fn,Un,Gn,er),this.__originalSetTransform(En,Nn,Fn,Un,Gn,er)},Tn.resetTransform=function(){An.resetTransform(),this.__originalResetTransform()},Tn.rotate=function(En){An.rotate(En),this.__originalRotate(En)},Tn.clip=function(En){An.clip(En),this.__originalClip(En)},Tn.moveTo=function(wn,En){An.moveTo(wn,En),this.__originalMoveTo(wn,En)},Tn.lineTo=function(wn,En){An.lineTo(wn,En),this.__originalLineTo(wn,En)},Tn.bezierCurveTo=function(wn,En,Nn,Fn,Un,Gn){An.bezierCurveTo(wn,En,Nn,Fn,Un,Gn),this.__originalBezierCurveTo(wn,En,Nn,Fn,Un,Gn)},Tn.rect=function(wn,En,Nn,Fn){An.rect(wn,En,Nn,Fn),this.__originalRect(wn,En,Nn,Fn)},Tn.closePath=function(){An.closePath(),this.__originalClosePath()},Tn.beginPath=function(){An.beginPath(),this.__originalBeginPath()}}class sn{constructor(An){this.canvasFactory=An,this.cache=Object.create(null)}getCanvas(An,wn,En){let Nn;return this.cache[An]!==void 0?(Nn=this.cache[An],this.canvasFactory.reset(Nn,wn,En)):(Nn=this.canvasFactory.create(wn,En),this.cache[An]=Nn),Nn}delete(An){delete this.cache[An]}clear(){for(const An in this.cache){const wn=this.cache[An];this.canvasFactory.destroy(wn),delete this.cache[An]}}}function pn(Tn,An,wn,En,Nn,Fn,Un,Gn,er,On){const[Bn,$n,qn,zn,jn,ur]=(0,tn.getCurrentTransform)(Tn);if($n===0&&qn===0){const vr=Un*Bn+jn,dr=Math.round(vr),hr=Gn*zn+ur,_r=Math.round(hr),or=(Un+er)*Bn+jn,Er=Math.abs(Math.round(or)-dr)||1,Dr=(Gn+On)*zn+ur,Rr=Math.abs(Math.round(Dr)-_r)||1;return Tn.setTransform(Math.sign(Bn),0,0,Math.sign(zn),dr,_r),Tn.drawImage(An,wn,En,Nn,Fn,0,0,Er,Rr),Tn.setTransform(Bn,$n,qn,zn,jn,ur),[Er,Rr]}if(Bn===0&&zn===0){const vr=Gn*qn+jn,dr=Math.round(vr),hr=Un*$n+ur,_r=Math.round(hr),or=(Gn+On)*qn+jn,Er=Math.abs(Math.round(or)-dr)||1,Dr=(Un+er)*$n+ur,Rr=Math.abs(Math.round(Dr)-_r)||1;return Tn.setTransform(0,Math.sign($n),Math.sign(qn),0,dr,_r),Tn.drawImage(An,wn,En,Nn,Fn,0,0,Rr,Er),Tn.setTransform(Bn,$n,qn,zn,jn,ur),[Rr,Er]}Tn.drawImage(An,wn,En,Nn,Fn,Un,Gn,er,On);const gr=Math.hypot(Bn,$n),ar=Math.hypot(qn,zn);return[gr*er,ar*On]}function mn(Tn){const{width:An,height:wn}=Tn;if(An>nn||wn>nn)return null;const En=1e3,Nn=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),Fn=An+1;let Un=new Uint8Array(Fn*(wn+1)),Gn,er,On;const Bn=An+7&-8;let $n=new Uint8Array(Bn*wn),qn=0;for(const ar of Tn.data){let vr=128;for(;vr>0;)$n[qn++]=ar&vr?0:255,vr>>=1}let zn=0;for(qn=0,$n[qn]!==0&&(Un[0]=1,++zn),er=1;er<An;er++)$n[qn]!==$n[qn+1]&&(Un[er]=$n[qn]?2:1,++zn),qn++;for($n[qn]!==0&&(Un[er]=2,++zn),Gn=1;Gn<wn;Gn++){qn=Gn*Bn,On=Gn*Fn,$n[qn-Bn]!==$n[qn]&&(Un[On]=$n[qn]?1:8,++zn);let ar=($n[qn]?4:0)+($n[qn-Bn]?8:0);for(er=1;er<An;er++)ar=(ar>>2)+($n[qn+1]?4:0)+($n[qn-Bn+1]?8:0),Nn[ar]&&(Un[On+er]=Nn[ar],++zn),qn++;if($n[qn-Bn]!==$n[qn]&&(Un[On+er]=$n[qn]?2:4,++zn),zn>En)return null}for(qn=Bn*(wn-1),On=Gn*Fn,$n[qn]!==0&&(Un[On]=8,++zn),er=1;er<An;er++)$n[qn]!==$n[qn+1]&&(Un[On+er]=$n[qn]?4:8,++zn),qn++;if($n[qn]!==0&&(Un[On+er]=4,++zn),zn>En)return null;const jn=new Int32Array([0,Fn,-1,0,-Fn,0,0,0,1]),ur=new Path2D;for(Gn=0;zn&&Gn<=wn;Gn++){let ar=Gn*Fn;const vr=ar+An;for(;ar<vr&&!Un[ar];)ar++;if(ar===vr)continue;ur.moveTo(ar%Fn,Gn);const dr=ar;let hr=Un[ar];do{const _r=jn[hr];do ar+=_r;while(!Un[ar]);const or=Un[ar];or!==5&&or!==10?(hr=or,Un[ar]=0):(hr=or&51*hr>>4,Un[ar]&=hr>>2|hr<<2),ur.lineTo(ar%Fn,ar/Fn|0),Un[ar]||--zn}while(dr!==ar);--Gn}return $n=null,Un=null,function(ar){ar.save(),ar.scale(1/An,-1/wn),ar.translate(0,-wn),ar.fill(ur),ar.beginPath(),ar.restore()}}class yn{constructor(An,wn){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=un.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=un.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=un.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,An,wn])}clone(){const An=Object.create(this);return An.clipBox=this.clipBox.slice(),An}setCurrentPoint(An,wn){this.x=An,this.y=wn}updatePathMinMax(An,wn,En){[wn,En]=un.Util.applyTransform([wn,En],An),this.minX=Math.min(this.minX,wn),this.minY=Math.min(this.minY,En),this.maxX=Math.max(this.maxX,wn),this.maxY=Math.max(this.maxY,En)}updateRectMinMax(An,wn){const En=un.Util.applyTransform(wn,An),Nn=un.Util.applyTransform(wn.slice(2),An);this.minX=Math.min(this.minX,En[0],Nn[0]),this.minY=Math.min(this.minY,En[1],Nn[1]),this.maxX=Math.max(this.maxX,En[0],Nn[0]),this.maxY=Math.max(this.maxY,En[1],Nn[1])}updateScalingPathMinMax(An,wn){un.Util.scaleMinMax(An,wn),this.minX=Math.min(this.minX,wn[0]),this.maxX=Math.max(this.maxX,wn[1]),this.minY=Math.min(this.minY,wn[2]),this.maxY=Math.max(this.maxY,wn[3])}updateCurvePathMinMax(An,wn,En,Nn,Fn,Un,Gn,er,On,Bn){const $n=un.Util.bezierBoundingBox(wn,En,Nn,Fn,Un,Gn,er,On);if(Bn){Bn[0]=Math.min(Bn[0],$n[0],$n[2]),Bn[1]=Math.max(Bn[1],$n[0],$n[2]),Bn[2]=Math.min(Bn[2],$n[1],$n[3]),Bn[3]=Math.max(Bn[3],$n[1],$n[3]);return}this.updateRectMinMax(An,$n)}getPathBoundingBox(An=gn.PathType.FILL,wn=null){const En=[this.minX,this.minY,this.maxX,this.maxY];if(An===gn.PathType.STROKE){wn||(0,un.unreachable)("Stroke bounding box must include transform.");const Nn=un.Util.singularValueDecompose2dScale(wn),Fn=Nn[0]*this.lineWidth/2,Un=Nn[1]*this.lineWidth/2;En[0]-=Fn,En[1]-=Un,En[2]+=Fn,En[3]+=Un}return En}updateClipFromPath(){const An=un.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(An||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(An){this.clipBox=An,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(An=gn.PathType.FILL,wn=null){return un.Util.intersect(this.clipBox,this.getPathBoundingBox(An,wn))}}function _n(Tn,An,wn=null){if(typeof ImageData<"u"&&An instanceof ImageData){Tn.putImageData(An,0,0);return}const En=An.height,Nn=An.width,Fn=En%cn,Un=(En-Fn)/cn,Gn=Fn===0?Un:Un+1,er=Tn.createImageData(Nn,cn);let On=0,Bn;const $n=An.data,qn=er.data;let zn,jn,ur,gr,ar,vr,dr,hr;if(wn)switch(wn.length){case 1:ar=wn[0],vr=wn[0],dr=wn[0],hr=wn[0];break;case 4:ar=wn[0],vr=wn[1],dr=wn[2],hr=wn[3];break}if(An.kind===un.ImageKind.GRAYSCALE_1BPP){const _r=$n.byteLength,or=new Uint32Array(qn.buffer,0,qn.byteLength>>2),Er=or.length,Dr=Nn+7>>3;let Rr=4294967295,Gr=un.FeatureTest.isLittleEndian?4278190080:255;for(hr&&hr[0]===255&&hr[255]===0&&([Rr,Gr]=[Gr,Rr]),zn=0;zn<Gn;zn++){for(ur=zn<Un?cn:Fn,Bn=0,jn=0;jn<ur;jn++){const Ir=_r-On;let ts=0;const zr=Ir>Dr?Nn:Ir*8-7,ws=zr&-8;let es=0,ps=0;for(;ts<ws;ts+=8)ps=$n[On++],or[Bn++]=ps&128?Rr:Gr,or[Bn++]=ps&64?Rr:Gr,or[Bn++]=ps&32?Rr:Gr,or[Bn++]=ps&16?Rr:Gr,or[Bn++]=ps&8?Rr:Gr,or[Bn++]=ps&4?Rr:Gr,or[Bn++]=ps&2?Rr:Gr,or[Bn++]=ps&1?Rr:Gr;for(;ts<zr;ts++)es===0&&(ps=$n[On++],es=128),or[Bn++]=ps&es?Rr:Gr,es>>=1}for(;Bn<Er;)or[Bn++]=0;Tn.putImageData(er,0,zn*cn)}}else if(An.kind===un.ImageKind.RGBA_32BPP){const _r=!!(ar||vr||dr);for(jn=0,gr=Nn*cn*4,zn=0;zn<Un;zn++){if(qn.set($n.subarray(On,On+gr)),On+=gr,_r)for(let or=0;or<gr;or+=4)ar&&(qn[or+0]=ar[qn[or+0]]),vr&&(qn[or+1]=vr[qn[or+1]]),dr&&(qn[or+2]=dr[qn[or+2]]);Tn.putImageData(er,0,jn),jn+=cn}if(zn<Gn){if(gr=Nn*Fn*4,qn.set($n.subarray(On,On+gr)),_r)for(let or=0;or<gr;or+=4)ar&&(qn[or+0]=ar[qn[or+0]]),vr&&(qn[or+1]=vr[qn[or+1]]),dr&&(qn[or+2]=dr[qn[or+2]]);Tn.putImageData(er,0,jn)}}else if(An.kind===un.ImageKind.RGB_24BPP){const _r=!!(ar||vr||dr);for(ur=cn,gr=Nn*ur,zn=0;zn<Gn;zn++){for(zn>=Un&&(ur=Fn,gr=Nn*ur),Bn=0,jn=gr;jn--;)qn[Bn++]=$n[On++],qn[Bn++]=$n[On++],qn[Bn++]=$n[On++],qn[Bn++]=255;if(_r)for(let or=0;or<Bn;or+=4)ar&&(qn[or+0]=ar[qn[or+0]]),vr&&(qn[or+1]=vr[qn[or+1]]),dr&&(qn[or+2]=dr[qn[or+2]]);Tn.putImageData(er,0,zn*cn)}}else throw new Error(`bad image kind: ${An.kind}`)}function xn(Tn,An){if(An.bitmap){Tn.drawImage(An.bitmap,0,0);return}const wn=An.height,En=An.width,Nn=wn%cn,Fn=(wn-Nn)/cn,Un=Nn===0?Fn:Fn+1,Gn=Tn.createImageData(En,cn);let er=0;const On=An.data,Bn=Gn.data;for(let $n=0;$n<Un;$n++){const qn=$n<Fn?cn:Nn;({srcPos:er}=(0,vn.applyMaskImageData)({src:On,srcPos:er,dest:Bn,width:En,height:qn})),Tn.putImageData(Gn,0,$n*cn)}}function Sn(Tn,An){const wn=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let En=0,Nn=wn.length;En<Nn;En++){const Fn=wn[En];Tn[Fn]!==void 0&&(An[Fn]=Tn[Fn])}Tn.setLineDash!==void 0&&(An.setLineDash(Tn.getLineDash()),An.lineDashOffset=Tn.lineDashOffset)}function Pn(Tn,An){Tn.strokeStyle=Tn.fillStyle=An||"#000000",Tn.fillRule="nonzero",Tn.globalAlpha=1,Tn.lineWidth=1,Tn.lineCap="butt",Tn.lineJoin="miter",Tn.miterLimit=10,Tn.globalCompositeOperation="source-over",Tn.font="10px sans-serif",Tn.setLineDash!==void 0&&(Tn.setLineDash([]),Tn.lineDashOffset=0)}function Ln(Tn,An,wn,En){const Nn=Tn.length;for(let Fn=3;Fn<Nn;Fn+=4){const Un=Tn[Fn];if(Un===0)Tn[Fn-3]=An,Tn[Fn-2]=wn,Tn[Fn-1]=En;else if(Un<255){const Gn=255-Un;Tn[Fn-3]=Tn[Fn-3]*Un+An*Gn>>8,Tn[Fn-2]=Tn[Fn-2]*Un+wn*Gn>>8,Tn[Fn-1]=Tn[Fn-1]*Un+En*Gn>>8}}}function In(Tn,An,wn){const En=Tn.length,Nn=1/255;for(let Fn=3;Fn<En;Fn+=4){const Un=wn?wn[Tn[Fn]]:Tn[Fn];An[Fn]=An[Fn]*Un*Nn|0}}function Rn(Tn,An,wn){const En=Tn.length;for(let Nn=3;Nn<En;Nn+=4){const Fn=Tn[Nn-3]*77+Tn[Nn-2]*152+Tn[Nn-1]*28;An[Nn]=wn?An[Nn]*wn[Fn>>8]>>8:An[Nn]*Fn>>16}}function Mn(Tn,An,wn,En,Nn,Fn,Un,Gn,er,On,Bn){const $n=!!Fn,qn=$n?Fn[0]:0,zn=$n?Fn[1]:0,jn=$n?Fn[2]:0;let ur;Nn==="Luminosity"?ur=Rn:ur=In;const ar=Math.min(En,Math.ceil(1048576/wn));for(let vr=0;vr<En;vr+=ar){const dr=Math.min(ar,En-vr),hr=Tn.getImageData(Gn-On,vr+(er-Bn),wn,dr),_r=An.getImageData(Gn,vr+er,wn,dr);$n&&Ln(hr.data,qn,zn,jn),ur(hr.data,_r.data,Un),An.putImageData(_r,Gn,vr+er)}}function Hn(Tn,An,wn,En){const Nn=En[0],Fn=En[1],Un=En[2]-Nn,Gn=En[3]-Fn;Un===0||Gn===0||(Mn(An.context,wn,Un,Gn,An.subtype,An.backdrop,An.transferMap,Nn,Fn,An.offsetX,An.offsetY),Tn.save(),Tn.globalAlpha=1,Tn.globalCompositeOperation="source-over",Tn.setTransform(1,0,0,1,0,0),Tn.drawImage(wn.canvas,0,0),Tn.restore())}function Qn(Tn,An){const wn=un.Util.singularValueDecompose2dScale(Tn);wn[0]=Math.fround(wn[0]),wn[1]=Math.fround(wn[1]);const En=Math.fround((globalThis.devicePixelRatio||1)*tn.PixelsPerInch.PDF_TO_CSS_UNITS);return An!==void 0?An:wn[0]<=En||wn[1]<=En}const Kn=["butt","round","square"],nr=["miter","round","bevel"],Zn={},ir={},Yn=class{constructor(An,wn,En,Nn,Fn,Un,Gn,er){Mr(this,Vn);this.ctx=An,this.current=new yn(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=wn,this.objs=En,this.canvasFactory=Nn,this.imageLayer=Fn,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=Un,this.cachedCanvases=new sn(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Gn,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(er==null?void 0:er.background)||null,this.foregroundColor=(er==null?void 0:er.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(An,wn=null){return typeof An=="string"?An.startsWith("g_")?this.commonObjs.get(An):this.objs.get(An):wn}beginDrawing({transform:An,viewport:wn,transparency:En=!1,background:Nn=null}){const Fn=this.ctx.canvas.width,Un=this.ctx.canvas.height,Gn=Nn||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const er=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const On=this.backgroundColor=this.ctx.fillStyle;let Bn=!0,$n=Gn;if(this.ctx.fillStyle=Gn,$n=this.ctx.fillStyle,Bn=typeof $n=="string"&&/^#[0-9A-Fa-f]{6}$/.test($n),er==="#000000"&&On==="#ffffff"||er===On||!Bn)this.foregroundColor=this.backgroundColor=null;else{const[qn,zn,jn]=(0,tn.getRGB)($n),ur=ar=>(ar/=255,ar<=.03928?ar/12.92:((ar+.055)/1.055)**2.4),gr=Math.round(.2126*ur(qn)+.7152*ur(zn)+.0722*ur(jn));this.selectColor=(ar,vr,dr)=>{const hr=.2126*ur(ar)+.7152*ur(vr)+.0722*ur(dr);return Math.round(hr)===gr?On:er}}}if(this.ctx.fillStyle=this.backgroundColor||Gn,this.ctx.fillRect(0,0,Fn,Un),this.ctx.restore(),En){const er=this.cachedCanvases.getCanvas("transparent",Fn,Un);this.compositeCtx=this.ctx,this.transparentCanvas=er.canvas,this.ctx=er.context,this.ctx.save(),this.ctx.transform(...(0,tn.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),Pn(this.ctx,this.foregroundColor),An&&(this.ctx.transform(...An),this.outputScaleX=An[0],this.outputScaleY=An[0]),this.ctx.transform(...wn.transform),this.viewportScale=wn.scale,this.baseTransform=(0,tn.getCurrentTransform)(this.ctx),this.imageLayer&&((0,tn.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(An,wn,En,Nn){const Fn=An.argsArray,Un=An.fnArray;let Gn=wn||0;const er=Fn.length;if(er===Gn)return Gn;const On=er-Gn>an&&typeof En=="function",Bn=On?Date.now()+rn:0;let $n=0;const qn=this.commonObjs,zn=this.objs;let jn;for(;;){if(Nn!==void 0&&Gn===Nn.nextBreakPoint)return Nn.breakIt(Gn,En),Gn;if(jn=Un[Gn],jn!==un.OPS.dependency)this[jn].apply(this,Fn[Gn]);else for(const ur of Fn[Gn]){const gr=ur.startsWith("g_")?qn:zn;if(!gr.has(ur))return gr.get(ur,En),Gn}if(Gn++,Gn===er)return Gn;if(On&&++$n>an){if(Date.now()>Bn)return En(),Gn;$n=0}}}endDrawing(){Ur(this,Vn,S1).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const An of this._cachedBitmapsMap.values()){for(const wn of An.values())typeof HTMLCanvasElement<"u"&&wn instanceof HTMLCanvasElement&&(wn.width=wn.height=0);An.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(An,wn){const En=An.width,Nn=An.height;let Fn=Math.max(Math.hypot(wn[0],wn[1]),1),Un=Math.max(Math.hypot(wn[2],wn[3]),1),Gn=En,er=Nn,On="prescale1",Bn,$n;for(;Fn>2&&Gn>1||Un>2&&er>1;){let qn=Gn,zn=er;Fn>2&&Gn>1&&(qn=Math.ceil(Gn/2),Fn/=Gn/qn),Un>2&&er>1&&(zn=Math.ceil(er/2),Un/=er/zn),Bn=this.cachedCanvases.getCanvas(On,qn,zn),$n=Bn.context,$n.clearRect(0,0,qn,zn),$n.drawImage(An,0,0,Gn,er,0,0,qn,zn),An=Bn.canvas,Gn=qn,er=zn,On=On==="prescale1"?"prescale2":"prescale1"}return{img:An,paintWidth:Gn,paintHeight:er}}_createMaskCanvas(An){const wn=this.ctx,{width:En,height:Nn}=An,Fn=this.current.fillColor,Un=this.current.patternFill,Gn=(0,tn.getCurrentTransform)(wn);let er,On,Bn,$n;if((An.bitmap||An.data)&&An.count>1){const Er=An.bitmap||An.data.buffer,Dr=Gn.slice(0,4);On=JSON.stringify(Un?Dr:[Dr,Fn]),er=this._cachedBitmapsMap.get(Er),er||(er=new Map,this._cachedBitmapsMap.set(Er,er));const Rr=er.get(On);if(Rr&&!Un){const Gr=Math.round(Math.min(Gn[0],Gn[2])+Gn[4]),Ir=Math.round(Math.min(Gn[1],Gn[3])+Gn[5]);return{canvas:Rr,offsetX:Gr,offsetY:Ir}}Bn=Rr}Bn||($n=this.cachedCanvases.getCanvas("maskCanvas",En,Nn),xn($n.context,An));let qn=un.Util.transform(Gn,[1/En,0,0,-1/Nn,0,0]);qn=un.Util.transform(qn,[1,0,0,1,0,-Nn]);const zn=un.Util.applyTransform([0,0],qn),jn=un.Util.applyTransform([En,Nn],qn),ur=un.Util.normalizeRect([zn[0],zn[1],jn[0],jn[1]]),gr=Math.round(ur[2]-ur[0])||1,ar=Math.round(ur[3]-ur[1])||1,vr=this.cachedCanvases.getCanvas("fillCanvas",gr,ar),dr=vr.context,hr=Math.min(zn[0],jn[0]),_r=Math.min(zn[1],jn[1]);dr.translate(-hr,-_r),dr.transform(...qn),Bn||(Bn=this._scaleImage($n.canvas,(0,tn.getCurrentTransformInverse)(dr)),Bn=Bn.img,er&&Un&&er.set(On,Bn)),dr.imageSmoothingEnabled=Qn((0,tn.getCurrentTransform)(dr),An.interpolate),pn(dr,Bn,0,0,Bn.width,Bn.height,0,0,En,Nn),dr.globalCompositeOperation="source-in";const or=un.Util.transform((0,tn.getCurrentTransformInverse)(dr),[1,0,0,1,-hr,-_r]);return dr.fillStyle=Un?Fn.getPattern(wn,this,or,gn.PathType.FILL):Fn,dr.fillRect(0,0,En,Nn),er&&!Un&&(this.cachedCanvases.delete("fillCanvas"),er.set(On,vr.canvas)),{canvas:vr.canvas,offsetX:Math.round(hr),offsetY:Math.round(_r)}}setLineWidth(An){An!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=An,this.ctx.lineWidth=An}setLineCap(An){this.ctx.lineCap=Kn[An]}setLineJoin(An){this.ctx.lineJoin=nr[An]}setMiterLimit(An){this.ctx.miterLimit=An}setDash(An,wn){const En=this.ctx;En.setLineDash!==void 0&&(En.setLineDash(An),En.lineDashOffset=wn)}setRenderingIntent(An){}setFlatness(An){}setGState(An){for(let wn=0,En=An.length;wn<En;wn++){const Nn=An[wn],Fn=Nn[0],Un=Nn[1];switch(Fn){case"LW":this.setLineWidth(Un);break;case"LC":this.setLineCap(Un);break;case"LJ":this.setLineJoin(Un);break;case"ML":this.setMiterLimit(Un);break;case"D":this.setDash(Un[0],Un[1]);break;case"RI":this.setRenderingIntent(Un);break;case"FL":this.setFlatness(Un);break;case"Font":this.setFont(Un[0],Un[1]);break;case"CA":this.current.strokeAlpha=Nn[1];break;case"ca":this.current.fillAlpha=Nn[1],this.ctx.globalAlpha=Nn[1];break;case"BM":this.ctx.globalCompositeOperation=Un;break;case"SMask":this.current.activeSMask=Un?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=Un}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const An=this.inSMaskMode;this.current.activeSMask&&!An?this.beginSMaskMode():!this.current.activeSMask&&An&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const An=this.ctx.canvas.width,wn=this.ctx.canvas.height,En="smaskGroupAt"+this.groupLevel,Nn=this.cachedCanvases.getCanvas(En,An,wn);this.suspendedCtx=this.ctx,this.ctx=Nn.context;const Fn=this.ctx;Fn.setTransform(...(0,tn.getCurrentTransform)(this.suspendedCtx)),Sn(this.suspendedCtx,Fn),hn(Fn,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Sn(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(An){if(!this.current.activeSMask)return;An?(An[0]=Math.floor(An[0]),An[1]=Math.floor(An[1]),An[2]=Math.ceil(An[2]),An[3]=Math.ceil(An[3])):An=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const wn=this.current.activeSMask,En=this.suspendedCtx;Hn(En,wn,this.ctx,An),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(Sn(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const An=this.current;this.stateStack.push(An),this.current=An.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Sn(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(An,wn,En,Nn,Fn,Un){this.ctx.transform(An,wn,En,Nn,Fn,Un),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(An,wn,En){const Nn=this.ctx,Fn=this.current;let Un=Fn.x,Gn=Fn.y,er,On;const Bn=(0,tn.getCurrentTransform)(Nn),$n=Bn[0]===0&&Bn[3]===0||Bn[1]===0&&Bn[2]===0,qn=$n?En.slice(0):null;for(let zn=0,jn=0,ur=An.length;zn<ur;zn++)switch(An[zn]|0){case un.OPS.rectangle:Un=wn[jn++],Gn=wn[jn++];const gr=wn[jn++],ar=wn[jn++],vr=Un+gr,dr=Gn+ar;Nn.moveTo(Un,Gn),gr===0||ar===0?Nn.lineTo(vr,dr):(Nn.lineTo(vr,Gn),Nn.lineTo(vr,dr),Nn.lineTo(Un,dr)),$n||Fn.updateRectMinMax(Bn,[Un,Gn,vr,dr]),Nn.closePath();break;case un.OPS.moveTo:Un=wn[jn++],Gn=wn[jn++],Nn.moveTo(Un,Gn),$n||Fn.updatePathMinMax(Bn,Un,Gn);break;case un.OPS.lineTo:Un=wn[jn++],Gn=wn[jn++],Nn.lineTo(Un,Gn),$n||Fn.updatePathMinMax(Bn,Un,Gn);break;case un.OPS.curveTo:er=Un,On=Gn,Un=wn[jn+4],Gn=wn[jn+5],Nn.bezierCurveTo(wn[jn],wn[jn+1],wn[jn+2],wn[jn+3],Un,Gn),Fn.updateCurvePathMinMax(Bn,er,On,wn[jn],wn[jn+1],wn[jn+2],wn[jn+3],Un,Gn,qn),jn+=6;break;case un.OPS.curveTo2:er=Un,On=Gn,Nn.bezierCurveTo(Un,Gn,wn[jn],wn[jn+1],wn[jn+2],wn[jn+3]),Fn.updateCurvePathMinMax(Bn,er,On,Un,Gn,wn[jn],wn[jn+1],wn[jn+2],wn[jn+3],qn),Un=wn[jn+2],Gn=wn[jn+3],jn+=4;break;case un.OPS.curveTo3:er=Un,On=Gn,Un=wn[jn+2],Gn=wn[jn+3],Nn.bezierCurveTo(wn[jn],wn[jn+1],Un,Gn,Un,Gn),Fn.updateCurvePathMinMax(Bn,er,On,wn[jn],wn[jn+1],Un,Gn,Un,Gn,qn),jn+=4;break;case un.OPS.closePath:Nn.closePath();break}$n&&Fn.updateScalingPathMinMax(Bn,qn),Fn.setCurrentPoint(Un,Gn)}closePath(){this.ctx.closePath()}stroke(An){An=typeof An<"u"?An:!0;const wn=this.ctx,En=this.current.strokeColor;wn.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof En=="object"&&(En==null?void 0:En.getPattern)?(wn.save(),wn.strokeStyle=En.getPattern(wn,this,(0,tn.getCurrentTransformInverse)(wn),gn.PathType.STROKE),this.rescaleAndStroke(!1),wn.restore()):this.rescaleAndStroke(!0)),An&&this.consumePath(this.current.getClippedPathBoundingBox()),wn.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(An){An=typeof An<"u"?An:!0;const wn=this.ctx,En=this.current.fillColor,Nn=this.current.patternFill;let Fn=!1;Nn&&(wn.save(),wn.fillStyle=En.getPattern(wn,this,(0,tn.getCurrentTransformInverse)(wn),gn.PathType.FILL),Fn=!0);const Un=this.current.getClippedPathBoundingBox();this.contentVisible&&Un!==null&&(this.pendingEOFill?(wn.fill("evenodd"),this.pendingEOFill=!1):wn.fill()),Fn&&wn.restore(),An&&this.consumePath(Un)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Zn}eoClip(){this.pendingClip=ir}beginText(){this.current.textMatrix=un.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const An=this.pendingTextPaths,wn=this.ctx;if(An===void 0){wn.beginPath();return}wn.save(),wn.beginPath();for(const En of An)wn.setTransform(...En.transform),wn.translate(En.x,En.y),En.addToPath(wn,En.fontSize);wn.restore(),wn.clip(),wn.beginPath(),delete this.pendingTextPaths}setCharSpacing(An){this.current.charSpacing=An}setWordSpacing(An){this.current.wordSpacing=An}setHScale(An){this.current.textHScale=An/100}setLeading(An){this.current.leading=-An}setFont(An,wn){const En=this.commonObjs.get(An),Nn=this.current;if(!En)throw new Error(`Can't find font for ${An}`);if(Nn.fontMatrix=En.fontMatrix||un.FONT_IDENTITY_MATRIX,(Nn.fontMatrix[0]===0||Nn.fontMatrix[3]===0)&&(0,un.warn)("Invalid font matrix for font "+An),wn<0?(wn=-wn,Nn.fontDirection=-1):Nn.fontDirection=1,this.current.font=En,this.current.fontSize=wn,En.isType3Font)return;const Fn=En.loadedName||"sans-serif";let Un="normal";En.black?Un="900":En.bold&&(Un="bold");const Gn=En.italic?"italic":"normal",er=`"${Fn}", ${En.fallbackName}`;let On=wn;wn<en?On=en:wn>on&&(On=on),this.current.fontSizeScale=wn/On,this.ctx.font=`${Gn} ${Un} ${On}px ${er}`}setTextRenderingMode(An){this.current.textRenderingMode=An}setTextRise(An){this.current.textRise=An}moveText(An,wn){this.current.x=this.current.lineX+=An,this.current.y=this.current.lineY+=wn}setLeadingMoveText(An,wn){this.setLeading(-wn),this.moveText(An,wn)}setTextMatrix(An,wn,En,Nn,Fn,Un){this.current.textMatrix=[An,wn,En,Nn,Fn,Un],this.current.textMatrixScale=Math.hypot(An,wn),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(An,wn,En,Nn){const Fn=this.ctx,Un=this.current,Gn=Un.font,er=Un.textRenderingMode,On=Un.fontSize/Un.fontSizeScale,Bn=er&un.TextRenderingMode.FILL_STROKE_MASK,$n=!!(er&un.TextRenderingMode.ADD_TO_PATH_FLAG),qn=Un.patternFill&&!Gn.missingFile;let zn;(Gn.disableFontFace||$n||qn)&&(zn=Gn.getPathGenerator(this.commonObjs,An)),Gn.disableFontFace||qn?(Fn.save(),Fn.translate(wn,En),Fn.beginPath(),zn(Fn,On),Nn&&Fn.setTransform(...Nn),(Bn===un.TextRenderingMode.FILL||Bn===un.TextRenderingMode.FILL_STROKE)&&Fn.fill(),(Bn===un.TextRenderingMode.STROKE||Bn===un.TextRenderingMode.FILL_STROKE)&&Fn.stroke(),Fn.restore()):((Bn===un.TextRenderingMode.FILL||Bn===un.TextRenderingMode.FILL_STROKE)&&Fn.fillText(An,wn,En),(Bn===un.TextRenderingMode.STROKE||Bn===un.TextRenderingMode.FILL_STROKE)&&Fn.strokeText(An,wn,En)),$n&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,tn.getCurrentTransform)(Fn),x:wn,y:En,fontSize:On,addToPath:zn})}get isFontSubpixelAAEnabled(){const{context:An}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);An.scale(1.5,1),An.fillText("I",0,10);const wn=An.getImageData(0,0,10,10).data;let En=!1;for(let Nn=3;Nn<wn.length;Nn+=4)if(wn[Nn]>0&&wn[Nn]<255){En=!0;break}return(0,un.shadow)(this,"isFontSubpixelAAEnabled",En)}showText(An){const wn=this.current,En=wn.font;if(En.isType3Font)return this.showType3Text(An);const Nn=wn.fontSize;if(Nn===0)return;const Fn=this.ctx,Un=wn.fontSizeScale,Gn=wn.charSpacing,er=wn.wordSpacing,On=wn.fontDirection,Bn=wn.textHScale*On,$n=An.length,qn=En.vertical,zn=qn?1:-1,jn=En.defaultVMetrics,ur=Nn*wn.fontMatrix[0],gr=wn.textRenderingMode===un.TextRenderingMode.FILL&&!En.disableFontFace&&!wn.patternFill;Fn.save(),Fn.transform(...wn.textMatrix),Fn.translate(wn.x,wn.y+wn.textRise),On>0?Fn.scale(Bn,-1):Fn.scale(Bn,1);let ar;if(wn.patternFill){Fn.save();const or=wn.fillColor.getPattern(Fn,this,(0,tn.getCurrentTransformInverse)(Fn),gn.PathType.FILL);ar=(0,tn.getCurrentTransform)(Fn),Fn.restore(),Fn.fillStyle=or}let vr=wn.lineWidth;const dr=wn.textMatrixScale;if(dr===0||vr===0){const or=wn.textRenderingMode&un.TextRenderingMode.FILL_STROKE_MASK;(or===un.TextRenderingMode.STROKE||or===un.TextRenderingMode.FILL_STROKE)&&(vr=this.getSinglePixelWidth())}else vr/=dr;Un!==1&&(Fn.scale(Un,Un),vr/=Un),Fn.lineWidth=vr;let hr=0,_r;for(_r=0;_r<$n;++_r){const or=An[_r];if(typeof or=="number"){hr+=zn*or*Nn/1e3;continue}let Er=!1;const Dr=(or.isSpace?er:0)+Gn,Rr=or.fontChar,Gr=or.accent;let Ir,ts,zr=or.width;if(qn){const es=or.vmetric||jn,ps=-(or.vmetric?es[1]:zr*.5)*ur,ys=es[2]*ur;zr=es?-es[0]:zr,Ir=ps/Un,ts=(hr+ys)/Un}else Ir=hr/Un,ts=0;if(En.remeasure&&zr>0){const es=Fn.measureText(Rr).width*1e3/Nn*Un;if(zr<es&&this.isFontSubpixelAAEnabled){const ps=zr/es;Er=!0,Fn.save(),Fn.scale(ps,1),Ir/=ps}else zr!==es&&(Ir+=(zr-es)/2e3*Nn/Un)}if(this.contentVisible&&(or.isInFont||En.missingFile)){if(gr&&!Gr)Fn.fillText(Rr,Ir,ts);else if(this.paintChar(Rr,Ir,ts,ar),Gr){const es=Ir+Nn*Gr.offset.x/Un,ps=ts-Nn*Gr.offset.y/Un;this.paintChar(Gr.fontChar,es,ps,ar)}}let ws;qn?ws=zr*ur-Dr*On:ws=zr*ur+Dr*On,hr+=ws,Er&&Fn.restore()}qn?wn.y-=hr:wn.x+=hr*Bn,Fn.restore(),this.compose()}showType3Text(An){const wn=this.ctx,En=this.current,Nn=En.font,Fn=En.fontSize,Un=En.fontDirection,Gn=Nn.vertical?1:-1,er=En.charSpacing,On=En.wordSpacing,Bn=En.textHScale*Un,$n=En.fontMatrix||un.FONT_IDENTITY_MATRIX,qn=An.length,zn=En.textRenderingMode===un.TextRenderingMode.INVISIBLE;let jn,ur,gr,ar;if(!(zn||Fn===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,wn.save(),wn.transform(...En.textMatrix),wn.translate(En.x,En.y),wn.scale(Bn,Un),jn=0;jn<qn;++jn){if(ur=An[jn],typeof ur=="number"){ar=Gn*ur*Fn/1e3,this.ctx.translate(ar,0),En.x+=ar*Bn;continue}const vr=(ur.isSpace?On:0)+er,dr=Nn.charProcOperatorList[ur.operatorListId];if(!dr){(0,un.warn)(`Type3 character "${ur.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=ur,this.save(),wn.scale(Fn,Fn),wn.transform(...$n),this.executeOperatorList(dr),this.restore()),gr=un.Util.applyTransform([ur.width,0],$n)[0]*Fn+vr,wn.translate(gr,0),En.x+=gr*Bn}wn.restore(),this.processingType3=null}}setCharWidth(An,wn){}setCharWidthAndBounds(An,wn,En,Nn,Fn,Un){this.ctx.rect(En,Nn,Fn-En,Un-Nn),this.ctx.clip(),this.endPath()}getColorN_Pattern(An){let wn;if(An[0]==="TilingPattern"){const En=An[1],Nn=this.baseTransform||(0,tn.getCurrentTransform)(this.ctx),Fn={createCanvasGraphics:Un=>new Yn(Un,this.commonObjs,this.objs,this.canvasFactory)};wn=new gn.TilingPattern(An,En,this.ctx,Fn,Nn)}else wn=this._getPattern(An[1],An[2]);return wn}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(An,wn,En){var Fn;const Nn=((Fn=this.selectColor)==null?void 0:Fn.call(this,An,wn,En))||un.Util.makeHexColor(An,wn,En);this.ctx.strokeStyle=Nn,this.current.strokeColor=Nn}setFillRGBColor(An,wn,En){var Fn;const Nn=((Fn=this.selectColor)==null?void 0:Fn.call(this,An,wn,En))||un.Util.makeHexColor(An,wn,En);this.ctx.fillStyle=Nn,this.current.fillColor=Nn,this.current.patternFill=!1}_getPattern(An,wn=null){let En;return this.cachedPatterns.has(An)?En=this.cachedPatterns.get(An):(En=(0,gn.getShadingPattern)(this.objs.get(An)),this.cachedPatterns.set(An,En)),wn&&(En.matrix=wn),En}shadingFill(An){if(!this.contentVisible)return;const wn=this.ctx;this.save();const En=this._getPattern(An);wn.fillStyle=En.getPattern(wn,this,(0,tn.getCurrentTransformInverse)(wn),gn.PathType.SHADING);const Nn=(0,tn.getCurrentTransformInverse)(wn);if(Nn){const Fn=wn.canvas,Un=Fn.width,Gn=Fn.height,er=un.Util.applyTransform([0,0],Nn),On=un.Util.applyTransform([0,Gn],Nn),Bn=un.Util.applyTransform([Un,0],Nn),$n=un.Util.applyTransform([Un,Gn],Nn),qn=Math.min(er[0],On[0],Bn[0],$n[0]),zn=Math.min(er[1],On[1],Bn[1],$n[1]),jn=Math.max(er[0],On[0],Bn[0],$n[0]),ur=Math.max(er[1],On[1],Bn[1],$n[1]);this.ctx.fillRect(qn,zn,jn-qn,ur-zn)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,un.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,un.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(An,wn){if(!!this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(An)&&An.length===6&&this.transform(...An),this.baseTransform=(0,tn.getCurrentTransform)(this.ctx),wn)){const En=wn[2]-wn[0],Nn=wn[3]-wn[1];this.ctx.rect(wn[0],wn[1],En,Nn),this.current.updateRectMinMax((0,tn.getCurrentTransform)(this.ctx),wn),this.clip(),this.endPath()}}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(An){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const wn=this.ctx;An.isolated||(0,un.info)("TODO: Support non-isolated groups."),An.knockout&&(0,un.warn)("Knockout groups not supported.");const En=(0,tn.getCurrentTransform)(wn);if(An.matrix&&wn.transform(...An.matrix),!An.bbox)throw new Error("Bounding box is required.");let Nn=un.Util.getAxialAlignedBoundingBox(An.bbox,(0,tn.getCurrentTransform)(wn));const Fn=[0,0,wn.canvas.width,wn.canvas.height];Nn=un.Util.intersect(Nn,Fn)||[0,0,0,0];const Un=Math.floor(Nn[0]),Gn=Math.floor(Nn[1]);let er=Math.max(Math.ceil(Nn[2])-Un,1),On=Math.max(Math.ceil(Nn[3])-Gn,1),Bn=1,$n=1;er>dn&&(Bn=er/dn,er=dn),On>dn&&($n=On/dn,On=dn),this.current.startNewPathAndClipBox([0,0,er,On]);let qn="groupAt"+this.groupLevel;An.smask&&(qn+="_smask_"+this.smaskCounter++%2);const zn=this.cachedCanvases.getCanvas(qn,er,On),jn=zn.context;jn.scale(1/Bn,1/$n),jn.translate(-Un,-Gn),jn.transform(...En),An.smask?this.smaskStack.push({canvas:zn.canvas,context:jn,offsetX:Un,offsetY:Gn,scaleX:Bn,scaleY:$n,subtype:An.smask.subtype,backdrop:An.smask.backdrop,transferMap:An.smask.transferMap||null,startTransformInverse:null}):(wn.setTransform(1,0,0,1,0,0),wn.translate(Un,Gn),wn.scale(Bn,$n),wn.save()),Sn(wn,jn),this.ctx=jn,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(wn),this.groupLevel++}endGroup(An){if(!this.contentVisible)return;this.groupLevel--;const wn=this.ctx,En=this.groupStack.pop();if(this.ctx=En,this.ctx.imageSmoothingEnabled=!1,An.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const Nn=(0,tn.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...Nn);const Fn=un.Util.getAxialAlignedBoundingBox([0,0,wn.canvas.width,wn.canvas.height],Nn);this.ctx.drawImage(wn.canvas,0,0),this.ctx.restore(),this.compose(Fn)}}beginAnnotation(An,wn,En,Nn,Fn){if(Ur(this,Vn,S1).call(this),Pn(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(wn)&&wn.length===4){const Un=wn[2]-wn[0],Gn=wn[3]-wn[1];if(Fn&&this.annotationCanvasMap){En=En.slice(),En[4]-=wn[0],En[5]-=wn[1],wn=wn.slice(),wn[0]=wn[1]=0,wn[2]=Un,wn[3]=Gn;const[er,On]=un.Util.singularValueDecompose2dScale((0,tn.getCurrentTransform)(this.ctx)),{viewportScale:Bn}=this,$n=Math.ceil(Un*this.outputScaleX*Bn),qn=Math.ceil(Gn*this.outputScaleY*Bn);this.annotationCanvas=this.canvasFactory.create($n,qn);const{canvas:zn,context:jn}=this.annotationCanvas;this.annotationCanvasMap.set(An,zn),this.annotationCanvas.savedCtx=this.ctx,this.ctx=jn,this.ctx.setTransform(er,0,0,-On,0,Gn*On),Pn(this.ctx,this.foregroundColor)}else Pn(this.ctx,this.foregroundColor),this.ctx.rect(wn[0],wn[1],Un,Gn),this.ctx.clip(),this.endPath()}this.current=new yn(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...En),this.transform(...Nn)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(An){if(!this.contentVisible)return;const wn=An.count;An=this.getObject(An.data,An),An.count=wn;const En=this.ctx,Nn=this.processingType3;if(Nn&&(Nn.compiled===void 0&&(Nn.compiled=mn(An)),Nn.compiled)){Nn.compiled(En);return}const Fn=this._createMaskCanvas(An),Un=Fn.canvas;En.save(),En.setTransform(1,0,0,1,0,0),En.drawImage(Un,Fn.offsetX,Fn.offsetY),En.restore(),this.compose()}paintImageMaskXObjectRepeat(An,wn,En=0,Nn=0,Fn,Un){if(!this.contentVisible)return;An=this.getObject(An.data,An);const Gn=this.ctx;Gn.save();const er=(0,tn.getCurrentTransform)(Gn);Gn.transform(wn,En,Nn,Fn,0,0);const On=this._createMaskCanvas(An);Gn.setTransform(1,0,0,1,0,0);for(let Bn=0,$n=Un.length;Bn<$n;Bn+=2){const qn=un.Util.transform(er,[wn,En,Nn,Fn,Un[Bn],Un[Bn+1]]),[zn,jn]=un.Util.applyTransform([0,0],qn);Gn.drawImage(On.canvas,zn,jn)}Gn.restore(),this.compose()}paintImageMaskXObjectGroup(An){if(!this.contentVisible)return;const wn=this.ctx,En=this.current.fillColor,Nn=this.current.patternFill;for(const Fn of An){const{data:Un,width:Gn,height:er,transform:On}=Fn,Bn=this.cachedCanvases.getCanvas("maskCanvas",Gn,er),$n=Bn.context;$n.save();const qn=this.getObject(Un,Fn);xn($n,qn),$n.globalCompositeOperation="source-in",$n.fillStyle=Nn?En.getPattern($n,this,(0,tn.getCurrentTransformInverse)(wn),gn.PathType.FILL):En,$n.fillRect(0,0,Gn,er),$n.restore(),wn.save(),wn.transform(...On),wn.scale(1,-1),pn(wn,Bn.canvas,0,0,Gn,er,0,-1,1,1),wn.restore()}this.compose()}paintImageXObject(An){if(!this.contentVisible)return;const wn=this.getObject(An);if(!wn){(0,un.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(wn)}paintImageXObjectRepeat(An,wn,En,Nn){if(!this.contentVisible)return;const Fn=this.getObject(An);if(!Fn){(0,un.warn)("Dependent image isn't ready yet");return}const Un=Fn.width,Gn=Fn.height,er=[];for(let On=0,Bn=Nn.length;On<Bn;On+=2)er.push({transform:[wn,0,0,En,Nn[On],Nn[On+1]],x:0,y:0,w:Un,h:Gn});this.paintInlineImageXObjectGroup(Fn,er)}paintInlineImageXObject(An){if(!this.contentVisible)return;const wn=An.width,En=An.height,Nn=this.ctx;this.save(),Nn.scale(1/wn,-1/En);let Fn;if(typeof HTMLElement=="function"&&An instanceof HTMLElement||!An.data)Fn=An;else{const On=this.cachedCanvases.getCanvas("inlineImage",wn,En),Bn=On.context;_n(Bn,An,this.current.transferMaps),Fn=On.canvas}const Un=this._scaleImage(Fn,(0,tn.getCurrentTransformInverse)(Nn));Nn.imageSmoothingEnabled=Qn((0,tn.getCurrentTransform)(Nn),An.interpolate);const[Gn,er]=pn(Nn,Un.img,0,0,Un.paintWidth,Un.paintHeight,0,-En,wn,En);if(this.imageLayer){const[On,Bn]=un.Util.applyTransform([0,-En],(0,tn.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:An,left:On,top:Bn,width:Gn,height:er})}this.compose(),this.restore()}paintInlineImageXObjectGroup(An,wn){if(!this.contentVisible)return;const En=this.ctx,Nn=An.width,Fn=An.height,Un=this.cachedCanvases.getCanvas("inlineImage",Nn,Fn),Gn=Un.context;_n(Gn,An,this.current.transferMaps);for(const er of wn){if(En.save(),En.transform(...er.transform),En.scale(1,-1),pn(En,Un.canvas,er.x,er.y,er.w,er.h,0,-1,1,1),this.imageLayer){const[On,Bn]=un.Util.applyTransform([er.x,er.y],(0,tn.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:An,left:On,top:Bn,width:Nn,height:Fn})}En.restore()}this.compose()}paintSolidColorImageMask(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(An){}markPointProps(An,wn){}beginMarkedContent(An){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(An,wn){An==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(wn)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(An){const wn=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(An);const En=this.ctx;this.pendingClip&&(wn||(this.pendingClip===ir?En.clip("evenodd"):En.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),En.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const An=(0,tn.getCurrentTransform)(this.ctx);if(An[1]===0&&An[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(An[0]),Math.abs(An[3]));else{const wn=Math.abs(An[0]*An[3]-An[2]*An[1]),En=Math.hypot(An[0],An[2]),Nn=Math.hypot(An[1],An[3]);this._cachedGetSinglePixelWidth=Math.max(En,Nn)/wn}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:An}=this.current,wn=(0,tn.getCurrentTransform)(this.ctx);let En,Nn;if(wn[1]===0&&wn[2]===0){const Fn=Math.abs(wn[0]),Un=Math.abs(wn[3]);if(An===0)En=1/Fn,Nn=1/Un;else{const Gn=Fn*An,er=Un*An;En=Gn<1?1/Gn:1,Nn=er<1?1/er:1}}else{const Fn=Math.abs(wn[0]*wn[3]-wn[2]*wn[1]),Un=Math.hypot(wn[0],wn[1]),Gn=Math.hypot(wn[2],wn[3]);if(An===0)En=Gn/Fn,Nn=Un/Fn;else{const er=An*Fn;En=Gn>er?Gn/er:1,Nn=Un>er?Un/er:1}}this._cachedScaleForStroking=[En,Nn]}return this._cachedScaleForStroking}rescaleAndStroke(An){const{ctx:wn}=this,{lineWidth:En}=this.current,[Nn,Fn]=this.getScaleForStroking();if(wn.lineWidth=En||1,Nn===1&&Fn===1){wn.stroke();return}let Un,Gn,er;An&&(Un=(0,tn.getCurrentTransform)(wn),Gn=wn.getLineDash().slice(),er=wn.lineDashOffset),wn.scale(Nn,Fn);const On=Math.max(Nn,Fn);wn.setLineDash(wn.getLineDash().map(Bn=>Bn/On)),wn.lineDashOffset/=On,wn.stroke(),An&&(wn.setTransform(...Un),wn.setLineDash(Gn),wn.lineDashOffset=er)}isContentVisible(){for(let An=this.markedContentStack.length-1;An>=0;An--)if(!this.markedContentStack[An].visible)return!1;return!0}};let Jn=Yn;Vn=new WeakSet,S1=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},e.CanvasGraphics=Jn;for(const Tn in un.OPS)Jn.prototype[Tn]!==void 0&&(Jn.prototype[un.OPS[Tn]]=Jn.prototype[Tn])},(St,e,_e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=cn;var tn=_e(1),un=_e(8),gn=_e(3);const vn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=vn;function fn(pn,mn){if(!mn||gn.isNodeJS)return;const yn=mn[2]-mn[0],_n=mn[3]-mn[1],xn=new Path2D;xn.rect(mn[0],mn[1],yn,_n),pn.clip(xn)}class en{constructor(){this.constructor===en&&(0,tn.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,tn.unreachable)("Abstract method `getPattern` called.")}}class on extends en{constructor(mn){super(),this._type=mn[1],this._bbox=mn[2],this._colorStops=mn[3],this._p0=mn[4],this._p1=mn[5],this._r0=mn[6],this._r1=mn[7],this.matrix=null}_createGradient(mn){let yn;this._type==="axial"?yn=mn.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(yn=mn.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const _n of this._colorStops)yn.addColorStop(_n[0],_n[1]);return yn}getPattern(mn,yn,_n,xn){let Sn;if(xn===vn.STROKE||xn===vn.FILL){const Pn=yn.current.getClippedPathBoundingBox(xn,(0,un.getCurrentTransform)(mn))||[0,0,0,0],Ln=Math.ceil(Pn[2]-Pn[0])||1,In=Math.ceil(Pn[3]-Pn[1])||1,Rn=yn.cachedCanvases.getCanvas("pattern",Ln,In,!0),Mn=Rn.context;Mn.clearRect(0,0,Mn.canvas.width,Mn.canvas.height),Mn.beginPath(),Mn.rect(0,0,Mn.canvas.width,Mn.canvas.height),Mn.translate(-Pn[0],-Pn[1]),_n=tn.Util.transform(_n,[1,0,0,1,Pn[0],Pn[1]]),Mn.transform(...yn.baseTransform),this.matrix&&Mn.transform(...this.matrix),fn(Mn,this._bbox),Mn.fillStyle=this._createGradient(Mn),Mn.fill(),Sn=mn.createPattern(Rn.canvas,"no-repeat");const Hn=new DOMMatrix(_n);try{Sn.setTransform(Hn)}catch(Qn){(0,tn.warn)(`RadialAxialShadingPattern.getPattern: "${Qn==null?void 0:Qn.message}".`)}}else fn(mn,this._bbox),Sn=this._createGradient(mn);return Sn}}function dn(pn,mn,yn,_n,xn,Sn,Pn,Ln){const In=mn.coords,Rn=mn.colors,Mn=pn.data,Hn=pn.width*4;let Qn;In[yn+1]>In[_n+1]&&(Qn=yn,yn=_n,_n=Qn,Qn=Sn,Sn=Pn,Pn=Qn),In[_n+1]>In[xn+1]&&(Qn=_n,_n=xn,xn=Qn,Qn=Pn,Pn=Ln,Ln=Qn),In[yn+1]>In[_n+1]&&(Qn=yn,yn=_n,_n=Qn,Qn=Sn,Sn=Pn,Pn=Qn);const Kn=(In[yn]+mn.offsetX)*mn.scaleX,nr=(In[yn+1]+mn.offsetY)*mn.scaleY,Zn=(In[_n]+mn.offsetX)*mn.scaleX,ir=(In[_n+1]+mn.offsetY)*mn.scaleY,Jn=(In[xn]+mn.offsetX)*mn.scaleX,Vn=(In[xn+1]+mn.offsetY)*mn.scaleY;if(nr>=Vn)return;const Xn=Rn[Sn],Yn=Rn[Sn+1],Tn=Rn[Sn+2],An=Rn[Pn],wn=Rn[Pn+1],En=Rn[Pn+2],Nn=Rn[Ln],Fn=Rn[Ln+1],Un=Rn[Ln+2],Gn=Math.round(nr),er=Math.round(Vn);let On,Bn,$n,qn,zn,jn,ur,gr;for(let ar=Gn;ar<=er;ar++){if(ar<ir){let or;ar<nr?or=0:or=(nr-ar)/(nr-ir),On=Kn-(Kn-Zn)*or,Bn=Xn-(Xn-An)*or,$n=Yn-(Yn-wn)*or,qn=Tn-(Tn-En)*or}else{let or;ar>Vn?or=1:ir===Vn?or=0:or=(ir-ar)/(ir-Vn),On=Zn-(Zn-Jn)*or,Bn=An-(An-Nn)*or,$n=wn-(wn-Fn)*or,qn=En-(En-Un)*or}let vr;ar<nr?vr=0:ar>Vn?vr=1:vr=(nr-ar)/(nr-Vn),zn=Kn-(Kn-Jn)*vr,jn=Xn-(Xn-Nn)*vr,ur=Yn-(Yn-Fn)*vr,gr=Tn-(Tn-Un)*vr;const dr=Math.round(Math.min(On,zn)),hr=Math.round(Math.max(On,zn));let _r=Hn*ar+dr*4;for(let or=dr;or<=hr;or++)vr=(On-or)/(On-zn),vr<0?vr=0:vr>1&&(vr=1),Mn[_r++]=Bn-(Bn-jn)*vr|0,Mn[_r++]=$n-($n-ur)*vr|0,Mn[_r++]=qn-(qn-gr)*vr|0,Mn[_r++]=255}}function rn(pn,mn,yn){const _n=mn.coords,xn=mn.colors;let Sn,Pn;switch(mn.type){case"lattice":const Ln=mn.verticesPerRow,In=Math.floor(_n.length/Ln)-1,Rn=Ln-1;for(Sn=0;Sn<In;Sn++){let Mn=Sn*Ln;for(let Hn=0;Hn<Rn;Hn++,Mn++)dn(pn,yn,_n[Mn],_n[Mn+1],_n[Mn+Ln],xn[Mn],xn[Mn+1],xn[Mn+Ln]),dn(pn,yn,_n[Mn+Ln+1],_n[Mn+1],_n[Mn+Ln],xn[Mn+Ln+1],xn[Mn+1],xn[Mn+Ln])}break;case"triangles":for(Sn=0,Pn=_n.length;Sn<Pn;Sn+=3)dn(pn,yn,_n[Sn],_n[Sn+1],_n[Sn+2],xn[Sn],xn[Sn+1],xn[Sn+2]);break;default:throw new Error("illegal figure")}}class an extends en{constructor(mn){super(),this._coords=mn[2],this._colors=mn[3],this._figures=mn[4],this._bounds=mn[5],this._bbox=mn[7],this._background=mn[8],this.matrix=null}_createMeshCanvas(mn,yn,_n){const Ln=Math.floor(this._bounds[0]),In=Math.floor(this._bounds[1]),Rn=Math.ceil(this._bounds[2])-Ln,Mn=Math.ceil(this._bounds[3])-In,Hn=Math.min(Math.ceil(Math.abs(Rn*mn[0]*1.1)),3e3),Qn=Math.min(Math.ceil(Math.abs(Mn*mn[1]*1.1)),3e3),Kn=Rn/Hn,nr=Mn/Qn,Zn={coords:this._coords,colors:this._colors,offsetX:-Ln,offsetY:-In,scaleX:1/Kn,scaleY:1/nr},ir=Hn+2*2,Jn=Qn+2*2,Vn=_n.getCanvas("mesh",ir,Jn,!1),Xn=Vn.context,Yn=Xn.createImageData(Hn,Qn);if(yn){const An=Yn.data;for(let wn=0,En=An.length;wn<En;wn+=4)An[wn]=yn[0],An[wn+1]=yn[1],An[wn+2]=yn[2],An[wn+3]=255}for(const An of this._figures)rn(Yn,An,Zn);return Xn.putImageData(Yn,2,2),{canvas:Vn.canvas,offsetX:Ln-2*Kn,offsetY:In-2*nr,scaleX:Kn,scaleY:nr}}getPattern(mn,yn,_n,xn){fn(mn,this._bbox);let Sn;if(xn===vn.SHADING)Sn=tn.Util.singularValueDecompose2dScale((0,un.getCurrentTransform)(mn));else if(Sn=tn.Util.singularValueDecompose2dScale(yn.baseTransform),this.matrix){const Ln=tn.Util.singularValueDecompose2dScale(this.matrix);Sn=[Sn[0]*Ln[0],Sn[1]*Ln[1]]}const Pn=this._createMeshCanvas(Sn,xn===vn.SHADING?null:this._background,yn.cachedCanvases);return xn!==vn.SHADING&&(mn.setTransform(...yn.baseTransform),this.matrix&&mn.transform(...this.matrix)),mn.translate(Pn.offsetX,Pn.offsetY),mn.scale(Pn.scaleX,Pn.scaleY),mn.createPattern(Pn.canvas,"no-repeat")}}class nn extends en{getPattern(){return"hotpink"}}function cn(pn){switch(pn[0]){case"RadialAxial":return new on(pn);case"Mesh":return new an(pn);case"Dummy":return new nn}throw new Error(`Unknown IR type: ${pn[0]}`)}const hn={COLORED:1,UNCOLORED:2};class sn{static get MAX_PATTERN_SIZE(){return(0,tn.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(mn,yn,_n,xn,Sn){this.operatorList=mn[2],this.matrix=mn[3]||[1,0,0,1,0,0],this.bbox=mn[4],this.xstep=mn[5],this.ystep=mn[6],this.paintType=mn[7],this.tilingType=mn[8],this.color=yn,this.ctx=_n,this.canvasGraphicsFactory=xn,this.baseTransform=Sn}createPatternCanvas(mn){const yn=this.operatorList,_n=this.bbox,xn=this.xstep,Sn=this.ystep,Pn=this.paintType,Ln=this.tilingType,In=this.color,Rn=this.canvasGraphicsFactory;(0,tn.info)("TilingType: "+Ln);const Mn=_n[0],Hn=_n[1],Qn=_n[2],Kn=_n[3],nr=tn.Util.singularValueDecompose2dScale(this.matrix),Zn=tn.Util.singularValueDecompose2dScale(this.baseTransform),ir=[nr[0]*Zn[0],nr[1]*Zn[1]],Jn=this.getSizeAndScale(xn,this.ctx.canvas.width,ir[0]),Vn=this.getSizeAndScale(Sn,this.ctx.canvas.height,ir[1]),Xn=mn.cachedCanvases.getCanvas("pattern",Jn.size,Vn.size,!0),Yn=Xn.context,Tn=Rn.createCanvasGraphics(Yn);Tn.groupLevel=mn.groupLevel,this.setFillAndStrokeStyleToContext(Tn,Pn,In);let An=Mn,wn=Hn,En=Qn,Nn=Kn;return Mn<0&&(An=0,En+=Math.abs(Mn)),Hn<0&&(wn=0,Nn+=Math.abs(Hn)),Yn.translate(-(Jn.scale*An),-(Vn.scale*wn)),Tn.transform(Jn.scale,0,0,Vn.scale,0,0),Yn.save(),this.clipBbox(Tn,An,wn,En,Nn),Tn.baseTransform=(0,un.getCurrentTransform)(Tn.ctx),Tn.executeOperatorList(yn),Tn.endDrawing(),{canvas:Xn.canvas,scaleX:Jn.scale,scaleY:Vn.scale,offsetX:An,offsetY:wn}}getSizeAndScale(mn,yn,_n){mn=Math.abs(mn);const xn=Math.max(sn.MAX_PATTERN_SIZE,yn);let Sn=Math.ceil(mn*_n);return Sn>=xn?Sn=xn:_n=Sn/mn,{scale:_n,size:Sn}}clipBbox(mn,yn,_n,xn,Sn){const Pn=xn-yn,Ln=Sn-_n;mn.ctx.rect(yn,_n,Pn,Ln),mn.current.updateRectMinMax((0,un.getCurrentTransform)(mn.ctx),[yn,_n,xn,Sn]),mn.clip(),mn.endPath()}setFillAndStrokeStyleToContext(mn,yn,_n){const xn=mn.ctx,Sn=mn.current;switch(yn){case hn.COLORED:const Pn=this.ctx;xn.fillStyle=Pn.fillStyle,xn.strokeStyle=Pn.strokeStyle,Sn.fillColor=Pn.fillStyle,Sn.strokeColor=Pn.strokeStyle;break;case hn.UNCOLORED:const Ln=tn.Util.makeHexColor(_n[0],_n[1],_n[2]);xn.fillStyle=Ln,xn.strokeStyle=Ln,Sn.fillColor=Ln,Sn.strokeColor=Ln;break;default:throw new tn.FormatError(`Unsupported paint type: ${yn}`)}}getPattern(mn,yn,_n,xn){let Sn=_n;xn!==vn.SHADING&&(Sn=tn.Util.transform(Sn,yn.baseTransform),this.matrix&&(Sn=tn.Util.transform(Sn,this.matrix)));const Pn=this.createPatternCanvas(yn);let Ln=new DOMMatrix(Sn);Ln=Ln.translate(Pn.offsetX,Pn.offsetY),Ln=Ln.scale(1/Pn.scaleX,1/Pn.scaleY);const In=mn.createPattern(Pn.canvas,"repeat");try{In.setTransform(Ln)}catch(Rn){(0,tn.warn)(`TilingPattern.getPattern: "${Rn==null?void 0:Rn.message}".`)}return In}}e.TilingPattern=sn},(St,e,_e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.applyMaskImageData=un;var tn=_e(1);function un({src:gn,srcPos:vn=0,dest:fn,destPos:en=0,width:on,height:dn,inverseDecode:rn=!1}){const an=tn.FeatureTest.isLittleEndian?4278190080:255,[nn,cn]=rn?[0,an]:[an,0],hn=on>>3,sn=on&7,pn=gn.length;fn=new Uint32Array(fn.buffer);for(let mn=0;mn<dn;mn++){for(const _n=vn+hn;vn<_n;vn++){const xn=vn<pn?gn[vn]:255;fn[en++]=xn&128?cn:nn,fn[en++]=xn&64?cn:nn,fn[en++]=xn&32?cn:nn,fn[en++]=xn&16?cn:nn,fn[en++]=xn&8?cn:nn,fn[en++]=xn&4?cn:nn,fn[en++]=xn&2?cn:nn,fn[en++]=xn&1?cn:nn}if(sn===0)continue;const yn=vn<pn?gn[vn++]:255;for(let _n=0;_n<sn;_n++)fn[en++]=yn&1<<7-_n?cn:nn}return{srcPos:vn,destPos:en}}},(St,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const _e=Object.create(null);e.GlobalWorkerOptions=_e,_e.workerPort=_e.workerPort===void 0?null:_e.workerPort,_e.workerSrc=_e.workerSrc===void 0?"":_e.workerSrc},(St,e,_e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var tn=_e(1);const un={UNKNOWN:0,DATA:1,ERROR:2},gn={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function vn(en){switch(en instanceof Error||typeof en=="object"&&en!==null||(0,tn.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),en.name){case"AbortException":return new tn.AbortException(en.message);case"MissingPDFException":return new tn.MissingPDFException(en.message);case"PasswordException":return new tn.PasswordException(en.message,en.code);case"UnexpectedResponseException":return new tn.UnexpectedResponseException(en.message,en.status);case"UnknownErrorException":return new tn.UnknownErrorException(en.message,en.details);default:return new tn.UnknownErrorException(en.message,en.toString())}}class fn{constructor(on,dn,rn){this.sourceName=on,this.targetName=dn,this.comObj=rn,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=an=>{const nn=an.data;if(nn.targetName!==this.sourceName)return;if(nn.stream){this._processStreamMessage(nn);return}if(nn.callback){const hn=nn.callbackId,sn=this.callbackCapabilities[hn];if(!sn)throw new Error(`Cannot resolve callback ${hn}`);if(delete this.callbackCapabilities[hn],nn.callback===un.DATA)sn.resolve(nn.data);else if(nn.callback===un.ERROR)sn.reject(vn(nn.reason));else throw new Error("Unexpected callback case");return}const cn=this.actionHandler[nn.action];if(!cn)throw new Error(`Unknown action from worker: ${nn.action}`);if(nn.callbackId){const hn=this.sourceName,sn=nn.sourceName;new Promise(function(pn){pn(cn(nn.data))}).then(function(pn){rn.postMessage({sourceName:hn,targetName:sn,callback:un.DATA,callbackId:nn.callbackId,data:pn})},function(pn){rn.postMessage({sourceName:hn,targetName:sn,callback:un.ERROR,callbackId:nn.callbackId,reason:vn(pn)})});return}if(nn.streamId){this._createStreamSink(nn);return}cn(nn.data)},rn.addEventListener("message",this._onComObjOnMessage)}on(on,dn){const rn=this.actionHandler;if(rn[on])throw new Error(`There is already an actionName called "${on}"`);rn[on]=dn}send(on,dn,rn){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:on,data:dn},rn)}sendWithPromise(on,dn,rn){const an=this.callbackId++,nn=(0,tn.createPromiseCapability)();this.callbackCapabilities[an]=nn;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:on,callbackId:an,data:dn},rn)}catch(cn){nn.reject(cn)}return nn.promise}sendWithStream(on,dn,rn,an){const nn=this.streamId++,cn=this.sourceName,hn=this.targetName,sn=this.comObj;return new ReadableStream({start:pn=>{const mn=(0,tn.createPromiseCapability)();return this.streamControllers[nn]={controller:pn,startCall:mn,pullCall:null,cancelCall:null,isClosed:!1},sn.postMessage({sourceName:cn,targetName:hn,action:on,streamId:nn,data:dn,desiredSize:pn.desiredSize},an),mn.promise},pull:pn=>{const mn=(0,tn.createPromiseCapability)();return this.streamControllers[nn].pullCall=mn,sn.postMessage({sourceName:cn,targetName:hn,stream:gn.PULL,streamId:nn,desiredSize:pn.desiredSize}),mn.promise},cancel:pn=>{(0,tn.assert)(pn instanceof Error,"cancel must have a valid reason");const mn=(0,tn.createPromiseCapability)();return this.streamControllers[nn].cancelCall=mn,this.streamControllers[nn].isClosed=!0,sn.postMessage({sourceName:cn,targetName:hn,stream:gn.CANCEL,streamId:nn,reason:vn(pn)}),mn.promise}},rn)}_createStreamSink(on){const dn=on.streamId,rn=this.sourceName,an=on.sourceName,nn=this.comObj,cn=this,hn=this.actionHandler[on.action],sn={enqueue(pn,mn=1,yn){if(this.isCancelled)return;const _n=this.desiredSize;this.desiredSize-=mn,_n>0&&this.desiredSize<=0&&(this.sinkCapability=(0,tn.createPromiseCapability)(),this.ready=this.sinkCapability.promise),nn.postMessage({sourceName:rn,targetName:an,stream:gn.ENQUEUE,streamId:dn,chunk:pn},yn)},close(){this.isCancelled||(this.isCancelled=!0,nn.postMessage({sourceName:rn,targetName:an,stream:gn.CLOSE,streamId:dn}),delete cn.streamSinks[dn])},error(pn){(0,tn.assert)(pn instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,nn.postMessage({sourceName:rn,targetName:an,stream:gn.ERROR,streamId:dn,reason:vn(pn)}))},sinkCapability:(0,tn.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:on.desiredSize,ready:null};sn.sinkCapability.resolve(),sn.ready=sn.sinkCapability.promise,this.streamSinks[dn]=sn,new Promise(function(pn){pn(hn(on.data,sn))}).then(function(){nn.postMessage({sourceName:rn,targetName:an,stream:gn.START_COMPLETE,streamId:dn,success:!0})},function(pn){nn.postMessage({sourceName:rn,targetName:an,stream:gn.START_COMPLETE,streamId:dn,reason:vn(pn)})})}_processStreamMessage(on){const dn=on.streamId,rn=this.sourceName,an=on.sourceName,nn=this.comObj,cn=this.streamControllers[dn],hn=this.streamSinks[dn];switch(on.stream){case gn.START_COMPLETE:on.success?cn.startCall.resolve():cn.startCall.reject(vn(on.reason));break;case gn.PULL_COMPLETE:on.success?cn.pullCall.resolve():cn.pullCall.reject(vn(on.reason));break;case gn.PULL:if(!hn){nn.postMessage({sourceName:rn,targetName:an,stream:gn.PULL_COMPLETE,streamId:dn,success:!0});break}hn.desiredSize<=0&&on.desiredSize>0&&hn.sinkCapability.resolve(),hn.desiredSize=on.desiredSize,new Promise(function(sn){sn(hn.onPull&&hn.onPull())}).then(function(){nn.postMessage({sourceName:rn,targetName:an,stream:gn.PULL_COMPLETE,streamId:dn,success:!0})},function(sn){nn.postMessage({sourceName:rn,targetName:an,stream:gn.PULL_COMPLETE,streamId:dn,reason:vn(sn)})});break;case gn.ENQUEUE:if((0,tn.assert)(cn,"enqueue should have stream controller"),cn.isClosed)break;cn.controller.enqueue(on.chunk);break;case gn.CLOSE:if((0,tn.assert)(cn,"close should have stream controller"),cn.isClosed)break;cn.isClosed=!0,cn.controller.close(),this._deleteStreamController(cn,dn);break;case gn.ERROR:(0,tn.assert)(cn,"error should have stream controller"),cn.controller.error(vn(on.reason)),this._deleteStreamController(cn,dn);break;case gn.CANCEL_COMPLETE:on.success?cn.cancelCall.resolve():cn.cancelCall.reject(vn(on.reason)),this._deleteStreamController(cn,dn);break;case gn.CANCEL:if(!hn)break;new Promise(function(sn){sn(hn.onCancel&&hn.onCancel(vn(on.reason)))}).then(function(){nn.postMessage({sourceName:rn,targetName:an,stream:gn.CANCEL_COMPLETE,streamId:dn,success:!0})},function(sn){nn.postMessage({sourceName:rn,targetName:an,stream:gn.CANCEL_COMPLETE,streamId:dn,reason:vn(sn)})}),hn.sinkCapability.reject(vn(on.reason)),hn.isCancelled=!0,delete this.streamSinks[dn];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(on,dn){await Promise.allSettled([on.startCall&&on.startCall.promise,on.pullCall&&on.pullCall.promise,on.cancelCall&&on.cancelCall.promise]),delete this.streamControllers[dn]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}e.MessageHandler=fn},(St,e,_e)=>{var gn,vn;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var tn=_e(1);class un{constructor({parsedData:en,rawData:on}){Mr(this,gn,void 0);Mr(this,vn,void 0);Kr(this,gn,en),Kr(this,vn,on)}getRaw(){return fr(this,vn)}get(en){var on;return(on=fr(this,gn).get(en))!=null?on:null}getAll(){return(0,tn.objectFromMap)(fr(this,gn))}has(en){return fr(this,gn).has(en)}}gn=new WeakMap,vn=new WeakMap,e.Metadata=un},(St,e,_e)=>{var fn,en,on,dn,rn,an,C1;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var tn=_e(1);const un=Symbol("INTERNAL");class gn{constructor(hn,sn){Mr(this,fn,!0);this.name=hn,this.intent=sn}get visible(){return fr(this,fn)}_setVisible(hn,sn){hn!==un&&(0,tn.unreachable)("Internal method `_setVisible` called."),Kr(this,fn,sn)}}fn=new WeakMap;class vn{constructor(hn){Mr(this,an);Mr(this,en,!0);Mr(this,on,new Map);Mr(this,dn,null);Mr(this,rn,null);if(this.name=null,this.creator=null,hn!==null){this.name=hn.name,this.creator=hn.creator,Kr(this,rn,hn.order);for(const sn of hn.groups)fr(this,on).set(sn.id,new gn(sn.name,sn.intent));if(hn.baseState==="OFF")for(const sn of fr(this,on).values())sn._setVisible(un,!1);for(const sn of hn.on)fr(this,on).get(sn)._setVisible(un,!0);for(const sn of hn.off)fr(this,on).get(sn)._setVisible(un,!1);Kr(this,dn,new Map);for(const[sn,pn]of fr(this,on))fr(this,dn).set(sn,pn.visible)}}isVisible(hn){if(fr(this,on).size===0)return!0;if(!hn)return(0,tn.warn)("Optional content group not defined."),!0;if(hn.type==="OCG")return fr(this,on).has(hn.id)?fr(this,on).get(hn.id).visible:((0,tn.warn)(`Optional content group not found: ${hn.id}`),!0);if(hn.type==="OCMD"){if(hn.expression)return Ur(this,an,C1).call(this,hn.expression);if(!hn.policy||hn.policy==="AnyOn"){for(const sn of hn.ids){if(!fr(this,on).has(sn))return(0,tn.warn)(`Optional content group not found: ${sn}`),!0;if(fr(this,on).get(sn).visible)return!0}return!1}else if(hn.policy==="AllOn"){for(const sn of hn.ids){if(!fr(this,on).has(sn))return(0,tn.warn)(`Optional content group not found: ${sn}`),!0;if(!fr(this,on).get(sn).visible)return!1}return!0}else if(hn.policy==="AnyOff"){for(const sn of hn.ids){if(!fr(this,on).has(sn))return(0,tn.warn)(`Optional content group not found: ${sn}`),!0;if(!fr(this,on).get(sn).visible)return!0}return!1}else if(hn.policy==="AllOff"){for(const sn of hn.ids){if(!fr(this,on).has(sn))return(0,tn.warn)(`Optional content group not found: ${sn}`),!0;if(fr(this,on).get(sn).visible)return!1}return!0}return(0,tn.warn)(`Unknown optional content policy ${hn.policy}.`),!0}return(0,tn.warn)(`Unknown group type ${hn.type}.`),!0}setVisibility(hn,sn=!0){if(!fr(this,on).has(hn)){(0,tn.warn)(`Optional content group not found: ${hn}`);return}fr(this,on).get(hn)._setVisible(un,!!sn),Kr(this,en,null)}get hasInitialVisibility(){if(fr(this,en)!==null)return fr(this,en);for(const[hn,sn]of fr(this,on)){const pn=fr(this,dn).get(hn);if(sn.visible!==pn)return Kr(this,en,!1)}return Kr(this,en,!0)}getOrder(){return fr(this,on).size?fr(this,rn)?fr(this,rn).slice():[...fr(this,on).keys()]:null}getGroups(){return fr(this,on).size>0?(0,tn.objectFromMap)(fr(this,on)):null}getGroup(hn){return fr(this,on).get(hn)||null}}en=new WeakMap,on=new WeakMap,dn=new WeakMap,rn=new WeakMap,an=new WeakSet,C1=function(hn){const sn=hn.length;if(sn<2)return!0;const pn=hn[0];for(let mn=1;mn<sn;mn++){const yn=hn[mn];let _n;if(Array.isArray(yn))_n=Ur(this,an,C1).call(this,yn);else if(fr(this,on).has(yn))_n=fr(this,on).get(yn).visible;else return(0,tn.warn)(`Optional content group not found: ${yn}`),!0;switch(pn){case"And":if(!_n)return!1;break;case"Or":if(_n)return!0;break;case"Not":return!_n;default:return!0}}return pn==="And"},e.OptionalContentConfig=vn},(St,e,_e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var tn=_e(1),un=_e(8);class gn{constructor(on,dn){(0,tn.assert)(dn,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=on.progressiveDone||!1,this._contentDispositionFilename=on.contentDispositionFilename||null;const rn=on.initialData;if((rn==null?void 0:rn.length)>0){const an=new Uint8Array(rn).buffer;this._queuedChunks.push(an)}this._pdfDataRangeTransport=dn,this._isStreamingSupported=!on.disableStream,this._isRangeSupported=!on.disableRange,this._contentLength=on.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((an,nn)=>{this._onReceiveData({begin:an,chunk:nn})}),this._pdfDataRangeTransport.addProgressListener((an,nn)=>{this._onProgress({loaded:an,total:nn})}),this._pdfDataRangeTransport.addProgressiveReadListener(an=>{this._onReceiveData({chunk:an})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(on){const dn=new Uint8Array(on.chunk).buffer;if(on.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(dn):this._queuedChunks.push(dn);else{const rn=this._rangeReaders.some(function(an){return an._begin!==on.begin?!1:(an._enqueue(dn),!0)});(0,tn.assert)(rn,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var on,dn;return(dn=(on=this._fullRequestReader)==null?void 0:on._loaded)!=null?dn:0}_onProgress(on){if(on.total===void 0){const dn=this._rangeReaders[0];dn!=null&&dn.onProgress&&dn.onProgress({loaded:on.loaded})}else{const dn=this._fullRequestReader;dn!=null&&dn.onProgress&&dn.onProgress({loaded:on.loaded,total:on.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(on){const dn=this._rangeReaders.indexOf(on);dn>=0&&this._rangeReaders.splice(dn,1)}getFullReader(){(0,tn.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const on=this._queuedChunks;return this._queuedChunks=null,new vn(this,on,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(on,dn){if(dn<=this._progressiveDataLength)return null;const rn=new fn(this,on,dn);return this._pdfDataRangeTransport.requestDataRange(on,dn),this._rangeReaders.push(rn),rn}cancelAllRequests(on){this._fullRequestReader&&this._fullRequestReader.cancel(on);for(const dn of this._rangeReaders.slice(0))dn.cancel(on);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=gn;class vn{constructor(on,dn,rn=!1,an=null){this._stream=on,this._done=rn||!1,this._filename=(0,un.isPdfFile)(an)?an:null,this._queuedChunks=dn||[],this._loaded=0;for(const nn of this._queuedChunks)this._loaded+=nn.byteLength;this._requests=[],this._headersReady=Promise.resolve(),on._fullRequestReader=this,this.onProgress=null}_enqueue(on){this._done||(this._requests.length>0?this._requests.shift().resolve({value:on,done:!1}):this._queuedChunks.push(on),this._loaded+=on.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const on=(0,tn.createPromiseCapability)();return this._requests.push(on),on.promise}cancel(on){this._done=!0;for(const dn of this._requests)dn.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class fn{constructor(on,dn,rn){this._stream=on,this._begin=dn,this._end=rn,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(on){if(!this._done){if(this._requests.length===0)this._queuedChunk=on;else{this._requests.shift().resolve({value:on,done:!1});for(const rn of this._requests)rn.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const dn=this._queuedChunk;return this._queuedChunk=null,{value:dn,done:!1}}if(this._done)return{value:void 0,done:!0};const on=(0,tn.createPromiseCapability)();return this._requests.push(on),on.promise}cancel(on){this._done=!0;for(const dn of this._requests)dn.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(St,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class _e{static textContent(un){const gn=[],vn={items:gn,styles:Object.create(null)};function fn(en){var rn;if(!en)return;let on=null;const dn=en.name;if(dn==="#text")on=en.value;else if(_e.shouldBuildText(dn))(rn=en==null?void 0:en.attributes)!=null&&rn.textContent?on=en.attributes.textContent:en.value&&(on=en.value);else return;if(on!==null&&gn.push({str:on}),!!en.children)for(const an of en.children)fn(an)}return fn(un),vn}static shouldBuildText(un){return!(un==="textarea"||un==="input"||un==="option"||un==="select")}}e.XfaText=_e},(St,e,_e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var tn=_e(9);const un=function(en){return new Promise((on,dn)=>{require$$2.readFile(en,(an,nn)=>{if(an||!nn){dn(new Error(an));return}on(new Uint8Array(nn))})})};class gn extends tn.BaseCanvasFactory{_createCanvas(on,dn){return require$$2.createCanvas(on,dn)}}e.NodeCanvasFactory=gn;class vn extends tn.BaseCMapReaderFactory{_fetchData(on,dn){return un(on).then(rn=>({cMapData:rn,compressionType:dn}))}}e.NodeCMapReaderFactory=vn;class fn extends tn.BaseStandardFontDataFactory{_fetchData(on){return un(on)}}e.NodeStandardFontDataFactory=fn},(St,e,_e)=>{var en,on,dn,rn,an,nn,cn,hn,sn,A1,mn,w0,_n,T1,Sn,S0;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var tn=_e(7),un=_e(1),gn=_e(23),vn=_e(24);const Ln=class{constructor(Rn){Mr(this,sn);Mr(this,mn);Mr(this,_n);Mr(this,Sn);Mr(this,en,void 0);Mr(this,on,!1);Mr(this,dn,this.pointerup.bind(this));Mr(this,rn,this.pointerdown.bind(this));Mr(this,an,new Map);Mr(this,nn,!1);Mr(this,cn,!1);Mr(this,hn,void 0);Ln._initialized||(Ln._initialized=!0,gn.FreeTextEditor.initialize(Rn.l10n),vn.InkEditor.initialize(Rn.l10n),Rn.uiManager.registerEditorTypes([gn.FreeTextEditor,vn.InkEditor])),Kr(this,hn,Rn.uiManager),this.annotationStorage=Rn.annotationStorage,this.pageIndex=Rn.pageIndex,this.div=Rn.div,Kr(this,en,Rn.accessibilityManager),fr(this,hn).addLayer(this)}updateToolbar(Rn){fr(this,hn).updateToolbar(Rn)}updateMode(Rn=fr(this,hn).getMode()){Ur(this,Sn,S0).call(this),Rn===un.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),fr(this,hn).unselectAll()}addInkEditorIfNeeded(Rn){if(!Rn&&fr(this,hn).getMode()!==un.AnnotationEditorType.INK)return;if(!Rn){for(const Hn of fr(this,an).values())if(Hn.isEmpty()){Hn.setInBackground();return}}Ur(this,_n,T1).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(Rn){fr(this,hn).setEditingState(Rn)}addCommands(Rn){fr(this,hn).addCommands(Rn)}enable(){this.div.style.pointerEvents="auto";for(const Rn of fr(this,an).values())Rn.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const Rn of fr(this,an).values())Rn.disableEditing()}setActiveEditor(Rn){fr(this,hn).getActive()!==Rn&&fr(this,hn).setActiveEditor(Rn)}enableClick(){this.div.addEventListener("pointerdown",fr(this,rn)),this.div.addEventListener("pointerup",fr(this,dn))}disableClick(){this.div.removeEventListener("pointerdown",fr(this,rn)),this.div.removeEventListener("pointerup",fr(this,dn))}attach(Rn){fr(this,an).set(Rn.id,Rn)}detach(Rn){var Mn;fr(this,an).delete(Rn.id),(Mn=fr(this,en))==null||Mn.removePointerInTextLayer(Rn.contentDiv)}remove(Rn){fr(this,hn).removeEditor(Rn),this.detach(Rn),this.annotationStorage.remove(Rn.id),Rn.div.style.display="none",setTimeout(()=>{Rn.div.style.display="",Rn.div.remove(),Rn.isAttachedToDOM=!1,document.activeElement===document.body&&fr(this,hn).focusMainContainer()},0),fr(this,cn)||this.addInkEditorIfNeeded(!1)}add(Rn){if(Ur(this,sn,A1).call(this,Rn),fr(this,hn).addEditor(Rn),this.attach(Rn),!Rn.isAttachedToDOM){const Mn=Rn.render();this.div.append(Mn),Rn.isAttachedToDOM=!0}this.moveEditorInDOM(Rn),Rn.onceAdded(),this.addToAnnotationStorage(Rn)}moveEditorInDOM(Rn){var Mn;(Mn=fr(this,en))==null||Mn.moveElementInDOM(this.div,Rn.div,Rn.contentDiv,!0)}addToAnnotationStorage(Rn){!Rn.isEmpty()&&!this.annotationStorage.has(Rn.id)&&this.annotationStorage.setValue(Rn.id,Rn)}addOrRebuild(Rn){Rn.needsToBeRebuilt()?Rn.rebuild():this.add(Rn)}addANewEditor(Rn){const Mn=()=>{this.addOrRebuild(Rn)},Hn=()=>{Rn.remove()};this.addCommands({cmd:Mn,undo:Hn,mustExec:!0})}addUndoableEditor(Rn){const Mn=()=>{this.addOrRebuild(Rn)},Hn=()=>{Rn.remove()};this.addCommands({cmd:Mn,undo:Hn,mustExec:!1})}getNextId(){return fr(this,hn).getId()}deserialize(Rn){switch(Rn.annotationType){case un.AnnotationEditorType.FREETEXT:return gn.FreeTextEditor.deserialize(Rn,this);case un.AnnotationEditorType.INK:return vn.InkEditor.deserialize(Rn,this)}return null}setSelected(Rn){fr(this,hn).setSelected(Rn)}toggleSelected(Rn){fr(this,hn).toggleSelected(Rn)}isSelected(Rn){return fr(this,hn).isSelected(Rn)}unselect(Rn){fr(this,hn).unselect(Rn)}pointerup(Rn){const Mn=tn.KeyboardManager.platform.isMac;if(!(Rn.button!==0||Rn.ctrlKey&&Mn)&&Rn.target===this.div&&!!fr(this,nn)){if(Kr(this,nn,!1),!fr(this,on)){Kr(this,on,!0);return}Ur(this,_n,T1).call(this,Rn)}}pointerdown(Rn){const Mn=tn.KeyboardManager.platform.isMac;if(Rn.button!==0||Rn.ctrlKey&&Mn||Rn.target!==this.div)return;Kr(this,nn,!0);const Hn=fr(this,hn).getActive();Kr(this,on,!Hn||Hn.isEmpty())}drop(Rn){const Mn=Rn.dataTransfer.getData("text/plain"),Hn=fr(this,hn).getEditor(Mn);if(!Hn)return;Rn.preventDefault(),Rn.dataTransfer.dropEffect="move",Ur(this,sn,A1).call(this,Hn);const Qn=this.div.getBoundingClientRect(),Kn=Rn.clientX-Qn.x,nr=Rn.clientY-Qn.y;Hn.translate(Kn-Hn.startX,nr-Hn.startY),this.moveEditorInDOM(Hn),Hn.div.focus()}dragover(Rn){Rn.preventDefault()}destroy(){var Rn,Mn;((Rn=fr(this,hn).getActive())==null?void 0:Rn.parent)===this&&fr(this,hn).setActiveEditor(null);for(const Hn of fr(this,an).values())(Mn=fr(this,en))==null||Mn.removePointerInTextLayer(Hn.contentDiv),Hn.isAttachedToDOM=!1,Hn.div.remove(),Hn.parent=null;this.div=null,fr(this,an).clear(),fr(this,hn).removeLayer(this)}render(Rn){this.viewport=Rn.viewport,(0,tn.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const Mn of fr(this,hn).getEditors(this.pageIndex))this.add(Mn);this.updateMode()}update(Rn){this.viewport=Rn.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[Rn,Mn,Hn,Qn]=this.viewport.viewBox,Kn=Hn-Rn,nr=Qn-Mn;return[Kn,nr]}get viewportBaseDimensions(){const{width:Rn,height:Mn,rotation:Hn}=this.viewport;return Hn%180===0?[Rn,Mn]:[Mn,Rn]}setDimensions(){const{width:Rn,height:Mn,rotation:Hn}=this.viewport,Qn=Hn%180!==0,Kn=Math.floor(Rn)+"px",nr=Math.floor(Mn)+"px";this.div.style.width=Qn?nr:Kn,this.div.style.height=Qn?Kn:nr,this.div.setAttribute("data-main-rotation",Hn)}};let fn=Ln;en=new WeakMap,on=new WeakMap,dn=new WeakMap,rn=new WeakMap,an=new WeakMap,nn=new WeakMap,cn=new WeakMap,hn=new WeakMap,sn=new WeakSet,A1=function(Rn){var Mn;Rn.parent!==this&&(this.attach(Rn),Rn.pageIndex=this.pageIndex,(Mn=Rn.parent)==null||Mn.detach(Rn),Rn.parent=this,Rn.div&&Rn.isAttachedToDOM&&(Rn.div.remove(),this.div.append(Rn.div)))},mn=new WeakSet,w0=function(Rn){switch(fr(this,hn).getMode()){case un.AnnotationEditorType.FREETEXT:return new gn.FreeTextEditor(Rn);case un.AnnotationEditorType.INK:return new vn.InkEditor(Rn)}return null},_n=new WeakSet,T1=function(Rn){const Mn=this.getNextId(),Hn=Ur(this,mn,w0).call(this,{parent:this,id:Mn,x:Rn.offsetX,y:Rn.offsetY});return Hn&&this.add(Hn),Hn},Sn=new WeakSet,S0=function(){Kr(this,cn,!0);for(const Rn of fr(this,an).values())Rn.isEmpty()&&Rn.remove();Kr(this,cn,!1)},Ws(fn,"_initialized",!1),e.AnnotationEditorLayer=fn},(St,e,_e)=>{var fn,en,on,dn,rn,an,nn,cn,C0,sn,A0,mn,T0,_n,E1;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var tn=_e(1),un=_e(7),gn=_e(6);const Sn=class extends gn.AnnotationEditor{constructor(In){super({...In,name:"freeTextEditor"});Mr(this,cn);Mr(this,sn);Mr(this,mn);Mr(this,_n);Mr(this,fn,this.editorDivBlur.bind(this));Mr(this,en,this.editorDivFocus.bind(this));Mr(this,on,this.editorDivKeydown.bind(this));Mr(this,dn,void 0);Mr(this,rn,"");Mr(this,an,!1);Mr(this,nn,void 0);Kr(this,dn,In.color||Sn._defaultColor||gn.AnnotationEditor._defaultLineColor),Kr(this,nn,In.fontSize||Sn._defaultFontSize)}static initialize(In){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(Mn=>[Mn,In.get(Mn)]));const Rn=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(Rn.getPropertyValue("--freetext-padding"))}static updateDefaultParams(In,Rn){switch(In){case tn.AnnotationEditorParamsType.FREETEXT_SIZE:Sn._defaultFontSize=Rn;break;case tn.AnnotationEditorParamsType.FREETEXT_COLOR:Sn._defaultColor=Rn;break}}updateParams(In,Rn){switch(In){case tn.AnnotationEditorParamsType.FREETEXT_SIZE:Ur(this,cn,C0).call(this,Rn);break;case tn.AnnotationEditorParamsType.FREETEXT_COLOR:Ur(this,sn,A0).call(this,Rn);break}}static get defaultPropertiesToUpdate(){return[[tn.AnnotationEditorParamsType.FREETEXT_SIZE,Sn._defaultFontSize],[tn.AnnotationEditorParamsType.FREETEXT_COLOR,Sn._defaultColor||gn.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[tn.AnnotationEditorParamsType.FREETEXT_SIZE,fr(this,nn)],[tn.AnnotationEditorParamsType.FREETEXT_COLOR,fr(this,dn)]]}getInitialTranslation(){return[-Sn._internalPadding*this.parent.scaleFactor,-(Sn._internalPadding+fr(this,nn))*this.parent.scaleFactor]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(tn.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",fr(this,on)),this.editorDiv.addEventListener("focus",fr(this,en)),this.editorDiv.addEventListener("blur",fr(this,fn)))}disableEditMode(){!this.isInEditMode()||(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",fr(this,on)),this.editorDiv.removeEventListener("focus",fr(this,en)),this.editorDiv.removeEventListener("blur",fr(this,fn)),this.div.focus(),this.isEditing=!1)}focusin(In){super.focusin(In),In.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}commit(){super.commit(),fr(this,an)||(Kr(this,an,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),Kr(this,rn,Ur(this,mn,T0).call(this).trimEnd()),Ur(this,_n,E1).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(In){this.enableEditMode(),this.editorDiv.focus()}keydown(In){In.target===this.div&&In.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(In){Sn._keyboardManager.exec(this,In)}editorDivFocus(In){this.isEditing=!0}editorDivBlur(In){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let In,Rn;this.width&&(In=this.x,Rn=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),Sn._l10nPromise.get("editor_free_text_aria_label").then(Hn=>{var Qn;return(Qn=this.editorDiv)==null?void 0:Qn.setAttribute("aria-label",Hn)}),Sn._l10nPromise.get("free_text_default_content").then(Hn=>{var Qn;return(Qn=this.editorDiv)==null?void 0:Qn.setAttribute("default-content",Hn)}),this.editorDiv.contentEditable=!0;const{style:Mn}=this.editorDiv;if(Mn.fontSize=`calc(${fr(this,nn)}px * var(--scale-factor))`,Mn.color=fr(this,dn),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,un.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Hn,Qn]=this.parent.viewportBaseDimensions;this.setAt(In*Hn,Rn*Qn,this.width*Hn,this.height*Qn);for(const Kn of fr(this,rn).split(`
`)){const nr=document.createElement("div");nr.append(Kn?document.createTextNode(Kn):document.createElement("br")),this.editorDiv.append(nr)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(In,Rn){const Mn=super.deserialize(In,Rn);return Kr(Mn,nn,In.fontSize),Kr(Mn,dn,tn.Util.makeHexColor(...In.color)),Kr(Mn,rn,In.value),Mn}serialize(){if(this.isEmpty())return null;const In=Sn._internalPadding*this.parent.scaleFactor,Rn=this.getRect(In,In),Mn=gn.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:tn.AnnotationEditorType.FREETEXT,color:Mn,fontSize:fr(this,nn),value:fr(this,rn),pageIndex:this.parent.pageIndex,rect:Rn,rotation:this.rotation}}};let vn=Sn;fn=new WeakMap,en=new WeakMap,on=new WeakMap,dn=new WeakMap,rn=new WeakMap,an=new WeakMap,nn=new WeakMap,cn=new WeakSet,C0=function(In){const Rn=Hn=>{this.editorDiv.style.fontSize=`calc(${Hn}px * var(--scale-factor))`,this.translate(0,-(Hn-fr(this,nn))*this.parent.scaleFactor),Kr(this,nn,Hn),Ur(this,_n,E1).call(this)},Mn=fr(this,nn);this.parent.addCommands({cmd:()=>{Rn(In)},undo:()=>{Rn(Mn)},mustExec:!0,type:tn.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},sn=new WeakSet,A0=function(In){const Rn=fr(this,dn);this.parent.addCommands({cmd:()=>{Kr(this,dn,In),this.editorDiv.style.color=In},undo:()=>{Kr(this,dn,Rn),this.editorDiv.style.color=Rn},mustExec:!0,type:tn.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},mn=new WeakSet,T0=function(){const In=this.editorDiv.getElementsByTagName("div");if(In.length===0)return this.editorDiv.innerText;const Rn=[];for(let Mn=0,Hn=In.length;Mn<Hn;Mn++){const Kn=In[Mn].firstChild;(Kn==null?void 0:Kn.nodeName)==="#text"?Rn.push(Kn.data):Rn.push("")}return Rn.join(`
`)},_n=new WeakSet,E1=function(){const[In,Rn]=this.parent.viewportBaseDimensions,Mn=this.div.getBoundingClientRect();this.width=Mn.width/In,this.height=Mn.height/Rn},Ws(vn,"_freeTextDefaultContent",""),Ws(vn,"_l10nPromise"),Ws(vn,"_internalPadding",0),Ws(vn,"_defaultColor",null),Ws(vn,"_defaultFontSize",10),Ws(vn,"_keyboardManager",new un.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],Sn.prototype.commitOrRemove]])),Ws(vn,"_type","freetext"),e.FreeTextEditor=vn},(St,e,_e)=>{var on,dn,rn,an,nn,cn,hn,sn,pn,mn,yn,_n,xn,Sn,Pn,E0,In,P0,Mn,k0,Qn,L0,nr,P1,ir,O0,Vn,F0,Yn,N0,An,Lo,En,k1,Fn,Cp,Gn,Ap,On,au,$n,L1,zn,Tp,ur,O1,ar,D0,dr,M0,_r,R0,Er,F1,Rr,Ep,Ir,ou,zr,N1;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0,Object.defineProperty(e,"fitCurve",{enumerable:!0,get:function(){return gn.fitCurve}});var tn=_e(1),un=_e(6),gn=_e(25),vn=_e(7);const fn=16,es=class extends un.AnnotationEditor{constructor(Or){super({...Or,name:"inkEditor"});Mr(this,Pn);Mr(this,In);Mr(this,Mn);Mr(this,Qn);Mr(this,nr);Mr(this,ir);Mr(this,Vn);Mr(this,Yn);Mr(this,An);Mr(this,En);Mr(this,Fn);Mr(this,Gn);Mr(this,On);Mr(this,$n);Mr(this,zn);Mr(this,ar);Mr(this,dr);Mr(this,_r);Mr(this,Er);Mr(this,Rr);Mr(this,Ir);Mr(this,zr);Mr(this,on,0);Mr(this,dn,0);Mr(this,rn,0);Mr(this,an,this.canvasPointermove.bind(this));Mr(this,nn,this.canvasPointerleave.bind(this));Mr(this,cn,this.canvasPointerup.bind(this));Mr(this,hn,this.canvasPointerdown.bind(this));Mr(this,sn,!1);Mr(this,pn,!1);Mr(this,mn,null);Mr(this,yn,null);Mr(this,_n,0);Mr(this,xn,0);Mr(this,Sn,null);this.color=Or.color||null,this.thickness=Or.thickness||null,this.opacity=Or.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(Or){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(Wr=>[Wr,Or.get(Wr)]))}static updateDefaultParams(Or,Wr){switch(Or){case tn.AnnotationEditorParamsType.INK_THICKNESS:es._defaultThickness=Wr;break;case tn.AnnotationEditorParamsType.INK_COLOR:es._defaultColor=Wr;break;case tn.AnnotationEditorParamsType.INK_OPACITY:es._defaultOpacity=Wr/100;break}}updateParams(Or,Wr){switch(Or){case tn.AnnotationEditorParamsType.INK_THICKNESS:Ur(this,Pn,E0).call(this,Wr);break;case tn.AnnotationEditorParamsType.INK_COLOR:Ur(this,In,P0).call(this,Wr);break;case tn.AnnotationEditorParamsType.INK_OPACITY:Ur(this,Mn,k0).call(this,Wr);break}}static get defaultPropertiesToUpdate(){return[[tn.AnnotationEditorParamsType.INK_THICKNESS,es._defaultThickness],[tn.AnnotationEditorParamsType.INK_COLOR,es._defaultColor||un.AnnotationEditor._defaultLineColor],[tn.AnnotationEditorParamsType.INK_OPACITY,Math.round(es._defaultOpacity*100)]]}get propertiesToUpdate(){var Or;return[[tn.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||es._defaultThickness],[tn.AnnotationEditorParamsType.INK_COLOR,this.color||es._defaultColor||un.AnnotationEditor._defaultLineColor],[tn.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((Or=this.opacity)!=null?Or:es._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(Ur(this,Fn,Cp).call(this),Ur(this,Gn,Ap).call(this)),this.isAttachedToDOM||(this.parent.add(this),Ur(this,On,au).call(this)),Ur(this,Ir,ou).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,fr(this,yn).disconnect(),Kr(this,yn,null),super.remove())}enableEditMode(){fr(this,sn)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",fr(this,hn)),this.canvas.addEventListener("pointerup",fr(this,cn)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",fr(this,hn)),this.canvas.removeEventListener("pointerup",fr(this,cn)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){fr(this,sn)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),Kr(this,sn,!0),this.div.classList.add("disabled"),Ur(this,Ir,ou).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(Or){super.focusin(Or),this.enableEditMode()}canvasPointerdown(Or){Or.button!==0||!this.isInEditMode()||fr(this,sn)||(this.setInForeground(),Or.type!=="mouse"&&this.div.focus(),Or.stopPropagation(),this.canvas.addEventListener("pointerleave",fr(this,nn)),this.canvas.addEventListener("pointermove",fr(this,an)),Ur(this,ir,O0).call(this,Or.offsetX,Or.offsetY))}canvasPointermove(Or){Or.stopPropagation(),Ur(this,Vn,F0).call(this,Or.offsetX,Or.offsetY)}canvasPointerup(Or){Or.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(Or.stopPropagation(),Ur(this,En,k1).call(this,Or),this.setInBackground())}canvasPointerleave(Or){Ur(this,En,k1).call(this,Or),this.setInBackground()}render(){if(this.div)return this.div;let Or,Wr;this.width&&(Or=this.x,Wr=this.y),super.render(),es._l10nPromise.get("editor_ink_aria_label").then(Yr=>{var Jr;return(Jr=this.div)==null?void 0:Jr.setAttribute("aria-label",Yr)});const[xr,br,yr,qr]=Ur(this,Qn,L0).call(this);if(this.setAt(xr,br,0,0),this.setDims(yr,qr),Ur(this,Fn,Cp).call(this),this.width){const[Yr,Jr]=this.parent.viewportBaseDimensions;this.setAt(Or*Yr,Wr*Jr,this.width*Yr,this.height*Jr),Kr(this,pn,!0),Ur(this,On,au).call(this),this.setDims(this.width*Yr,this.height*Jr),Ur(this,An,Lo).call(this),Ur(this,zr,N1).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Ur(this,Gn,Ap).call(this),this.div}setDimensions(Or,Wr){const xr=Math.round(Or),br=Math.round(Wr);if(fr(this,_n)===xr&&fr(this,xn)===br)return;Kr(this,_n,xr),Kr(this,xn,br),this.canvas.style.visibility="hidden",fr(this,on)&&Math.abs(fr(this,on)-Or/Wr)>.01&&(Wr=Math.ceil(Or/fr(this,on)),this.setDims(Or,Wr));const[yr,qr]=this.parent.viewportBaseDimensions;this.width=Or/yr,this.height=Wr/qr,fr(this,sn)&&Ur(this,$n,L1).call(this,Or,Wr),Ur(this,On,au).call(this),Ur(this,An,Lo).call(this),this.canvas.style.visibility="visible"}static deserialize(Or,Wr){var ks,us;const xr=super.deserialize(Or,Wr);xr.thickness=Or.thickness,xr.color=tn.Util.makeHexColor(...Or.color),xr.opacity=Or.opacity;const[br,yr]=Wr.pageDimensions,qr=xr.width*br,Yr=xr.height*yr,Jr=Wr.scaleFactor,Xr=Or.thickness/2;Kr(xr,on,qr/Yr),Kr(xr,sn,!0),Kr(xr,_n,Math.round(qr)),Kr(xr,xn,Math.round(Yr));for(const{bezier:ls}of Or.paths){const As=[];xr.paths.push(As);let ns=Jr*(ls[0]-Xr),Fs=Jr*(Yr-ls[1]-Xr);for(let bs=2,Ss=ls.length;bs<Ss;bs+=6){const Ts=Jr*(ls[bs]-Xr),js=Jr*(Yr-ls[bs+1]-Xr),Qs=Jr*(ls[bs+2]-Xr),Ls=Jr*(Yr-ls[bs+3]-Xr),Rs=Jr*(ls[bs+4]-Xr),Gs=Jr*(Yr-ls[bs+5]-Xr);As.push([[ns,Fs],[Ts,js],[Qs,Ls],[Rs,Gs]]),ns=Rs,Fs=Gs}const gs=Ur(this,ur,O1).call(this,As);xr.bezierPath2D.push(gs)}const as=Ur(ks=xr,Er,F1).call(ks);return Kr(xr,rn,Math.max(fn,as[2]-as[0])),Kr(xr,dn,Math.max(fn,as[3]-as[1])),Ur(us=xr,$n,L1).call(us,qr,Yr),xr}serialize(){if(this.isEmpty())return null;const Or=this.getRect(0,0),Wr=this.rotation%180===0?Or[3]-Or[1]:Or[2]-Or[0],xr=un.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:tn.AnnotationEditorType.INK,color:xr,thickness:this.thickness,opacity:this.opacity,paths:Ur(this,ar,D0).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,Wr),pageIndex:this.parent.pageIndex,rect:Or,rotation:this.rotation}}};let en=es;on=new WeakMap,dn=new WeakMap,rn=new WeakMap,an=new WeakMap,nn=new WeakMap,cn=new WeakMap,hn=new WeakMap,sn=new WeakMap,pn=new WeakMap,mn=new WeakMap,yn=new WeakMap,_n=new WeakMap,xn=new WeakMap,Sn=new WeakMap,Pn=new WeakSet,E0=function(Or){const Wr=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=Or,Ur(this,Ir,ou).call(this)},undo:()=>{this.thickness=Wr,Ur(this,Ir,ou).call(this)},mustExec:!0,type:tn.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},In=new WeakSet,P0=function(Or){const Wr=this.color;this.parent.addCommands({cmd:()=>{this.color=Or,Ur(this,An,Lo).call(this)},undo:()=>{this.color=Wr,Ur(this,An,Lo).call(this)},mustExec:!0,type:tn.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Mn=new WeakSet,k0=function(Or){Or/=100;const Wr=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=Or,Ur(this,An,Lo).call(this)},undo:()=>{this.opacity=Wr,Ur(this,An,Lo).call(this)},mustExec:!0,type:tn.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Qn=new WeakSet,L0=function(){const{width:Or,height:Wr,rotation:xr}=this.parent.viewport;switch(xr){case 90:return[0,Or,Or,Wr];case 180:return[Or,Wr,Or,Wr];case 270:return[Wr,0,Or,Wr];default:return[0,0,Or,Wr]}},nr=new WeakSet,P1=function(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,vn.opacityToHex)(this.opacity)}`},ir=new WeakSet,O0=function(Or,Wr){var xr;this.isEditing=!0,fr(this,pn)||(Kr(this,pn,!0),Ur(this,On,au).call(this),this.thickness||(this.thickness=es._defaultThickness),this.color||(this.color=es._defaultColor||un.AnnotationEditor._defaultLineColor),(xr=this.opacity)!=null||(this.opacity=es._defaultOpacity)),this.currentPath.push([Or,Wr]),Kr(this,mn,null),Ur(this,nr,P1).call(this),this.ctx.beginPath(),this.ctx.moveTo(Or,Wr),Kr(this,Sn,()=>{!fr(this,Sn)||(fr(this,mn)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):Ur(this,An,Lo).call(this),this.ctx.lineTo(...fr(this,mn)),Kr(this,mn,null),this.ctx.stroke()),window.requestAnimationFrame(fr(this,Sn)))}),window.requestAnimationFrame(fr(this,Sn))},Vn=new WeakSet,F0=function(Or,Wr){const[xr,br]=this.currentPath.at(-1);Or===xr&&Wr===br||(this.currentPath.push([Or,Wr]),Kr(this,mn,[Or,Wr]))},Yn=new WeakSet,N0=function(Or,Wr){var Xr;this.ctx.closePath(),Kr(this,Sn,null),Or=Math.min(Math.max(Or,0),this.canvas.width),Wr=Math.min(Math.max(Wr,0),this.canvas.height);const[xr,br]=this.currentPath.at(-1);(Or!==xr||Wr!==br)&&this.currentPath.push([Or,Wr]);let yr;if(this.currentPath.length!==1)yr=(0,gn.fitCurve)(this.currentPath,30,null);else{const as=[Or,Wr];yr=[[as,as.slice(),as.slice(),as]]}const qr=Ur(Xr=es,ur,O1).call(Xr,yr);this.currentPath.length=0;const Yr=()=>{this.paths.push(yr),this.bezierPath2D.push(qr),this.rebuild()},Jr=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Ur(this,Fn,Cp).call(this),Ur(this,Gn,Ap).call(this)),Ur(this,Ir,ou).call(this))};this.parent.addCommands({cmd:Yr,undo:Jr,mustExec:!0})},An=new WeakSet,Lo=function(){if(this.isEmpty()){Ur(this,zn,Tp).call(this);return}Ur(this,nr,P1).call(this);const{canvas:Or,ctx:Wr}=this;Wr.setTransform(1,0,0,1,0,0),Wr.clearRect(0,0,Or.width,Or.height),Ur(this,zn,Tp).call(this);for(const xr of this.bezierPath2D)Wr.stroke(xr)},En=new WeakSet,k1=function(Or){Ur(this,Yn,N0).call(this,Or.offsetX,Or.offsetY),this.canvas.removeEventListener("pointerleave",fr(this,nn)),this.canvas.removeEventListener("pointermove",fr(this,an)),this.parent.addToAnnotationStorage(this)},Fn=new WeakSet,Cp=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",es._l10nPromise.get("editor_ink_canvas_aria_label").then(Or=>{var Wr;return(Wr=this.canvas)==null?void 0:Wr.setAttribute("aria-label",Or)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Gn=new WeakSet,Ap=function(){Kr(this,yn,new ResizeObserver(Or=>{const Wr=Or[0].contentRect;Wr.width&&Wr.height&&this.setDimensions(Wr.width,Wr.height)})),fr(this,yn).observe(this.div)},On=new WeakSet,au=function(){if(!fr(this,pn))return;const[Or,Wr]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*Or),this.canvas.height=Math.ceil(this.height*Wr),Ur(this,zn,Tp).call(this)},$n=new WeakSet,L1=function(Or,Wr){const xr=Ur(this,Rr,Ep).call(this),br=(Or-xr)/fr(this,rn),yr=(Wr-xr)/fr(this,dn);this.scaleFactor=Math.min(br,yr)},zn=new WeakSet,Tp=function(){const Or=Ur(this,Rr,Ep).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+Or,this.translationY*this.scaleFactor+Or)},ur=new WeakSet,O1=function(Or){const Wr=new Path2D;for(let xr=0,br=Or.length;xr<br;xr++){const[yr,qr,Yr,Jr]=Or[xr];xr===0&&Wr.moveTo(...yr),Wr.bezierCurveTo(qr[0],qr[1],Yr[0],Yr[1],Jr[0],Jr[1])}return Wr},ar=new WeakSet,D0=function(Or,Wr,xr,br){const qr=[],Yr=this.thickness/2;let Jr,Xr;for(const as of this.paths){Jr=[],Xr=[];for(let ks=0,us=as.length;ks<us;ks++){const[ls,As,ns,Fs]=as[ks],gs=Or*(ls[0]+Wr)+Yr,bs=br-Or*(ls[1]+xr)-Yr,Ss=Or*(As[0]+Wr)+Yr,Ts=br-Or*(As[1]+xr)-Yr,js=Or*(ns[0]+Wr)+Yr,Qs=br-Or*(ns[1]+xr)-Yr,Ls=Or*(Fs[0]+Wr)+Yr,Rs=br-Or*(Fs[1]+xr)-Yr;ks===0&&(Jr.push(gs,bs),Xr.push(gs,bs)),Jr.push(Ss,Ts,js,Qs,Ls,Rs),Ur(this,dr,M0).call(this,gs,bs,Ss,Ts,js,Qs,Ls,Rs,4,Xr)}qr.push({bezier:Jr,points:Xr})}return qr},dr=new WeakSet,M0=function(Or,Wr,xr,br,yr,qr,Yr,Jr,Xr,as){if(Ur(this,_r,R0).call(this,Or,Wr,xr,br,yr,qr,Yr,Jr)){as.push(Yr,Jr);return}for(let ks=1;ks<Xr-1;ks++){const us=ks/Xr,ls=1-us;let As=us*Or+ls*xr,ns=us*Wr+ls*br,Fs=us*xr+ls*yr,gs=us*br+ls*qr;const bs=us*yr+ls*Yr,Ss=us*qr+ls*Jr;As=us*As+ls*Fs,ns=us*ns+ls*gs,Fs=us*Fs+ls*bs,gs=us*gs+ls*Ss,As=us*As+ls*Fs,ns=us*ns+ls*gs,as.push(As,ns)}as.push(Yr,Jr)},_r=new WeakSet,R0=function(Or,Wr,xr,br,yr,qr,Yr,Jr){const as=(3*xr-2*Or-Yr)**2,ks=(3*br-2*Wr-Jr)**2,us=(3*yr-Or-2*Yr)**2,ls=(3*qr-Wr-2*Jr)**2;return Math.max(as,us)+Math.max(ks,ls)<=10},Er=new WeakSet,F1=function(){let Or=1/0,Wr=-1/0,xr=1/0,br=-1/0;for(const yr of this.paths)for(const[qr,Yr,Jr,Xr]of yr){const as=tn.Util.bezierBoundingBox(...qr,...Yr,...Jr,...Xr);Or=Math.min(Or,as[0]),xr=Math.min(xr,as[1]),Wr=Math.max(Wr,as[2]),br=Math.max(br,as[3])}return[Or,xr,Wr,br]},Rr=new WeakSet,Ep=function(){return fr(this,sn)?Math.ceil(this.thickness*this.parent.scaleFactor):0},Ir=new WeakSet,ou=function(Or=!1){if(this.isEmpty())return;if(!fr(this,sn)){Ur(this,An,Lo).call(this);return}const Wr=Ur(this,Er,F1).call(this),xr=Ur(this,Rr,Ep).call(this);Kr(this,rn,Math.max(fn,Wr[2]-Wr[0])),Kr(this,dn,Math.max(fn,Wr[3]-Wr[1]));const br=Math.ceil(xr+fr(this,rn)*this.scaleFactor),yr=Math.ceil(xr+fr(this,dn)*this.scaleFactor),[qr,Yr]=this.parent.viewportBaseDimensions;this.width=br/qr,this.height=yr/Yr,Kr(this,on,br/yr),Ur(this,zr,N1).call(this);const Jr=this.translationX,Xr=this.translationY;this.translationX=-Wr[0],this.translationY=-Wr[1],Ur(this,On,au).call(this),Ur(this,An,Lo).call(this),Kr(this,_n,br),Kr(this,xn,yr),this.setDims(br,yr);const as=Or?xr/this.scaleFactor/2:0;this.translate(Jr-this.translationX-as,Xr-this.translationY-as)},zr=new WeakSet,N1=function(){const{style:Or}=this.div;fr(this,on)>=1?(Or.minHeight=`${fn}px`,Or.minWidth=`${Math.round(fr(this,on)*fn)}px`):(Or.minWidth=`${fn}px`,Or.minHeight=`${Math.round(fn/fr(this,on))}px`)},Mr(en,ur),Ws(en,"_defaultColor",null),Ws(en,"_defaultOpacity",1),Ws(en,"_defaultThickness",1),Ws(en,"_l10nPromise"),Ws(en,"_type","ink"),e.InkEditor=en},(St,e,_e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fitCurve=void 0;const tn=_e(26);e.fitCurve=tn},St=>{function e(cn,hn,sn){if(!Array.isArray(cn))throw new TypeError("First argument should be an array");if(cn.forEach(_n=>{if(!Array.isArray(_n)||_n.some(xn=>typeof xn!="number")||_n.length!==cn[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),cn=cn.filter((_n,xn)=>xn===0||!_n.every((Sn,Pn)=>Sn===cn[xn-1][Pn])),cn.length<2)return[];const pn=cn.length,mn=rn(cn[1],cn[0]),yn=rn(cn[pn-2],cn[pn-1]);return _e(cn,mn,yn,hn,sn)}function _e(cn,hn,sn,pn,mn){var _n,xn,Sn,Pn,Ln,In,Rn,Mn,Hn,Qn,Kn,nr,Zn;if(cn.length===2)return nr=an.vectorLen(an.subtract(cn[0],cn[1]))/3,_n=[cn[0],an.addArrays(cn[0],an.mulItems(hn,nr)),an.addArrays(cn[1],an.mulItems(sn,nr)),cn[1]],[_n];if(xn=fn(cn),[_n,Pn,In]=tn(cn,xn,xn,hn,sn,mn),Pn===0||Pn<pn)return[_n];if(Pn<pn*pn)for(Sn=xn,Ln=Pn,Rn=In,Zn=0;Zn<20;Zn++){if(Sn=gn(_n,cn,Sn),[_n,Pn,In]=tn(cn,xn,Sn,hn,sn,mn),Pn<pn)return[_n];if(In===Rn){let ir=Pn/Ln;if(ir>.9999&&ir<1.0001)break}Ln=Pn,Rn=In}return Kn=[],Mn=an.subtract(cn[In-1],cn[In+1]),Mn.every(ir=>ir===0)&&(Mn=an.subtract(cn[In-1],cn[In]),[Mn[0],Mn[1]]=[-Mn[1],Mn[0]]),Hn=an.normalize(Mn),Qn=an.mulItems(Hn,-1),Kn=Kn.concat(_e(cn.slice(0,In+1),hn,Hn,pn,mn)),Kn=Kn.concat(_e(cn.slice(In),Qn,sn,pn,mn)),Kn}function tn(cn,hn,sn,pn,mn,yn){var _n,xn,Sn;return _n=un(cn,sn,pn,mn),[xn,Sn]=en(cn,_n,hn),yn&&yn({bez:_n,points:cn,params:hn,maxErr:xn,maxPoint:Sn}),[_n,xn,Sn]}function un(cn,hn,sn,pn){var mn,yn,_n,xn,Sn,Pn,Ln,In,Rn,Mn,Hn,Qn,Kn,nr,Zn,ir,Jn,Vn=cn[0],Xn=cn[cn.length-1];for(mn=[Vn,null,null,Xn],yn=an.zeros_Xx2x2(hn.length),Kn=0,nr=hn.length;Kn<nr;Kn++)ir=hn[Kn],Jn=1-ir,_n=yn[Kn],_n[0]=an.mulItems(sn,3*ir*(Jn*Jn)),_n[1]=an.mulItems(pn,3*Jn*(ir*ir));for(xn=[[0,0],[0,0]],Sn=[0,0],Kn=0,nr=cn.length;Kn<nr;Kn++)ir=hn[Kn],_n=yn[Kn],xn[0][0]+=an.dot(_n[0],_n[0]),xn[0][1]+=an.dot(_n[0],_n[1]),xn[1][0]+=an.dot(_n[0],_n[1]),xn[1][1]+=an.dot(_n[1],_n[1]),Zn=an.subtract(cn[Kn],nn.q([Vn,Vn,Xn,Xn],ir)),Sn[0]+=an.dot(_n[0],Zn),Sn[1]+=an.dot(_n[1],Zn);return Pn=xn[0][0]*xn[1][1]-xn[1][0]*xn[0][1],Ln=xn[0][0]*Sn[1]-xn[1][0]*Sn[0],In=Sn[0]*xn[1][1]-Sn[1]*xn[0][1],Rn=Pn===0?0:In/Pn,Mn=Pn===0?0:Ln/Pn,Qn=an.vectorLen(an.subtract(Vn,Xn)),Hn=1e-6*Qn,Rn<Hn||Mn<Hn?(mn[1]=an.addArrays(Vn,an.mulItems(sn,Qn/3)),mn[2]=an.addArrays(Xn,an.mulItems(pn,Qn/3))):(mn[1]=an.addArrays(Vn,an.mulItems(sn,Rn)),mn[2]=an.addArrays(Xn,an.mulItems(pn,Mn))),mn}function gn(cn,hn,sn){return sn.map((pn,mn)=>vn(cn,hn[mn],pn))}function vn(cn,hn,sn){var pn=an.subtract(nn.q(cn,sn),hn),mn=nn.qprime(cn,sn),yn=an.mulMatrix(pn,mn),_n=an.sum(an.squareItems(mn))+2*an.mulMatrix(pn,nn.qprimeprime(cn,sn));return _n===0?sn:sn-yn/_n}function fn(cn){var hn=[],sn,pn,mn;return cn.forEach((yn,_n)=>{sn=_n?pn+an.vectorLen(an.subtract(yn,mn)):0,hn.push(sn),pn=sn,mn=yn}),hn=hn.map(yn=>yn/pn),hn}function en(cn,hn,sn){var pn,mn,yn,_n,xn,Sn,Pn,Ln;mn=0,yn=Math.floor(cn.length/2);const In=on(hn,10);for(xn=0,Sn=cn.length;xn<Sn;xn++)Pn=cn[xn],Ln=dn(hn,sn[xn],In,10),_n=an.subtract(nn.q(hn,Ln),Pn),pn=_n[0]*_n[0]+_n[1]*_n[1],pn>mn&&(mn=pn,yn=xn);return[mn,yn]}var on=function(cn,hn){for(var sn,pn=[0],mn=cn[0],yn=0,_n=1;_n<=hn;_n++)sn=nn.q(cn,_n/hn),yn+=an.vectorLen(an.subtract(sn,mn)),pn.push(yn),mn=sn;return pn=pn.map(xn=>xn/yn),pn};function dn(cn,hn,sn,pn){if(hn<0)return 0;if(hn>1)return 1;for(var mn,yn,_n,xn,Sn,Pn=1;Pn<=pn;Pn++)if(hn<=sn[Pn]){xn=(Pn-1)/pn,_n=Pn/pn,yn=sn[Pn-1],mn=sn[Pn],Sn=(hn-yn)/(mn-yn)*(_n-xn)+xn;break}return Sn}function rn(cn,hn){return an.normalize(an.subtract(cn,hn))}class an{static zeros_Xx2x2(hn){for(var sn=[];hn--;)sn.push([0,0]);return sn}static mulItems(hn,sn){return hn.map(pn=>pn*sn)}static mulMatrix(hn,sn){return hn.reduce((pn,mn,yn)=>pn+mn*sn[yn],0)}static subtract(hn,sn){return hn.map((pn,mn)=>pn-sn[mn])}static addArrays(hn,sn){return hn.map((pn,mn)=>pn+sn[mn])}static addItems(hn,sn){return hn.map(pn=>pn+sn)}static sum(hn){return hn.reduce((sn,pn)=>sn+pn)}static dot(hn,sn){return an.mulMatrix(hn,sn)}static vectorLen(hn){return Math.hypot(...hn)}static divItems(hn,sn){return hn.map(pn=>pn/sn)}static squareItems(hn){return hn.map(sn=>sn*sn)}static normalize(hn){return this.divItems(hn,this.vectorLen(hn))}}class nn{static q(hn,sn){var pn=1-sn,mn=an.mulItems(hn[0],pn*pn*pn),yn=an.mulItems(hn[1],3*pn*pn*sn),_n=an.mulItems(hn[2],3*pn*sn*sn),xn=an.mulItems(hn[3],sn*sn*sn);return an.addArrays(an.addArrays(mn,yn),an.addArrays(_n,xn))}static qprime(hn,sn){var pn=1-sn,mn=an.mulItems(an.subtract(hn[1],hn[0]),3*pn*pn),yn=an.mulItems(an.subtract(hn[2],hn[1]),6*pn*sn),_n=an.mulItems(an.subtract(hn[3],hn[2]),3*sn*sn);return an.addArrays(an.addArrays(mn,yn),_n)}static qprimeprime(hn,sn){return an.addArrays(an.mulItems(an.addArrays(an.subtract(hn[2],an.mulItems(hn[1],2)),hn[0]),6*(1-sn)),an.mulItems(an.addArrays(an.subtract(hn[3],an.mulItems(hn[2],2)),hn[1]),6*sn))}}St.exports=e,St.exports.fitCubic=_e,St.exports.createTangent=rn},(St,e,_e)=>{var An,D1,En,M1,Fn,R1;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayer=void 0;var tn=_e(1),un=_e(8),gn=_e(5),vn=_e(28),fn=_e(29);const en=1e3,on=9,dn=new WeakSet;function rn(er){return{width:er[2]-er[0],height:er[3]-er[1]}}class an{static create(On){switch(On.data.annotationType){case tn.AnnotationType.LINK:return new cn(On);case tn.AnnotationType.TEXT:return new hn(On);case tn.AnnotationType.WIDGET:switch(On.data.fieldType){case"Tx":return new pn(On);case"Btn":return On.data.radioButton?new yn(On):On.data.checkBox?new mn(On):new _n(On);case"Ch":return new xn(On)}return new sn(On);case tn.AnnotationType.POPUP:return new Sn(On);case tn.AnnotationType.FREETEXT:return new Ln(On);case tn.AnnotationType.LINE:return new In(On);case tn.AnnotationType.SQUARE:return new Rn(On);case tn.AnnotationType.CIRCLE:return new Mn(On);case tn.AnnotationType.POLYLINE:return new Hn(On);case tn.AnnotationType.CARET:return new Kn(On);case tn.AnnotationType.INK:return new nr(On);case tn.AnnotationType.POLYGON:return new Qn(On);case tn.AnnotationType.HIGHLIGHT:return new Zn(On);case tn.AnnotationType.UNDERLINE:return new ir(On);case tn.AnnotationType.SQUIGGLY:return new Jn(On);case tn.AnnotationType.STRIKEOUT:return new Vn(On);case tn.AnnotationType.STAMP:return new Xn(On);case tn.AnnotationType.FILEATTACHMENT:return new Yn(On);default:return new nn(On)}}}class nn{constructor(On,{isRenderable:Bn=!1,ignoreBorder:$n=!1,createQuadrilaterals:qn=!1}={}){this.isRenderable=Bn,this.data=On.data,this.layer=On.layer,this.page=On.page,this.viewport=On.viewport,this.linkService=On.linkService,this.downloadManager=On.downloadManager,this.imageResourcesPath=On.imageResourcesPath,this.renderForms=On.renderForms,this.svgFactory=On.svgFactory,this.annotationStorage=On.annotationStorage,this.enableScripting=On.enableScripting,this.hasJSActions=On.hasJSActions,this._fieldObjects=On.fieldObjects,this._mouseState=On.mouseState,Bn&&(this.container=this._createContainer($n)),qn&&(this.quadrilaterals=this._createQuadrilaterals($n))}_createContainer(On=!1){const Bn=this.data,$n=this.page,qn=this.viewport,zn=document.createElement("section"),{width:jn,height:ur}=rn(Bn.rect),[gr,ar,vr,dr]=qn.viewBox,hr=vr-gr,_r=dr-ar;zn.setAttribute("data-annotation-id",Bn.id);const or=tn.Util.normalizeRect([Bn.rect[0],$n.view[3]-Bn.rect[1]+$n.view[1],Bn.rect[2],$n.view[3]-Bn.rect[3]+$n.view[1]]);if(!On&&Bn.borderStyle.width>0){zn.style.borderWidth=`${Bn.borderStyle.width}px`;const Dr=Bn.borderStyle.horizontalCornerRadius,Rr=Bn.borderStyle.verticalCornerRadius;if(Dr>0||Rr>0){const Ir=`calc(${Dr}px * var(--scale-factor)) / calc(${Rr}px * var(--scale-factor))`;zn.style.borderRadius=Ir}else if(this instanceof yn){const Ir=`calc(${jn}px * var(--scale-factor)) / calc(${ur}px * var(--scale-factor))`;zn.style.borderRadius=Ir}switch(Bn.borderStyle.style){case tn.AnnotationBorderStyleType.SOLID:zn.style.borderStyle="solid";break;case tn.AnnotationBorderStyleType.DASHED:zn.style.borderStyle="dashed";break;case tn.AnnotationBorderStyleType.BEVELED:(0,tn.warn)("Unimplemented border style: beveled");break;case tn.AnnotationBorderStyleType.INSET:(0,tn.warn)("Unimplemented border style: inset");break;case tn.AnnotationBorderStyleType.UNDERLINE:zn.style.borderBottomStyle="solid";break}const Gr=Bn.borderColor||null;Gr?zn.style.borderColor=tn.Util.makeHexColor(Gr[0]|0,Gr[1]|0,Gr[2]|0):zn.style.borderWidth=0}zn.style.left=`${100*(or[0]-gr)/hr}%`,zn.style.top=`${100*(or[1]-ar)/_r}%`;const{rotation:Er}=Bn;return Bn.hasOwnCanvas||Er===0?(zn.style.width=`${100*jn/hr}%`,zn.style.height=`${100*ur/_r}%`):this.setRotation(Er,zn),zn}setRotation(On,Bn=this.container){const[$n,qn,zn,jn]=this.viewport.viewBox,ur=zn-$n,gr=jn-qn,{width:ar,height:vr}=rn(this.data.rect);let dr,hr;On%180===0?(dr=100*ar/ur,hr=100*vr/gr):(dr=100*vr/ur,hr=100*ar/gr),Bn.style.width=`${dr}%`,Bn.style.height=`${hr}%`,Bn.setAttribute("data-main-rotation",(360-On)%360)}get _commonActions(){const On=(Bn,$n,qn)=>{const zn=qn.detail[Bn];qn.target.style[$n]=vn.ColorConverters[`${zn[0]}_HTML`](zn.slice(1))};return(0,tn.shadow)(this,"_commonActions",{display:Bn=>{const $n=Bn.detail.display%2===1;this.container.style.visibility=$n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:$n,print:Bn.detail.display===0||Bn.detail.display===3})},print:Bn=>{this.annotationStorage.setValue(this.data.id,{print:Bn.detail.print})},hidden:Bn=>{this.container.style.visibility=Bn.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:Bn.detail.hidden})},focus:Bn=>{setTimeout(()=>Bn.target.focus({preventScroll:!1}),0)},userName:Bn=>{Bn.target.title=Bn.detail.userName},readonly:Bn=>{Bn.detail.readonly?Bn.target.setAttribute("readonly",""):Bn.target.removeAttribute("readonly")},required:Bn=>{this._setRequired(Bn.target,Bn.detail.required)},bgColor:Bn=>{On("bgColor","backgroundColor",Bn)},fillColor:Bn=>{On("fillColor","backgroundColor",Bn)},fgColor:Bn=>{On("fgColor","color",Bn)},textColor:Bn=>{On("textColor","color",Bn)},borderColor:Bn=>{On("borderColor","borderColor",Bn)},strokeColor:Bn=>{On("strokeColor","borderColor",Bn)},rotation:Bn=>{const $n=Bn.detail.rotation;this.setRotation($n),this.annotationStorage.setValue(this.data.id,{rotation:$n})}})}_dispatchEventFromSandbox(On,Bn){const $n=this._commonActions;for(const qn of Object.keys(Bn.detail)){const zn=On[qn]||$n[qn];zn&&zn(Bn)}}_setDefaultPropertiesFromJS(On){if(!this.enableScripting)return;const Bn=this.annotationStorage.getRawValue(this.data.id);if(!Bn)return;const $n=this._commonActions;for(const[qn,zn]of Object.entries(Bn)){const jn=$n[qn];if(jn){const ur={detail:{[qn]:zn},target:On};jn(ur),delete Bn[qn]}}}_createQuadrilaterals(On=!1){if(!this.data.quadPoints)return null;const Bn=[],$n=this.data.rect;for(const qn of this.data.quadPoints)this.data.rect=[qn[2].x,qn[2].y,qn[1].x,qn[1].y],Bn.push(this._createContainer(On));return this.data.rect=$n,Bn}_createPopup(On,Bn){let $n=this.container;this.quadrilaterals&&(On=On||this.quadrilaterals,$n=this.quadrilaterals[0]),On||(On=document.createElement("div"),On.className="popupTriggerArea",$n.append(On));const zn=new Pn({container:$n,trigger:On,color:Bn.color,titleObj:Bn.titleObj,modificationDate:Bn.modificationDate,contentsObj:Bn.contentsObj,richText:Bn.richText,hideWrapper:!0}).render();zn.style.left="100%",$n.append(zn)}_renderQuadrilaterals(On){for(const Bn of this.quadrilaterals)Bn.className=On;return this.quadrilaterals}render(){(0,tn.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(On,Bn=null){const $n=[];if(this._fieldObjects){const qn=this._fieldObjects[On];if(qn)for(const{page:zn,id:jn,exportValues:ur}of qn){if(zn===-1||jn===Bn)continue;const gr=typeof ur=="string"?ur:null,ar=document.querySelector(`[data-element-id="${jn}"]`);if(ar&&!dn.has(ar)){(0,tn.warn)(`_getElementsByName - element not allowed: ${jn}`);continue}$n.push({id:jn,exportValue:gr,domElement:ar})}return $n}for(const qn of document.getElementsByName(On)){const{id:zn,exportValue:jn}=qn;zn!==Bn&&(!dn.has(qn)||$n.push({id:zn,exportValue:jn,domElement:qn}))}return $n}static get platform(){const On=typeof navigator<"u"?navigator.platform:"";return(0,tn.shadow)(this,"platform",{isWin:On.includes("Win"),isMac:On.includes("Mac")})}}class cn extends nn{constructor(On,Bn=null){super(On,{isRenderable:!0,ignoreBorder:!!(Bn!=null&&Bn.ignoreBorder),createQuadrilaterals:!0}),this.isTooltipOnly=On.data.isTooltipOnly}render(){const{data:On,linkService:Bn}=this,$n=document.createElement("a");$n.setAttribute("data-element-id",On.id);let qn=!1;return On.url?(Bn.addLinkAttributes($n,On.url,On.newWindow),qn=!0):On.action?(this._bindNamedAction($n,On.action),qn=!0):On.dest?(this._bindLink($n,On.dest),qn=!0):(On.actions&&(On.actions.Action||On.actions["Mouse Up"]||On.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction($n,On),qn=!0),On.resetForm?(this._bindResetFormAction($n,On.resetForm),qn=!0):this.isTooltipOnly&&!qn&&(this._bindLink($n,""),qn=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((zn,jn)=>{const ur=jn===0?$n:$n.cloneNode();return zn.append(ur),zn}):(this.container.className="linkAnnotation",qn&&this.container.append($n),this.container)}_bindLink(On,Bn){On.href=this.linkService.getDestinationHash(Bn),On.onclick=()=>(Bn&&this.linkService.goToDestination(Bn),!1),(Bn||Bn==="")&&(On.className="internalLink")}_bindNamedAction(On,Bn){On.href=this.linkService.getAnchorUrl(""),On.onclick=()=>(this.linkService.executeNamedAction(Bn),!1),On.className="internalLink"}_bindJSAction(On,Bn){On.href=this.linkService.getAnchorUrl("");const $n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const qn of Object.keys(Bn.actions)){const zn=$n.get(qn);!zn||(On[zn]=()=>{var jn;return(jn=this.linkService.eventBus)==null||jn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Bn.id,name:qn}}),!1})}On.onclick||(On.onclick=()=>!1),On.className="internalLink"}_bindResetFormAction(On,Bn){const $n=On.onclick;if($n||(On.href=this.linkService.getAnchorUrl("")),On.className="internalLink",!this._fieldObjects){(0,tn.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),$n||(On.onclick=()=>!1);return}On.onclick=()=>{var vr;$n&&$n();const{fields:qn,refs:zn,include:jn}=Bn,ur=[];if(qn.length!==0||zn.length!==0){const dr=new Set(zn);for(const hr of qn){const _r=this._fieldObjects[hr]||[];for(const{id:or}of _r)dr.add(or)}for(const hr of Object.values(this._fieldObjects))for(const _r of hr)dr.has(_r.id)===jn&&ur.push(_r)}else for(const dr of Object.values(this._fieldObjects))ur.push(...dr);const gr=this.annotationStorage,ar=[];for(const dr of ur){const{id:hr}=dr;switch(ar.push(hr),dr.type){case"text":{const or=dr.defaultValue||"";gr.setValue(hr,{value:or});break}case"checkbox":case"radiobutton":{const or=dr.defaultValue===dr.exportValues;gr.setValue(hr,{value:or});break}case"combobox":case"listbox":{const or=dr.defaultValue||"";gr.setValue(hr,{value:or});break}default:continue}const _r=document.querySelector(`[data-element-id="${hr}"]`);if(_r){if(!dn.has(_r)){(0,tn.warn)(`_bindResetFormAction - element not allowed: ${hr}`);continue}}else continue;_r.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((vr=this.linkService.eventBus)==null||vr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:ar,name:"ResetForm"}})),!1}}}class hn extends nn{constructor(On){var $n,qn,zn;const Bn=!!(On.data.hasPopup||(($n=On.data.titleObj)==null?void 0:$n.str)||((qn=On.data.contentsObj)==null?void 0:qn.str)||((zn=On.data.richText)==null?void 0:zn.str));super(On,{isRenderable:Bn})}render(){this.container.className="textAnnotation";const On=document.createElement("img");return On.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",On.alt="[{{type}} Annotation]",On.dataset.l10nId="text_annotation_type",On.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(On,this.data),this.container.append(On),this.container}}class sn extends nn{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(On){const{isWin:Bn,isMac:$n}=nn.platform;return Bn&&On.ctrlKey||$n&&On.metaKey}_setEventListener(On,Bn,$n,qn){Bn.includes("mouse")?On.addEventListener(Bn,zn=>{var jn;(jn=this.linkService.eventBus)==null||jn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:$n,value:qn(zn),shift:zn.shiftKey,modifier:this._getKeyModifier(zn)}})}):On.addEventListener(Bn,zn=>{var jn;(jn=this.linkService.eventBus)==null||jn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:$n,value:qn(zn)}})})}_setEventListeners(On,Bn,$n){var qn;for(const[zn,jn]of Bn)(jn==="Action"||((qn=this.data.actions)==null?void 0:qn[jn]))&&this._setEventListener(On,zn,jn,$n)}_setBackgroundColor(On){const Bn=this.data.backgroundColor||null;On.style.backgroundColor=Bn===null?"transparent":tn.Util.makeHexColor(Bn[0],Bn[1],Bn[2])}_setTextStyle(On){const Bn=["left","center","right"],{fontColor:$n}=this.data.defaultAppearanceData,qn=this.data.defaultAppearanceData.fontSize||on,zn=On.style;let jn;if(this.data.multiLine){const ur=Math.abs(this.data.rect[3]-this.data.rect[1]),gr=Math.round(ur/(tn.LINE_FACTOR*qn))||1,ar=ur/gr;jn=Math.min(qn,Math.round(ar/tn.LINE_FACTOR))}else{const ur=Math.abs(this.data.rect[3]-this.data.rect[1]);jn=Math.min(qn,Math.round(ur/tn.LINE_FACTOR))}zn.fontSize=`calc(${jn}px * var(--scale-factor))`,zn.color=tn.Util.makeHexColor($n[0],$n[1],$n[2]),this.data.textAlignment!==null&&(zn.textAlign=Bn[this.data.textAlignment])}_setRequired(On,Bn){Bn?On.setAttribute("required",!0):On.removeAttribute("required"),On.setAttribute("aria-required",Bn)}}class pn extends sn{constructor(On){const Bn=On.renderForms||!On.data.hasAppearance&&!!On.data.fieldValue;super(On,{isRenderable:Bn})}setPropertyOnSiblings(On,Bn,$n,qn){const zn=this.annotationStorage;for(const jn of this._getElementsByName(On.name,On.id))jn.domElement&&(jn.domElement[Bn]=$n),zn.setValue(jn.id,{[qn]:$n})}render(){var qn;const On=this.annotationStorage,Bn=this.data.id;this.container.className="textWidgetAnnotation";let $n=null;if(this.renderForms){const zn=On.getValue(Bn,{value:this.data.fieldValue});let jn=zn.formattedValue||zn.value||"";const ur=On.getValue(Bn,{charLimit:this.data.maxLen}).charLimit;ur&&jn.length>ur&&(jn=jn.slice(0,ur));const gr={userValue:jn,formattedValue:null,valueOnFocus:""};this.data.multiLine?($n=document.createElement("textarea"),$n.textContent=jn,this.data.doNotScroll&&($n.style.overflowY="hidden")):($n=document.createElement("input"),$n.type="text",$n.setAttribute("value",jn),this.data.doNotScroll&&($n.style.overflowX="hidden")),dn.add($n),$n.setAttribute("data-element-id",Bn),$n.disabled=this.data.readOnly,$n.name=this.data.fieldName,$n.tabIndex=en,this._setRequired($n,this.data.required),ur&&($n.maxLength=ur),$n.addEventListener("input",vr=>{On.setValue(Bn,{value:vr.target.value}),this.setPropertyOnSiblings($n,"value",vr.target.value,"value")}),$n.addEventListener("resetform",vr=>{var hr;const dr=(hr=this.data.defaultFieldValue)!=null?hr:"";$n.value=gr.userValue=dr,gr.formattedValue=null});let ar=vr=>{const{formattedValue:dr}=gr;dr!=null&&(vr.target.value=dr),vr.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){$n.addEventListener("focus",dr=>{gr.userValue&&(dr.target.value=gr.userValue),gr.valueOnFocus=dr.target.value}),$n.addEventListener("updatefromsandbox",dr=>{const hr={value(_r){var or;gr.userValue=(or=_r.detail.value)!=null?or:"",On.setValue(Bn,{value:gr.userValue.toString()}),_r.target.value=gr.userValue},formattedValue(_r){const{formattedValue:or}=_r.detail;gr.formattedValue=or,or!=null&&_r.target!==document.activeElement&&(_r.target.value=or),On.setValue(Bn,{formattedValue:or})},selRange(_r){_r.target.setSelectionRange(..._r.detail.selRange)},charLimit:_r=>{var Rr;const{charLimit:or}=_r.detail,{target:Er}=_r;if(or===0){Er.removeAttribute("maxLength");return}Er.setAttribute("maxLength",or);let Dr=gr.userValue;!Dr||Dr.length<=or||(Dr=Dr.slice(0,or),Er.value=gr.userValue=Dr,On.setValue(Bn,{value:Dr}),(Rr=this.linkService.eventBus)==null||Rr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Bn,name:"Keystroke",value:Dr,willCommit:!0,commitKey:1,selStart:Er.selectionStart,selEnd:Er.selectionEnd}}))}};this._dispatchEventFromSandbox(hr,dr)}),$n.addEventListener("keydown",dr=>{var or;let hr=-1;if(dr.key==="Escape"?hr=0:dr.key==="Enter"?hr=2:dr.key==="Tab"&&(hr=3),hr===-1)return;const{value:_r}=dr.target;gr.valueOnFocus!==_r&&(gr.userValue=_r,(or=this.linkService.eventBus)==null||or.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Bn,name:"Keystroke",value:_r,willCommit:!0,commitKey:hr,selStart:dr.target.selectionStart,selEnd:dr.target.selectionEnd}}))});const vr=ar;ar=null,$n.addEventListener("blur",dr=>{var _r;const{value:hr}=dr.target;gr.userValue=hr,this._mouseState.isDown&&gr.valueOnFocus!==hr&&((_r=this.linkService.eventBus)==null||_r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Bn,name:"Keystroke",value:hr,willCommit:!0,commitKey:1,selStart:dr.target.selectionStart,selEnd:dr.target.selectionEnd}})),vr(dr)}),(qn=this.data.actions)!=null&&qn.Keystroke&&$n.addEventListener("beforeinput",dr=>{var Ir;const{data:hr,target:_r}=dr,{value:or,selectionStart:Er,selectionEnd:Dr}=_r;let Rr=Er,Gr=Dr;switch(dr.inputType){case"deleteWordBackward":{const ts=or.substring(0,Er).match(/\w*[^\w]*$/);ts&&(Rr-=ts[0].length);break}case"deleteWordForward":{const ts=or.substring(Er).match(/^[^\w]*\w*/);ts&&(Gr+=ts[0].length);break}case"deleteContentBackward":Er===Dr&&(Rr-=1);break;case"deleteContentForward":Er===Dr&&(Gr+=1);break}dr.preventDefault(),(Ir=this.linkService.eventBus)==null||Ir.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Bn,name:"Keystroke",value:or,change:hr||"",willCommit:!1,selStart:Rr,selEnd:Gr}})}),this._setEventListeners($n,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],dr=>dr.target.value)}if(ar&&$n.addEventListener("blur",ar),this.data.comb){const dr=(this.data.rect[2]-this.data.rect[0])/ur;$n.classList.add("comb"),$n.style.letterSpacing=`calc(${dr}px * var(--scale-factor) - 1ch)`}}else $n=document.createElement("div"),$n.textContent=this.data.fieldValue,$n.style.verticalAlign="middle",$n.style.display="table-cell";return this._setTextStyle($n),this._setBackgroundColor($n),this._setDefaultPropertiesFromJS($n),this.container.append($n),this.container}}class mn extends sn{constructor(On){super(On,{isRenderable:On.renderForms})}render(){const On=this.annotationStorage,Bn=this.data,$n=Bn.id;let qn=On.getValue($n,{value:Bn.exportValue===Bn.fieldValue}).value;typeof qn=="string"&&(qn=qn!=="Off",On.setValue($n,{value:qn})),this.container.className="buttonWidgetAnnotation checkBox";const zn=document.createElement("input");return dn.add(zn),zn.setAttribute("data-element-id",$n),zn.disabled=Bn.readOnly,this._setRequired(zn,this.data.required),zn.type="checkbox",zn.name=Bn.fieldName,qn&&zn.setAttribute("checked",!0),zn.setAttribute("exportValue",Bn.exportValue),zn.tabIndex=en,zn.addEventListener("change",jn=>{const{name:ur,checked:gr}=jn.target;for(const ar of this._getElementsByName(ur,$n)){const vr=gr&&ar.exportValue===Bn.exportValue;ar.domElement&&(ar.domElement.checked=vr),On.setValue(ar.id,{value:vr})}On.setValue($n,{value:gr})}),zn.addEventListener("resetform",jn=>{const ur=Bn.defaultFieldValue||"Off";jn.target.checked=ur===Bn.exportValue}),this.enableScripting&&this.hasJSActions&&(zn.addEventListener("updatefromsandbox",jn=>{const ur={value(gr){gr.target.checked=gr.detail.value!=="Off",On.setValue($n,{value:gr.target.checked})}};this._dispatchEventFromSandbox(ur,jn)}),this._setEventListeners(zn,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],jn=>jn.target.checked)),this._setBackgroundColor(zn),this._setDefaultPropertiesFromJS(zn),this.container.append(zn),this.container}}class yn extends sn{constructor(On){super(On,{isRenderable:On.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const On=this.annotationStorage,Bn=this.data,$n=Bn.id;let qn=On.getValue($n,{value:Bn.fieldValue===Bn.buttonValue}).value;typeof qn=="string"&&(qn=qn!==Bn.buttonValue,On.setValue($n,{value:qn}));const zn=document.createElement("input");if(dn.add(zn),zn.setAttribute("data-element-id",$n),zn.disabled=Bn.readOnly,this._setRequired(zn,this.data.required),zn.type="radio",zn.name=Bn.fieldName,qn&&zn.setAttribute("checked",!0),zn.tabIndex=en,zn.addEventListener("change",jn=>{const{name:ur,checked:gr}=jn.target;for(const ar of this._getElementsByName(ur,$n))On.setValue(ar.id,{value:!1});On.setValue($n,{value:gr})}),zn.addEventListener("resetform",jn=>{const ur=Bn.defaultFieldValue;jn.target.checked=ur!=null&&ur===Bn.buttonValue}),this.enableScripting&&this.hasJSActions){const jn=Bn.buttonValue;zn.addEventListener("updatefromsandbox",ur=>{const gr={value:ar=>{const vr=jn===ar.detail.value;for(const dr of this._getElementsByName(ar.target.name)){const hr=vr&&dr.id===$n;dr.domElement&&(dr.domElement.checked=hr),On.setValue(dr.id,{value:hr})}}};this._dispatchEventFromSandbox(gr,ur)}),this._setEventListeners(zn,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ur=>ur.target.checked)}return this._setBackgroundColor(zn),this._setDefaultPropertiesFromJS(zn),this.container.append(zn),this.container}}class _n extends cn{constructor(On){super(On,{ignoreBorder:On.data.hasAppearance})}render(){const On=super.render();On.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(On.title=this.data.alternativeText);const Bn=On.lastChild;return this.enableScripting&&this.hasJSActions&&Bn&&(this._setDefaultPropertiesFromJS(Bn),Bn.addEventListener("updatefromsandbox",$n=>{this._dispatchEventFromSandbox({},$n)})),On}}class xn extends sn{constructor(On){super(On,{isRenderable:On.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const On=this.annotationStorage,Bn=this.data.id,$n=On.getValue(Bn,{value:this.data.fieldValue}),qn=document.createElement("select");dn.add(qn),qn.setAttribute("data-element-id",Bn),qn.disabled=this.data.readOnly,this._setRequired(qn,this.data.required),qn.name=this.data.fieldName,qn.tabIndex=en;let zn=this.data.combo&&this.data.options.length>0;this.data.combo||(qn.size=this.data.options.length,this.data.multiSelect&&(qn.multiple=!0)),qn.addEventListener("resetform",ar=>{const vr=this.data.defaultFieldValue;for(const dr of qn.options)dr.selected=dr.value===vr});for(const ar of this.data.options){const vr=document.createElement("option");vr.textContent=ar.displayValue,vr.value=ar.exportValue,$n.value.includes(ar.exportValue)&&(vr.setAttribute("selected",!0),zn=!1),qn.append(vr)}let jn=null;if(zn){const ar=document.createElement("option");ar.value=" ",ar.setAttribute("hidden",!0),ar.setAttribute("selected",!0),qn.prepend(ar),jn=()=>{ar.remove(),qn.removeEventListener("input",jn),jn=null},qn.addEventListener("input",jn)}const ur=(ar,vr)=>{const dr=vr?"value":"textContent",hr=ar.target.options;return ar.target.multiple?Array.prototype.filter.call(hr,_r=>_r.selected).map(_r=>_r[dr]):hr.selectedIndex===-1?null:hr[hr.selectedIndex][dr]},gr=ar=>{const vr=ar.target.options;return Array.prototype.map.call(vr,dr=>({displayValue:dr.textContent,exportValue:dr.value}))};return this.enableScripting&&this.hasJSActions?(qn.addEventListener("updatefromsandbox",ar=>{const vr={value(dr){jn==null||jn();const hr=dr.detail.value,_r=new Set(Array.isArray(hr)?hr:[hr]);for(const or of qn.options)or.selected=_r.has(or.value);On.setValue(Bn,{value:ur(dr,!0)})},multipleSelection(dr){qn.multiple=!0},remove(dr){const hr=qn.options,_r=dr.detail.remove;hr[_r].selected=!1,qn.remove(_r),hr.length>0&&Array.prototype.findIndex.call(hr,Er=>Er.selected)===-1&&(hr[0].selected=!0),On.setValue(Bn,{value:ur(dr,!0),items:gr(dr)})},clear(dr){for(;qn.length!==0;)qn.remove(0);On.setValue(Bn,{value:null,items:[]})},insert(dr){const{index:hr,displayValue:_r,exportValue:or}=dr.detail.insert,Er=qn.children[hr],Dr=document.createElement("option");Dr.textContent=_r,Dr.value=or,Er?Er.before(Dr):qn.append(Dr),On.setValue(Bn,{value:ur(dr,!0),items:gr(dr)})},items(dr){const{items:hr}=dr.detail;for(;qn.length!==0;)qn.remove(0);for(const _r of hr){const{displayValue:or,exportValue:Er}=_r,Dr=document.createElement("option");Dr.textContent=or,Dr.value=Er,qn.append(Dr)}qn.options.length>0&&(qn.options[0].selected=!0),On.setValue(Bn,{value:ur(dr,!0),items:gr(dr)})},indices(dr){const hr=new Set(dr.detail.indices);for(const _r of dr.target.options)_r.selected=hr.has(_r.index);On.setValue(Bn,{value:ur(dr,!0)})},editable(dr){dr.target.disabled=!dr.detail.editable}};this._dispatchEventFromSandbox(vr,ar)}),qn.addEventListener("input",ar=>{var hr;const vr=ur(ar,!0),dr=ur(ar,!1);On.setValue(Bn,{value:vr}),(hr=this.linkService.eventBus)==null||hr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Bn,name:"Keystroke",value:dr,changeEx:vr,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(qn,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],ar=>ar.target.checked)):qn.addEventListener("input",function(ar){On.setValue(Bn,{value:ur(ar,!0)})}),this.data.combo&&this._setTextStyle(qn),this._setBackgroundColor(qn),this._setDefaultPropertiesFromJS(qn),this.container.append(qn),this.container}}class Sn extends nn{constructor(On){var $n,qn,zn;const Bn=!!((($n=On.data.titleObj)==null?void 0:$n.str)||((qn=On.data.contentsObj)==null?void 0:qn.str)||((zn=On.data.richText)==null?void 0:zn.str));super(On,{isRenderable:Bn})}render(){const On=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",On.includes(this.data.parentType))return this.container;const Bn=`[data-annotation-id="${this.data.parentId}"]`,$n=this.layer.querySelectorAll(Bn);if($n.length===0)return this.container;const qn=new Pn({container:this.container,trigger:Array.from($n),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),zn=this.page,jn=tn.Util.normalizeRect([this.data.parentRect[0],zn.view[3]-this.data.parentRect[1]+zn.view[1],this.data.parentRect[2],zn.view[3]-this.data.parentRect[3]+zn.view[1]]),ur=jn[0]+this.data.parentRect[2]-this.data.parentRect[0],gr=jn[1],[ar,vr,dr,hr]=this.viewport.viewBox,_r=dr-ar,or=hr-vr;return this.container.style.left=`${100*(ur-ar)/_r}%`,this.container.style.top=`${100*(gr-vr)/or}%`,this.container.append(qn.render()),this.container}}class Pn{constructor(On){this.container=On.container,this.trigger=On.trigger,this.color=On.color,this.titleObj=On.titleObj,this.modificationDate=On.modificationDate,this.contentsObj=On.contentsObj,this.richText=On.richText,this.hideWrapper=On.hideWrapper||!1,this.pinned=!1}render(){var ur,gr;const Bn=document.createElement("div");Bn.className="popupWrapper",this.hideElement=this.hideWrapper?Bn:this.container,this.hideElement.hidden=!0;const $n=document.createElement("div");$n.className="popup";const qn=this.color;if(qn){const ar=.7*(255-qn[0])+qn[0],vr=.7*(255-qn[1])+qn[1],dr=.7*(255-qn[2])+qn[2];$n.style.backgroundColor=tn.Util.makeHexColor(ar|0,vr|0,dr|0)}const zn=document.createElement("h1");zn.dir=this.titleObj.dir,zn.textContent=this.titleObj.str,$n.append(zn);const jn=un.PDFDateString.toDateObject(this.modificationDate);if(jn){const ar=document.createElement("span");ar.className="popupDate",ar.textContent="{{date}}, {{time}}",ar.dataset.l10nId="annotation_date_string",ar.dataset.l10nArgs=JSON.stringify({date:jn.toLocaleDateString(),time:jn.toLocaleTimeString()}),$n.append(ar)}if(((ur=this.richText)==null?void 0:ur.str)&&(!((gr=this.contentsObj)!=null&&gr.str)||this.contentsObj.str===this.richText.str))fn.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:$n}),$n.lastChild.className="richText popupContent";else{const ar=this._formatContents(this.contentsObj);$n.append(ar)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const ar of this.trigger)ar.addEventListener("click",this._toggle.bind(this)),ar.addEventListener("mouseover",this._show.bind(this,!1)),ar.addEventListener("mouseout",this._hide.bind(this,!1));return $n.addEventListener("click",this._hide.bind(this,!0)),Bn.append($n),Bn}_formatContents({str:On,dir:Bn}){const $n=document.createElement("p");$n.className="popupContent",$n.dir=Bn;const qn=On.split(/(?:\r\n?|\n)/);for(let zn=0,jn=qn.length;zn<jn;++zn){const ur=qn[zn];$n.append(document.createTextNode(ur)),zn<jn-1&&$n.append(document.createElement("br"))}return $n}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(On=!1){On&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(On=!0){On&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class Ln extends nn{constructor(On){var $n,qn,zn;const Bn=!!(On.data.hasPopup||(($n=On.data.titleObj)==null?void 0:$n.str)||((qn=On.data.contentsObj)==null?void 0:qn.str)||((zn=On.data.richText)==null?void 0:zn.str));super(On,{isRenderable:Bn,ignoreBorder:!0}),this.textContent=On.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const On=document.createElement("div");On.className="annotationTextContent",On.setAttribute("role","comment");for(const Bn of this.textContent){const $n=document.createElement("span");$n.textContent=Bn,On.append($n)}this.container.append(On)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class In extends nn{constructor(On){var $n,qn,zn;const Bn=!!(On.data.hasPopup||(($n=On.data.titleObj)==null?void 0:$n.str)||((qn=On.data.contentsObj)==null?void 0:qn.str)||((zn=On.data.richText)==null?void 0:zn.str));super(On,{isRenderable:Bn,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const On=this.data,{width:Bn,height:$n}=rn(On.rect),qn=this.svgFactory.create(Bn,$n,!0),zn=this.svgFactory.createElement("svg:line");return zn.setAttribute("x1",On.rect[2]-On.lineCoordinates[0]),zn.setAttribute("y1",On.rect[3]-On.lineCoordinates[1]),zn.setAttribute("x2",On.rect[2]-On.lineCoordinates[2]),zn.setAttribute("y2",On.rect[3]-On.lineCoordinates[3]),zn.setAttribute("stroke-width",On.borderStyle.width||1),zn.setAttribute("stroke","transparent"),zn.setAttribute("fill","transparent"),qn.append(zn),this.container.append(qn),this._createPopup(zn,On),this.container}}class Rn extends nn{constructor(On){var $n,qn,zn;const Bn=!!(On.data.hasPopup||(($n=On.data.titleObj)==null?void 0:$n.str)||((qn=On.data.contentsObj)==null?void 0:qn.str)||((zn=On.data.richText)==null?void 0:zn.str));super(On,{isRenderable:Bn,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const On=this.data,{width:Bn,height:$n}=rn(On.rect),qn=this.svgFactory.create(Bn,$n,!0),zn=On.borderStyle.width,jn=this.svgFactory.createElement("svg:rect");return jn.setAttribute("x",zn/2),jn.setAttribute("y",zn/2),jn.setAttribute("width",Bn-zn),jn.setAttribute("height",$n-zn),jn.setAttribute("stroke-width",zn||1),jn.setAttribute("stroke","transparent"),jn.setAttribute("fill","transparent"),qn.append(jn),this.container.append(qn),this._createPopup(jn,On),this.container}}class Mn extends nn{constructor(On){var $n,qn,zn;const Bn=!!(On.data.hasPopup||(($n=On.data.titleObj)==null?void 0:$n.str)||((qn=On.data.contentsObj)==null?void 0:qn.str)||((zn=On.data.richText)==null?void 0:zn.str));super(On,{isRenderable:Bn,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const On=this.data,{width:Bn,height:$n}=rn(On.rect),qn=this.svgFactory.create(Bn,$n,!0),zn=On.borderStyle.width,jn=this.svgFactory.createElement("svg:ellipse");return jn.setAttribute("cx",Bn/2),jn.setAttribute("cy",$n/2),jn.setAttribute("rx",Bn/2-zn/2),jn.setAttribute("ry",$n/2-zn/2),jn.setAttribute("stroke-width",zn||1),jn.setAttribute("stroke","transparent"),jn.setAttribute("fill","transparent"),qn.append(jn),this.container.append(qn),this._createPopup(jn,On),this.container}}class Hn extends nn{constructor(On){var $n,qn,zn;const Bn=!!(On.data.hasPopup||(($n=On.data.titleObj)==null?void 0:$n.str)||((qn=On.data.contentsObj)==null?void 0:qn.str)||((zn=On.data.richText)==null?void 0:zn.str));super(On,{isRenderable:Bn,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const On=this.data,{width:Bn,height:$n}=rn(On.rect),qn=this.svgFactory.create(Bn,$n,!0);let zn=[];for(const ur of On.vertices){const gr=ur.x-On.rect[0],ar=On.rect[3]-ur.y;zn.push(gr+","+ar)}zn=zn.join(" ");const jn=this.svgFactory.createElement(this.svgElementName);return jn.setAttribute("points",zn),jn.setAttribute("stroke-width",On.borderStyle.width||1),jn.setAttribute("stroke","transparent"),jn.setAttribute("fill","transparent"),qn.append(jn),this.container.append(qn),this._createPopup(jn,On),this.container}}class Qn extends Hn{constructor(On){super(On),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Kn extends nn{constructor(On){var $n,qn,zn;const Bn=!!(On.data.hasPopup||(($n=On.data.titleObj)==null?void 0:$n.str)||((qn=On.data.contentsObj)==null?void 0:qn.str)||((zn=On.data.richText)==null?void 0:zn.str));super(On,{isRenderable:Bn,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class nr extends nn{constructor(On){var $n,qn,zn;const Bn=!!(On.data.hasPopup||(($n=On.data.titleObj)==null?void 0:$n.str)||((qn=On.data.contentsObj)==null?void 0:qn.str)||((zn=On.data.richText)==null?void 0:zn.str));super(On,{isRenderable:Bn,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const On=this.data,{width:Bn,height:$n}=rn(On.rect),qn=this.svgFactory.create(Bn,$n,!0);for(const zn of On.inkLists){let jn=[];for(const gr of zn){const ar=gr.x-On.rect[0],vr=On.rect[3]-gr.y;jn.push(`${ar},${vr}`)}jn=jn.join(" ");const ur=this.svgFactory.createElement(this.svgElementName);ur.setAttribute("points",jn),ur.setAttribute("stroke-width",On.borderStyle.width||1),ur.setAttribute("stroke","transparent"),ur.setAttribute("fill","transparent"),this._createPopup(ur,On),qn.append(ur)}return this.container.append(qn),this.container}}class Zn extends nn{constructor(On){var $n,qn,zn;const Bn=!!(On.data.hasPopup||(($n=On.data.titleObj)==null?void 0:$n.str)||((qn=On.data.contentsObj)==null?void 0:qn.str)||((zn=On.data.richText)==null?void 0:zn.str));super(On,{isRenderable:Bn,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class ir extends nn{constructor(On){var $n,qn,zn;const Bn=!!(On.data.hasPopup||(($n=On.data.titleObj)==null?void 0:$n.str)||((qn=On.data.contentsObj)==null?void 0:qn.str)||((zn=On.data.richText)==null?void 0:zn.str));super(On,{isRenderable:Bn,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class Jn extends nn{constructor(On){var $n,qn,zn;const Bn=!!(On.data.hasPopup||(($n=On.data.titleObj)==null?void 0:$n.str)||((qn=On.data.contentsObj)==null?void 0:qn.str)||((zn=On.data.richText)==null?void 0:zn.str));super(On,{isRenderable:Bn,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class Vn extends nn{constructor(On){var $n,qn,zn;const Bn=!!(On.data.hasPopup||(($n=On.data.titleObj)==null?void 0:$n.str)||((qn=On.data.contentsObj)==null?void 0:qn.str)||((zn=On.data.richText)==null?void 0:zn.str));super(On,{isRenderable:Bn,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class Xn extends nn{constructor(On){var $n,qn,zn;const Bn=!!(On.data.hasPopup||(($n=On.data.titleObj)==null?void 0:$n.str)||((qn=On.data.contentsObj)==null?void 0:qn.str)||((zn=On.data.richText)==null?void 0:zn.str));super(On,{isRenderable:Bn,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Yn extends nn{constructor(On){var qn;super(On,{isRenderable:!0});const{filename:Bn,content:$n}=this.data.file;this.filename=(0,un.getFilenameFromUrl)(Bn),this.content=$n,(qn=this.linkService.eventBus)==null||qn.dispatch("fileattachmentannotation",{source:this,filename:Bn,content:$n})}render(){var Bn,$n;this.container.className="fileAttachmentAnnotation";const On=document.createElement("div");return On.className="popupTriggerArea",On.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(((Bn=this.data.titleObj)==null?void 0:Bn.str)||(($n=this.data.contentsObj)==null?void 0:$n.str)||this.data.richText)&&this._createPopup(On,this.data),this.container.append(On),this.container}_download(){var On;(On=this.downloadManager)==null||On.openOrDownloadData(this.container,this.content,this.filename)}}const Gn=class{static render(On){var ur,gr;const{annotations:Bn,div:$n,viewport:qn,accessibilityManager:zn}=On;Ur(this,En,M1).call(this,$n,qn);let jn=0;for(const ar of Bn){if(ar.annotationType!==tn.AnnotationType.POPUP){const{width:dr,height:hr}=rn(ar.rect);if(dr<=0||hr<=0)continue}const vr=an.create({data:ar,layer:$n,page:On.page,viewport:qn,linkService:On.linkService,downloadManager:On.downloadManager,imageResourcesPath:On.imageResourcesPath||"",renderForms:On.renderForms!==!1,svgFactory:new un.DOMSVGFactory,annotationStorage:On.annotationStorage||new gn.AnnotationStorage,enableScripting:On.enableScripting,hasJSActions:On.hasJSActions,fieldObjects:On.fieldObjects,mouseState:On.mouseState||{isDown:!1}});if(vr.isRenderable){const dr=vr.render();if(ar.hidden&&(dr.style.visibility="hidden"),Array.isArray(dr))for(const hr of dr)hr.style.zIndex=jn++,Ur(ur=Gn,An,D1).call(ur,hr,ar.id,$n,zn);else dr.style.zIndex=jn++,vr instanceof Sn?$n.prepend(dr):Ur(gr=Gn,An,D1).call(gr,dr,ar.id,$n,zn)}}Ur(this,Fn,R1).call(this,$n,On.annotationCanvasMap)}static update(On){const{annotationCanvasMap:Bn,div:$n,viewport:qn}=On;Ur(this,En,M1).call(this,$n,qn),Ur(this,Fn,R1).call(this,$n,Bn),$n.hidden=!1}};let Tn=Gn;An=new WeakSet,D1=function(On,Bn,$n,qn){const zn=On.firstChild||On;zn.id=`${un.AnnotationPrefix}${Bn}`,$n.append(On),qn==null||qn.moveElementInDOM($n,On,zn,!1)},En=new WeakSet,M1=function(On,{width:Bn,height:$n,rotation:qn}){const{style:zn}=On,jn=qn%180!==0,ur=Math.floor(Bn)+"px",gr=Math.floor($n)+"px";zn.width=jn?gr:ur,zn.height=jn?ur:gr,On.setAttribute("data-main-rotation",qn)},Fn=new WeakSet,R1=function(On,Bn){if(!!Bn){for(const[$n,qn]of Bn){const zn=On.querySelector(`[data-annotation-id="${$n}"]`);if(!zn)continue;const{firstChild:jn}=zn;jn?jn.nodeName==="CANVAS"?jn.replaceWith(qn):jn.before(qn):zn.append(qn)}Bn.clear()}},Mr(Tn,An),Mr(Tn,En),Mr(Tn,Fn),e.AnnotationLayer=Tn},(St,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function _e(un){return Math.floor(Math.max(0,Math.min(1,un))*255).toString(16).padStart(2,"0")}class tn{static CMYK_G([gn,vn,fn,en]){return["G",1-Math.min(1,.3*gn+.59*fn+.11*vn+en)]}static G_CMYK([gn]){return["CMYK",0,0,0,1-gn]}static G_RGB([gn]){return["RGB",gn,gn,gn]}static G_HTML([gn]){const vn=_e(gn);return`#${vn}${vn}${vn}`}static RGB_G([gn,vn,fn]){return["G",.3*gn+.59*vn+.11*fn]}static RGB_HTML([gn,vn,fn]){const en=_e(gn),on=_e(vn),dn=_e(fn);return`#${en}${on}${dn}`}static T_HTML(){return"#00000000"}static CMYK_RGB([gn,vn,fn,en]){return["RGB",1-Math.min(1,gn+en),1-Math.min(1,fn+en),1-Math.min(1,vn+en)]}static CMYK_HTML(gn){const vn=this.CMYK_RGB(gn).slice(1);return this.RGB_HTML(vn)}static RGB_CMYK([gn,vn,fn]){const en=1-gn,on=1-vn,dn=1-fn,rn=Math.min(en,on,dn);return["CMYK",en,on,dn,rn]}}e.ColorConverters=tn},(St,e,_e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var tn=_e(20);class un{static setupStorage(vn,fn,en,on,dn){const rn=on.getValue(fn,{value:null});switch(en.name){case"textarea":if(rn.value!==null&&(vn.textContent=rn.value),dn==="print")break;vn.addEventListener("input",an=>{on.setValue(fn,{value:an.target.value})});break;case"input":if(en.attributes.type==="radio"||en.attributes.type==="checkbox"){if(rn.value===en.attributes.xfaOn?vn.setAttribute("checked",!0):rn.value===en.attributes.xfaOff&&vn.removeAttribute("checked"),dn==="print")break;vn.addEventListener("change",an=>{on.setValue(fn,{value:an.target.checked?an.target.getAttribute("xfaOn"):an.target.getAttribute("xfaOff")})})}else{if(rn.value!==null&&vn.setAttribute("value",rn.value),dn==="print")break;vn.addEventListener("input",an=>{on.setValue(fn,{value:an.target.value})})}break;case"select":if(rn.value!==null)for(const an of en.children)an.attributes.value===rn.value&&(an.attributes.selected=!0);vn.addEventListener("input",an=>{const nn=an.target.options,cn=nn.selectedIndex===-1?"":nn[nn.selectedIndex].value;on.setValue(fn,{value:cn})});break}}static setAttributes({html:vn,element:fn,storage:en=null,intent:on,linkService:dn}){const{attributes:rn}=fn,an=vn instanceof HTMLAnchorElement;rn.type==="radio"&&(rn.name=`${rn.name}-${on}`);for(const[nn,cn]of Object.entries(rn))if(cn!=null)switch(nn){case"class":cn.length&&vn.setAttribute(nn,cn.join(" "));break;case"dataId":break;case"id":vn.setAttribute("data-element-id",cn);break;case"style":Object.assign(vn.style,cn);break;case"textContent":vn.textContent=cn;break;default:(!an||nn!=="href"&&nn!=="newWindow")&&vn.setAttribute(nn,cn)}an&&dn.addLinkAttributes(vn,rn.href,rn.newWindow),en&&rn.dataId&&this.setupStorage(vn,rn.dataId,fn,en)}static render(vn){var hn;const fn=vn.annotationStorage,en=vn.linkService,on=vn.xfaHtml,dn=vn.intent||"display",rn=document.createElement(on.name);on.attributes&&this.setAttributes({html:rn,element:on,intent:dn,linkService:en});const an=[[on,-1,rn]],nn=vn.div;if(nn.append(rn),vn.viewport){const sn=`matrix(${vn.viewport.transform.join(",")})`;nn.style.transform=sn}dn!=="richText"&&nn.setAttribute("class","xfaLayer xfaFont");const cn=[];for(;an.length>0;){const[sn,pn,mn]=an.at(-1);if(pn+1===sn.children.length){an.pop();continue}const yn=sn.children[++an.at(-1)[1]];if(yn===null)continue;const{name:_n}=yn;if(_n==="#text"){const Sn=document.createTextNode(yn.value);cn.push(Sn),mn.append(Sn);continue}let xn;if((hn=yn==null?void 0:yn.attributes)!=null&&hn.xmlns?xn=document.createElementNS(yn.attributes.xmlns,_n):xn=document.createElement(_n),mn.append(xn),yn.attributes&&this.setAttributes({html:xn,element:yn,storage:fn,intent:dn,linkService:en}),yn.children&&yn.children.length>0)an.push([yn,-1,xn]);else if(yn.value){const Sn=document.createTextNode(yn.value);tn.XfaText.shouldBuildText(_n)&&cn.push(Sn),xn.append(Sn)}}for(const sn of nn.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))sn.setAttribute("readOnly",!0);return{textDivs:cn}}static update(vn){const fn=`matrix(${vn.viewport.transform.join(",")})`;vn.div.style.transform=fn,vn.div.hidden=!1}}e.XfaLayer=un},(St,e,_e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=mn;var tn=_e(1),un=_e(8);const gn=1e5,vn=30,fn=.8,en=new Map,on=/^\s+$/g;function dn(yn,_n){const xn=en.get(yn);if(xn)return xn;_n.save(),_n.font=`${vn}px ${yn}`;const Sn=_n.measureText("");let Pn=Sn.fontBoundingBoxAscent,Ln=Math.abs(Sn.fontBoundingBoxDescent);if(Pn){_n.restore();const Rn=Pn/(Pn+Ln);return en.set(yn,Rn),Rn}_n.strokeStyle="red",_n.clearRect(0,0,vn,vn),_n.strokeText("g",0,0);let In=_n.getImageData(0,0,vn,vn).data;Ln=0;for(let Rn=In.length-1-3;Rn>=0;Rn-=4)if(In[Rn]>0){Ln=Math.ceil(Rn/4/vn);break}_n.clearRect(0,0,vn,vn),_n.strokeText("A",0,vn),In=_n.getImageData(0,0,vn,vn).data,Pn=0;for(let Rn=0,Mn=In.length;Rn<Mn;Rn+=4)if(In[Rn]>0){Pn=vn-Math.floor(Rn/4/vn);break}if(_n.restore(),Pn){const Rn=Pn/(Pn+Ln);return en.set(yn,Rn),Rn}return en.set(yn,fn),fn}function rn(yn,_n,xn,Sn){const Pn=document.createElement("span"),Ln=yn._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:_n.str!=="",hasEOL:_n.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:_n.str!=="",hasEOL:_n.hasEOL,fontSize:0};yn._textDivs.push(Pn);const In=tn.Util.transform(yn._viewport.transform,_n.transform);let Rn=Math.atan2(In[1],In[0]);const Mn=xn[_n.fontName];Mn.vertical&&(Rn+=Math.PI/2);const Hn=Math.hypot(In[2],In[3]),Qn=Hn*dn(Mn.fontFamily,Sn);let Kn,nr;Rn===0?(Kn=In[4],nr=In[5]-Qn):(Kn=In[4]+Qn*Math.sin(Rn),nr=In[5]-Qn*Math.cos(Rn)),Pn.style.left=`${Kn}px`,Pn.style.top=`${nr}px`,Pn.style.fontSize=`${Hn}px`,Pn.style.fontFamily=Mn.fontFamily,Ln.fontSize=Hn,Pn.setAttribute("role","presentation"),Pn.textContent=_n.str,Pn.dir=_n.dir,yn._fontInspectorEnabled&&(Pn.dataset.fontName=_n.fontName),Rn!==0&&(Ln.angle=Rn*(180/Math.PI));let Zn=!1;if(_n.str.length>1||yn._enhanceTextSelection&&on.test(_n.str))Zn=!0;else if(_n.str!==" "&&_n.transform[0]!==_n.transform[3]){const ir=Math.abs(_n.transform[0]),Jn=Math.abs(_n.transform[3]);ir!==Jn&&Math.max(ir,Jn)/Math.min(ir,Jn)>1.5&&(Zn=!0)}if(Zn&&(Mn.vertical?Ln.canvasWidth=_n.height*yn._viewport.scale:Ln.canvasWidth=_n.width*yn._viewport.scale),yn._textDivProperties.set(Pn,Ln),yn._textContentStream&&yn._layoutText(Pn),yn._enhanceTextSelection&&Ln.hasText){let ir=1,Jn=0;Rn!==0&&(ir=Math.cos(Rn),Jn=Math.sin(Rn));const Vn=(Mn.vertical?_n.height:_n.width)*yn._viewport.scale,Xn=Hn;let Yn,Tn;Rn!==0?(Yn=[ir,Jn,-Jn,ir,Kn,nr],Tn=tn.Util.getAxialAlignedBoundingBox([0,0,Vn,Xn],Yn)):Tn=[Kn,nr,Kn+Vn,nr+Xn],yn._bounds.push({left:Tn[0],top:Tn[1],right:Tn[2],bottom:Tn[3],div:Pn,size:[Vn,Xn],m:Yn})}}function an(yn){if(yn._canceled)return;const _n=yn._textDivs,xn=yn._capability,Sn=_n.length;if(Sn>gn){yn._renderingDone=!0,xn.resolve();return}if(!yn._textContentStream)for(let Pn=0;Pn<Sn;Pn++)yn._layoutText(_n[Pn]);yn._renderingDone=!0,xn.resolve()}function nn(yn,_n,xn){let Sn=0;for(let Pn=0;Pn<xn;Pn++){const Ln=yn[_n++];Ln>0&&(Sn=Sn?Math.min(Ln,Sn):Ln)}return Sn}function cn(yn){const _n=yn._bounds,xn=yn._viewport,Sn=hn(xn.width,xn.height,_n);for(let Pn=0;Pn<Sn.length;Pn++){const Ln=_n[Pn].div,In=yn._textDivProperties.get(Ln);if(In.angle===0){In.paddingLeft=_n[Pn].left-Sn[Pn].left,In.paddingTop=_n[Pn].top-Sn[Pn].top,In.paddingRight=Sn[Pn].right-_n[Pn].right,In.paddingBottom=Sn[Pn].bottom-_n[Pn].bottom,yn._textDivProperties.set(Ln,In);continue}const Rn=Sn[Pn],Mn=_n[Pn],Hn=Mn.m,Qn=Hn[0],Kn=Hn[1],nr=[[0,0],[0,Mn.size[1]],[Mn.size[0],0],Mn.size],Zn=new Float64Array(64);for(let Jn=0,Vn=nr.length;Jn<Vn;Jn++){const Xn=tn.Util.applyTransform(nr[Jn],Hn);Zn[Jn+0]=Qn&&(Rn.left-Xn[0])/Qn,Zn[Jn+4]=Kn&&(Rn.top-Xn[1])/Kn,Zn[Jn+8]=Qn&&(Rn.right-Xn[0])/Qn,Zn[Jn+12]=Kn&&(Rn.bottom-Xn[1])/Kn,Zn[Jn+16]=Kn&&(Rn.left-Xn[0])/-Kn,Zn[Jn+20]=Qn&&(Rn.top-Xn[1])/Qn,Zn[Jn+24]=Kn&&(Rn.right-Xn[0])/-Kn,Zn[Jn+28]=Qn&&(Rn.bottom-Xn[1])/Qn,Zn[Jn+32]=Qn&&(Rn.left-Xn[0])/-Qn,Zn[Jn+36]=Kn&&(Rn.top-Xn[1])/-Kn,Zn[Jn+40]=Qn&&(Rn.right-Xn[0])/-Qn,Zn[Jn+44]=Kn&&(Rn.bottom-Xn[1])/-Kn,Zn[Jn+48]=Kn&&(Rn.left-Xn[0])/Kn,Zn[Jn+52]=Qn&&(Rn.top-Xn[1])/-Qn,Zn[Jn+56]=Kn&&(Rn.right-Xn[0])/Kn,Zn[Jn+60]=Qn&&(Rn.bottom-Xn[1])/-Qn}const ir=1+Math.min(Math.abs(Qn),Math.abs(Kn));In.paddingLeft=nn(Zn,32,16)/ir,In.paddingTop=nn(Zn,48,16)/ir,In.paddingRight=nn(Zn,0,16)/ir,In.paddingBottom=nn(Zn,16,16)/ir,yn._textDivProperties.set(Ln,In)}}function hn(yn,_n,xn){const Sn=xn.map(function(Ln,In){return{x1:Ln.left,y1:Ln.top,x2:Ln.right,y2:Ln.bottom,index:In,x1New:void 0,x2New:void 0}});sn(yn,Sn);const Pn=new Array(xn.length);for(const Ln of Sn){const In=Ln.index;Pn[In]={left:Ln.x1New,top:0,right:Ln.x2New,bottom:0}}xn.map(function(Ln,In){const Rn=Pn[In],Mn=Sn[In];Mn.x1=Ln.top,Mn.y1=yn-Rn.right,Mn.x2=Ln.bottom,Mn.y2=yn-Rn.left,Mn.index=In,Mn.x1New=void 0,Mn.x2New=void 0}),sn(_n,Sn);for(const Ln of Sn){const In=Ln.index;Pn[In].top=Ln.x1New,Pn[In].bottom=Ln.x2New}return Pn}function sn(yn,_n){_n.sort(function(Pn,Ln){return Pn.x1-Ln.x1||Pn.index-Ln.index});const Sn=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const Pn of _n){let Ln=0;for(;Ln<Sn.length&&Sn[Ln].end<=Pn.y1;)Ln++;let In=Sn.length-1;for(;In>=0&&Sn[In].start>=Pn.y2;)In--;let Rn,Mn,Hn,Qn,Kn=-1/0;for(Hn=Ln;Hn<=In;Hn++){Rn=Sn[Hn],Mn=Rn.boundary;let ir;Mn.x2>Pn.x1?ir=Mn.index>Pn.index?Mn.x1New:Pn.x1:Mn.x2New===void 0?ir=(Mn.x2+Pn.x1)/2:ir=Mn.x2New,ir>Kn&&(Kn=ir)}for(Pn.x1New=Kn,Hn=Ln;Hn<=In;Hn++)Rn=Sn[Hn],Mn=Rn.boundary,Mn.x2New===void 0?Mn.x2>Pn.x1?Mn.index>Pn.index&&(Mn.x2New=Mn.x2):Mn.x2New=Kn:Mn.x2New>Kn&&(Mn.x2New=Math.max(Kn,Mn.x2));const nr=[];let Zn=null;for(Hn=Ln;Hn<=In;Hn++){Rn=Sn[Hn],Mn=Rn.boundary;const ir=Mn.x2>Pn.x2?Mn:Pn;Zn===ir?nr.at(-1).end=Rn.end:(nr.push({start:Rn.start,end:Rn.end,boundary:ir}),Zn=ir)}for(Sn[Ln].start<Pn.y1&&(nr[0].start=Pn.y1,nr.unshift({start:Sn[Ln].start,end:Pn.y1,boundary:Sn[Ln].boundary})),Pn.y2<Sn[In].end&&(nr.at(-1).end=Pn.y2,nr.push({start:Pn.y2,end:Sn[In].end,boundary:Sn[In].boundary})),Hn=Ln;Hn<=In;Hn++){if(Rn=Sn[Hn],Mn=Rn.boundary,Mn.x2New!==void 0)continue;let ir=!1;for(Qn=Ln-1;!ir&&Qn>=0&&Sn[Qn].start>=Mn.y1;Qn--)ir=Sn[Qn].boundary===Mn;for(Qn=In+1;!ir&&Qn<Sn.length&&Sn[Qn].end<=Mn.y2;Qn++)ir=Sn[Qn].boundary===Mn;for(Qn=0;!ir&&Qn<nr.length;Qn++)ir=nr[Qn].boundary===Mn;ir||(Mn.x2New=Kn)}Array.prototype.splice.apply(Sn,[Ln,In-Ln+1,...nr])}for(const Pn of Sn){const Ln=Pn.boundary;Ln.x2New===void 0&&(Ln.x2New=Math.max(yn,Ln.x2))}}class pn{constructor({textContent:_n,textContentStream:xn,container:Sn,viewport:Pn,textDivs:Ln,textContentItemsStr:In,enhanceTextSelection:Rn}){var Mn;Rn&&(0,un.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=_n,this._textContentStream=xn,this._container=Sn,this._document=Sn.ownerDocument,this._viewport=Pn,this._textDivs=Ln||[],this._textContentItemsStr=In||[],this._enhanceTextSelection=!!Rn,this._fontInspectorEnabled=!!((Mn=globalThis.FontInspector)!=null&&Mn.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,tn.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new tn.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(_n,xn){for(let Sn=0,Pn=_n.length;Sn<Pn;Sn++){if(_n[Sn].str===void 0){if(_n[Sn].type==="beginMarkedContentProps"||_n[Sn].type==="beginMarkedContent"){const Ln=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),_n[Sn].id!==null&&this._container.setAttribute("id",`${_n[Sn].id}`),Ln.append(this._container)}else _n[Sn].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(_n[Sn].str),rn(this,_n[Sn],xn,this._layoutTextCtx)}}_layoutText(_n){const xn=this._textDivProperties.get(_n);let Sn="";if(xn.canvasWidth!==0&&xn.hasText){const{fontFamily:Pn}=_n.style,{fontSize:Ln}=xn;(Ln!==this._layoutTextLastFontSize||Pn!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${Ln*this._devicePixelRatio}px ${Pn}`,this._layoutTextLastFontSize=Ln,this._layoutTextLastFontFamily=Pn);const{width:In}=this._layoutTextCtx.measureText(_n.textContent);if(In>0){const Rn=this._devicePixelRatio*xn.canvasWidth/In;this._enhanceTextSelection&&(xn.scale=Rn),Sn=`scaleX(${Rn})`}}if(xn.angle!==0&&(Sn=`rotate(${xn.angle}deg) ${Sn}`),Sn.length>0&&(this._enhanceTextSelection&&(xn.originalTransform=Sn),_n.style.transform=Sn),xn.hasText&&this._container.append(_n),xn.hasEOL){const Pn=document.createElement("br");Pn.setAttribute("role","presentation"),this._container.append(Pn)}}_render(_n=0){const xn=(0,tn.createPromiseCapability)();let Sn=Object.create(null);const Pn=this._document.createElement("canvas");if(Pn.height=Pn.width=vn,this._layoutTextCtx=Pn.getContext("2d",{alpha:!1}),this._textContent){const Ln=this._textContent.items,In=this._textContent.styles;this._processItems(Ln,In),xn.resolve()}else if(this._textContentStream){const Ln=()=>{this._reader.read().then(({value:In,done:Rn})=>{if(Rn){xn.resolve();return}Object.assign(Sn,In.styles),this._processItems(In.items,Sn),Ln()},xn.reject)};this._reader=this._textContentStream.getReader(),Ln()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');xn.promise.then(()=>{Sn=null,_n?this._renderTimer=setTimeout(()=>{an(this),this._renderTimer=null},_n):an(this)},this._capability.reject)}expandTextDivs(_n=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(cn(this),this._bounds=null);const xn=[],Sn=[];for(let Pn=0,Ln=this._textDivs.length;Pn<Ln;Pn++){const In=this._textDivs[Pn],Rn=this._textDivProperties.get(In);!Rn.hasText||(_n?(xn.length=0,Sn.length=0,Rn.originalTransform&&xn.push(Rn.originalTransform),Rn.paddingTop>0?(Sn.push(`${Rn.paddingTop}px`),xn.push(`translateY(${-Rn.paddingTop}px)`)):Sn.push(0),Rn.paddingRight>0?Sn.push(`${Rn.paddingRight/Rn.scale}px`):Sn.push(0),Rn.paddingBottom>0?Sn.push(`${Rn.paddingBottom}px`):Sn.push(0),Rn.paddingLeft>0?(Sn.push(`${Rn.paddingLeft/Rn.scale}px`),xn.push(`translateX(${-Rn.paddingLeft/Rn.scale}px)`)):Sn.push(0),In.style.padding=Sn.join(" "),xn.length&&(In.style.transform=xn.join(" "))):(In.style.padding=null,In.style.transform=Rn.originalTransform))}}}e.TextLayerRenderTask=pn;function mn(yn){const _n=new pn({textContent:yn.textContent,textContentStream:yn.textContentStream,container:yn.container,viewport:yn.viewport,textDivs:yn.textDivs,textContentItemsStr:yn.textContentItemsStr,enhanceTextSelection:yn.enhanceTextSelection});return _n._render(yn.timeout),_n}},(St,e,_e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var tn=_e(8),un=_e(1),gn=_e(3);let vn=class{constructor(){(0,un.unreachable)("Not implemented: SVGGraphics")}};e.SVGGraphics=vn;{let hn=function(xn){let Sn=[];const Pn=[];for(const Ln of xn){if(Ln.fn==="save"){Sn.push({fnId:92,fn:"group",items:[]}),Pn.push(Sn),Sn=Sn.at(-1).items;continue}Ln.fn==="restore"?Sn=Pn.pop():Sn.push(Ln)}return Sn},sn=function(xn){if(Number.isInteger(xn))return xn.toString();const Sn=xn.toFixed(10);let Pn=Sn.length-1;if(Sn[Pn]!=="0")return Sn;do Pn--;while(Sn[Pn]==="0");return Sn.substring(0,Sn[Pn]==="."?Pn:Pn+1)},pn=function(xn){if(xn[4]===0&&xn[5]===0){if(xn[1]===0&&xn[2]===0)return xn[0]===1&&xn[3]===1?"":`scale(${sn(xn[0])} ${sn(xn[3])})`;if(xn[0]===xn[3]&&xn[1]===-xn[2]){const Sn=Math.acos(xn[0])*180/Math.PI;return`rotate(${sn(Sn)})`}}else if(xn[0]===1&&xn[1]===0&&xn[2]===0&&xn[3]===1)return`translate(${sn(xn[4])} ${sn(xn[5])})`;return`matrix(${sn(xn[0])} ${sn(xn[1])} ${sn(xn[2])} ${sn(xn[3])} ${sn(xn[4])} ${sn(xn[5])})`};const fn={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},en="http://www.w3.org/XML/1998/namespace",on="http://www.w3.org/1999/xlink",dn=["butt","round","square"],rn=["miter","round","bevel"],an=function(xn,Sn="",Pn=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!Pn)return URL.createObjectURL(new Blob([xn],{type:Sn}));const Ln="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let In=`data:${Sn};base64,`;for(let Rn=0,Mn=xn.length;Rn<Mn;Rn+=3){const Hn=xn[Rn]&255,Qn=xn[Rn+1]&255,Kn=xn[Rn+2]&255,nr=Hn>>2,Zn=(Hn&3)<<4|Qn>>4,ir=Rn+1<Mn?(Qn&15)<<2|Kn>>6:64,Jn=Rn+2<Mn?Kn&63:64;In+=Ln[nr]+Ln[Zn]+Ln[ir]+Ln[Jn]}return In},nn=function(){const xn=new Uint8Array([137,80,78,71,13,10,26,10]),Sn=12,Pn=new Int32Array(256);for(let Kn=0;Kn<256;Kn++){let nr=Kn;for(let Zn=0;Zn<8;Zn++)nr&1?nr=3988292384^nr>>1&2147483647:nr=nr>>1&2147483647;Pn[Kn]=nr}function Ln(Kn,nr,Zn){let ir=-1;for(let Jn=nr;Jn<Zn;Jn++){const Vn=(ir^Kn[Jn])&255,Xn=Pn[Vn];ir=ir>>>8^Xn}return ir^-1}function In(Kn,nr,Zn,ir){let Jn=ir;const Vn=nr.length;Zn[Jn]=Vn>>24&255,Zn[Jn+1]=Vn>>16&255,Zn[Jn+2]=Vn>>8&255,Zn[Jn+3]=Vn&255,Jn+=4,Zn[Jn]=Kn.charCodeAt(0)&255,Zn[Jn+1]=Kn.charCodeAt(1)&255,Zn[Jn+2]=Kn.charCodeAt(2)&255,Zn[Jn+3]=Kn.charCodeAt(3)&255,Jn+=4,Zn.set(nr,Jn),Jn+=nr.length;const Xn=Ln(Zn,ir+4,Jn);Zn[Jn]=Xn>>24&255,Zn[Jn+1]=Xn>>16&255,Zn[Jn+2]=Xn>>8&255,Zn[Jn+3]=Xn&255}function Rn(Kn,nr,Zn){let ir=1,Jn=0;for(let Vn=nr;Vn<Zn;++Vn)ir=(ir+(Kn[Vn]&255))%65521,Jn=(Jn+ir)%65521;return Jn<<16|ir}function Mn(Kn){if(!gn.isNodeJS)return Hn(Kn);try{let nr;parseInt(process.versions.node)>=8?nr=Kn:nr=Buffer.from(Kn);const Zn=require$$2.deflateSync(nr,{level:9});return Zn instanceof Uint8Array?Zn:new Uint8Array(Zn)}catch(nr){(0,un.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+nr)}return Hn(Kn)}function Hn(Kn){let nr=Kn.length;const Zn=65535,ir=Math.ceil(nr/Zn),Jn=new Uint8Array(2+nr+ir*5+4);let Vn=0;Jn[Vn++]=120,Jn[Vn++]=156;let Xn=0;for(;nr>Zn;)Jn[Vn++]=0,Jn[Vn++]=255,Jn[Vn++]=255,Jn[Vn++]=0,Jn[Vn++]=0,Jn.set(Kn.subarray(Xn,Xn+Zn),Vn),Vn+=Zn,Xn+=Zn,nr-=Zn;Jn[Vn++]=1,Jn[Vn++]=nr&255,Jn[Vn++]=nr>>8&255,Jn[Vn++]=~nr&65535&255,Jn[Vn++]=(~nr&65535)>>8&255,Jn.set(Kn.subarray(Xn),Vn),Vn+=Kn.length-Xn;const Yn=Rn(Kn,0,Kn.length);return Jn[Vn++]=Yn>>24&255,Jn[Vn++]=Yn>>16&255,Jn[Vn++]=Yn>>8&255,Jn[Vn++]=Yn&255,Jn}function Qn(Kn,nr,Zn,ir){const Jn=Kn.width,Vn=Kn.height;let Xn,Yn,Tn;const An=Kn.data;switch(nr){case un.ImageKind.GRAYSCALE_1BPP:Yn=0,Xn=1,Tn=Jn+7>>3;break;case un.ImageKind.RGB_24BPP:Yn=2,Xn=8,Tn=Jn*3;break;case un.ImageKind.RGBA_32BPP:Yn=6,Xn=8,Tn=Jn*4;break;default:throw new Error("invalid format")}const wn=new Uint8Array((1+Tn)*Vn);let En=0,Nn=0;for(let Bn=0;Bn<Vn;++Bn)wn[En++]=0,wn.set(An.subarray(Nn,Nn+Tn),En),Nn+=Tn,En+=Tn;if(nr===un.ImageKind.GRAYSCALE_1BPP&&ir){En=0;for(let Bn=0;Bn<Vn;Bn++){En++;for(let $n=0;$n<Tn;$n++)wn[En++]^=255}}const Fn=new Uint8Array([Jn>>24&255,Jn>>16&255,Jn>>8&255,Jn&255,Vn>>24&255,Vn>>16&255,Vn>>8&255,Vn&255,Xn,Yn,0,0,0]),Un=Mn(wn),Gn=xn.length+Sn*3+Fn.length+Un.length,er=new Uint8Array(Gn);let On=0;return er.set(xn,On),On+=xn.length,In("IHDR",Fn,er,On),On+=Sn+Fn.length,In("IDATA",Un,er,On),On+=Sn+Un.length,In("IEND",new Uint8Array(0),er,On),an(er,"image/png",Zn)}return function(nr,Zn,ir){const Jn=nr.kind===void 0?un.ImageKind.GRAYSCALE_1BPP:nr.kind;return Qn(nr,Jn,Zn,ir)}}();class cn{constructor(){this.fontSizeScale=1,this.fontWeight=fn.fontWeight,this.fontSize=0,this.textMatrix=un.IDENTITY_MATRIX,this.fontMatrix=un.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=un.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=fn.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(Sn,Pn){this.x=Sn,this.y=Pn}}let mn=0,yn=0,_n=0;e.SVGGraphics=vn=class{constructor(xn,Sn,Pn=!1){(0,tn.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new tn.DOMSVGFactory,this.current=new cn,this.transformMatrix=un.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=xn,this.objs=Sn,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!Pn,this._operatorIdMapping=[];for(const Ln in un.OPS)this._operatorIdMapping[un.OPS[Ln]]=Ln}save(){this.transformStack.push(this.transformMatrix);const xn=this.current;this.extraStack.push(xn),this.current=xn.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(xn){this.save(),this.executeOpTree(xn),this.restore()}loadDependencies(xn){const Sn=xn.fnArray,Pn=xn.argsArray;for(let Ln=0,In=Sn.length;Ln<In;Ln++)if(Sn[Ln]===un.OPS.dependency)for(const Rn of Pn[Ln]){const Mn=Rn.startsWith("g_")?this.commonObjs:this.objs,Hn=new Promise(Qn=>{Mn.get(Rn,Qn)});this.current.dependencies.push(Hn)}return Promise.all(this.current.dependencies)}transform(xn,Sn,Pn,Ln,In,Rn){const Mn=[xn,Sn,Pn,Ln,In,Rn];this.transformMatrix=un.Util.transform(this.transformMatrix,Mn),this.tgrp=null}getSVG(xn,Sn){this.viewport=Sn;const Pn=this._initialize(Sn);return this.loadDependencies(xn).then(()=>(this.transformMatrix=un.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(xn)),Pn))}convertOpList(xn){const Sn=this._operatorIdMapping,Pn=xn.argsArray,Ln=xn.fnArray,In=[];for(let Rn=0,Mn=Ln.length;Rn<Mn;Rn++){const Hn=Ln[Rn];In.push({fnId:Hn,fn:Sn[Hn],args:Pn[Rn]})}return hn(In)}executeOpTree(xn){for(const Sn of xn){const Pn=Sn.fn,Ln=Sn.fnId,In=Sn.args;switch(Ln|0){case un.OPS.beginText:this.beginText();break;case un.OPS.dependency:break;case un.OPS.setLeading:this.setLeading(In);break;case un.OPS.setLeadingMoveText:this.setLeadingMoveText(In[0],In[1]);break;case un.OPS.setFont:this.setFont(In);break;case un.OPS.showText:this.showText(In[0]);break;case un.OPS.showSpacedText:this.showText(In[0]);break;case un.OPS.endText:this.endText();break;case un.OPS.moveText:this.moveText(In[0],In[1]);break;case un.OPS.setCharSpacing:this.setCharSpacing(In[0]);break;case un.OPS.setWordSpacing:this.setWordSpacing(In[0]);break;case un.OPS.setHScale:this.setHScale(In[0]);break;case un.OPS.setTextMatrix:this.setTextMatrix(In[0],In[1],In[2],In[3],In[4],In[5]);break;case un.OPS.setTextRise:this.setTextRise(In[0]);break;case un.OPS.setTextRenderingMode:this.setTextRenderingMode(In[0]);break;case un.OPS.setLineWidth:this.setLineWidth(In[0]);break;case un.OPS.setLineJoin:this.setLineJoin(In[0]);break;case un.OPS.setLineCap:this.setLineCap(In[0]);break;case un.OPS.setMiterLimit:this.setMiterLimit(In[0]);break;case un.OPS.setFillRGBColor:this.setFillRGBColor(In[0],In[1],In[2]);break;case un.OPS.setStrokeRGBColor:this.setStrokeRGBColor(In[0],In[1],In[2]);break;case un.OPS.setStrokeColorN:this.setStrokeColorN(In);break;case un.OPS.setFillColorN:this.setFillColorN(In);break;case un.OPS.shadingFill:this.shadingFill(In[0]);break;case un.OPS.setDash:this.setDash(In[0],In[1]);break;case un.OPS.setRenderingIntent:this.setRenderingIntent(In[0]);break;case un.OPS.setFlatness:this.setFlatness(In[0]);break;case un.OPS.setGState:this.setGState(In[0]);break;case un.OPS.fill:this.fill();break;case un.OPS.eoFill:this.eoFill();break;case un.OPS.stroke:this.stroke();break;case un.OPS.fillStroke:this.fillStroke();break;case un.OPS.eoFillStroke:this.eoFillStroke();break;case un.OPS.clip:this.clip("nonzero");break;case un.OPS.eoClip:this.clip("evenodd");break;case un.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case un.OPS.paintImageXObject:this.paintImageXObject(In[0]);break;case un.OPS.paintInlineImageXObject:this.paintInlineImageXObject(In[0]);break;case un.OPS.paintImageMaskXObject:this.paintImageMaskXObject(In[0]);break;case un.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(In[0],In[1]);break;case un.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case un.OPS.closePath:this.closePath();break;case un.OPS.closeStroke:this.closeStroke();break;case un.OPS.closeFillStroke:this.closeFillStroke();break;case un.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case un.OPS.nextLine:this.nextLine();break;case un.OPS.transform:this.transform(In[0],In[1],In[2],In[3],In[4],In[5]);break;case un.OPS.constructPath:this.constructPath(In[0],In[1]);break;case un.OPS.endPath:this.endPath();break;case 92:this.group(Sn.items);break;default:(0,un.warn)(`Unimplemented operator ${Pn}`);break}}}setWordSpacing(xn){this.current.wordSpacing=xn}setCharSpacing(xn){this.current.charSpacing=xn}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(xn,Sn,Pn,Ln,In,Rn){const Mn=this.current;Mn.textMatrix=Mn.lineMatrix=[xn,Sn,Pn,Ln,In,Rn],Mn.textMatrixScale=Math.hypot(xn,Sn),Mn.x=Mn.lineX=0,Mn.y=Mn.lineY=0,Mn.xcoords=[],Mn.ycoords=[],Mn.tspan=this.svgFactory.createElement("svg:tspan"),Mn.tspan.setAttributeNS(null,"font-family",Mn.fontFamily),Mn.tspan.setAttributeNS(null,"font-size",`${sn(Mn.fontSize)}px`),Mn.tspan.setAttributeNS(null,"y",sn(-Mn.y)),Mn.txtElement=this.svgFactory.createElement("svg:text"),Mn.txtElement.append(Mn.tspan)}beginText(){const xn=this.current;xn.x=xn.lineX=0,xn.y=xn.lineY=0,xn.textMatrix=un.IDENTITY_MATRIX,xn.lineMatrix=un.IDENTITY_MATRIX,xn.textMatrixScale=1,xn.tspan=this.svgFactory.createElement("svg:tspan"),xn.txtElement=this.svgFactory.createElement("svg:text"),xn.txtgrp=this.svgFactory.createElement("svg:g"),xn.xcoords=[],xn.ycoords=[]}moveText(xn,Sn){const Pn=this.current;Pn.x=Pn.lineX+=xn,Pn.y=Pn.lineY+=Sn,Pn.xcoords=[],Pn.ycoords=[],Pn.tspan=this.svgFactory.createElement("svg:tspan"),Pn.tspan.setAttributeNS(null,"font-family",Pn.fontFamily),Pn.tspan.setAttributeNS(null,"font-size",`${sn(Pn.fontSize)}px`),Pn.tspan.setAttributeNS(null,"y",sn(-Pn.y))}showText(xn){const Sn=this.current,Pn=Sn.font,Ln=Sn.fontSize;if(Ln===0)return;const In=Sn.fontSizeScale,Rn=Sn.charSpacing,Mn=Sn.wordSpacing,Hn=Sn.fontDirection,Qn=Sn.textHScale*Hn,Kn=Pn.vertical,nr=Kn?1:-1,Zn=Pn.defaultVMetrics,ir=Ln*Sn.fontMatrix[0];let Jn=0;for(const Yn of xn){if(Yn===null){Jn+=Hn*Mn;continue}else if(typeof Yn=="number"){Jn+=nr*Yn*Ln/1e3;continue}const Tn=(Yn.isSpace?Mn:0)+Rn,An=Yn.fontChar;let wn,En,Nn=Yn.width;if(Kn){let Un;const Gn=Yn.vmetric||Zn;Un=Yn.vmetric?Gn[1]:Nn*.5,Un=-Un*ir;const er=Gn[2]*ir;Nn=Gn?-Gn[0]:Nn,wn=Un/In,En=(Jn+er)/In}else wn=Jn/In,En=0;(Yn.isInFont||Pn.missingFile)&&(Sn.xcoords.push(Sn.x+wn),Kn&&Sn.ycoords.push(-Sn.y+En),Sn.tspan.textContent+=An);let Fn;Kn?Fn=Nn*ir-Tn*Hn:Fn=Nn*ir+Tn*Hn,Jn+=Fn}Sn.tspan.setAttributeNS(null,"x",Sn.xcoords.map(sn).join(" ")),Kn?Sn.tspan.setAttributeNS(null,"y",Sn.ycoords.map(sn).join(" ")):Sn.tspan.setAttributeNS(null,"y",sn(-Sn.y)),Kn?Sn.y-=Jn:Sn.x+=Jn*Qn,Sn.tspan.setAttributeNS(null,"font-family",Sn.fontFamily),Sn.tspan.setAttributeNS(null,"font-size",`${sn(Sn.fontSize)}px`),Sn.fontStyle!==fn.fontStyle&&Sn.tspan.setAttributeNS(null,"font-style",Sn.fontStyle),Sn.fontWeight!==fn.fontWeight&&Sn.tspan.setAttributeNS(null,"font-weight",Sn.fontWeight);const Vn=Sn.textRenderingMode&un.TextRenderingMode.FILL_STROKE_MASK;if(Vn===un.TextRenderingMode.FILL||Vn===un.TextRenderingMode.FILL_STROKE?(Sn.fillColor!==fn.fillColor&&Sn.tspan.setAttributeNS(null,"fill",Sn.fillColor),Sn.fillAlpha<1&&Sn.tspan.setAttributeNS(null,"fill-opacity",Sn.fillAlpha)):Sn.textRenderingMode===un.TextRenderingMode.ADD_TO_PATH?Sn.tspan.setAttributeNS(null,"fill","transparent"):Sn.tspan.setAttributeNS(null,"fill","none"),Vn===un.TextRenderingMode.STROKE||Vn===un.TextRenderingMode.FILL_STROKE){const Yn=1/(Sn.textMatrixScale||1);this._setStrokeAttributes(Sn.tspan,Yn)}let Xn=Sn.textMatrix;Sn.textRise!==0&&(Xn=Xn.slice(),Xn[5]+=Sn.textRise),Sn.txtElement.setAttributeNS(null,"transform",`${pn(Xn)} scale(${sn(Qn)}, -1)`),Sn.txtElement.setAttributeNS(en,"xml:space","preserve"),Sn.txtElement.append(Sn.tspan),Sn.txtgrp.append(Sn.txtElement),this._ensureTransformGroup().append(Sn.txtElement)}setLeadingMoveText(xn,Sn){this.setLeading(-Sn),this.moveText(xn,Sn)}addFontStyle(xn){if(!xn.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const Sn=an(xn.data,xn.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${xn.loadedName}"; src: url(${Sn}); }
`}setFont(xn){const Sn=this.current,Pn=this.commonObjs.get(xn[0]);let Ln=xn[1];Sn.font=Pn,this.embedFonts&&!Pn.missingFile&&!this.embeddedFonts[Pn.loadedName]&&(this.addFontStyle(Pn),this.embeddedFonts[Pn.loadedName]=Pn),Sn.fontMatrix=Pn.fontMatrix||un.FONT_IDENTITY_MATRIX;let In="normal";Pn.black?In="900":Pn.bold&&(In="bold");const Rn=Pn.italic?"italic":"normal";Ln<0?(Ln=-Ln,Sn.fontDirection=-1):Sn.fontDirection=1,Sn.fontSize=Ln,Sn.fontFamily=Pn.loadedName,Sn.fontWeight=In,Sn.fontStyle=Rn,Sn.tspan=this.svgFactory.createElement("svg:tspan"),Sn.tspan.setAttributeNS(null,"y",sn(-Sn.y)),Sn.xcoords=[],Sn.ycoords=[]}endText(){var Sn;const xn=this.current;xn.textRenderingMode&un.TextRenderingMode.ADD_TO_PATH_FLAG&&((Sn=xn.txtElement)==null?void 0:Sn.hasChildNodes())&&(xn.element=xn.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(xn){xn>0&&(this.current.lineWidth=xn)}setLineCap(xn){this.current.lineCap=dn[xn]}setLineJoin(xn){this.current.lineJoin=rn[xn]}setMiterLimit(xn){this.current.miterLimit=xn}setStrokeAlpha(xn){this.current.strokeAlpha=xn}setStrokeRGBColor(xn,Sn,Pn){this.current.strokeColor=un.Util.makeHexColor(xn,Sn,Pn)}setFillAlpha(xn){this.current.fillAlpha=xn}setFillRGBColor(xn,Sn,Pn){this.current.fillColor=un.Util.makeHexColor(xn,Sn,Pn),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(xn){this.current.strokeColor=this._makeColorN_Pattern(xn)}setFillColorN(xn){this.current.fillColor=this._makeColorN_Pattern(xn)}shadingFill(xn){const Sn=this.viewport.width,Pn=this.viewport.height,Ln=un.Util.inverseTransform(this.transformMatrix),In=un.Util.applyTransform([0,0],Ln),Rn=un.Util.applyTransform([0,Pn],Ln),Mn=un.Util.applyTransform([Sn,0],Ln),Hn=un.Util.applyTransform([Sn,Pn],Ln),Qn=Math.min(In[0],Rn[0],Mn[0],Hn[0]),Kn=Math.min(In[1],Rn[1],Mn[1],Hn[1]),nr=Math.max(In[0],Rn[0],Mn[0],Hn[0]),Zn=Math.max(In[1],Rn[1],Mn[1],Hn[1]),ir=this.svgFactory.createElement("svg:rect");ir.setAttributeNS(null,"x",Qn),ir.setAttributeNS(null,"y",Kn),ir.setAttributeNS(null,"width",nr-Qn),ir.setAttributeNS(null,"height",Zn-Kn),ir.setAttributeNS(null,"fill",this._makeShadingPattern(xn)),this.current.fillAlpha<1&&ir.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(ir)}_makeColorN_Pattern(xn){return xn[0]==="TilingPattern"?this._makeTilingPattern(xn):this._makeShadingPattern(xn)}_makeTilingPattern(xn){const Sn=xn[1],Pn=xn[2],Ln=xn[3]||un.IDENTITY_MATRIX,[In,Rn,Mn,Hn]=xn[4],Qn=xn[5],Kn=xn[6],nr=xn[7],Zn=`shading${_n++}`,[ir,Jn,Vn,Xn]=un.Util.normalizeRect([...un.Util.applyTransform([In,Rn],Ln),...un.Util.applyTransform([Mn,Hn],Ln)]),[Yn,Tn]=un.Util.singularValueDecompose2dScale(Ln),An=Qn*Yn,wn=Kn*Tn,En=this.svgFactory.createElement("svg:pattern");En.setAttributeNS(null,"id",Zn),En.setAttributeNS(null,"patternUnits","userSpaceOnUse"),En.setAttributeNS(null,"width",An),En.setAttributeNS(null,"height",wn),En.setAttributeNS(null,"x",`${ir}`),En.setAttributeNS(null,"y",`${Jn}`);const Nn=this.svg,Fn=this.transformMatrix,Un=this.current.fillColor,Gn=this.current.strokeColor,er=this.svgFactory.create(Vn-ir,Xn-Jn);if(this.svg=er,this.transformMatrix=Ln,nr===2){const On=un.Util.makeHexColor(...Sn);this.current.fillColor=On,this.current.strokeColor=On}return this.executeOpTree(this.convertOpList(Pn)),this.svg=Nn,this.transformMatrix=Fn,this.current.fillColor=Un,this.current.strokeColor=Gn,En.append(er.childNodes[0]),this.defs.append(En),`url(#${Zn})`}_makeShadingPattern(xn){switch(typeof xn=="string"&&(xn=this.objs.get(xn)),xn[0]){case"RadialAxial":const Sn=`shading${_n++}`,Pn=xn[3];let Ln;switch(xn[1]){case"axial":const In=xn[4],Rn=xn[5];Ln=this.svgFactory.createElement("svg:linearGradient"),Ln.setAttributeNS(null,"id",Sn),Ln.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),Ln.setAttributeNS(null,"x1",In[0]),Ln.setAttributeNS(null,"y1",In[1]),Ln.setAttributeNS(null,"x2",Rn[0]),Ln.setAttributeNS(null,"y2",Rn[1]);break;case"radial":const Mn=xn[4],Hn=xn[5],Qn=xn[6],Kn=xn[7];Ln=this.svgFactory.createElement("svg:radialGradient"),Ln.setAttributeNS(null,"id",Sn),Ln.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),Ln.setAttributeNS(null,"cx",Hn[0]),Ln.setAttributeNS(null,"cy",Hn[1]),Ln.setAttributeNS(null,"r",Kn),Ln.setAttributeNS(null,"fx",Mn[0]),Ln.setAttributeNS(null,"fy",Mn[1]),Ln.setAttributeNS(null,"fr",Qn);break;default:throw new Error(`Unknown RadialAxial type: ${xn[1]}`)}for(const In of Pn){const Rn=this.svgFactory.createElement("svg:stop");Rn.setAttributeNS(null,"offset",In[0]),Rn.setAttributeNS(null,"stop-color",In[1]),Ln.append(Rn)}return this.defs.append(Ln),`url(#${Sn})`;case"Mesh":return(0,un.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${xn[0]}`)}}setDash(xn,Sn){this.current.dashArray=xn,this.current.dashPhase=Sn}constructPath(xn,Sn){const Pn=this.current;let Ln=Pn.x,In=Pn.y,Rn=[],Mn=0;for(const Hn of xn)switch(Hn|0){case un.OPS.rectangle:Ln=Sn[Mn++],In=Sn[Mn++];const Qn=Sn[Mn++],Kn=Sn[Mn++],nr=Ln+Qn,Zn=In+Kn;Rn.push("M",sn(Ln),sn(In),"L",sn(nr),sn(In),"L",sn(nr),sn(Zn),"L",sn(Ln),sn(Zn),"Z");break;case un.OPS.moveTo:Ln=Sn[Mn++],In=Sn[Mn++],Rn.push("M",sn(Ln),sn(In));break;case un.OPS.lineTo:Ln=Sn[Mn++],In=Sn[Mn++],Rn.push("L",sn(Ln),sn(In));break;case un.OPS.curveTo:Ln=Sn[Mn+4],In=Sn[Mn+5],Rn.push("C",sn(Sn[Mn]),sn(Sn[Mn+1]),sn(Sn[Mn+2]),sn(Sn[Mn+3]),sn(Ln),sn(In)),Mn+=6;break;case un.OPS.curveTo2:Rn.push("C",sn(Ln),sn(In),sn(Sn[Mn]),sn(Sn[Mn+1]),sn(Sn[Mn+2]),sn(Sn[Mn+3])),Ln=Sn[Mn+2],In=Sn[Mn+3],Mn+=4;break;case un.OPS.curveTo3:Ln=Sn[Mn+2],In=Sn[Mn+3],Rn.push("C",sn(Sn[Mn]),sn(Sn[Mn+1]),sn(Ln),sn(In),sn(Ln),sn(In)),Mn+=4;break;case un.OPS.closePath:Rn.push("Z");break}Rn=Rn.join(" "),Pn.path&&xn.length>0&&xn[0]!==un.OPS.rectangle&&xn[0]!==un.OPS.moveTo?Rn=Pn.path.getAttributeNS(null,"d")+Rn:(Pn.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(Pn.path)),Pn.path.setAttributeNS(null,"d",Rn),Pn.path.setAttributeNS(null,"fill","none"),Pn.element=Pn.path,Pn.setCurrentPoint(Ln,In)}endPath(){const xn=this.current;if(xn.path=null,!this.pendingClip)return;if(!xn.element){this.pendingClip=null;return}const Sn=`clippath${mn++}`,Pn=this.svgFactory.createElement("svg:clipPath");Pn.setAttributeNS(null,"id",Sn),Pn.setAttributeNS(null,"transform",pn(this.transformMatrix));const Ln=xn.element.cloneNode(!0);if(this.pendingClip==="evenodd"?Ln.setAttributeNS(null,"clip-rule","evenodd"):Ln.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,Pn.append(Ln),this.defs.append(Pn),xn.activeClipUrl){xn.clipGroup=null;for(const In of this.extraStack)In.clipGroup=null;Pn.setAttributeNS(null,"clip-path",xn.activeClipUrl)}xn.activeClipUrl=`url(#${Sn})`,this.tgrp=null}clip(xn){this.pendingClip=xn}closePath(){const xn=this.current;if(xn.path){const Sn=`${xn.path.getAttributeNS(null,"d")}Z`;xn.path.setAttributeNS(null,"d",Sn)}}setLeading(xn){this.current.leading=-xn}setTextRise(xn){this.current.textRise=xn}setTextRenderingMode(xn){this.current.textRenderingMode=xn}setHScale(xn){this.current.textHScale=xn/100}setRenderingIntent(xn){}setFlatness(xn){}setGState(xn){for(const[Sn,Pn]of xn)switch(Sn){case"LW":this.setLineWidth(Pn);break;case"LC":this.setLineCap(Pn);break;case"LJ":this.setLineJoin(Pn);break;case"ML":this.setMiterLimit(Pn);break;case"D":this.setDash(Pn[0],Pn[1]);break;case"RI":this.setRenderingIntent(Pn);break;case"FL":this.setFlatness(Pn);break;case"Font":this.setFont(Pn);break;case"CA":this.setStrokeAlpha(Pn);break;case"ca":this.setFillAlpha(Pn);break;default:(0,un.warn)(`Unimplemented graphic state operator ${Sn}`);break}}fill(){const xn=this.current;xn.element&&(xn.element.setAttributeNS(null,"fill",xn.fillColor),xn.element.setAttributeNS(null,"fill-opacity",xn.fillAlpha),this.endPath())}stroke(){const xn=this.current;xn.element&&(this._setStrokeAttributes(xn.element),xn.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(xn,Sn=1){const Pn=this.current;let Ln=Pn.dashArray;Sn!==1&&Ln.length>0&&(Ln=Ln.map(function(In){return Sn*In})),xn.setAttributeNS(null,"stroke",Pn.strokeColor),xn.setAttributeNS(null,"stroke-opacity",Pn.strokeAlpha),xn.setAttributeNS(null,"stroke-miterlimit",sn(Pn.miterLimit)),xn.setAttributeNS(null,"stroke-linecap",Pn.lineCap),xn.setAttributeNS(null,"stroke-linejoin",Pn.lineJoin),xn.setAttributeNS(null,"stroke-width",sn(Sn*Pn.lineWidth)+"px"),xn.setAttributeNS(null,"stroke-dasharray",Ln.map(sn).join(" ")),xn.setAttributeNS(null,"stroke-dashoffset",sn(Sn*Pn.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const xn=this.svgFactory.createElement("svg:rect");xn.setAttributeNS(null,"x","0"),xn.setAttributeNS(null,"y","0"),xn.setAttributeNS(null,"width","1px"),xn.setAttributeNS(null,"height","1px"),xn.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(xn)}paintImageXObject(xn){const Sn=xn.startsWith("g_")?this.commonObjs.get(xn):this.objs.get(xn);if(!Sn){(0,un.warn)(`Dependent image with object ID ${xn} is not ready yet`);return}this.paintInlineImageXObject(Sn)}paintInlineImageXObject(xn,Sn){const Pn=xn.width,Ln=xn.height,In=nn(xn,this.forceDataSchema,!!Sn),Rn=this.svgFactory.createElement("svg:rect");Rn.setAttributeNS(null,"x","0"),Rn.setAttributeNS(null,"y","0"),Rn.setAttributeNS(null,"width",sn(Pn)),Rn.setAttributeNS(null,"height",sn(Ln)),this.current.element=Rn,this.clip("nonzero");const Mn=this.svgFactory.createElement("svg:image");Mn.setAttributeNS(on,"xlink:href",In),Mn.setAttributeNS(null,"x","0"),Mn.setAttributeNS(null,"y",sn(-Ln)),Mn.setAttributeNS(null,"width",sn(Pn)+"px"),Mn.setAttributeNS(null,"height",sn(Ln)+"px"),Mn.setAttributeNS(null,"transform",`scale(${sn(1/Pn)} ${sn(-1/Ln)})`),Sn?Sn.append(Mn):this._ensureTransformGroup().append(Mn)}paintImageMaskXObject(xn){const Sn=this.current,Pn=xn.width,Ln=xn.height,In=Sn.fillColor;Sn.maskId=`mask${yn++}`;const Rn=this.svgFactory.createElement("svg:mask");Rn.setAttributeNS(null,"id",Sn.maskId);const Mn=this.svgFactory.createElement("svg:rect");Mn.setAttributeNS(null,"x","0"),Mn.setAttributeNS(null,"y","0"),Mn.setAttributeNS(null,"width",sn(Pn)),Mn.setAttributeNS(null,"height",sn(Ln)),Mn.setAttributeNS(null,"fill",In),Mn.setAttributeNS(null,"mask",`url(#${Sn.maskId})`),this.defs.append(Rn),this._ensureTransformGroup().append(Mn),this.paintInlineImageXObject(xn,Rn)}paintFormXObjectBegin(xn,Sn){if(Array.isArray(xn)&&xn.length===6&&this.transform(xn[0],xn[1],xn[2],xn[3],xn[4],xn[5]),Sn){const Pn=Sn[2]-Sn[0],Ln=Sn[3]-Sn[1],In=this.svgFactory.createElement("svg:rect");In.setAttributeNS(null,"x",Sn[0]),In.setAttributeNS(null,"y",Sn[1]),In.setAttributeNS(null,"width",sn(Pn)),In.setAttributeNS(null,"height",sn(Ln)),this.current.element=In,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(xn){const Sn=this.svgFactory.create(xn.width,xn.height),Pn=this.svgFactory.createElement("svg:defs");Sn.append(Pn),this.defs=Pn;const Ln=this.svgFactory.createElement("svg:g");return Ln.setAttributeNS(null,"transform",pn(xn.transform)),Sn.append(Ln),this.svg=Ln,Sn}_ensureClipGroup(){if(!this.current.clipGroup){const xn=this.svgFactory.createElement("svg:g");xn.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(xn),this.current.clipGroup=xn}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",pn(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(St,e,_e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var tn=_e(1),un=_e(33);const gn=require$$2,vn=require$$2,fn=require$$2,en=require$$2,on=/^file:\/\/\/[a-zA-Z]:\//;function dn(yn){const _n=en.parse(yn);return _n.protocol==="file:"||_n.host?_n:/^[a-z]:[/\\]/i.test(yn)?en.parse(`file:///${yn}`):(_n.host||(_n.protocol="file:"),_n)}class rn{constructor(_n){this.source=_n,this.url=dn(_n.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&_n.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var _n,xn;return(xn=(_n=this._fullRequestReader)==null?void 0:_n._loaded)!=null?xn:0}getFullReader(){return(0,tn.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new pn(this):new hn(this),this._fullRequestReader}getRangeReader(_n,xn){if(xn<=this._progressiveDataLength)return null;const Sn=this.isFsUrl?new mn(this,_n,xn):new sn(this,_n,xn);return this._rangeRequestReaders.push(Sn),Sn}cancelAllRequests(_n){this._fullRequestReader&&this._fullRequestReader.cancel(_n);for(const xn of this._rangeRequestReaders.slice(0))xn.cancel(_n)}}e.PDFNodeStream=rn;class an{constructor(_n){this._url=_n.url,this._done=!1,this._storedError=null,this.onProgress=null;const xn=_n.source;this._contentLength=xn.length,this._loaded=0,this._filename=null,this._disableRange=xn.disableRange||!1,this._rangeChunkSize=xn.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!xn.disableStream,this._isRangeSupported=!xn.disableRange,this._readableStream=null,this._readCapability=(0,tn.createPromiseCapability)(),this._headersCapability=(0,tn.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const _n=this._readableStream.read();return _n===null?(this._readCapability=(0,tn.createPromiseCapability)(),this.read()):(this._loaded+=_n.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(_n).buffer,done:!1})}cancel(_n){if(!this._readableStream){this._error(_n);return}this._readableStream.destroy(_n)}_error(_n){this._storedError=_n,this._readCapability.resolve()}_setReadableStream(_n){this._readableStream=_n,_n.on("readable",()=>{this._readCapability.resolve()}),_n.on("end",()=>{_n.destroy(),this._done=!0,this._readCapability.resolve()}),_n.on("error",xn=>{this._error(xn)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new tn.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class nn{constructor(_n){this._url=_n.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,tn.createPromiseCapability)();const xn=_n.source;this._isStreamingSupported=!xn.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const _n=this._readableStream.read();return _n===null?(this._readCapability=(0,tn.createPromiseCapability)(),this.read()):(this._loaded+=_n.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(_n).buffer,done:!1})}cancel(_n){if(!this._readableStream){this._error(_n);return}this._readableStream.destroy(_n)}_error(_n){this._storedError=_n,this._readCapability.resolve()}_setReadableStream(_n){this._readableStream=_n,_n.on("readable",()=>{this._readCapability.resolve()}),_n.on("end",()=>{_n.destroy(),this._done=!0,this._readCapability.resolve()}),_n.on("error",xn=>{this._error(xn)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function cn(yn,_n){return{protocol:yn.protocol,auth:yn.auth,host:yn.hostname,port:yn.port,path:yn.path,method:"GET",headers:_n}}class hn extends an{constructor(_n){super(_n);const xn=Sn=>{if(Sn.statusCode===404){const Rn=new tn.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Rn,this._headersCapability.reject(Rn);return}this._headersCapability.resolve(),this._setReadableStream(Sn);const Pn=Rn=>this._readableStream.headers[Rn.toLowerCase()],{allowRangeRequests:Ln,suggestedLength:In}=(0,un.validateRangeRequestCapabilities)({getResponseHeader:Pn,isHttp:_n.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=Ln,this._contentLength=In||this._contentLength,this._filename=(0,un.extractFilenameFromHeader)(Pn)};this._request=null,this._url.protocol==="http:"?this._request=vn.request(cn(this._url,_n.httpHeaders),xn):this._request=fn.request(cn(this._url,_n.httpHeaders),xn),this._request.on("error",Sn=>{this._storedError=Sn,this._headersCapability.reject(Sn)}),this._request.end()}}class sn extends nn{constructor(_n,xn,Sn){super(_n),this._httpHeaders={};for(const Ln in _n.httpHeaders){const In=_n.httpHeaders[Ln];typeof In>"u"||(this._httpHeaders[Ln]=In)}this._httpHeaders.Range=`bytes=${xn}-${Sn-1}`;const Pn=Ln=>{if(Ln.statusCode===404){const In=new tn.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=In;return}this._setReadableStream(Ln)};this._request=null,this._url.protocol==="http:"?this._request=vn.request(cn(this._url,this._httpHeaders),Pn):this._request=fn.request(cn(this._url,this._httpHeaders),Pn),this._request.on("error",Ln=>{this._storedError=Ln}),this._request.end()}}class pn extends an{constructor(_n){super(_n);let xn=decodeURIComponent(this._url.path);on.test(this._url.href)&&(xn=xn.replace(/^\//,"")),gn.lstat(xn,(Sn,Pn)=>{if(Sn){Sn.code==="ENOENT"&&(Sn=new tn.MissingPDFException(`Missing PDF "${xn}".`)),this._storedError=Sn,this._headersCapability.reject(Sn);return}this._contentLength=Pn.size,this._setReadableStream(gn.createReadStream(xn)),this._headersCapability.resolve()})}}class mn extends nn{constructor(_n,xn,Sn){super(_n);let Pn=decodeURIComponent(this._url.path);on.test(this._url.href)&&(Pn=Pn.replace(/^\//,"")),this._setReadableStream(gn.createReadStream(Pn,{start:xn,end:Sn-1}))}}},(St,e,_e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=en,e.extractFilenameFromHeader=fn,e.validateRangeRequestCapabilities=vn,e.validateResponseStatus=on;var tn=_e(1),un=_e(34),gn=_e(8);function vn({getResponseHeader:dn,isHttp:rn,rangeChunkSize:an,disableRange:nn}){const cn={allowRangeRequests:!1,suggestedLength:void 0},hn=parseInt(dn("Content-Length"),10);return!Number.isInteger(hn)||(cn.suggestedLength=hn,hn<=2*an)||nn||!rn||dn("Accept-Ranges")!=="bytes"||(dn("Content-Encoding")||"identity")!=="identity"||(cn.allowRangeRequests=!0),cn}function fn(dn){const rn=dn("Content-Disposition");if(rn){let an=(0,un.getFilenameFromContentDispositionHeader)(rn);if(an.includes("%"))try{an=decodeURIComponent(an)}catch{}if((0,gn.isPdfFile)(an))return an}return null}function en(dn,rn){return dn===404||dn===0&&rn.startsWith("file:")?new tn.MissingPDFException('Missing PDF "'+rn+'".'):new tn.UnexpectedResponseException(`Unexpected server response (${dn}) while retrieving PDF "${rn}".`,dn)}function on(dn){return dn===200||dn===206}},(St,e,_e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=un;var tn=_e(1);function un(gn){let vn=!0,fn=en("filename\\*","i").exec(gn);if(fn){fn=fn[1];let hn=an(fn);return hn=unescape(hn),hn=nn(hn),hn=cn(hn),dn(hn)}if(fn=rn(gn),fn){const hn=cn(fn);return dn(hn)}if(fn=en("filename","i").exec(gn),fn){fn=fn[1];let hn=an(fn);return hn=cn(hn),dn(hn)}function en(hn,sn){return new RegExp("(?:^|;)\\s*"+hn+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',sn)}function on(hn,sn){if(hn){if(!/^[\x00-\xFF]+$/.test(sn))return sn;try{const pn=new TextDecoder(hn,{fatal:!0}),mn=(0,tn.stringToBytes)(sn);sn=pn.decode(mn),vn=!1}catch{}}return sn}function dn(hn){return vn&&/[\x80-\xff]/.test(hn)&&(hn=on("utf-8",hn),vn&&(hn=on("iso-8859-1",hn))),hn}function rn(hn){const sn=[];let pn;const mn=en("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(pn=mn.exec(hn))!==null;){let[,_n,xn,Sn]=pn;if(_n=parseInt(_n,10),_n in sn){if(_n===0)break;continue}sn[_n]=[xn,Sn]}const yn=[];for(let _n=0;_n<sn.length&&_n in sn;++_n){let[xn,Sn]=sn[_n];Sn=an(Sn),xn&&(Sn=unescape(Sn),_n===0&&(Sn=nn(Sn))),yn.push(Sn)}return yn.join("")}function an(hn){if(hn.startsWith('"')){const sn=hn.slice(1).split('\\"');for(let pn=0;pn<sn.length;++pn){const mn=sn[pn].indexOf('"');mn!==-1&&(sn[pn]=sn[pn].slice(0,mn),sn.length=pn+1),sn[pn]=sn[pn].replace(/\\(.)/g,"$1")}hn=sn.join('"')}return hn}function nn(hn){const sn=hn.indexOf("'");if(sn===-1)return hn;const pn=hn.slice(0,sn),yn=hn.slice(sn+1).replace(/^[^']*'/,"");return on(pn,yn)}function cn(hn){return!hn.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(hn)?hn:hn.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(sn,pn,mn,yn){if(mn==="q"||mn==="Q")return yn=yn.replace(/_/g," "),yn=yn.replace(/=([0-9a-fA-F]{2})/g,function(_n,xn){return String.fromCharCode(parseInt(xn,16))}),on(pn,yn);try{yn=atob(yn)}catch{}return on(pn,yn)})}return""}},(St,e,_e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var tn=_e(1),un=_e(33);const gn=200,vn=206;function fn(an){const nn=an.response;return typeof nn!="string"?nn:(0,tn.stringToBytes)(nn).buffer}class en{constructor(nn,cn={}){this.url=nn,this.isHttp=/^https?:/i.test(nn),this.httpHeaders=this.isHttp&&cn.httpHeaders||Object.create(null),this.withCredentials=cn.withCredentials||!1,this.getXhr=cn.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(nn,cn,hn){const sn={begin:nn,end:cn};for(const pn in hn)sn[pn]=hn[pn];return this.request(sn)}requestFull(nn){return this.request(nn)}request(nn){const cn=this.getXhr(),hn=this.currXhrId++,sn=this.pendingRequests[hn]={xhr:cn};cn.open("GET",this.url),cn.withCredentials=this.withCredentials;for(const pn in this.httpHeaders){const mn=this.httpHeaders[pn];typeof mn>"u"||cn.setRequestHeader(pn,mn)}return this.isHttp&&"begin"in nn&&"end"in nn?(cn.setRequestHeader("Range",`bytes=${nn.begin}-${nn.end-1}`),sn.expectedStatus=vn):sn.expectedStatus=gn,cn.responseType="arraybuffer",nn.onError&&(cn.onerror=function(pn){nn.onError(cn.status)}),cn.onreadystatechange=this.onStateChange.bind(this,hn),cn.onprogress=this.onProgress.bind(this,hn),sn.onHeadersReceived=nn.onHeadersReceived,sn.onDone=nn.onDone,sn.onError=nn.onError,sn.onProgress=nn.onProgress,cn.send(null),hn}onProgress(nn,cn){var sn;const hn=this.pendingRequests[nn];!hn||(sn=hn.onProgress)==null||sn.call(hn,cn)}onStateChange(nn,cn){var _n,xn,Sn;const hn=this.pendingRequests[nn];if(!hn)return;const sn=hn.xhr;if(sn.readyState>=2&&hn.onHeadersReceived&&(hn.onHeadersReceived(),delete hn.onHeadersReceived),sn.readyState!==4||!(nn in this.pendingRequests))return;if(delete this.pendingRequests[nn],sn.status===0&&this.isHttp){(_n=hn.onError)==null||_n.call(hn,sn.status);return}const pn=sn.status||gn;if(!(pn===gn&&hn.expectedStatus===vn)&&pn!==hn.expectedStatus){(xn=hn.onError)==null||xn.call(hn,sn.status);return}const yn=fn(sn);if(pn===vn){const Pn=sn.getResponseHeader("Content-Range"),Ln=/bytes (\d+)-(\d+)\/(\d+)/.exec(Pn);hn.onDone({begin:parseInt(Ln[1],10),chunk:yn})}else yn?hn.onDone({begin:0,chunk:yn}):(Sn=hn.onError)==null||Sn.call(hn,sn.status)}getRequestXhr(nn){return this.pendingRequests[nn].xhr}isPendingRequest(nn){return nn in this.pendingRequests}abortRequest(nn){const cn=this.pendingRequests[nn].xhr;delete this.pendingRequests[nn],cn.abort()}}class on{constructor(nn){this._source=nn,this._manager=new en(nn.url,{httpHeaders:nn.httpHeaders,withCredentials:nn.withCredentials}),this._rangeChunkSize=nn.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(nn){const cn=this._rangeRequestReaders.indexOf(nn);cn>=0&&this._rangeRequestReaders.splice(cn,1)}getFullReader(){return(0,tn.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new dn(this._manager,this._source),this._fullRequestReader}getRangeReader(nn,cn){const hn=new rn(this._manager,nn,cn);return hn.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(hn),hn}cancelAllRequests(nn){var cn;(cn=this._fullRequestReader)==null||cn.cancel(nn);for(const hn of this._rangeRequestReaders.slice(0))hn.cancel(nn)}}e.PDFNetworkStream=on;class dn{constructor(nn,cn){this._manager=nn;const hn={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=cn.url,this._fullRequestId=nn.requestFull(hn),this._headersReceivedCapability=(0,tn.createPromiseCapability)(),this._disableRange=cn.disableRange||!1,this._contentLength=cn.length,this._rangeChunkSize=cn.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const nn=this._fullRequestId,cn=this._manager.getRequestXhr(nn),hn=mn=>cn.getResponseHeader(mn),{allowRangeRequests:sn,suggestedLength:pn}=(0,un.validateRangeRequestCapabilities)({getResponseHeader:hn,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});sn&&(this._isRangeSupported=!0),this._contentLength=pn||this._contentLength,this._filename=(0,un.extractFilenameFromHeader)(hn),this._isRangeSupported&&this._manager.abortRequest(nn),this._headersReceivedCapability.resolve()}_onDone(nn){if(nn&&(this._requests.length>0?this._requests.shift().resolve({value:nn.chunk,done:!1}):this._cachedChunks.push(nn.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const cn of this._requests)cn.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(nn){this._storedError=(0,un.createResponseStatusError)(nn,this._url),this._headersReceivedCapability.reject(this._storedError);for(const cn of this._requests)cn.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(nn){var cn;(cn=this.onProgress)==null||cn.call(this,{loaded:nn.loaded,total:nn.lengthComputable?nn.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const nn=(0,tn.createPromiseCapability)();return this._requests.push(nn),nn.promise}cancel(nn){this._done=!0,this._headersReceivedCapability.reject(nn);for(const cn of this._requests)cn.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class rn{constructor(nn,cn,hn){this._manager=nn;const sn={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=nn.url,this._requestId=nn.requestRange(cn,hn,sn),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var nn;(nn=this.onClosed)==null||nn.call(this,this)}_onDone(nn){const cn=nn.chunk;this._requests.length>0?this._requests.shift().resolve({value:cn,done:!1}):this._queuedChunk=cn,this._done=!0;for(const hn of this._requests)hn.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(nn){this._storedError=(0,un.createResponseStatusError)(nn,this._url);for(const cn of this._requests)cn.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(nn){var cn;this.isStreamingSupported||(cn=this.onProgress)==null||cn.call(this,{loaded:nn.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const cn=this._queuedChunk;return this._queuedChunk=null,{value:cn,done:!1}}if(this._done)return{value:void 0,done:!0};const nn=(0,tn.createPromiseCapability)();return this._requests.push(nn),nn.promise}cancel(nn){this._done=!0;for(const cn of this._requests)cn.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(St,e,_e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var tn=_e(1),un=_e(33);function gn(dn,rn,an){return{method:"GET",headers:dn,signal:an.signal,mode:"cors",credentials:rn?"include":"same-origin",redirect:"follow"}}function vn(dn){const rn=new Headers;for(const an in dn){const nn=dn[an];typeof nn>"u"||rn.append(an,nn)}return rn}class fn{constructor(rn){this.source=rn,this.isHttp=/^https?:/i.test(rn.url),this.httpHeaders=this.isHttp&&rn.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var rn,an;return(an=(rn=this._fullRequestReader)==null?void 0:rn._loaded)!=null?an:0}getFullReader(){return(0,tn.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new en(this),this._fullRequestReader}getRangeReader(rn,an){if(an<=this._progressiveDataLength)return null;const nn=new on(this,rn,an);return this._rangeRequestReaders.push(nn),nn}cancelAllRequests(rn){this._fullRequestReader&&this._fullRequestReader.cancel(rn);for(const an of this._rangeRequestReaders.slice(0))an.cancel(rn)}}e.PDFFetchStream=fn;class en{constructor(rn){this._stream=rn,this._reader=null,this._loaded=0,this._filename=null;const an=rn.source;this._withCredentials=an.withCredentials||!1,this._contentLength=an.length,this._headersCapability=(0,tn.createPromiseCapability)(),this._disableRange=an.disableRange||!1,this._rangeChunkSize=an.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!an.disableStream,this._isRangeSupported=!an.disableRange,this._headers=vn(this._stream.httpHeaders);const nn=an.url;fetch(nn,gn(this._headers,this._withCredentials,this._abortController)).then(cn=>{if(!(0,un.validateResponseStatus)(cn.status))throw(0,un.createResponseStatusError)(cn.status,nn);this._reader=cn.body.getReader(),this._headersCapability.resolve();const hn=mn=>cn.headers.get(mn),{allowRangeRequests:sn,suggestedLength:pn}=(0,un.validateRangeRequestCapabilities)({getResponseHeader:hn,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=sn,this._contentLength=pn||this._contentLength,this._filename=(0,un.extractFilenameFromHeader)(hn),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new tn.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:rn,done:an}=await this._reader.read();return an?{value:rn,done:an}:(this._loaded+=rn.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(rn).buffer,done:!1})}cancel(rn){this._reader&&this._reader.cancel(rn),this._abortController.abort()}}class on{constructor(rn,an,nn){this._stream=rn,this._reader=null,this._loaded=0;const cn=rn.source;this._withCredentials=cn.withCredentials||!1,this._readCapability=(0,tn.createPromiseCapability)(),this._isStreamingSupported=!cn.disableStream,this._abortController=new AbortController,this._headers=vn(this._stream.httpHeaders),this._headers.append("Range",`bytes=${an}-${nn-1}`);const hn=cn.url;fetch(hn,gn(this._headers,this._withCredentials,this._abortController)).then(sn=>{if(!(0,un.validateResponseStatus)(sn.status))throw(0,un.createResponseStatusError)(sn.status,hn);this._readCapability.resolve(),this._reader=sn.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:rn,done:an}=await this._reader.read();return an?{value:rn,done:an}:(this._loaded+=rn.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(rn).buffer,done:!1})}cancel(rn){this._reader&&this._reader.cancel(rn),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(St){var e=__webpack_module_cache__[St];if(e!==void 0)return e.exports;var _e=__webpack_module_cache__[St]={exports:{}};return __webpack_modules__[St](_e,_e.exports,__w_pdfjs_require__),_e.exports}var __webpack_exports__={};return(()=>{var St=__webpack_exports__;Object.defineProperty(St,"__esModule",{value:!0}),Object.defineProperty(St,"AnnotationEditorLayer",{enumerable:!0,get:function(){return un.AnnotationEditorLayer}}),Object.defineProperty(St,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(St,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(St,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return gn.AnnotationEditorUIManager}}),Object.defineProperty(St,"AnnotationLayer",{enumerable:!0,get:function(){return vn.AnnotationLayer}}),Object.defineProperty(St,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(St,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(St,"GlobalWorkerOptions",{enumerable:!0,get:function(){return fn.GlobalWorkerOptions}}),Object.defineProperty(St,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(St,"LoopbackPort",{enumerable:!0,get:function(){return _e.LoopbackPort}}),Object.defineProperty(St,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(St,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(St,"PDFDataRangeTransport",{enumerable:!0,get:function(){return _e.PDFDataRangeTransport}}),Object.defineProperty(St,"PDFDateString",{enumerable:!0,get:function(){return tn.PDFDateString}}),Object.defineProperty(St,"PDFWorker",{enumerable:!0,get:function(){return _e.PDFWorker}}),Object.defineProperty(St,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(St,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(St,"PixelsPerInch",{enumerable:!0,get:function(){return tn.PixelsPerInch}}),Object.defineProperty(St,"RenderingCancelledException",{enumerable:!0,get:function(){return tn.RenderingCancelledException}}),Object.defineProperty(St,"SVGGraphics",{enumerable:!0,get:function(){return dn.SVGGraphics}}),Object.defineProperty(St,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return e.UNSUPPORTED_FEATURES}}),Object.defineProperty(St,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(St,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(St,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(St,"XfaLayer",{enumerable:!0,get:function(){return rn.XfaLayer}}),Object.defineProperty(St,"build",{enumerable:!0,get:function(){return _e.build}}),Object.defineProperty(St,"createPromiseCapability",{enumerable:!0,get:function(){return e.createPromiseCapability}}),Object.defineProperty(St,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(St,"getDocument",{enumerable:!0,get:function(){return _e.getDocument}}),Object.defineProperty(St,"getFilenameFromUrl",{enumerable:!0,get:function(){return tn.getFilenameFromUrl}}),Object.defineProperty(St,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return tn.getPdfFilenameFromUrl}}),Object.defineProperty(St,"getXfaPageViewport",{enumerable:!0,get:function(){return tn.getXfaPageViewport}}),Object.defineProperty(St,"isPdfFile",{enumerable:!0,get:function(){return tn.isPdfFile}}),Object.defineProperty(St,"loadScript",{enumerable:!0,get:function(){return tn.loadScript}}),Object.defineProperty(St,"renderTextLayer",{enumerable:!0,get:function(){return on.renderTextLayer}}),Object.defineProperty(St,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(St,"version",{enumerable:!0,get:function(){return _e.version}});var e=__w_pdfjs_require__(1),_e=__w_pdfjs_require__(4),tn=__w_pdfjs_require__(8),un=__w_pdfjs_require__(22),gn=__w_pdfjs_require__(7),vn=__w_pdfjs_require__(27),fn=__w_pdfjs_require__(15),en=__w_pdfjs_require__(3),on=__w_pdfjs_require__(30),dn=__w_pdfjs_require__(31),rn=__w_pdfjs_require__(29);if(en.isNodeJS){const{PDFNodeStream:an}=__w_pdfjs_require__(32);(0,_e.setPDFNetworkStreamFactory)(nn=>new an(nn))}else{const{PDFNetworkStream:an}=__w_pdfjs_require__(35),{PDFFetchStream:nn}=__w_pdfjs_require__(36);(0,_e.setPDFNetworkStreamFactory)(cn=>(0,tn.isValidFetchUrl)(cn.url)?new nn(cn):new an(cn))}})(),__webpack_exports__})())})(pdf);function _classCallCheck(St,e){if(!(St instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(St,e){for(var _e=0;_e<e.length;_e++){var tn=e[_e];tn.enumerable=tn.enumerable||!1,tn.configurable=!0,"value"in tn&&(tn.writable=!0),Object.defineProperty(St,tn.key,tn)}}function _createClass(St,e,_e){return e&&_defineProperties(St.prototype,e),_e&&_defineProperties(St,_e),Object.defineProperty(St,"prototype",{writable:!1}),St}function _defineProperty(St,e,_e){return e in St?Object.defineProperty(St,e,{value:_e,enumerable:!0,configurable:!0,writable:!0}):St[e]=_e,St}var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function St(tn,un,gn,vn,fn,en){if(en!==ReactPropTypesSecret){var on=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw on.name="Invariant Violation",on}}St.isRequired=St;function e(){return St}var _e={array:St,bigint:St,bool:St,func:St,number:St,object:St,string:St,symbol:St,any:St,arrayOf:e,element:St,elementType:St,instanceOf:e,node:St,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return _e.PropTypes=_e,_e};propTypes.exports=factoryWithThrowingShims();var keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],isProduction$1=!0,prefix="Invariant failed";function invariant(St,e){if(!St){if(isProduction$1)throw new Error(prefix);var _e=typeof e=="function"?e():e,tn=_e?"".concat(prefix,": ").concat(_e):prefix;throw new Error(tn)}}var isProduction=!0;function warning(St,e){if(!isProduction){if(St)return;var _e="Warning: "+e;typeof console<"u"&&console.warn(_e);try{throw Error(_e)}catch{}}}propTypes.exports.node,propTypes.exports.oneOf(["error","loading","no-data"]).isRequired;var DEFAULT_LINK_REL="noopener noreferrer nofollow",LinkService=function(){function St(){_classCallCheck(this,St),this.externalLinkTarget=null,this.externalLinkRel=null}return _createClass(St,[{key:"setDocument",value:function(_e){this.pdfDocument=_e}},{key:"setViewer",value:function(_e){this.pdfViewer=_e}},{key:"setExternalLinkRel",value:function(_e){this.externalLinkRel=_e}},{key:"setExternalLinkTarget",value:function(_e){this.externalLinkTarget=_e}},{key:"setHistory",value:function(){}},{key:"pagesCount",get:function(){return this.pdfDocument?this.pdfDocument.numPages:0}},{key:"page",get:function(){return this.pdfViewer.currentPageNumber},set:function(_e){this.pdfViewer.currentPageNumber=_e}},{key:"rotation",get:function(){return 0},set:function(_e){}},{key:"goToDestination",value:function(_e){var tn=this;new Promise(function(un){typeof _e=="string"?tn.pdfDocument.getDestination(_e).then(un):Array.isArray(_e)?un(_e):_e.then(un)}).then(function(un){invariant(Array.isArray(un),'"'.concat(un,'" is not a valid destination array.'));var gn=un[0];new Promise(function(vn){gn instanceof Object?tn.pdfDocument.getPageIndex(gn).then(function(fn){vn(fn)}).catch(function(){invariant(!1,'"'.concat(gn,'" is not a valid page reference.'))}):typeof gn=="number"?vn(gn):invariant(!1,'"'.concat(gn,'" is not a valid destination reference.'))}).then(function(vn){var fn=vn+1;invariant(fn>=1&&fn<=tn.pagesCount,'"'.concat(fn,'" is not a valid page number.')),tn.pdfViewer.scrollPageIntoView({dest:_e,pageIndex:vn,pageNumber:fn})})})}},{key:"navigateTo",value:function(_e){this.goToDestination(_e)}},{key:"goToPage",value:function(){}},{key:"addLinkAttributes",value:function(_e,tn,un){_e.href=tn,_e.rel=this.externalLinkRel||DEFAULT_LINK_REL,_e.target=un?"_blank":this.externalLinkTarget||""}},{key:"getDestinationHash",value:function(){return"#"}},{key:"getAnchorUrl",value:function(){return"#"}},{key:"setHash",value:function(){}},{key:"executeNamedAction",value:function(){}},{key:"cachePageRef",value:function(){}},{key:"isPageVisible",value:function(){return!0}},{key:"isPageCached",value:function(){return!0}}]),St}();function _arrayLikeToArray(St,e){(e==null||e>St.length)&&(e=St.length);for(var _e=0,tn=new Array(e);_e<e;_e++)tn[_e]=St[_e];return tn}function _unsupportedIterableToArray(St,e){if(!!St){if(typeof St=="string")return _arrayLikeToArray(St,e);var _e=Object.prototype.toString.call(St).slice(8,-1);if(_e==="Object"&&St.constructor&&(_e=St.constructor.name),_e==="Map"||_e==="Set")return Array.from(St);if(_e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_e))return _arrayLikeToArray(St,e)}}var isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(St){return typeof St<"u"}var allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayWorkerWarning(){warning(!isLocalFileSystem,"Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ".concat(allowFileAccessFromFilesTip))}function _arrayWithoutHoles(St){if(Array.isArray(St))return _arrayLikeToArray(St)}function _iterableToArray(St){if(typeof Symbol<"u"&&St[Symbol.iterator]!=null||St["@@iterator"]!=null)return Array.from(St)}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toConsumableArray(St){return _arrayWithoutHoles(St)||_iterableToArray(St)||_unsupportedIterableToArray(St)||_nonIterableSpread()}var eventProps=function(){var St={};return[].concat(_toConsumableArray(mouseEvents),_toConsumableArray(touchEvents),_toConsumableArray(keyboardEvents)).forEach(function(e){St[e]=propTypes.exports.func}),St}(),fileTypes=[propTypes.exports.string,propTypes.exports.instanceOf(ArrayBuffer),propTypes.exports.shape({data:propTypes.exports.oneOfType([propTypes.exports.object,propTypes.exports.string]),httpHeaders:propTypes.exports.object,range:propTypes.exports.object,url:propTypes.exports.string,withCredentials:propTypes.exports.bool})];typeof File<"u"&&fileTypes.push(propTypes.exports.instanceOf(File));typeof Blob<"u"&&fileTypes.push(propTypes.exports.instanceOf(Blob));var isClassName=propTypes.exports.oneOfType([propTypes.exports.string,propTypes.exports.arrayOf(propTypes.exports.string)]),isFile=propTypes.exports.oneOfType(fileTypes),isLinkService=propTypes.exports.instanceOf(LinkService);propTypes.exports.oneOf(["_self","_blank","_parent","_top"]);var isPage=propTypes.exports.shape({commonObjs:propTypes.exports.shape({}).isRequired,getAnnotations:propTypes.exports.func.isRequired,getTextContent:propTypes.exports.func.isRequired,getViewport:propTypes.exports.func.isRequired,render:propTypes.exports.func.isRequired}),isPageIndex=function St(e,_e,tn){var un=e[_e],gn=e.pageNumber,vn=e.pdf;if(!isDefined(vn))return null;if(isDefined(un)){if(typeof un!="number")return new Error("`".concat(_e,"` of type `").concat(_typeof(un),"` supplied to `").concat(tn,"`, expected `number`."));if(un<0)return new Error("Expected `".concat(_e,"` to be greater or equal to 0."));var fn=vn.numPages;if(un+1>fn)return new Error("Expected `".concat(_e,"` to be less or equal to ").concat(fn-1,"."))}else if(!isDefined(gn))return new Error("`".concat(_e,"` not supplied. Either pageIndex or pageNumber must be supplied to `").concat(tn,"`."));return null},isPageNumber=function St(e,_e,tn){var un=e[_e],gn=e.pageIndex,vn=e.pdf;if(!isDefined(vn))return null;if(isDefined(un)){if(typeof un!="number")return new Error("`".concat(_e,"` of type `").concat(_typeof(un),"` supplied to `").concat(tn,"`, expected `number`."));if(un<1)return new Error("Expected `".concat(_e,"` to be greater or equal to 1."));var fn=vn.numPages;if(un>fn)return new Error("Expected `".concat(_e,"` to be less or equal to ").concat(fn,"."))}else if(!isDefined(gn))return new Error("`".concat(_e,"` not supplied. Either pageIndex or pageNumber must be supplied to `").concat(tn,"`."));return null},isPdf=propTypes.exports.oneOfType([propTypes.exports.shape({getDestination:propTypes.exports.func.isRequired,getOutline:propTypes.exports.func.isRequired,getPage:propTypes.exports.func.isRequired,numPages:propTypes.exports.number.isRequired}),propTypes.exports.bool]),isRef=propTypes.exports.oneOfType([propTypes.exports.func,propTypes.exports.shape({current:propTypes.exports.any})]),isRenderMode=propTypes.exports.oneOf(["canvas","none","svg"]),isRotate=propTypes.exports.oneOf([0,90,180,270]);function ownKeys$2(St,e){var _e=Object.keys(St);if(Object.getOwnPropertySymbols){var tn=Object.getOwnPropertySymbols(St);e&&(tn=tn.filter(function(un){return Object.getOwnPropertyDescriptor(St,un).enumerable})),_e.push.apply(_e,tn)}return _e}function _objectSpread$2(St){for(var e=1;e<arguments.length;e++){var _e=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$2(Object(_e),!0).forEach(function(tn){_defineProperty(St,tn,_e[tn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(St,Object.getOwnPropertyDescriptors(_e)):ownKeys$2(Object(_e)).forEach(function(tn){Object.defineProperty(St,tn,Object.getOwnPropertyDescriptor(_e,tn))})}return St}var isFunctionOrNode$1=propTypes.exports.oneOfType([propTypes.exports.func,propTypes.exports.node]);_objectSpread$2(_objectSpread$2({},eventProps),{},{children:propTypes.exports.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:propTypes.exports.string,externalLinkTarget:propTypes.exports.string,file:isFile,imageResourcesPath:propTypes.exports.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:propTypes.exports.func,onLoadError:propTypes.exports.func,onLoadProgress:propTypes.exports.func,onLoadSuccess:propTypes.exports.func,onPassword:propTypes.exports.func,onSourceError:propTypes.exports.func,onSourceSuccess:propTypes.exports.func,rotate:propTypes.exports.number});var isDestination=propTypes.exports.oneOfType([propTypes.exports.string,propTypes.exports.arrayOf(propTypes.exports.any)]);propTypes.exports.shape({dest:isDestination,items:propTypes.exports.arrayOf(propTypes.exports.shape({dest:isDestination,title:propTypes.exports.string})),title:propTypes.exports.string}).isRequired,propTypes.exports.func,isPdf.isRequired;function ownKeys$1(St,e){var _e=Object.keys(St);if(Object.getOwnPropertySymbols){var tn=Object.getOwnPropertySymbols(St);e&&(tn=tn.filter(function(un){return Object.getOwnPropertyDescriptor(St,un).enumerable})),_e.push.apply(_e,tn)}return _e}function _objectSpread$1(St){for(var e=1;e<arguments.length;e++){var _e=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$1(Object(_e),!0).forEach(function(tn){_defineProperty(St,tn,_e[tn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(St,Object.getOwnPropertyDescriptors(_e)):ownKeys$1(Object(_e)).forEach(function(tn){Object.defineProperty(St,tn,Object.getOwnPropertyDescriptor(_e,tn))})}return St}_objectSpread$1({className:isClassName,inputRef:isRef,onItemClick:propTypes.exports.func,onLoadError:propTypes.exports.func,onLoadSuccess:propTypes.exports.func,pdf:isPdf},eventProps);propTypes.exports.string,propTypes.exports.number,propTypes.exports.func,propTypes.exports.func,isPage.isRequired,propTypes.exports.bool,propTypes.exports.number.isRequired;propTypes.exports.func,propTypes.exports.func,isPage.isRequired,propTypes.exports.number.isRequired;propTypes.exports.func,propTypes.exports.func,propTypes.exports.func,propTypes.exports.func,propTypes.exports.func,isPage.isRequired,propTypes.exports.number.isRequired,propTypes.exports.number.isRequired,propTypes.exports.number;propTypes.exports.string,isLinkService.isRequired,propTypes.exports.func,propTypes.exports.func,propTypes.exports.func,propTypes.exports.func,propTypes.exports.bool,propTypes.exports.number;function ownKeys(St,e){var _e=Object.keys(St);if(Object.getOwnPropertySymbols){var tn=Object.getOwnPropertySymbols(St);e&&(tn=tn.filter(function(un){return Object.getOwnPropertyDescriptor(St,un).enumerable})),_e.push.apply(_e,tn)}return _e}function _objectSpread(St){for(var e=1;e<arguments.length;e++){var _e=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(_e),!0).forEach(function(tn){_defineProperty(St,tn,_e[tn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(St,Object.getOwnPropertyDescriptors(_e)):ownKeys(Object(_e)).forEach(function(tn){Object.defineProperty(St,tn,Object.getOwnPropertyDescriptor(_e,tn))})}return St}var isFunctionOrNode=propTypes.exports.oneOfType([propTypes.exports.func,propTypes.exports.node]);_objectSpread(_objectSpread({},eventProps),{},{canvasBackground:propTypes.exports.string,children:propTypes.exports.node,className:isClassName,customTextRenderer:propTypes.exports.func,devicePixelRatio:propTypes.exports.number,error:isFunctionOrNode,height:propTypes.exports.number,imageResourcesPath:propTypes.exports.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:propTypes.exports.func,onGetTextSuccess:propTypes.exports.func,onLoadError:propTypes.exports.func,onLoadSuccess:propTypes.exports.func,onRenderError:propTypes.exports.func,onRenderSuccess:propTypes.exports.func,onRenderTextLayerError:propTypes.exports.func,onRenderTextLayerSuccess:propTypes.exports.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,registerPage:propTypes.exports.func,renderAnnotationLayer:propTypes.exports.bool,renderForms:propTypes.exports.bool,renderInteractiveForms:propTypes.exports.bool,renderMode:isRenderMode,renderTextLayer:propTypes.exports.bool,rotate:isRotate,scale:propTypes.exports.number,unregisterPage:propTypes.exports.func,width:propTypes.exports.number});displayWorkerWarning();pdf.exports.GlobalWorkerOptions.workerSrc="pdf.worker.js";pdf.exports.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdf.exports.version}/pdf.worker.js`;const UploadArea=({uploadType:St,onUploadSign:e,isClearUploadFile:_e,formError:tn,isButtonClick:un})=>{const gn=react.exports.useRef(null),vn=react.exports.useRef(null),fn=react.exports.useRef(null),en=react.exports.useRef(null),[on,dn]=react.exports.useState(!1),[rn,an]=react.exports.useState(null),[nn,cn]=react.exports.useState(null),[hn,sn]=react.exports.useState(""),[pn,mn]=react.exports.useState(""),[yn,_n]=react.exports.useState(1),[xn,Sn]=react.exports.useState(!1),[Pn]=useAtom(pdfAtom),[,Ln]=useAtom(setPdf),[In]=useAtom(stepAtom),[,Rn]=useAtom(displayMessageBox),[Mn]=useAtom(stepDirectionAtom),[,Hn]=useAtom(setOutputDocumentArr),[,Qn]=useAtom(setOutputInfo);react.exports.useEffect(()=>{const{from:wn,to:En}=Mn;wn===4&&En===2&&Kn()},[In]),react.exports.useEffect(()=>{Sn(!0),Yn()},[Pn,yn]),react.exports.useEffect(()=>{if(hn.includes("pdf")||gn!==null){const wn=gn.current;an(wn),wn&&cn(wn.getContext("2d"))}},[hn,gn]),react.exports.useEffect(()=>{_e&&Kn()},[_e]);const Kn=()=>{sn(""),en.current&&(en.current.src=""),Hn({document:null}),Qn({isSubmit:!1,docName:"",extension:"pdf"}),Ln({pdf:null})},nr=()=>{var wn;vn!==null&&(dn(!0),(wn=vn.current)==null||wn.classList.add("dragover"))},Zn=wn=>{wn.preventDefault(),wn.stopPropagation()},ir=wn=>{var En;wn.preventDefault(),wn.stopPropagation(),vn!==null&&(dn(!1),(En=vn.current)==null||En.classList.remove("dragover"))},Jn=wn=>{var Nn;wn.preventDefault(),wn.stopPropagation(),Xn(wn.dataTransfer.files[0])&&(fn.current!==null&&(fn.current.files=wn.dataTransfer.files,sn(wn.dataTransfer.files[0].type),Tn(wn.dataTransfer.files[0])),vn!==null&&(dn(!1),(Nn=vn.current)==null||Nn.classList.remove("dragover")))},Vn=wn=>{wn.preventDefault();const En=wn.target.files[0];!Xn(En)||(mn(En.name),Tn(En))},Xn=wn=>{var On;const Nn=wn.size,Fn={isDisplay:!0,isMask:!1,dialogName:"alert",content:"",basicStyle:"w-[270px] text-[#333333] bg-[#FF7070] shadow-[0_4px_12px_rgba(0,0,0,0.1)]",logoStyle:"text-[#fff]"},Un=In===1?["png","jpg"]:["pdf"],Gn=wn.name.split("."),er=Gn[Gn.length-1];return dn(!1),(On=vn.current)==null||On.classList.remove("dragover"),Un.includes(er)?Nn>3145728?(Rn({...Fn,content:"\u6A94\u6848\u5927\u5C0F\u4E0D\u5F97\u5927\u65BC 3M bytes"}),!1):!0:(Rn({...Fn,content:`\u8ACB\u4E0A\u50B3${Un.join("\u3001")}\u683C\u5F0F\u4E4B\u6A94\u6848`}),!1)},Yn=()=>{if(Pn){if(!yn)return;Pn.getPage(yn).then(function(wn){const Gn=300/wn.getViewport({scale:1}).width,er=wn.getViewport({scale:Gn});if(rn&&nn){rn.height=er.height,rn.width=er.width;const On={canvasContext:nn,viewport:er};wn.render(On).promise.then(function(){Sn(!1)})}})}},Tn=wn=>{const En=new FileReader;wn.type.includes("pdf")?En.readAsArrayBuffer(wn):En.readAsDataURL(wn),En.onload=function(){if(this.result)if(sn(wn.type),wn.type.includes("pdf")){const Nn=new Uint8Array(this.result);pdf.exports.getDocument(Nn).promise.then(function(Un){Ln({pdf:Un}),_n(1)},function(Un){})}else wn.type.includes("image")&&en.current&&(en.current.src=this.result.toString(),e(this.result.toString()))}},An=wn=>{const En=Pn==null?void 0:Pn._pdfInfo.numPages;wn==="next"&&yn<En?_n(Nn=>Nn+1):wn==="last"&&yn>1&&En!==1&&_n(Nn=>Nn-1)};return jsxs(Fragment,{children:[jsxs("div",{ref:vn,className:`flex flex-col justify-center items-center w-full h-[245px] border bg-[#FFFFFF80] rounded-[5px] ${!tn.uploadArea&&un?"border-[#f00]":"border-[#fff]"}`,onDragEnter:nr,onDragOver:Zn,onDragLeave:ir,onDrop:Jn,children:[jsx("div",{className:"text-[#787CDA]",children:jsx(UploadIcon,{})}),jsx("span",{className:"mt-[12px] mb-[8px]",children:"\u62D6\u66F3\u81F3\u6B64\u4E0A\u50B3"}),!on&&jsx("span",{children:"\u6216"}),!on&&jsx("button",{onClick:()=>{var wn;return(wn=fn.current)==null?void 0:wn.click()},className:"w-[86px] h-[32px] mt-[8px] mb-[20px] text-[#595ED3] bg-[#E9E1FF] rounded-[5px]",children:"\u9078\u64C7\u6A94\u6848"}),jsxs("div",{className:"flex flex-col text-[12px] text-[#595ED3]",children:[jsxs("span",{children:["\u6A94\u6848\u683C\u5F0F ",St]}),jsx("span",{children:"\u6A94\u6848\u5927\u5C0F \uFF1C3MB"})]}),jsx("input",{ref:fn,type:"file",accept:In===1?".png, .jpg":"application/pdf",className:"absolute -z-[10]",onChange:Vn})]}),jsx("h4",{className:"mt-[32px] mb-[20px] text-[#4F4F4F]",children:St==="pdf"?"\u9810\u89BD\u6587\u4EF6":"\u9810\u89BD\u7C3D\u540D\u6A94"}),jsxs("div",{className:"flex-center",children:[jsx("div",{className:`${hn.includes("pdf")?"":"invisible absolute -z-[10] h-0 overflow-hidden"} text-center`,children:jsxs("div",{className:"flex flex-col",children:[jsxs("div",{className:"flex-center w-full h-full min-w-[300px] min-h-[300px]",children:[jsx("canvas",{className:xn?"invisible absolute -z-[10]":"",ref:gn,width:"500",height:"500"}),xn&&jsx("div",{className:"w-full h-full",children:"Loading..."})]}),jsxs("div",{className:"flex-center mt-[14px]",children:[yn?jsx("button",{onClick:()=>An("last"),className:`${yn>1&&(Pn==null?void 0:Pn._pdfInfo.numPages)!==1?"text-[#787CDA]":"text-[#BDBDBD]"}`,children:jsx(ArrowIcon,{})}):"",yn?jsxs("div",{className:"h-[31px] mb-[10px] mx-[24px] leading-[38px] text-[14px] text-[#828282]",children:[yn," / ",Pn&&Pn._pdfInfo.numPages]}):"",yn?jsx("button",{onClick:()=>An("next"),className:`${yn<(Pn==null?void 0:Pn._pdfInfo.numPages)?"text-[#787CDA]":"text-[#BDBDBD]"} rotate-180`,children:jsx(ArrowIcon,{})}):""]}),jsx("h5",{className:"mt-[14px] text-[12px] text-[#333333]",children:pn})]})}),jsxs("div",{className:hn.includes("image")?"flex flex-col items-center w-[200px] h-[120px] border":"invisible absolute -z-[10]",children:[jsx("img",{ref:en,src:"",className:"object-contain w-full h-full"}),jsx("h5",{className:"mt-[14px] text-[12px] text-[#333333]",children:pn})]}),!hn&&jsxs("div",{className:"flex flex-col items-center text-[#595ED3]",children:[jsx(TrashcanIcon,{}),jsx("span",{className:"mt-[12px]",children:"\u8ACB\u4E0A\u50B3\u6A94\u6848"})]})]})]})},SignTrashcanIcon=()=>jsx("svg",{width:"14",height:"16",viewBox:"0 0 14 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsx("path",{d:"M2.4375 15.5C2.09028 15.5 1.79514 15.3785 1.55209 15.1354C1.30903 14.8924 1.1875 14.5972 1.1875 14.25V2.375H0.333336V1.125H4.25V0.5H9.75V1.125H13.6667V2.375H12.8125V14.25C12.8125 14.5833 12.6875 14.875 12.4375 15.125C12.1875 15.375 11.8958 15.5 11.5625 15.5H2.4375ZM11.5625 2.375H2.4375V14.25H11.5625V2.375ZM4.64584 12.4583H5.89584V4.14583H4.64584V12.4583ZM8.10417 12.4583H9.35417V4.14583H8.10417V12.4583ZM2.4375 2.375V14.25V2.375Z",fill:"white"})}),PlusIcon=()=>jsxs("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsx("line",{x1:"6.75",y1:"3.16101e-08",x2:"6.75",y2:"13",stroke:"white",strokeWidth:"1.5"}),jsx("line",{y1:"-0.75",x2:"13",y2:"-0.75",transform:"matrix(-1 4.21468e-08 4.21468e-08 1 13 7)",stroke:"white",strokeWidth:"1.5"})]}),MySign=({type:St,onSelectSign:e})=>{const[_e]=useAtom(signListAtom),[,tn]=useAtom(displayDialog),[,un]=useAtom(setSignToPdf),[gn]=useAtom(stepAtom),[vn]=useAtom(pdfCombinePageAtom),fn=dn=>{tn({isDisplay:!0,dialogName:"removeSign",props:{id:dn}})},en=(dn,rn)=>{e&&St==="allowSelect"&&e(rn)},on=dn=>{un({page:vn,imageUrl:dn})};return jsxs("div",{className:"flex flex-col flex-none w-full lg:w-[188px]",children:[jsx("h4",{className:"flex-none text-[#4F4F4F]",children:"\u6211\u7684\u7C3D\u540D\u6A94"}),jsx("div",{className:"flex-grow mt-[20px] lg:pt-[12px] pr-[4px] border border-[#FFFFFF] rounded-[5px]",children:jsx("ul",{className:"ctr-scrollbar overflow-x-auto lg:overflow-y-auto flex lg:flex-col items-center w-full max-h-[164px] lg:h-[500px] lg:max-h-full p-[12px] lg:p-0",children:_e.length?_e.map(dn=>jsxs("li",{onClick:rn=>en(rn,dn.image),className:"shrink-0 relative signCard w-[160px] p-[8px] bg-[#FFFFFF80] rounded-[5px]",children:[jsx("h5",{className:"mb-[8px] text-[14px]",children:dn.title}),jsx("div",{className:"h-[70px]",children:jsx("img",{src:dn.image,alt:"",className:"object-contain w-full h-full bg-[#fff]"})}),gn===3?jsx("button",{onClick:()=>on(dn.image),className:"animation opacity-0 absolute right-0 bottom-0 flex-center w-[32px] h-[32px] bg-[#787CDA] rounded-[5px]",children:jsx(PlusIcon,{})}):jsx("button",{onClick:()=>fn(dn.id),className:"animation opacity-0 absolute right-0 bottom-0 flex-center w-[32px] h-[32px] bg-[#FF7070] rounded-[5px]",children:jsx(SignTrashcanIcon,{})})]},dn.id)):jsx("div",{children:"\u76EE\u524D\u7121\u7C3D\u540D"})})})]})},ColorPickerIcon=()=>jsx("svg",{width:"28",height:"23",viewBox:"0 0 28 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsx("path",{className:"fill-current",d:"M0.565976 20.2657C0.532545 20.141 0.514335 19.9898 0.496126 19.8387C0.219286 13.3157 3.09363 10.6511 4.81064 9.65608C5.96918 8.98905 7.50799 8.57672 9.21954 8.80904C9.43892 7.88103 9.73333 7.06665 10.0764 6.35066C11.8125 2.76519 15.4556 1.72214 18.1747 2.55372C18.3689 2.61312 18.5631 2.67252 18.7629 2.75271C18.7807 2.56963 18.7737 2.46009 18.7889 2.43372C18.8805 1.36164 19.8281 0.572828 20.9058 0.685253C21.9779 0.776883 22.7459 1.73006 22.6487 2.78134C22.639 2.8285 22.557 3.85342 22.7473 5.22886C23.9661 6.28411 25.0951 7.58632 25.9081 9.04006C27.4216 11.7771 27.8116 13.2327 27.3193 14.3899C27.0635 15.0156 26.5233 15.4947 25.8842 15.6882C24.746 16.0155 23.0857 15.7249 20.3559 10.5278C19.8111 9.49251 19.4534 8.4071 19.2067 7.40338C18.3878 6.84272 17.6136 6.44842 17.0309 6.27023C15.9183 5.94428 14.3339 6.43571 13.5412 8.05224C13.223 8.69469 12.991 9.49236 12.8284 10.3829C12.8548 10.3981 12.8811 10.4133 12.8867 10.4341C16.2944 13.0871 16.8711 17.5684 17.0628 19.0326C17.2657 20.5384 16.5607 22.3989 14.8819 22.871C13.6606 23.2205 11.8588 22.9009 10.2376 19.3458C9.21839 17.1227 8.7982 14.8059 8.77759 12.6495C7.81914 12.4829 7.09839 12.7874 6.75194 12.9917C5.07652 13.9755 4.21818 16.3451 4.34695 19.6538C4.39123 20.734 3.56024 21.6253 2.5008 21.6641C1.58284 21.7317 0.794426 21.1183 0.565976 20.2657Z",fill:"black"})}),ActiveColorPickerIcon=()=>jsx("svg",{width:"36",height:"32",viewBox:"0 0 36 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsx("path",{d:"M0.77356 24.4429L0.766986 24.288C0.60189 20.3979 1.3704 17.3453 2.68228 15.0008C3.98985 12.664 5.70448 11.2675 7.07237 10.4749L7.08204 10.4693C8.09991 9.88321 9.29092 9.42558 10.6008 9.19268C10.6452 9.09474 10.6904 8.99783 10.7364 8.90192L10.7399 8.89452L10.7435 8.88713C12.8862 4.46192 17.0361 2.46319 20.9039 2.57049C22.104 1.43714 23.7705 0.808103 25.5508 0.982747C28.8735 1.28708 31.194 4.23825 30.8989 7.42929L30.8959 7.46233L30.8958 7.46517C30.8937 7.50678 30.8912 7.57754 30.8904 7.6731C31.9304 8.74614 32.8945 9.9868 33.6665 11.3673L33.6712 11.3757L33.6759 11.3841C34.4733 12.8263 35.1452 14.2232 35.5 15.5637C35.8809 17.0029 35.9544 18.6019 35.278 20.2103C34.5495 21.9684 33.0615 23.2661 31.3108 23.7962L31.2838 23.8044L31.2568 23.8122C30.5514 24.015 29.606 24.163 28.5049 23.9711C27.4114 23.7806 26.4313 23.3017 25.5673 22.6466C25.4586 22.5642 25.3508 22.4782 25.2437 22.3886C25.2578 22.4939 25.2699 22.588 25.2804 22.6699L25.2804 22.6699L25.2955 22.7876C25.6477 25.4309 24.5398 29.787 20.2366 31C18.7428 31.4243 16.8233 31.4181 14.928 30.2877C13.6652 29.5345 12.6385 28.4149 11.7916 27.0378C10.8125 28.6931 9.04976 29.8372 6.98836 29.9379C4.06183 30.118 1.65573 28.1416 0.969537 25.5807C0.856366 25.1583 0.807685 24.7328 0.794541 24.6179L0.79454 24.6179L0.792107 24.5968L0.77356 24.4429Z",fill:"#E3FEC7"})}),getTouchPos=(St,e)=>{const _e=St.getBoundingClientRect();return{x:e.touches[0].clientX-_e.left,y:e.touches[0].clientY-_e.top}},getMousePos=(St,e)=>{const _e=St.getBoundingClientRect();return{x:e.clientX-_e.left,y:e.clientY-_e.top}},CreateSign=()=>{const[,St]=useAtom(displayMessageBox),[e]=useAtom(stepAtom),[,_e]=useAtom(addSign),[tn,un]=react.exports.useState(!0),[gn,vn]=react.exports.useState({width:0,height:0}),[fn,en]=react.exports.useState(null),[on,dn]=react.exports.useState(null),[rn,an]=react.exports.useState(""),[nn,cn]=react.exports.useState({activeStyle:"text-[#000]",activeColor:"#000",list:[{style:"text-[#000]",color:"#000"},{style:"text-[#0400C0]",color:"#0400C0"},{style:"text-[#C00000]",color:"#C00000"}]}),[hn,sn]=react.exports.useState(!1),pn=react.exports.useRef(null),mn=react.exports.useRef(null),[yn,_n]=react.exports.useState([]),[xn,Sn]=react.exports.useState(0),[Pn,Ln]=react.exports.useState(!1),[In,Rn]=react.exports.useState({signName:!1,drawingBoard:!1,uploadArea:!1}),[Mn,Hn]=react.exports.useState({drawingArea:!1,uploadArea:!1});react.exports.useEffect(()=>{var Fn,Un;if(pn.current!==null&&mn!==null){vn({...gn,width:(Fn=pn.current)==null?void 0:Fn.offsetWidth,height:(Un=pn.current)==null?void 0:Un.offsetHeight});const Gn=mn.current;en(Gn),Gn&&dn(Gn.getContext("2d"))}},[pn,mn]),react.exports.useEffect(()=>{if(on){const Fn=on==null?void 0:on.getImageData(0,0,gn==null?void 0:gn.width,gn==null?void 0:gn.height);_n(Un=>[...Un,Fn]),Sn(0)}},[on]),react.exports.useEffect(()=>{on==null||on.putImageData(yn[xn],0,0)},[xn]);const[Qn,Kn]=react.exports.useState(""),nr="relative z-[5] flex items-center px-[20px] py-[8px] rounded-full cursor-pointer",Zn=Fn=>{sn(!0);const Un=getTouchPos(fn,Fn);on==null||on.beginPath(),on==null||on.moveTo(Un.x,Un.y),Fn.preventDefault()},ir=Fn=>{if(!hn)return;const Un=getTouchPos(fn,Fn);on!==null&&(on.lineWidth=2,on.lineCap="round",on.lineJoin="round",on.strokeStyle=nn.activeColor,on.lineTo(Un.x,Un.y),on.stroke())},Jn=Fn=>{sn(!0);const Un=getMousePos(fn,Fn);on!==null&&(on.beginPath(),on.moveTo(Un.x,Un.y),Fn.preventDefault())},Vn=Fn=>{if(!hn)return;const Un=getMousePos(fn,Fn);on!==null&&(on.lineWidth=2,on.lineCap="round",on.lineJoin="round",on.strokeStyle=nn.activeColor,on.lineTo(Un.x,Un.y),on.stroke())},Xn=()=>{sn(!1);const Fn=gn==null?void 0:gn.width,Un=on==null?void 0:on.getImageData(0,0,Fn,gn==null?void 0:gn.height);if(xn===yn.length-1)_n(Gn=>[...Gn,Un]);else{let Gn=yn.filter((er,On)=>On<xn+1);Gn.push(Un),_n(Gn)}Sn(xn+1)},Yn=()=>{on&&fn&&on.clearRect(0,0,fn.width,fn.height),_n([yn[0]]),Sn(0)},Tn=()=>{xn!==0&&Sn(xn-1)},An=()=>{yn.length>1&&xn<yn.length-1&&Sn(xn+1)},wn=()=>{Rn(Un=>({...Un,signName:Boolean(Qn),drawingBoard:yn.length>1})),Hn(Un=>({...Un,drawingArea:!0}));const Fn=setTimeout(()=>{Hn(Un=>({...Un,drawingArea:!1})),clearTimeout(Fn)},3e3);if(!(yn.length>1&&Qn))St({isDisplay:!0,isMask:!1,dialogName:"alert",content:"\u8ACB\u5B8C\u6210\u5FC5\u586B\u6B04\u4F4D\uFF01",basicStyle:"w-[200px] text-[#333333] bg-[#FF7070] shadow-[0_4px_12px_rgba(0,0,0,0.1)]",logoStyle:"text-[#fff]"});else{const Un=fn==null?void 0:fn.toDataURL();if(Un){const Gn={id:Date.now(),title:Qn,image:Un};_e(Gn),Yn(),Kn(""),St({isDisplay:!0,isMask:!1,dialogName:"success",content:"\u5EFA\u7ACB\u6210\u529F\uFF01",basicStyle:"w-[140px] bg-[#E3FEC7] shadow-[0_4px_12px_rgba(0,0,0,0.1)]"})}}},En=Fn=>{Ln(!1),an(Fn)},Nn=()=>{Rn(Un=>({...Un,signName:Boolean(Qn),uploadArea:Boolean(rn)})),Hn(Un=>({...Un,uploadArea:!0}));const Fn=setTimeout(()=>{Hn(Un=>({...Un,uploadArea:!1})),clearTimeout(Fn)},3e3);if(!(Qn&&rn))St({isDisplay:!0,isMask:!1,dialogName:"alert",content:"\u8ACB\u5B8C\u6210\u5FC5\u586B\u6B04\u4F4D\uFF01",basicStyle:"w-[200px] text-[#333333] bg-[#FF7070] shadow-[0_4px_12px_rgba(0,0,0,0.1)]",logoStyle:"text-[#fff]"});else{const Un={id:Date.now(),title:Qn,image:rn};_e(Un),Kn(""),Ln(!0),an(""),St({isDisplay:!0,isMask:!1,dialogName:"success",content:"\u5EFA\u7ACB\u6210\u529F\uFF01",basicStyle:"w-[140px] bg-[#E3FEC7] shadow-[0_4px_12px_rgba(0,0,0,0.1)]"})}};return jsxs("section",{className:"max-w-[546px] lg:w-[820px] lg:max-w-[1000px] mx-auto",children:[jsxs("ul",{className:"relative flex w-max mx-auto bg-[#FFFFFF80] rounded-full px-[10px] py-[8.5px]",children:[jsxs("li",{className:`${nr} animation ${tn?"text-[#fff]":"text-[#828282]"}`,onClick:()=>un(!0),children:[jsx("div",{className:tn?"#E5E6F2":"",children:jsx(Pencil,{})}),jsx("span",{className:"ml-[8px]",children:"\u624B\u5BEB\u7C3D\u540D"})]}),jsxs("li",{className:`${nr} animation ${tn?"text-[#828282]":"text-[#fff]"}`,onClick:()=>un(!1),children:[jsx("div",{className:tn?"":"#E5E6F2",children:jsx(UploadIcon,{})}),jsx("span",{className:"ml-[8px]",children:"\u4E0A\u50B3\u7C3D\u540D\u6A94"})]}),jsx("div",{className:`animation absolute ${tn?"left-[10px] z-[2] w-[132px]":"left-[142px] z-[2] w-[144px]"} top-[8.5px] h-[40px] bg-[#595ED3] rounded-full`})]}),jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-center mx-auto mt-[40px] w-[80%] mmd:w-full lg:max-w-[1000px]",children:[jsx(MySign,{}),jsxs("div",{className:"flex-grow mt-[40px] lg:mt-0 lg:ml-[40px]",children:[jsxs("div",{children:[jsxs("h4",{className:"text-[#4F4F4F]",children:["\u7C3D\u540D\u6A94\u540D\u7A31",jsx("span",{className:"ml-[4px] text-[#FF7070]",children:"*"})]}),jsxs("div",{className:"relative max-w-[360px] h-[40px] mt-[20px]",children:[jsx("input",{type:"text",className:`
                  signInput w-full h-full pr-[70px] rounded-[5px] 
                  ${tn&&!In.signName&&Mn.drawingArea||!tn&&!In.signName&&Mn.uploadArea?"border border-[#f00]":""}`,placeholder:"\u8F38\u5165\u7C3D\u540D\u6A94\u540D\u7A31",value:Qn,name:"firstName",maxLength:18,onChange:Fn=>Kn(Fn.target.value)}),jsxs("span",{className:"absolute right-0 top-0 bottom-0 my-auto pr-[10px] text-[#BDBDBD] leading-[40px]",children:[Qn.length,"\uFF0F18"]})]})]}),jsxs("h4",{className:"mt-[32px] mb-[20px] text-[#4F4F4F]",children:["\u7C3D\u540D\u5716\u6A23",jsx("span",{className:"ml-[4px] text-[#FF7070]",children:"*"})]}),jsxs("div",{className:tn?"":"invisible absolute -z-[10]",children:[jsxs("div",{ref:pn,className:`relative w-full h-[340px] bg-[#fff] rounded-[5px] overflow-hidden ${!In.drawingBoard&&Mn.drawingArea?"border border-[#f00]":""}`,children:[jsx("canvas",{className:"bg-[#fff]",ref:mn,width:gn.width,height:gn.height,onTouchStart:Zn,onTouchMove:ir,onTouchEnd:Xn,onMouseDown:Jn,onMouseMove:Vn,onMouseUp:Xn}),!hn&&jsxs("div",{className:"flex absolute top-[14px] right-[14px]",children:[jsx("button",{onClick:Tn,className:`flex-center w-[32px] h-[32px] rounded-[5px] ${xn===0?"text-[#BDBDBD] bg-[#F2F2F2]":"text-[#787CDA] bg-[#E9E1FF]"}`,children:jsx(LastIcon,{})}),jsx("button",{onClick:An,className:`flex-center w-[32px] h-[32px] ml-[12px] rounded-[5px] ${yn.length>1&&xn<yn.length-1?"text-[#787CDA] bg-[#E9E1FF]":"text-[#BDBDBD] bg-[#F2F2F2]"}`,children:jsx(NextIcon,{})}),jsx("button",{className:"flex-center w-[60px] h-[32px] ml-[12px] text-[14px] text-[#595ED3] bg-[#E9E1FF] rounded-[5px]",onClick:()=>Yn(),children:"\u6E05\u9664"})]}),!hn&&jsx("div",{className:"flex absolute left-[20px] top-[14px]",children:nn.list.map((Fn,Un)=>jsxs("div",{className:"colorPicker flex-center relative w-[36px] h-[32px] cursor-pointer",onClick:()=>cn({...nn,activeStyle:Fn.style,activeColor:Fn.color}),children:[Fn.style===nn.activeStyle&&jsx("div",{className:"absolute",children:jsx(ActiveColorPickerIcon,{})}),jsx("div",{className:`relative z-[10] ${Fn.style}`,children:jsx(ColorPickerIcon,{})})]},Un))})]}),jsx("button",{onClick:wn,className:`flex-center w-[104px] h-[32px] mx-auto mt-[20px] text-[14px] rounded-[5px] ${yn.length>1&&Qn?"text-[#fff] bg-[#595ED3]":"text-[#E0E0E0] bg-[#BDBDBD]"}`,children:"\u5EFA\u7ACB\u7C3D\u540D\u6A94"})]}),jsxs("div",{className:tn?"hidden":"",children:[jsx(UploadArea,{uploadType:e===1?"png\uFF0Fjpg":"pdf",onUploadSign:En,isClearUploadFile:Pn,formError:In,isButtonClick:Mn.uploadArea}),jsx("button",{onClick:Nn,className:`flex-center w-[104px] h-[32px] mx-auto mt-[70px] text-[14px] rounded-[5px] ${rn&&Qn?"text-[#fff] bg-[#595ED3]":"text-[#E0E0E0] bg-[#BDBDBD]"}`,children:"\u5EFA\u7ACB\u7C3D\u540D\u6A94"})]})]})]})]})},UploadDocument=()=>{const[St,e]=react.exports.useState(!1),[_e,tn]=react.exports.useState({uploadArea:!1}),[un,gn]=react.exports.useState({uploadArea:!1});return jsxs("section",{className:"w-[80%] max-w-[546px] lg:w-[586px] lg:max-w-[1000px] mx-auto",children:[jsxs("h4",{className:"text-[#4F4F4F]",children:["\u4E0A\u50B3\u7C3D\u7F72\u6587\u4EF6",jsx("span",{className:"ml-[4px] text-[#FF7070]",children:"*"})]}),jsx("div",{className:"mt-[20px]",children:jsx(UploadArea,{uploadType:"pdf",onUploadSign:()=>{},isClearUploadFile:St,formError:_e,isButtonClick:un.uploadArea})})]})},CanvasPreview=({page:St,currentPage:e})=>{const[_e]=useAtom(pdfAtom),[tn]=useAtom(stepAtom),[un]=useAtom(outputDocumentArr),[,gn]=useAtom(setOutputDocumentArr),vn=react.exports.useRef(null),[fn,en]=react.exports.useState(null),[on,dn]=react.exports.useState(null);react.exports.useEffect(()=>{if(vn!==null){const an=vn.current;en(an),an&&dn(an.getContext("2d"))}},[vn]),react.exports.useEffect(()=>{tn===3&&un.length!==(_e==null?void 0:_e._pdfInfo.numPages)&&St===e&&rn()},[e,tn]);const rn=()=>{if(_e){const an=St;if(!an)return;_e.getPage(an).then(function(nn){const hn=nn.getViewport({scale:1});if(fn&&on){fn.height=hn.height,fn.width=hn.width;const sn={canvasContext:on,viewport:hn};nn.render(sn).promise.then(function(){const pn=fn.toDataURL("image/png");if(un.length!==(_e==null?void 0:_e._pdfInfo.numPages)){const mn={page:an,isEdit:!1,width:hn.width,height:hn.height,imageUrl:pn};gn({document:mn})}})}})}};return jsx("canvas",{ref:vn})};var fabric={};(function(St){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var e=e||{version:"4.6.0"};if(St.fabric=e,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?e.document=document:e.document=document.implementation.createHTMLDocument(""),e.window=window;else{var _e=require$$2,tn=new _e.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;e.document=tn.document,e.jsdomImplForWrapper=require$$2.implForWrapper,e.nodeCanvas=require$$2.Canvas,e.window=tn,DOMParser=e.window.DOMParser}e.isTouchSupported="ontouchstart"in e.window||"ontouchstart"in e.document||e.window&&e.window.navigator&&e.window.navigator.maxTouchPoints>0,e.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",e.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],e.DPI=96,e.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",e.commaWsp="(?:\\s+,?\\s*|,\\s*)",e.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,e.reNonWord=/[ \n\.,;!\?\-]/,e.fontPaths={},e.iMatrix=[1,0,0,1,0,0],e.svgNS="http://www.w3.org/2000/svg",e.perfLimitSizeTotal=2097152,e.maxCacheSideLimit=4096,e.minCacheSideLimit=256,e.charWidthsCache={},e.textureSize=2048,e.disableStyleCopyPaste=!1,e.enableGLFiltering=!0,e.devicePixelRatio=e.window.devicePixelRatio||e.window.webkitDevicePixelRatio||e.window.mozDevicePixelRatio||1,e.browserShadowBlurConstant=1,e.arcToSegmentsCache={},e.boundsOfCurveCache={},e.cachesBoundsOfCurve=!0,e.forceGLPutImageData=!1,e.initFilterBackend=function(){if(e.enableGLFiltering&&e.isWebglSupported&&e.isWebglSupported(e.textureSize))return console.log("max texture size: "+e.maxTextureSize),new e.WebglFilterBackend({tileSize:e.textureSize});if(e.Canvas2dFilterBackend)return new e.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=e),function(){function fn(nn,cn){if(!!this.__eventListeners[nn]){var hn=this.__eventListeners[nn];cn?hn[hn.indexOf(cn)]=!1:e.util.array.fill(hn,!1)}}function en(nn,cn){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var hn in nn)this.on(hn,nn[hn]);else this.__eventListeners[nn]||(this.__eventListeners[nn]=[]),this.__eventListeners[nn].push(cn);return this}function on(nn,cn){var hn=function(){cn.apply(this,arguments),this.off(nn,hn)}.bind(this);this.on(nn,hn)}function dn(nn,cn){if(arguments.length===1)for(var hn in nn)on.call(this,hn,nn[hn]);else on.call(this,nn,cn);return this}function rn(nn,cn){if(!this.__eventListeners)return this;if(arguments.length===0)for(nn in this.__eventListeners)fn.call(this,nn);else if(arguments.length===1&&typeof arguments[0]=="object")for(var hn in nn)fn.call(this,hn,nn[hn]);else fn.call(this,nn,cn);return this}function an(nn,cn){if(!this.__eventListeners)return this;var hn=this.__eventListeners[nn];if(!hn)return this;for(var sn=0,pn=hn.length;sn<pn;sn++)hn[sn]&&hn[sn].call(this,cn||{});return this.__eventListeners[nn]=hn.filter(function(mn){return mn!==!1}),this}e.Observable={fire:an,on:en,once:dn,off:rn}}(),e.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var fn=0,en=arguments.length;fn<en;fn++)this._onObjectAdded(arguments[fn]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(fn,en,on){var dn=this._objects;return on?dn[en]=fn:dn.splice(en,0,fn),this._onObjectAdded&&this._onObjectAdded(fn),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var fn=this._objects,en,on=!1,dn=0,rn=arguments.length;dn<rn;dn++)en=fn.indexOf(arguments[dn]),en!==-1&&(on=!0,fn.splice(en,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[dn]));return this.renderOnAddRemove&&on&&this.requestRenderAll(),this},forEachObject:function(fn,en){for(var on=this.getObjects(),dn=0,rn=on.length;dn<rn;dn++)fn.call(en,on[dn],dn,on);return this},getObjects:function(fn){return typeof fn>"u"?this._objects.concat():this._objects.filter(function(en){return en.type===fn})},item:function(fn){return this._objects[fn]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(fn,en){return this._objects.indexOf(fn)>-1?!0:en?this._objects.some(function(on){return typeof on.contains=="function"&&on.contains(fn,!0)}):!1},complexity:function(){return this._objects.reduce(function(fn,en){return fn+=en.complexity?en.complexity():0,fn},0)}},e.CommonMethods={_setOptions:function(fn){for(var en in fn)this.set(en,fn[en])},_initGradient:function(fn,en){fn&&fn.colorStops&&!(fn instanceof e.Gradient)&&this.set(en,new e.Gradient(fn))},_initPattern:function(fn,en,on){fn&&fn.source&&!(fn instanceof e.Pattern)?this.set(en,new e.Pattern(fn,on)):on&&on()},_setObject:function(fn){for(var en in fn)this._set(en,fn[en])},set:function(fn,en){return typeof fn=="object"?this._setObject(fn):this._set(fn,en),this},_set:function(fn,en){this[fn]=en},toggle:function(fn){var en=this.get(fn);return typeof en=="boolean"&&this.set(fn,!en),this},get:function(fn){return this[fn]}},function(fn){var en=Math.sqrt,on=Math.atan2,dn=Math.pow,rn=Math.PI/180,an=Math.PI/2;e.util={cos:function(nn){if(nn===0)return 1;nn<0&&(nn=-nn);var cn=nn/an;switch(cn){case 1:case 3:return 0;case 2:return-1}return Math.cos(nn)},sin:function(nn){if(nn===0)return 0;var cn=nn/an,hn=1;switch(nn<0&&(hn=-1),cn){case 1:return hn;case 2:return 0;case 3:return-hn}return Math.sin(nn)},removeFromArray:function(nn,cn){var hn=nn.indexOf(cn);return hn!==-1&&nn.splice(hn,1),nn},getRandomInt:function(nn,cn){return Math.floor(Math.random()*(cn-nn+1))+nn},degreesToRadians:function(nn){return nn*rn},radiansToDegrees:function(nn){return nn/rn},rotatePoint:function(nn,cn,hn){var sn=new e.Point(nn.x-cn.x,nn.y-cn.y),pn=e.util.rotateVector(sn,hn);return new e.Point(pn.x,pn.y).addEquals(cn)},rotateVector:function(nn,cn){var hn=e.util.sin(cn),sn=e.util.cos(cn),pn=nn.x*sn-nn.y*hn,mn=nn.x*hn+nn.y*sn;return{x:pn,y:mn}},transformPoint:function(nn,cn,hn){return hn?new e.Point(cn[0]*nn.x+cn[2]*nn.y,cn[1]*nn.x+cn[3]*nn.y):new e.Point(cn[0]*nn.x+cn[2]*nn.y+cn[4],cn[1]*nn.x+cn[3]*nn.y+cn[5])},makeBoundingBoxFromPoints:function(nn,cn){if(cn)for(var hn=0;hn<nn.length;hn++)nn[hn]=e.util.transformPoint(nn[hn],cn);var sn=[nn[0].x,nn[1].x,nn[2].x,nn[3].x],pn=e.util.array.min(sn),mn=e.util.array.max(sn),yn=mn-pn,_n=[nn[0].y,nn[1].y,nn[2].y,nn[3].y],xn=e.util.array.min(_n),Sn=e.util.array.max(_n),Pn=Sn-xn;return{left:pn,top:xn,width:yn,height:Pn}},invertTransform:function(nn){var cn=1/(nn[0]*nn[3]-nn[1]*nn[2]),hn=[cn*nn[3],-cn*nn[1],-cn*nn[2],cn*nn[0]],sn=e.util.transformPoint({x:nn[4],y:nn[5]},hn,!0);return hn[4]=-sn.x,hn[5]=-sn.y,hn},toFixed:function(nn,cn){return parseFloat(Number(nn).toFixed(cn))},parseUnit:function(nn,cn){var hn=/\D{0,2}$/.exec(nn),sn=parseFloat(nn);switch(cn||(cn=e.Text.DEFAULT_SVG_FONT_SIZE),hn[0]){case"mm":return sn*e.DPI/25.4;case"cm":return sn*e.DPI/2.54;case"in":return sn*e.DPI;case"pt":return sn*e.DPI/72;case"pc":return sn*e.DPI/72*12;case"em":return sn*cn;default:return sn}},falseFunction:function(){return!1},getKlass:function(nn,cn){return nn=e.util.string.camelize(nn.charAt(0).toUpperCase()+nn.slice(1)),e.util.resolveNamespace(cn)[nn]},getSvgAttributes:function(nn){var cn=["instantiated_by_use","style","id","class"];switch(nn){case"linearGradient":cn=cn.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":cn=cn.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":cn=cn.concat(["offset","stop-color","stop-opacity"]);break}return cn},resolveNamespace:function(nn){if(!nn)return e;var cn=nn.split("."),hn=cn.length,sn,pn=fn||e.window;for(sn=0;sn<hn;++sn)pn=pn[cn[sn]];return pn},loadImage:function(nn,cn,hn,sn){if(!nn){cn&&cn.call(hn,nn);return}var pn=e.util.createImage(),mn=function(){cn&&cn.call(hn,pn,!1),pn=pn.onload=pn.onerror=null};pn.onload=mn,pn.onerror=function(){e.log("Error loading "+pn.src),cn&&cn.call(hn,null,!0),pn=pn.onload=pn.onerror=null},nn.indexOf("data")!==0&&sn!==void 0&&sn!==null&&(pn.crossOrigin=sn),nn.substring(0,14)==="data:image/svg"&&(pn.onload=null,e.util.loadImageInDom(pn,mn)),pn.src=nn},loadImageInDom:function(nn,cn){var hn=e.document.createElement("div");hn.style.width=hn.style.height="1px",hn.style.left=hn.style.top="-100%",hn.style.position="absolute",hn.appendChild(nn),e.document.querySelector("body").appendChild(hn),nn.onload=function(){cn(),hn.parentNode.removeChild(hn),hn=null}},enlivenObjects:function(nn,cn,hn,sn){nn=nn||[];var pn=[],mn=0,yn=nn.length;function _n(){++mn===yn&&cn&&cn(pn.filter(function(xn){return xn}))}if(!yn){cn&&cn(pn);return}nn.forEach(function(xn,Sn){if(!xn||!xn.type){_n();return}var Pn=e.util.getKlass(xn.type,hn);Pn.fromObject(xn,function(Ln,In){In||(pn[Sn]=Ln),sn&&sn(xn,Ln,In),_n()})})},enlivenPatterns:function(nn,cn){nn=nn||[];function hn(){++pn===mn&&cn&&cn(sn)}var sn=[],pn=0,mn=nn.length;if(!mn){cn&&cn(sn);return}nn.forEach(function(yn,_n){yn&&yn.source?new e.Pattern(yn,function(xn){sn[_n]=xn,hn()}):(sn[_n]=yn,hn())})},groupSVGElements:function(nn,cn,hn){var sn;return nn&&nn.length===1?nn[0]:(cn&&(cn.width&&cn.height?cn.centerPoint={x:cn.width/2,y:cn.height/2}:(delete cn.width,delete cn.height)),sn=new e.Group(nn,cn),typeof hn<"u"&&(sn.sourcePath=hn),sn)},populateWithProperties:function(nn,cn,hn){if(hn&&Object.prototype.toString.call(hn)==="[object Array]")for(var sn=0,pn=hn.length;sn<pn;sn++)hn[sn]in nn&&(cn[hn[sn]]=nn[hn[sn]])},drawDashedLine:function(nn,cn,hn,sn,pn,mn){var yn=sn-cn,_n=pn-hn,xn=en(yn*yn+_n*_n),Sn=on(_n,yn),Pn=mn.length,Ln=0,In=!0;for(nn.save(),nn.translate(cn,hn),nn.moveTo(0,0),nn.rotate(Sn),cn=0;xn>cn;)cn+=mn[Ln++%Pn],cn>xn&&(cn=xn),nn[In?"lineTo":"moveTo"](cn,0),In=!In;nn.restore()},createCanvasElement:function(){return e.document.createElement("canvas")},copyCanvasElement:function(nn){var cn=e.util.createCanvasElement();return cn.width=nn.width,cn.height=nn.height,cn.getContext("2d").drawImage(nn,0,0),cn},toDataURL:function(nn,cn,hn){return nn.toDataURL("image/"+cn,hn)},createImage:function(){return e.document.createElement("img")},multiplyTransformMatrices:function(nn,cn,hn){return[nn[0]*cn[0]+nn[2]*cn[1],nn[1]*cn[0]+nn[3]*cn[1],nn[0]*cn[2]+nn[2]*cn[3],nn[1]*cn[2]+nn[3]*cn[3],hn?0:nn[0]*cn[4]+nn[2]*cn[5]+nn[4],hn?0:nn[1]*cn[4]+nn[3]*cn[5]+nn[5]]},qrDecompose:function(nn){var cn=on(nn[1],nn[0]),hn=dn(nn[0],2)+dn(nn[1],2),sn=en(hn),pn=(nn[0]*nn[3]-nn[2]*nn[1])/sn,mn=on(nn[0]*nn[2]+nn[1]*nn[3],hn);return{angle:cn/rn,scaleX:sn,scaleY:pn,skewX:mn/rn,skewY:0,translateX:nn[4],translateY:nn[5]}},calcRotateMatrix:function(nn){if(!nn.angle)return e.iMatrix.concat();var cn=e.util.degreesToRadians(nn.angle),hn=e.util.cos(cn),sn=e.util.sin(cn);return[hn,sn,-sn,hn,0,0]},calcDimensionsMatrix:function(nn){var cn=typeof nn.scaleX>"u"?1:nn.scaleX,hn=typeof nn.scaleY>"u"?1:nn.scaleY,sn=[nn.flipX?-cn:cn,0,0,nn.flipY?-hn:hn,0,0],pn=e.util.multiplyTransformMatrices,mn=e.util.degreesToRadians;return nn.skewX&&(sn=pn(sn,[1,0,Math.tan(mn(nn.skewX)),1],!0)),nn.skewY&&(sn=pn(sn,[1,Math.tan(mn(nn.skewY)),0,1],!0)),sn},composeMatrix:function(nn){var cn=[1,0,0,1,nn.translateX||0,nn.translateY||0],hn=e.util.multiplyTransformMatrices;return nn.angle&&(cn=hn(cn,e.util.calcRotateMatrix(nn))),(nn.scaleX!==1||nn.scaleY!==1||nn.skewX||nn.skewY||nn.flipX||nn.flipY)&&(cn=hn(cn,e.util.calcDimensionsMatrix(nn))),cn},resetObjectTransform:function(nn){nn.scaleX=1,nn.scaleY=1,nn.skewX=0,nn.skewY=0,nn.flipX=!1,nn.flipY=!1,nn.rotate(0)},saveObjectTransform:function(nn){return{scaleX:nn.scaleX,scaleY:nn.scaleY,skewX:nn.skewX,skewY:nn.skewY,angle:nn.angle,left:nn.left,flipX:nn.flipX,flipY:nn.flipY,top:nn.top}},isTransparent:function(nn,cn,hn,sn){sn>0&&(cn>sn?cn-=sn:cn=0,hn>sn?hn-=sn:hn=0);var pn=!0,mn,yn,_n=nn.getImageData(cn,hn,sn*2||1,sn*2||1),xn=_n.data.length;for(mn=3;mn<xn&&(yn=_n.data[mn],pn=yn<=0,pn!==!1);mn+=4);return _n=null,pn},parsePreserveAspectRatioAttribute:function(nn){var cn="meet",hn="Mid",sn="Mid",pn=nn.split(" "),mn;return pn&&pn.length&&(cn=pn.pop(),cn!=="meet"&&cn!=="slice"?(mn=cn,cn="meet"):pn.length&&(mn=pn.pop())),hn=mn!=="none"?mn.slice(1,4):"none",sn=mn!=="none"?mn.slice(5,8):"none",{meetOrSlice:cn,alignX:hn,alignY:sn}},clearFabricFontCache:function(nn){nn=(nn||"").toLowerCase(),nn?e.charWidthsCache[nn]&&delete e.charWidthsCache[nn]:e.charWidthsCache={}},limitDimsByArea:function(nn,cn){var hn=Math.sqrt(cn*nn),sn=Math.floor(cn/hn);return{x:Math.floor(hn),y:sn}},capValue:function(nn,cn,hn){return Math.max(nn,Math.min(cn,hn))},findScaleToFit:function(nn,cn){return Math.min(cn.width/nn.width,cn.height/nn.height)},findScaleToCover:function(nn,cn){return Math.max(cn.width/nn.width,cn.height/nn.height)},matrixToSVG:function(nn){return"matrix("+nn.map(function(cn){return e.util.toFixed(cn,e.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(nn,cn){var hn=e.util.invertTransform(cn),sn=e.util.multiplyTransformMatrices(hn,nn.calcOwnMatrix());e.util.applyTransformToObject(nn,sn)},addTransformToObject:function(nn,cn){e.util.applyTransformToObject(nn,e.util.multiplyTransformMatrices(cn,nn.calcOwnMatrix()))},applyTransformToObject:function(nn,cn){var hn=e.util.qrDecompose(cn),sn=new e.Point(hn.translateX,hn.translateY);nn.flipX=!1,nn.flipY=!1,nn.set("scaleX",hn.scaleX),nn.set("scaleY",hn.scaleY),nn.skewX=hn.skewX,nn.skewY=hn.skewY,nn.angle=hn.angle,nn.setPositionByOrigin(sn,"center","center")},sizeAfterTransform:function(nn,cn,hn){var sn=nn/2,pn=cn/2,mn=[{x:-sn,y:-pn},{x:sn,y:-pn},{x:-sn,y:pn},{x:sn,y:pn}],yn=e.util.calcDimensionsMatrix(hn),_n=e.util.makeBoundingBoxFromPoints(mn,yn);return{x:_n.width,y:_n.height}}}}(St),function(){var fn=Array.prototype.join,en={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},on={m:"l",M:"L"};function dn(Yn,Tn,An,wn,En,Nn,Fn,Un,Gn,er,On){var Bn=e.util.cos(Yn),$n=e.util.sin(Yn),qn=e.util.cos(Tn),zn=e.util.sin(Tn),jn=An*En*qn-wn*Nn*zn+Fn,ur=wn*En*qn+An*Nn*zn+Un,gr=er+Gn*(-An*En*$n-wn*Nn*Bn),ar=On+Gn*(-wn*En*$n+An*Nn*Bn),vr=jn+Gn*(An*En*zn+wn*Nn*qn),dr=ur+Gn*(wn*En*zn-An*Nn*qn);return["C",gr,ar,vr,dr,jn,ur]}function rn(Yn,Tn,An,wn,En,Nn,Fn){var Un=Math.PI,Gn=Fn*Un/180,er=e.util.sin(Gn),On=e.util.cos(Gn),Bn=0,$n=0;An=Math.abs(An),wn=Math.abs(wn);var qn=-On*Yn*.5-er*Tn*.5,zn=-On*Tn*.5+er*Yn*.5,jn=An*An,ur=wn*wn,gr=zn*zn,ar=qn*qn,vr=jn*ur-jn*gr-ur*ar,dr=0;if(vr<0){var hr=Math.sqrt(1-vr/(jn*ur));An*=hr,wn*=hr}else dr=(En===Nn?-1:1)*Math.sqrt(vr/(jn*gr+ur*ar));var _r=dr*An*zn/wn,or=-dr*wn*qn/An,Er=On*_r-er*or+Yn*.5,Dr=er*_r+On*or+Tn*.5,Rr=an(1,0,(qn-_r)/An,(zn-or)/wn),Gr=an((qn-_r)/An,(zn-or)/wn,(-qn-_r)/An,(-zn-or)/wn);Nn===0&&Gr>0?Gr-=2*Un:Nn===1&&Gr<0&&(Gr+=2*Un);for(var Ir=Math.ceil(Math.abs(Gr/Un*2)),ts=[],zr=Gr/Ir,ws=8/3*Math.sin(zr/4)*Math.sin(zr/4)/Math.sin(zr/2),es=Rr+zr,ps=0;ps<Ir;ps++)ts[ps]=dn(Rr,es,On,er,An,wn,Er,Dr,ws,Bn,$n),Bn=ts[ps][5],$n=ts[ps][6],Rr=es,es+=zr;return ts}function an(Yn,Tn,An,wn){var En=Math.atan2(Tn,Yn),Nn=Math.atan2(wn,An);return Nn>=En?Nn-En:2*Math.PI-(En-Nn)}function nn(Yn,Tn,An,wn,En,Nn,Fn,Un){var Gn;if(e.cachesBoundsOfCurve&&(Gn=fn.call(arguments),e.boundsOfCurveCache[Gn]))return e.boundsOfCurveCache[Gn];var er=Math.sqrt,On=Math.min,Bn=Math.max,$n=Math.abs,qn=[],zn=[[],[]],jn,ur,gr,ar,vr,dr,hr,_r;ur=6*Yn-12*An+6*En,jn=-3*Yn+9*An-9*En+3*Fn,gr=3*An-3*Yn;for(var or=0;or<2;++or){if(or>0&&(ur=6*Tn-12*wn+6*Nn,jn=-3*Tn+9*wn-9*Nn+3*Un,gr=3*wn-3*Tn),$n(jn)<1e-12){if($n(ur)<1e-12)continue;ar=-gr/ur,0<ar&&ar<1&&qn.push(ar);continue}hr=ur*ur-4*gr*jn,!(hr<0)&&(_r=er(hr),vr=(-ur+_r)/(2*jn),0<vr&&vr<1&&qn.push(vr),dr=(-ur-_r)/(2*jn),0<dr&&dr<1&&qn.push(dr))}for(var Er,Dr,Rr=qn.length,Gr=Rr,Ir;Rr--;)ar=qn[Rr],Ir=1-ar,Er=Ir*Ir*Ir*Yn+3*Ir*Ir*ar*An+3*Ir*ar*ar*En+ar*ar*ar*Fn,zn[0][Rr]=Er,Dr=Ir*Ir*Ir*Tn+3*Ir*Ir*ar*wn+3*Ir*ar*ar*Nn+ar*ar*ar*Un,zn[1][Rr]=Dr;zn[0][Gr]=Yn,zn[1][Gr]=Tn,zn[0][Gr+1]=Fn,zn[1][Gr+1]=Un;var ts=[{x:On.apply(null,zn[0]),y:On.apply(null,zn[1])},{x:Bn.apply(null,zn[0]),y:Bn.apply(null,zn[1])}];return e.cachesBoundsOfCurve&&(e.boundsOfCurveCache[Gn]=ts),ts}function cn(Yn,Tn,An){for(var wn=An[1],En=An[2],Nn=An[3],Fn=An[4],Un=An[5],Gn=An[6],er=An[7],On=rn(Gn-Yn,er-Tn,wn,En,Fn,Un,Nn),Bn=0,$n=On.length;Bn<$n;Bn++)On[Bn][1]+=Yn,On[Bn][2]+=Tn,On[Bn][3]+=Yn,On[Bn][4]+=Tn,On[Bn][5]+=Yn,On[Bn][6]+=Tn;return On}function hn(Yn){var Tn=0,An=0,wn=Yn.length,En=0,Nn=0,Fn,Un,Gn,er=[],On,Bn,$n;for(Un=0;Un<wn;++Un){switch(Gn=!1,Fn=Yn[Un].slice(0),Fn[0]){case"l":Fn[0]="L",Fn[1]+=Tn,Fn[2]+=An;case"L":Tn=Fn[1],An=Fn[2];break;case"h":Fn[1]+=Tn;case"H":Fn[0]="L",Fn[2]=An,Tn=Fn[1];break;case"v":Fn[1]+=An;case"V":Fn[0]="L",An=Fn[1],Fn[1]=Tn,Fn[2]=An;break;case"m":Fn[0]="M",Fn[1]+=Tn,Fn[2]+=An;case"M":Tn=Fn[1],An=Fn[2],En=Fn[1],Nn=Fn[2];break;case"c":Fn[0]="C",Fn[1]+=Tn,Fn[2]+=An,Fn[3]+=Tn,Fn[4]+=An,Fn[5]+=Tn,Fn[6]+=An;case"C":Bn=Fn[3],$n=Fn[4],Tn=Fn[5],An=Fn[6];break;case"s":Fn[0]="S",Fn[1]+=Tn,Fn[2]+=An,Fn[3]+=Tn,Fn[4]+=An;case"S":On==="C"?(Bn=2*Tn-Bn,$n=2*An-$n):(Bn=Tn,$n=An),Tn=Fn[3],An=Fn[4],Fn[0]="C",Fn[5]=Fn[3],Fn[6]=Fn[4],Fn[3]=Fn[1],Fn[4]=Fn[2],Fn[1]=Bn,Fn[2]=$n,Bn=Fn[3],$n=Fn[4];break;case"q":Fn[0]="Q",Fn[1]+=Tn,Fn[2]+=An,Fn[3]+=Tn,Fn[4]+=An;case"Q":Bn=Fn[1],$n=Fn[2],Tn=Fn[3],An=Fn[4];break;case"t":Fn[0]="T",Fn[1]+=Tn,Fn[2]+=An;case"T":On==="Q"?(Bn=2*Tn-Bn,$n=2*An-$n):(Bn=Tn,$n=An),Fn[0]="Q",Tn=Fn[1],An=Fn[2],Fn[1]=Bn,Fn[2]=$n,Fn[3]=Tn,Fn[4]=An;break;case"a":Fn[0]="A",Fn[6]+=Tn,Fn[7]+=An;case"A":Gn=!0,er=er.concat(cn(Tn,An,Fn)),Tn=Fn[6],An=Fn[7];break;case"z":case"Z":Tn=En,An=Nn;break}Gn||er.push(Fn),On=Fn[0]}return er}function sn(Yn,Tn,An,wn){return Math.sqrt((An-Yn)*(An-Yn)+(wn-Tn)*(wn-Tn))}function pn(Yn){return Yn*Yn*Yn}function mn(Yn){return 3*Yn*Yn*(1-Yn)}function yn(Yn){return 3*Yn*(1-Yn)*(1-Yn)}function _n(Yn){return(1-Yn)*(1-Yn)*(1-Yn)}function xn(Yn,Tn,An,wn,En,Nn,Fn,Un){return function(Gn){var er=pn(Gn),On=mn(Gn),Bn=yn(Gn),$n=_n(Gn);return{x:Fn*er+En*On+An*Bn+Yn*$n,y:Un*er+Nn*On+wn*Bn+Tn*$n}}}function Sn(Yn,Tn,An,wn,En,Nn,Fn,Un){return function(Gn){var er=1-Gn,On=3*er*er*(An-Yn)+6*er*Gn*(En-An)+3*Gn*Gn*(Fn-En),Bn=3*er*er*(wn-Tn)+6*er*Gn*(Nn-wn)+3*Gn*Gn*(Un-Nn);return Math.atan2(Bn,On)}}function Pn(Yn){return Yn*Yn}function Ln(Yn){return 2*Yn*(1-Yn)}function In(Yn){return(1-Yn)*(1-Yn)}function Rn(Yn,Tn,An,wn,En,Nn){return function(Fn){var Un=Pn(Fn),Gn=Ln(Fn),er=In(Fn);return{x:En*Un+An*Gn+Yn*er,y:Nn*Un+wn*Gn+Tn*er}}}function Mn(Yn,Tn,An,wn,En,Nn){return function(Fn){var Un=1-Fn,Gn=2*Un*(An-Yn)+2*Fn*(En-An),er=2*Un*(wn-Tn)+2*Fn*(Nn-wn);return Math.atan2(er,Gn)}}function Hn(Yn,Tn,An){var wn={x:Tn,y:An},En,Nn=0,Fn;for(Fn=1;Fn<=100;Fn+=1)En=Yn(Fn/100),Nn+=sn(wn.x,wn.y,En.x,En.y),wn=En;return Nn}function Qn(Yn,Tn){for(var An=0,wn=0,En=Yn.iterator,Nn={x:Yn.x,y:Yn.y},Fn,Un,Gn=.01,er=Yn.angleFinder,On;wn<Tn&&An<=1&&Gn>1e-4;)Fn=En(An),On=An,Un=sn(Nn.x,Nn.y,Fn.x,Fn.y),Un+wn>Tn?(Gn/=2,An-=Gn):(Nn=Fn,An+=Gn,wn+=Un);return Fn.angle=er(On),Fn}function Kn(Yn){for(var Tn=0,An=Yn.length,wn,En=0,Nn=0,Fn=0,Un=0,Gn=[],er,On,Bn,$n=0;$n<An;$n++){switch(wn=Yn[$n],On={x:En,y:Nn,command:wn[0]},wn[0]){case"M":On.length=0,Fn=En=wn[1],Un=Nn=wn[2];break;case"L":On.length=sn(En,Nn,wn[1],wn[2]),En=wn[1],Nn=wn[2];break;case"C":er=xn(En,Nn,wn[1],wn[2],wn[3],wn[4],wn[5],wn[6]),Bn=Sn(En,Nn,wn[1],wn[2],wn[3],wn[4],wn[5],wn[6]),On.iterator=er,On.angleFinder=Bn,On.length=Hn(er,En,Nn),En=wn[5],Nn=wn[6];break;case"Q":er=Rn(En,Nn,wn[1],wn[2],wn[3],wn[4]),Bn=Mn(En,Nn,wn[1],wn[2],wn[3],wn[4]),On.iterator=er,On.angleFinder=Bn,On.length=Hn(er,En,Nn),En=wn[3],Nn=wn[4];break;case"Z":case"z":On.destX=Fn,On.destY=Un,On.length=sn(En,Nn,Fn,Un),En=Fn,Nn=Un;break}Tn+=On.length,Gn.push(On)}return Gn.push({length:Tn,x:En,y:Nn}),Gn}function nr(Yn,Tn,An){An||(An=Kn(Yn));for(var wn=0;Tn-An[wn].length>0&&wn<An.length-2;)Tn-=An[wn].length,wn++;var En=An[wn],Nn=Tn/En.length,Fn=En.command,Un=Yn[wn],Gn;switch(Fn){case"M":return{x:En.x,y:En.y,angle:0};case"Z":case"z":return Gn=new e.Point(En.x,En.y).lerp(new e.Point(En.destX,En.destY),Nn),Gn.angle=Math.atan2(En.destY-En.y,En.destX-En.x),Gn;case"L":return Gn=new e.Point(En.x,En.y).lerp(new e.Point(Un[1],Un[2]),Nn),Gn.angle=Math.atan2(Un[2]-En.y,Un[1]-En.x),Gn;case"C":return Qn(En,Tn);case"Q":return Qn(En,Tn)}}function Zn(Yn){var Tn=[],An=[],wn,En,Nn=e.rePathCommand,Fn="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",Un="("+Fn+")"+e.commaWsp,Gn="([01])"+e.commaWsp+"?",er=Un+"?"+Un+"?"+Un+Gn+Gn+Un+"?("+Fn+")",On=new RegExp(er,"g"),Bn,$n,qn;if(!Yn||!Yn.match)return Tn;qn=Yn.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var zn=0,jn,ur=qn.length;zn<ur;zn++){wn=qn[zn],$n=wn.slice(1).trim(),An.length=0;var gr=wn.charAt(0);if(jn=[gr],gr.toLowerCase()==="a")for(var ar;ar=On.exec($n);)for(var vr=1;vr<ar.length;vr++)An.push(ar[vr]);else for(;Bn=Nn.exec($n);)An.push(Bn[0]);for(var vr=0,dr=An.length;vr<dr;vr++)En=parseFloat(An[vr]),isNaN(En)||jn.push(En);var hr=en[gr.toLowerCase()],_r=on[gr]||gr;if(jn.length-1>hr)for(var or=1,Er=jn.length;or<Er;or+=hr)Tn.push([gr].concat(jn.slice(or,or+hr))),gr=_r;else Tn.push(jn)}return Tn}function ir(Yn,Tn){var An=[],wn,En=new e.Point(Yn[0].x,Yn[0].y),Nn=new e.Point(Yn[1].x,Yn[1].y),Fn=Yn.length,Un=1,Gn=0,er=Fn>2;for(Tn=Tn||0,er&&(Un=Yn[2].x<Nn.x?-1:Yn[2].x===Nn.x?0:1,Gn=Yn[2].y<Nn.y?-1:Yn[2].y===Nn.y?0:1),An.push(["M",En.x-Un*Tn,En.y-Gn*Tn]),wn=1;wn<Fn;wn++){if(!En.eq(Nn)){var On=En.midPointFrom(Nn);An.push(["Q",En.x,En.y,On.x,On.y])}En=Yn[wn],wn+1<Yn.length&&(Nn=Yn[wn+1])}return er&&(Un=En.x>Yn[wn-2].x?1:En.x===Yn[wn-2].x?0:-1,Gn=En.y>Yn[wn-2].y?1:En.y===Yn[wn-2].y?0:-1),An.push(["L",En.x+Un*Tn,En.y+Gn*Tn]),An}function Jn(Yn,Tn,An){return An&&(Tn=e.util.multiplyTransformMatrices(Tn,[1,0,0,1,-An.x,-An.y])),Yn.map(function(wn){for(var En=wn.slice(0),Nn={},Fn=1;Fn<wn.length-1;Fn+=2)Nn.x=wn[Fn],Nn.y=wn[Fn+1],Nn=e.util.transformPoint(Nn,Tn),En[Fn]=Nn.x,En[Fn+1]=Nn.y;return En})}function Vn(Yn,Tn,An,wn,En,Nn,Fn,Un,Gn){for(var er=0,On=0,Bn,$n=[],qn=rn(Un-Yn,Gn-Tn,An,wn,Nn,Fn,En),zn=0,jn=qn.length;zn<jn;zn++)Bn=nn(er,On,qn[zn][1],qn[zn][2],qn[zn][3],qn[zn][4],qn[zn][5],qn[zn][6]),$n.push({x:Bn[0].x+Yn,y:Bn[0].y+Tn}),$n.push({x:Bn[1].x+Yn,y:Bn[1].y+Tn}),er=qn[zn][5],On=qn[zn][6];return $n}function Xn(Yn,Tn,An,wn){wn=wn.slice(0).unshift("X");var En=cn(Tn,An,wn);En.forEach(function(Nn){Yn.bezierCurveTo.apply(Yn,Nn.slice(1))})}e.util.joinPath=function(Yn){return Yn.map(function(Tn){return Tn.join(" ")}).join(" ")},e.util.parsePath=Zn,e.util.makePathSimpler=hn,e.util.getSmoothPathFromPoints=ir,e.util.getPathSegmentsInfo=Kn,e.util.getBoundsOfCurve=nn,e.util.getPointOnPath=nr,e.util.transformPath=Jn,e.util.fromArcToBeizers=cn,e.util.getBoundsOfArc=Vn,e.util.drawArc=Xn}(),function(){var fn=Array.prototype.slice;function en(nn,cn){for(var hn=fn.call(arguments,2),sn=[],pn=0,mn=nn.length;pn<mn;pn++)sn[pn]=hn.length?nn[pn][cn].apply(nn[pn],hn):nn[pn][cn].call(nn[pn]);return sn}function on(nn,cn){return an(nn,cn,function(hn,sn){return hn>=sn})}function dn(nn,cn){return an(nn,cn,function(hn,sn){return hn<sn})}function rn(nn,cn){for(var hn=nn.length;hn--;)nn[hn]=cn;return nn}function an(nn,cn,hn){if(!(!nn||nn.length===0)){var sn=nn.length-1,pn=cn?nn[sn][cn]:nn[sn];if(cn)for(;sn--;)hn(nn[sn][cn],pn)&&(pn=nn[sn][cn]);else for(;sn--;)hn(nn[sn],pn)&&(pn=nn[sn]);return pn}}e.util.array={fill:rn,invoke:en,min:dn,max:on}}(),function(){function fn(on,dn,rn){if(rn)if(!e.isLikelyNode&&dn instanceof Element)on=dn;else if(dn instanceof Array){on=[];for(var an=0,nn=dn.length;an<nn;an++)on[an]=fn({},dn[an],rn)}else if(dn&&typeof dn=="object")for(var cn in dn)cn==="canvas"||cn==="group"?on[cn]=null:dn.hasOwnProperty(cn)&&(on[cn]=fn({},dn[cn],rn));else on=dn;else for(var cn in dn)on[cn]=dn[cn];return on}function en(on,dn){return fn({},on,dn)}e.util.object={extend:fn,clone:en},e.util.object.extend(e.util,e.Observable)}(),function(){function fn(an){return an.replace(/-+(.)?/g,function(nn,cn){return cn?cn.toUpperCase():""})}function en(an,nn){return an.charAt(0).toUpperCase()+(nn?an.slice(1):an.slice(1).toLowerCase())}function on(an){return an.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function dn(an){var nn=0,cn,hn=[];for(nn=0,cn;nn<an.length;nn++)(cn=rn(an,nn))!==!1&&hn.push(cn);return hn}function rn(an,nn){var cn=an.charCodeAt(nn);if(isNaN(cn))return"";if(cn<55296||cn>57343)return an.charAt(nn);if(55296<=cn&&cn<=56319){if(an.length<=nn+1)throw"High surrogate without following low surrogate";var hn=an.charCodeAt(nn+1);if(56320>hn||hn>57343)throw"High surrogate without following low surrogate";return an.charAt(nn)+an.charAt(nn+1)}if(nn===0)throw"Low surrogate without preceding high surrogate";var sn=an.charCodeAt(nn-1);if(55296>sn||sn>56319)throw"Low surrogate without preceding high surrogate";return!1}e.util.string={camelize:fn,capitalize:en,escapeXml:on,graphemeSplit:dn}}(),function(){var fn=Array.prototype.slice,en=function(){},on=function(){for(var cn in{toString:1})if(cn==="toString")return!1;return!0}(),dn=function(cn,hn,sn){for(var pn in hn)pn in cn.prototype&&typeof cn.prototype[pn]=="function"&&(hn[pn]+"").indexOf("callSuper")>-1?cn.prototype[pn]=function(mn){return function(){var yn=this.constructor.superclass;this.constructor.superclass=sn;var _n=hn[mn].apply(this,arguments);if(this.constructor.superclass=yn,mn!=="initialize")return _n}}(pn):cn.prototype[pn]=hn[pn],on&&(hn.toString!==Object.prototype.toString&&(cn.prototype.toString=hn.toString),hn.valueOf!==Object.prototype.valueOf&&(cn.prototype.valueOf=hn.valueOf))};function rn(){}function an(cn){for(var hn=null,sn=this;sn.constructor.superclass;){var pn=sn.constructor.superclass.prototype[cn];if(sn[cn]!==pn){hn=pn;break}sn=sn.constructor.superclass.prototype}return hn?arguments.length>1?hn.apply(this,fn.call(arguments,1)):hn.call(this):console.log("tried to callSuper "+cn+", method not found in prototype chain",this)}function nn(){var cn=null,hn=fn.call(arguments,0);typeof hn[0]=="function"&&(cn=hn.shift());function sn(){this.initialize.apply(this,arguments)}sn.superclass=cn,sn.subclasses=[],cn&&(rn.prototype=cn.prototype,sn.prototype=new rn,cn.subclasses.push(sn));for(var pn=0,mn=hn.length;pn<mn;pn++)dn(sn,hn[pn],cn);return sn.prototype.initialize||(sn.prototype.initialize=en),sn.prototype.constructor=sn,sn.prototype.callSuper=an,sn}e.util.createClass=nn}(),function(){var fn=!!e.document.createElement("div").attachEvent,en=["touchstart","touchmove","touchend"];e.util.addListener=function(dn,rn,an,nn){dn&&dn.addEventListener(rn,an,fn?!1:nn)},e.util.removeListener=function(dn,rn,an,nn){dn&&dn.removeEventListener(rn,an,fn?!1:nn)};function on(dn){var rn=dn.changedTouches;return rn&&rn[0]?rn[0]:dn}e.util.getPointer=function(dn){var rn=dn.target,an=e.util.getScrollLeftTop(rn),nn=on(dn);return{x:nn.clientX+an.left,y:nn.clientY+an.top}},e.util.isTouchEvent=function(dn){return en.indexOf(dn.type)>-1||dn.pointerType==="touch"}}(),function(){function fn(nn,cn){var hn=nn.style;if(!hn)return nn;if(typeof cn=="string")return nn.style.cssText+=";"+cn,cn.indexOf("opacity")>-1?an(nn,cn.match(/opacity:\s*(\d?\.?\d*)/)[1]):nn;for(var sn in cn)if(sn==="opacity")an(nn,cn[sn]);else{var pn=sn==="float"||sn==="cssFloat"?typeof hn.styleFloat>"u"?"cssFloat":"styleFloat":sn;hn[pn]=cn[sn]}return nn}var en=e.document.createElement("div"),on=typeof en.style.opacity=="string",dn=typeof en.style.filter=="string",rn=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,an=function(nn){return nn};on?an=function(nn,cn){return nn.style.opacity=cn,nn}:dn&&(an=function(nn,cn){var hn=nn.style;return nn.currentStyle&&!nn.currentStyle.hasLayout&&(hn.zoom=1),rn.test(hn.filter)?(cn=cn>=.9999?"":"alpha(opacity="+cn*100+")",hn.filter=hn.filter.replace(rn,cn)):hn.filter+=" alpha(opacity="+cn*100+")",nn}),e.util.setStyle=fn}(),function(){var fn=Array.prototype.slice;function en(_n){return typeof _n=="string"?e.document.getElementById(_n):_n}var on,dn=function(_n){return fn.call(_n,0)};try{on=dn(e.document.childNodes)instanceof Array}catch{}on||(dn=function(_n){for(var xn=new Array(_n.length),Sn=_n.length;Sn--;)xn[Sn]=_n[Sn];return xn});function rn(_n,xn){var Sn=e.document.createElement(_n);for(var Pn in xn)Pn==="class"?Sn.className=xn[Pn]:Pn==="for"?Sn.htmlFor=xn[Pn]:Sn.setAttribute(Pn,xn[Pn]);return Sn}function an(_n,xn){_n&&(" "+_n.className+" ").indexOf(" "+xn+" ")===-1&&(_n.className+=(_n.className?" ":"")+xn)}function nn(_n,xn,Sn){return typeof xn=="string"&&(xn=rn(xn,Sn)),_n.parentNode&&_n.parentNode.replaceChild(xn,_n),xn.appendChild(_n),xn}function cn(_n){for(var xn=0,Sn=0,Pn=e.document.documentElement,Ln=e.document.body||{scrollLeft:0,scrollTop:0};_n&&(_n.parentNode||_n.host)&&(_n=_n.parentNode||_n.host,_n===e.document?(xn=Ln.scrollLeft||Pn.scrollLeft||0,Sn=Ln.scrollTop||Pn.scrollTop||0):(xn+=_n.scrollLeft||0,Sn+=_n.scrollTop||0),!(_n.nodeType===1&&_n.style.position==="fixed")););return{left:xn,top:Sn}}function hn(_n){var xn,Sn=_n&&_n.ownerDocument,Pn={left:0,top:0},Ln={left:0,top:0},In,Rn={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!Sn)return Ln;for(var Mn in Rn)Ln[Rn[Mn]]+=parseInt(sn(_n,Mn),10)||0;return xn=Sn.documentElement,typeof _n.getBoundingClientRect<"u"&&(Pn=_n.getBoundingClientRect()),In=cn(_n),{left:Pn.left+In.left-(xn.clientLeft||0)+Ln.left,top:Pn.top+In.top-(xn.clientTop||0)+Ln.top}}var sn;e.document.defaultView&&e.document.defaultView.getComputedStyle?sn=function(_n,xn){var Sn=e.document.defaultView.getComputedStyle(_n,null);return Sn?Sn[xn]:void 0}:sn=function(_n,xn){var Sn=_n.style[xn];return!Sn&&_n.currentStyle&&(Sn=_n.currentStyle[xn]),Sn},function(){var _n=e.document.documentElement.style,xn="userSelect"in _n?"userSelect":"MozUserSelect"in _n?"MozUserSelect":"WebkitUserSelect"in _n?"WebkitUserSelect":"KhtmlUserSelect"in _n?"KhtmlUserSelect":"";function Sn(Ln){return typeof Ln.onselectstart<"u"&&(Ln.onselectstart=e.util.falseFunction),xn?Ln.style[xn]="none":typeof Ln.unselectable=="string"&&(Ln.unselectable="on"),Ln}function Pn(Ln){return typeof Ln.onselectstart<"u"&&(Ln.onselectstart=null),xn?Ln.style[xn]="":typeof Ln.unselectable=="string"&&(Ln.unselectable=""),Ln}e.util.makeElementUnselectable=Sn,e.util.makeElementSelectable=Pn}();function pn(_n){var xn=e.jsdomImplForWrapper(_n);return xn._canvas||xn._image}function mn(_n){if(!!e.isLikelyNode){var xn=e.jsdomImplForWrapper(_n);xn&&(xn._image=null,xn._canvas=null,xn._currentSrc=null,xn._attributes=null,xn._classList=null)}}function yn(_n,xn){_n.imageSmoothingEnabled=_n.imageSmoothingEnabled||_n.webkitImageSmoothingEnabled||_n.mozImageSmoothingEnabled||_n.msImageSmoothingEnabled||_n.oImageSmoothingEnabled,_n.imageSmoothingEnabled=xn}e.util.setImageSmoothing=yn,e.util.getById=en,e.util.toArray=dn,e.util.addClass=an,e.util.makeElement=rn,e.util.wrapElement=nn,e.util.getScrollLeftTop=cn,e.util.getElementOffset=hn,e.util.getNodeCanvas=pn,e.util.cleanUpJsdomNode=mn}(),function(){function fn(dn,rn){return dn+(/\?/.test(dn)?"&":"?")+rn}function en(){}function on(dn,rn){rn||(rn={});var an=rn.method?rn.method.toUpperCase():"GET",nn=rn.onComplete||function(){},cn=new e.window.XMLHttpRequest,hn=rn.body||rn.parameters;return cn.onreadystatechange=function(){cn.readyState===4&&(nn(cn),cn.onreadystatechange=en)},an==="GET"&&(hn=null,typeof rn.parameters=="string"&&(dn=fn(dn,rn.parameters))),cn.open(an,dn,!0),(an==="POST"||an==="PUT")&&cn.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),cn.send(hn),cn}e.util.request=on}(),e.log=console.log,e.warn=console.warn,function(){function fn(){return!1}function en(cn,hn,sn,pn){return-sn*Math.cos(cn/pn*(Math.PI/2))+sn+hn}function on(cn){var hn=!1;return an(function(sn){cn||(cn={});var pn=sn||+new Date,mn=cn.duration||500,yn=pn+mn,_n,xn=cn.onChange||fn,Sn=cn.abort||fn,Pn=cn.onComplete||fn,Ln=cn.easing||en,In="startValue"in cn?cn.startValue:0,Rn="endValue"in cn?cn.endValue:100,Mn=cn.byValue||Rn-In;cn.onStart&&cn.onStart(),function Hn(Qn){_n=Qn||+new Date;var Kn=_n>yn?mn:_n-pn,nr=Kn/mn,Zn=Ln(Kn,In,Mn,mn),ir=Math.abs((Zn-In)/Mn);if(!hn){if(Sn(Zn,ir,nr)){Pn(Rn,1,1);return}if(_n>yn){xn(Rn,1,1),Pn(Rn,1,1);return}else xn(Zn,ir,nr),an(Hn)}}(pn)}),function(){hn=!0}}var dn=e.window.requestAnimationFrame||e.window.webkitRequestAnimationFrame||e.window.mozRequestAnimationFrame||e.window.oRequestAnimationFrame||e.window.msRequestAnimationFrame||function(cn){return e.window.setTimeout(cn,1e3/60)},rn=e.window.cancelAnimationFrame||e.window.clearTimeout;function an(){return dn.apply(e.window,arguments)}function nn(){return rn.apply(e.window,arguments)}e.util.animate=on,e.util.requestAnimFrame=an,e.util.cancelAnimFrame=nn}(),function(){function fn(on,dn,rn){var an="rgba("+parseInt(on[0]+rn*(dn[0]-on[0]),10)+","+parseInt(on[1]+rn*(dn[1]-on[1]),10)+","+parseInt(on[2]+rn*(dn[2]-on[2]),10);return an+=","+(on&&dn?parseFloat(on[3]+rn*(dn[3]-on[3])):1),an+=")",an}function en(on,dn,rn,an){var nn=new e.Color(on).getSource(),cn=new e.Color(dn).getSource(),hn=an.onComplete,sn=an.onChange;return an=an||{},e.util.animate(e.util.object.extend(an,{duration:rn||500,startValue:nn,endValue:cn,byValue:cn,easing:function(pn,mn,yn,_n){var xn=an.colorEasing?an.colorEasing(pn,_n):1-Math.cos(pn/_n*(Math.PI/2));return fn(mn,yn,xn)},onComplete:function(pn,mn,yn){if(hn)return hn(fn(cn,cn,0),mn,yn)},onChange:function(pn,mn,yn){if(sn){if(Array.isArray(pn))return sn(fn(pn,pn,0),mn,yn);sn(pn,mn,yn)}}}))}e.util.animateColor=en}(),function(){function fn(Vn,Xn,Yn,Tn){return Vn<Math.abs(Xn)?(Vn=Xn,Tn=Yn/4):Xn===0&&Vn===0?Tn=Yn/(2*Math.PI)*Math.asin(1):Tn=Yn/(2*Math.PI)*Math.asin(Xn/Vn),{a:Vn,c:Xn,p:Yn,s:Tn}}function en(Vn,Xn,Yn){return Vn.a*Math.pow(2,10*(Xn-=1))*Math.sin((Xn*Yn-Vn.s)*(2*Math.PI)/Vn.p)}function on(Vn,Xn,Yn,Tn){return Yn*((Vn=Vn/Tn-1)*Vn*Vn+1)+Xn}function dn(Vn,Xn,Yn,Tn){return Vn/=Tn/2,Vn<1?Yn/2*Vn*Vn*Vn+Xn:Yn/2*((Vn-=2)*Vn*Vn+2)+Xn}function rn(Vn,Xn,Yn,Tn){return Yn*(Vn/=Tn)*Vn*Vn*Vn+Xn}function an(Vn,Xn,Yn,Tn){return-Yn*((Vn=Vn/Tn-1)*Vn*Vn*Vn-1)+Xn}function nn(Vn,Xn,Yn,Tn){return Vn/=Tn/2,Vn<1?Yn/2*Vn*Vn*Vn*Vn+Xn:-Yn/2*((Vn-=2)*Vn*Vn*Vn-2)+Xn}function cn(Vn,Xn,Yn,Tn){return Yn*(Vn/=Tn)*Vn*Vn*Vn*Vn+Xn}function hn(Vn,Xn,Yn,Tn){return Yn*((Vn=Vn/Tn-1)*Vn*Vn*Vn*Vn+1)+Xn}function sn(Vn,Xn,Yn,Tn){return Vn/=Tn/2,Vn<1?Yn/2*Vn*Vn*Vn*Vn*Vn+Xn:Yn/2*((Vn-=2)*Vn*Vn*Vn*Vn+2)+Xn}function pn(Vn,Xn,Yn,Tn){return-Yn*Math.cos(Vn/Tn*(Math.PI/2))+Yn+Xn}function mn(Vn,Xn,Yn,Tn){return Yn*Math.sin(Vn/Tn*(Math.PI/2))+Xn}function yn(Vn,Xn,Yn,Tn){return-Yn/2*(Math.cos(Math.PI*Vn/Tn)-1)+Xn}function _n(Vn,Xn,Yn,Tn){return Vn===0?Xn:Yn*Math.pow(2,10*(Vn/Tn-1))+Xn}function xn(Vn,Xn,Yn,Tn){return Vn===Tn?Xn+Yn:Yn*(-Math.pow(2,-10*Vn/Tn)+1)+Xn}function Sn(Vn,Xn,Yn,Tn){return Vn===0?Xn:Vn===Tn?Xn+Yn:(Vn/=Tn/2,Vn<1?Yn/2*Math.pow(2,10*(Vn-1))+Xn:Yn/2*(-Math.pow(2,-10*--Vn)+2)+Xn)}function Pn(Vn,Xn,Yn,Tn){return-Yn*(Math.sqrt(1-(Vn/=Tn)*Vn)-1)+Xn}function Ln(Vn,Xn,Yn,Tn){return Yn*Math.sqrt(1-(Vn=Vn/Tn-1)*Vn)+Xn}function In(Vn,Xn,Yn,Tn){return Vn/=Tn/2,Vn<1?-Yn/2*(Math.sqrt(1-Vn*Vn)-1)+Xn:Yn/2*(Math.sqrt(1-(Vn-=2)*Vn)+1)+Xn}function Rn(Vn,Xn,Yn,Tn){var An=1.70158,wn=0,En=Yn;if(Vn===0)return Xn;if(Vn/=Tn,Vn===1)return Xn+Yn;wn||(wn=Tn*.3);var Nn=fn(En,Yn,wn,An);return-en(Nn,Vn,Tn)+Xn}function Mn(Vn,Xn,Yn,Tn){var An=1.70158,wn=0,En=Yn;if(Vn===0)return Xn;if(Vn/=Tn,Vn===1)return Xn+Yn;wn||(wn=Tn*.3);var Nn=fn(En,Yn,wn,An);return Nn.a*Math.pow(2,-10*Vn)*Math.sin((Vn*Tn-Nn.s)*(2*Math.PI)/Nn.p)+Nn.c+Xn}function Hn(Vn,Xn,Yn,Tn){var An=1.70158,wn=0,En=Yn;if(Vn===0)return Xn;if(Vn/=Tn/2,Vn===2)return Xn+Yn;wn||(wn=Tn*(.3*1.5));var Nn=fn(En,Yn,wn,An);return Vn<1?-.5*en(Nn,Vn,Tn)+Xn:Nn.a*Math.pow(2,-10*(Vn-=1))*Math.sin((Vn*Tn-Nn.s)*(2*Math.PI)/Nn.p)*.5+Nn.c+Xn}function Qn(Vn,Xn,Yn,Tn,An){return An===void 0&&(An=1.70158),Yn*(Vn/=Tn)*Vn*((An+1)*Vn-An)+Xn}function Kn(Vn,Xn,Yn,Tn,An){return An===void 0&&(An=1.70158),Yn*((Vn=Vn/Tn-1)*Vn*((An+1)*Vn+An)+1)+Xn}function nr(Vn,Xn,Yn,Tn,An){return An===void 0&&(An=1.70158),Vn/=Tn/2,Vn<1?Yn/2*(Vn*Vn*(((An*=1.525)+1)*Vn-An))+Xn:Yn/2*((Vn-=2)*Vn*(((An*=1.525)+1)*Vn+An)+2)+Xn}function Zn(Vn,Xn,Yn,Tn){return Yn-ir(Tn-Vn,0,Yn,Tn)+Xn}function ir(Vn,Xn,Yn,Tn){return(Vn/=Tn)<1/2.75?Yn*(7.5625*Vn*Vn)+Xn:Vn<2/2.75?Yn*(7.5625*(Vn-=1.5/2.75)*Vn+.75)+Xn:Vn<2.5/2.75?Yn*(7.5625*(Vn-=2.25/2.75)*Vn+.9375)+Xn:Yn*(7.5625*(Vn-=2.625/2.75)*Vn+.984375)+Xn}function Jn(Vn,Xn,Yn,Tn){return Vn<Tn/2?Zn(Vn*2,0,Yn,Tn)*.5+Xn:ir(Vn*2-Tn,0,Yn,Tn)*.5+Yn*.5+Xn}e.util.ease={easeInQuad:function(Vn,Xn,Yn,Tn){return Yn*(Vn/=Tn)*Vn+Xn},easeOutQuad:function(Vn,Xn,Yn,Tn){return-Yn*(Vn/=Tn)*(Vn-2)+Xn},easeInOutQuad:function(Vn,Xn,Yn,Tn){return Vn/=Tn/2,Vn<1?Yn/2*Vn*Vn+Xn:-Yn/2*(--Vn*(Vn-2)-1)+Xn},easeInCubic:function(Vn,Xn,Yn,Tn){return Yn*(Vn/=Tn)*Vn*Vn+Xn},easeOutCubic:on,easeInOutCubic:dn,easeInQuart:rn,easeOutQuart:an,easeInOutQuart:nn,easeInQuint:cn,easeOutQuint:hn,easeInOutQuint:sn,easeInSine:pn,easeOutSine:mn,easeInOutSine:yn,easeInExpo:_n,easeOutExpo:xn,easeInOutExpo:Sn,easeInCirc:Pn,easeOutCirc:Ln,easeInOutCirc:In,easeInElastic:Rn,easeOutElastic:Mn,easeInOutElastic:Hn,easeInBack:Qn,easeOutBack:Kn,easeInOutBack:nr,easeInBounce:Zn,easeOutBounce:ir,easeInOutBounce:Jn}}(),function(fn){var en=fn.fabric||(fn.fabric={}),on=en.util.object.extend,dn=en.util.object.clone,rn=en.util.toFixed,an=en.util.parseUnit,nn=en.util.multiplyTransformMatrices,cn=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],hn=["symbol","image","marker","pattern","view","svg"],sn=["pattern","defs","symbol","metadata","clipPath","mask","desc"],pn=["symbol","g","a","svg","clipPath","defs"],mn={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},yn={stroke:"strokeOpacity",fill:"fillOpacity"},_n="font-size",xn="clip-path";en.svgValidTagNamesRegEx=Ln(cn),en.svgViewBoxElementsRegEx=Ln(hn),en.svgInvalidAncestorsRegEx=Ln(sn),en.svgValidParentsRegEx=Ln(pn),en.cssRules={},en.gradientDefs={},en.clipPaths={};function Sn(wn){return wn in mn?mn[wn]:wn}function Pn(wn,En,Nn,Fn){var Un=Object.prototype.toString.call(En)==="[object Array]",Gn;if((wn==="fill"||wn==="stroke")&&En==="none")En="";else{if(wn==="strokeUniform")return En==="non-scaling-stroke";if(wn==="strokeDashArray")En==="none"?En=null:En=En.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(wn==="transformMatrix")Nn&&Nn.transformMatrix?En=nn(Nn.transformMatrix,en.parseTransformAttribute(En)):En=en.parseTransformAttribute(En);else if(wn==="visible")En=En!=="none"&&En!=="hidden",Nn&&Nn.visible===!1&&(En=!1);else if(wn==="opacity")En=parseFloat(En),Nn&&typeof Nn.opacity<"u"&&(En*=Nn.opacity);else if(wn==="textAnchor")En=En==="start"?"left":En==="end"?"right":"center";else if(wn==="charSpacing")Gn=an(En,Fn)/Fn*1e3;else if(wn==="paintFirst"){var er=En.indexOf("fill"),On=En.indexOf("stroke"),En="fill";(er>-1&&On>-1&&On<er||er===-1&&On>-1)&&(En="stroke")}else{if(wn==="href"||wn==="xlink:href"||wn==="font")return En;if(wn==="imageSmoothing")return En==="optimizeQuality";Gn=Un?En.map(an):an(En,Fn)}}return!Un&&isNaN(Gn)?En:Gn}function Ln(wn){return new RegExp("^("+wn.join("|")+")\\b","i")}function In(wn){for(var En in yn)if(!(typeof wn[yn[En]]>"u"||wn[En]==="")){if(typeof wn[En]>"u"){if(!en.Object.prototype[En])continue;wn[En]=en.Object.prototype[En]}if(wn[En].indexOf("url(")!==0){var Nn=new en.Color(wn[En]);wn[En]=Nn.setAlpha(rn(Nn.getAlpha()*wn[yn[En]],2)).toRgba()}}return wn}function Rn(wn,En){var Nn,Fn=[],Un,Gn,er;for(Gn=0,er=En.length;Gn<er;Gn++)Nn=En[Gn],Un=wn.getElementsByTagName(Nn),Fn=Fn.concat(Array.prototype.slice.call(Un));return Fn}en.parseTransformAttribute=function(){function wn(hr,_r){var or=en.util.cos(_r[0]),Er=en.util.sin(_r[0]),Dr=0,Rr=0;_r.length===3&&(Dr=_r[1],Rr=_r[2]),hr[0]=or,hr[1]=Er,hr[2]=-Er,hr[3]=or,hr[4]=Dr-(or*Dr-Er*Rr),hr[5]=Rr-(Er*Dr+or*Rr)}function En(hr,_r){var or=_r[0],Er=_r.length===2?_r[1]:_r[0];hr[0]=or,hr[3]=Er}function Nn(hr,_r,or){hr[or]=Math.tan(en.util.degreesToRadians(_r[0]))}function Fn(hr,_r){hr[4]=_r[0],_r.length===2&&(hr[5]=_r[1])}var Un=en.iMatrix,Gn=en.reNum,er=en.commaWsp,On="(?:(skewX)\\s*\\(\\s*("+Gn+")\\s*\\))",Bn="(?:(skewY)\\s*\\(\\s*("+Gn+")\\s*\\))",$n="(?:(rotate)\\s*\\(\\s*("+Gn+")(?:"+er+"("+Gn+")"+er+"("+Gn+"))?\\s*\\))",qn="(?:(scale)\\s*\\(\\s*("+Gn+")(?:"+er+"("+Gn+"))?\\s*\\))",zn="(?:(translate)\\s*\\(\\s*("+Gn+")(?:"+er+"("+Gn+"))?\\s*\\))",jn="(?:(matrix)\\s*\\(\\s*("+Gn+")"+er+"("+Gn+")"+er+"("+Gn+")"+er+"("+Gn+")"+er+"("+Gn+")"+er+"("+Gn+")\\s*\\))",ur="(?:"+jn+"|"+zn+"|"+qn+"|"+$n+"|"+On+"|"+Bn+")",gr="(?:"+ur+"(?:"+er+"*"+ur+")*)",ar="^\\s*(?:"+gr+"?)\\s*$",vr=new RegExp(ar),dr=new RegExp(ur,"g");return function(hr){var _r=Un.concat(),or=[];if(!hr||hr&&!vr.test(hr))return _r;hr.replace(dr,function(Dr){var Rr=new RegExp(ur).exec(Dr).filter(function(ts){return!!ts}),Gr=Rr[1],Ir=Rr.slice(2).map(parseFloat);switch(Gr){case"translate":Fn(_r,Ir);break;case"rotate":Ir[0]=en.util.degreesToRadians(Ir[0]),wn(_r,Ir);break;case"scale":En(_r,Ir);break;case"skewX":Nn(_r,Ir,2);break;case"skewY":Nn(_r,Ir,1);break;case"matrix":_r=Ir;break}or.push(_r.concat()),_r=Un.concat()});for(var Er=or[0];or.length>1;)or.shift(),Er=en.util.multiplyTransformMatrices(Er,or[0]);return Er}}();function Mn(wn,En){var Nn,Fn;wn.replace(/;\s*$/,"").split(";").forEach(function(Un){var Gn=Un.split(":");Nn=Gn[0].trim().toLowerCase(),Fn=Gn[1].trim(),En[Nn]=Fn})}function Hn(wn,En){var Nn,Fn;for(var Un in wn)typeof wn[Un]>"u"||(Nn=Un.toLowerCase(),Fn=wn[Un],En[Nn]=Fn)}function Qn(wn,En){var Nn={};for(var Fn in en.cssRules[En])if(Kn(wn,Fn.split(" ")))for(var Un in en.cssRules[En][Fn])Nn[Un]=en.cssRules[En][Fn][Un];return Nn}function Kn(wn,En){var Nn,Fn=!0;return Nn=Zn(wn,En.pop()),Nn&&En.length&&(Fn=nr(wn,En)),Nn&&Fn&&En.length===0}function nr(wn,En){for(var Nn,Fn=!0;wn.parentNode&&wn.parentNode.nodeType===1&&En.length;)Fn&&(Nn=En.pop()),wn=wn.parentNode,Fn=Zn(wn,Nn);return En.length===0}function Zn(wn,En){var Nn=wn.nodeName,Fn=wn.getAttribute("class"),Un=wn.getAttribute("id"),Gn,er;if(Gn=new RegExp("^"+Nn,"i"),En=En.replace(Gn,""),Un&&En.length&&(Gn=new RegExp("#"+Un+"(?![a-zA-Z\\-]+)","i"),En=En.replace(Gn,"")),Fn&&En.length)for(Fn=Fn.split(" "),er=Fn.length;er--;)Gn=new RegExp("\\."+Fn[er]+"(?![a-zA-Z\\-]+)","i"),En=En.replace(Gn,"");return En.length===0}function ir(wn,En){var Nn;if(wn.getElementById&&(Nn=wn.getElementById(En)),Nn)return Nn;var Fn,Un,Gn,er=wn.getElementsByTagName("*");for(Un=0,Gn=er.length;Un<Gn;Un++)if(Fn=er[Un],En===Fn.getAttribute("id"))return Fn}function Jn(wn){for(var En=Rn(wn,["use","svg:use"]),Nn=0;En.length&&Nn<En.length;){var Fn=En[Nn],Un=Fn.getAttribute("xlink:href")||Fn.getAttribute("href");if(Un===null)return;var Gn=Un.substr(1),er=Fn.getAttribute("x")||0,On=Fn.getAttribute("y")||0,Bn=ir(wn,Gn).cloneNode(!0),$n=(Bn.getAttribute("transform")||"")+" translate("+er+", "+On+")",qn,zn=En.length,jn,ur,gr,ar,vr=en.svgNS;if(Xn(Bn),/^svg$/i.test(Bn.nodeName)){var dr=Bn.ownerDocument.createElementNS(vr,"g");for(ur=0,gr=Bn.attributes,ar=gr.length;ur<ar;ur++)jn=gr.item(ur),dr.setAttributeNS(vr,jn.nodeName,jn.nodeValue);for(;Bn.firstChild;)dr.appendChild(Bn.firstChild);Bn=dr}for(ur=0,gr=Fn.attributes,ar=gr.length;ur<ar;ur++)jn=gr.item(ur),!(jn.nodeName==="x"||jn.nodeName==="y"||jn.nodeName==="xlink:href"||jn.nodeName==="href")&&(jn.nodeName==="transform"?$n=jn.nodeValue+" "+$n:Bn.setAttribute(jn.nodeName,jn.nodeValue));Bn.setAttribute("transform",$n),Bn.setAttribute("instantiated_by_use","1"),Bn.removeAttribute("id"),qn=Fn.parentNode,qn.replaceChild(Bn,Fn),En.length===zn&&Nn++}}var Vn=new RegExp("^\\s*("+en.reNum+"+)\\s*,?\\s*("+en.reNum+"+)\\s*,?\\s*("+en.reNum+"+)\\s*,?\\s*("+en.reNum+"+)\\s*$");function Xn(wn){if(!en.svgViewBoxElementsRegEx.test(wn.nodeName))return{};var En=wn.getAttribute("viewBox"),Nn=1,Fn=1,Un=0,Gn=0,er,On,Bn,$n,qn=wn.getAttribute("width"),zn=wn.getAttribute("height"),jn=wn.getAttribute("x")||0,ur=wn.getAttribute("y")||0,gr=wn.getAttribute("preserveAspectRatio")||"",ar=!En||!(En=En.match(Vn)),vr=!qn||!zn||qn==="100%"||zn==="100%",dr=ar&&vr,hr={},_r="",or=0,Er=0;if(hr.width=0,hr.height=0,hr.toBeParsed=dr,ar&&(jn||ur)&&wn.parentNode&&wn.parentNode.nodeName!=="#document"&&(_r=" translate("+an(jn)+" "+an(ur)+") ",Bn=(wn.getAttribute("transform")||"")+_r,wn.setAttribute("transform",Bn),wn.removeAttribute("x"),wn.removeAttribute("y")),dr)return hr;if(ar)return hr.width=an(qn),hr.height=an(zn),hr;if(Un=-parseFloat(En[1]),Gn=-parseFloat(En[2]),er=parseFloat(En[3]),On=parseFloat(En[4]),hr.minX=Un,hr.minY=Gn,hr.viewBoxWidth=er,hr.viewBoxHeight=On,vr?(hr.width=er,hr.height=On):(hr.width=an(qn),hr.height=an(zn),Nn=hr.width/er,Fn=hr.height/On),gr=en.util.parsePreserveAspectRatioAttribute(gr),gr.alignX!=="none"&&(gr.meetOrSlice==="meet"&&(Fn=Nn=Nn>Fn?Fn:Nn),gr.meetOrSlice==="slice"&&(Fn=Nn=Nn>Fn?Nn:Fn),or=hr.width-er*Nn,Er=hr.height-On*Nn,gr.alignX==="Mid"&&(or/=2),gr.alignY==="Mid"&&(Er/=2),gr.alignX==="Min"&&(or=0),gr.alignY==="Min"&&(Er=0)),Nn===1&&Fn===1&&Un===0&&Gn===0&&jn===0&&ur===0)return hr;if((jn||ur)&&wn.parentNode.nodeName!=="#document"&&(_r=" translate("+an(jn)+" "+an(ur)+") "),Bn=_r+" matrix("+Nn+" 0 0 "+Fn+" "+(Un*Nn+or)+" "+(Gn*Fn+Er)+") ",wn.nodeName==="svg"){for($n=wn.ownerDocument.createElementNS(en.svgNS,"g");wn.firstChild;)$n.appendChild(wn.firstChild);wn.appendChild($n)}else $n=wn,$n.removeAttribute("x"),$n.removeAttribute("y"),Bn=$n.getAttribute("transform")+Bn;return $n.setAttribute("transform",Bn),hr}function Yn(wn,En){for(;wn&&(wn=wn.parentNode);)if(wn.nodeName&&En.test(wn.nodeName.replace("svg:",""))&&!wn.getAttribute("instantiated_by_use"))return!0;return!1}en.parseSVGDocument=function(wn,En,Nn,Fn){if(!!wn){Jn(wn);var Un=en.Object.__uid++,Gn,er,On=Xn(wn),Bn=en.util.toArray(wn.getElementsByTagName("*"));if(On.crossOrigin=Fn&&Fn.crossOrigin,On.svgUid=Un,Bn.length===0&&en.isLikelyNode){Bn=wn.selectNodes('//*[name(.)!="svg"]');var $n=[];for(Gn=0,er=Bn.length;Gn<er;Gn++)$n[Gn]=Bn[Gn];Bn=$n}var qn=Bn.filter(function(jn){return Xn(jn),en.svgValidTagNamesRegEx.test(jn.nodeName.replace("svg:",""))&&!Yn(jn,en.svgInvalidAncestorsRegEx)});if(!qn||qn&&!qn.length){En&&En([],{});return}var zn={};Bn.filter(function(jn){return jn.nodeName.replace("svg:","")==="clipPath"}).forEach(function(jn){var ur=jn.getAttribute("id");zn[ur]=en.util.toArray(jn.getElementsByTagName("*")).filter(function(gr){return en.svgValidTagNamesRegEx.test(gr.nodeName.replace("svg:",""))})}),en.gradientDefs[Un]=en.getGradientDefs(wn),en.cssRules[Un]=en.getCSSRules(wn),en.clipPaths[Un]=zn,en.parseElements(qn,function(jn,ur){En&&(En(jn,On,ur,Bn),delete en.gradientDefs[Un],delete en.cssRules[Un],delete en.clipPaths[Un])},dn(On),Nn,Fn)}};function Tn(wn,En){var Nn=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],Fn="xlink:href",Un=En.getAttribute(Fn).substr(1),Gn=ir(wn,Un);if(Gn&&Gn.getAttribute(Fn)&&Tn(wn,Gn),Nn.forEach(function(On){Gn&&!En.hasAttribute(On)&&Gn.hasAttribute(On)&&En.setAttribute(On,Gn.getAttribute(On))}),!En.children.length)for(var er=Gn.cloneNode(!0);er.firstChild;)En.appendChild(er.firstChild);En.removeAttribute(Fn)}var An=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+en.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+en.reNum+"))?\\s+(.*)");on(en,{parseFontDeclaration:function(wn,En){var Nn=wn.match(An);if(!!Nn){var Fn=Nn[1],Un=Nn[3],Gn=Nn[4],er=Nn[5],On=Nn[6];Fn&&(En.fontStyle=Fn),Un&&(En.fontWeight=isNaN(parseFloat(Un))?Un:parseFloat(Un)),Gn&&(En.fontSize=an(Gn)),On&&(En.fontFamily=On),er&&(En.lineHeight=er==="normal"?1:er)}},getGradientDefs:function(wn){var En=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],Nn=Rn(wn,En),Fn,Un=0,Gn={};for(Un=Nn.length;Un--;)Fn=Nn[Un],Fn.getAttribute("xlink:href")&&Tn(wn,Fn),Gn[Fn.getAttribute("id")]=Fn;return Gn},parseAttributes:function(wn,En,Nn){if(!!wn){var Fn,Un={},Gn,er;typeof Nn>"u"&&(Nn=wn.getAttribute("svgUid")),wn.parentNode&&en.svgValidParentsRegEx.test(wn.parentNode.nodeName)&&(Un=en.parseAttributes(wn.parentNode,En,Nn));var On=En.reduce(function(gr,ar){return Fn=wn.getAttribute(ar),Fn&&(gr[ar]=Fn),gr},{}),Bn=on(Qn(wn,Nn),en.parseStyleAttribute(wn));On=on(On,Bn),Bn[xn]&&wn.setAttribute(xn,Bn[xn]),Gn=er=Un.fontSize||en.Text.DEFAULT_SVG_FONT_SIZE,On[_n]&&(On[_n]=Gn=an(On[_n],er));var $n,qn,zn={};for(var jn in On)$n=Sn(jn),qn=Pn($n,On[jn],Un,Gn),zn[$n]=qn;zn&&zn.font&&en.parseFontDeclaration(zn.font,zn);var ur=on(Un,zn);return en.svgValidParentsRegEx.test(wn.nodeName)?ur:In(ur)}},parseElements:function(wn,En,Nn,Fn,Un){new en.ElementsParser(wn,En,Nn,Fn,Un).parse()},parseStyleAttribute:function(wn){var En={},Nn=wn.getAttribute("style");return Nn&&(typeof Nn=="string"?Mn(Nn,En):Hn(Nn,En)),En},parsePointsAttribute:function(wn){if(!wn)return null;wn=wn.replace(/,/g," ").trim(),wn=wn.split(/\s+/);var En=[],Nn,Fn;for(Nn=0,Fn=wn.length;Nn<Fn;Nn+=2)En.push({x:parseFloat(wn[Nn]),y:parseFloat(wn[Nn+1])});return En},getCSSRules:function(wn){var En=wn.getElementsByTagName("style"),Nn,Fn,Un={},Gn;for(Nn=0,Fn=En.length;Nn<Fn;Nn++){var er=En[Nn].textContent;er=er.replace(/\/\*[\s\S]*?\*\//g,""),er.trim()!==""&&(Gn=er.match(/[^{]*\{[\s\S]*?\}/g),Gn=Gn.map(function(On){return On.trim()}),Gn.forEach(function(On){var Bn=On.match(/([\s\S]*?)\s*\{([^}]*)\}/),$n={},qn=Bn[2].trim(),zn=qn.replace(/;$/,"").split(/\s*;\s*/);for(Nn=0,Fn=zn.length;Nn<Fn;Nn++){var jn=zn[Nn].split(/\s*:\s*/),ur=jn[0],gr=jn[1];$n[ur]=gr}On=Bn[1],On.split(",").forEach(function(ar){ar=ar.replace(/^svg/i,"").trim(),ar!==""&&(Un[ar]?en.util.object.extend(Un[ar],$n):Un[ar]=en.util.object.clone($n))})}))}return Un},loadSVGFromURL:function(wn,En,Nn,Fn){wn=wn.replace(/^\n\s*/,"").trim(),new en.util.request(wn,{method:"get",onComplete:Un});function Un(Gn){var er=Gn.responseXML;if(!er||!er.documentElement)return En&&En(null),!1;en.parseSVGDocument(er.documentElement,function(On,Bn,$n,qn){En&&En(On,Bn,$n,qn)},Nn,Fn)}},loadSVGFromString:function(wn,En,Nn,Fn){var Un=new en.window.DOMParser,Gn=Un.parseFromString(wn.trim(),"text/xml");en.parseSVGDocument(Gn.documentElement,function(er,On,Bn,$n){En(er,On,Bn,$n)},Nn,Fn)}})}(St),e.ElementsParser=function(fn,en,on,dn,rn,an){this.elements=fn,this.callback=en,this.options=on,this.reviver=dn,this.svgUid=on&&on.svgUid||0,this.parsingOptions=rn,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=an},function(fn){fn.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},fn.createObjects=function(){var en=this;this.elements.forEach(function(on,dn){on.setAttribute("svgUid",en.svgUid),en.createObject(on,dn)})},fn.findTag=function(en){return e[e.util.string.capitalize(en.tagName.replace("svg:",""))]},fn.createObject=function(en,on){var dn=this.findTag(en);if(dn&&dn.fromElement)try{dn.fromElement(en,this.createCallback(on,en),this.options)}catch(rn){e.log(rn)}else this.checkIfDone()},fn.createCallback=function(en,on){var dn=this;return function(rn){var an;dn.resolveGradient(rn,on,"fill"),dn.resolveGradient(rn,on,"stroke"),rn instanceof e.Image&&rn._originalElement&&(an=rn.parsePreserveAspectRatioAttribute(on)),rn._removeTransformMatrix(an),dn.resolveClipPath(rn,on),dn.reviver&&dn.reviver(on,rn),dn.instances[en]=rn,dn.checkIfDone()}},fn.extractPropertyDefinition=function(en,on,dn){var rn=en[on],an=this.regexUrl;if(!!an.test(rn)){an.lastIndex=0;var nn=an.exec(rn)[1];return an.lastIndex=0,e[dn][this.svgUid][nn]}},fn.resolveGradient=function(en,on,dn){var rn=this.extractPropertyDefinition(en,dn,"gradientDefs");if(rn){var an=on.getAttribute(dn+"-opacity"),nn=e.Gradient.fromElement(rn,en,an,this.options);en.set(dn,nn)}},fn.createClipPathCallback=function(en,on){return function(dn){dn._removeTransformMatrix(),dn.fillRule=dn.clipRule,on.push(dn)}},fn.resolveClipPath=function(en,on){var dn=this.extractPropertyDefinition(en,"clipPath","clipPaths"),rn,an,nn,cn,hn,sn;if(dn){cn=[],nn=e.util.invertTransform(en.calcTransformMatrix());for(var pn=dn[0].parentNode,mn=on;mn.parentNode&&mn.getAttribute("clip-path")!==en.clipPath;)mn=mn.parentNode;mn.parentNode.appendChild(pn);for(var yn=0;yn<dn.length;yn++)rn=dn[yn],an=this.findTag(rn),an.fromElement(rn,this.createClipPathCallback(en,cn),this.options);cn.length===1?dn=cn[0]:dn=new e.Group(cn),hn=e.util.multiplyTransformMatrices(nn,dn.calcTransformMatrix()),dn.clipPath&&this.resolveClipPath(dn,mn);var sn=e.util.qrDecompose(hn);dn.flipX=!1,dn.flipY=!1,dn.set("scaleX",sn.scaleX),dn.set("scaleY",sn.scaleY),dn.angle=sn.angle,dn.skewX=sn.skewX,dn.skewY=0,dn.setPositionByOrigin({x:sn.translateX,y:sn.translateY},"center","center"),en.clipPath=dn}else delete en.clipPath},fn.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(en){return en!=null}),this.callback(this.instances,this.elements))}}(e.ElementsParser.prototype),function(fn){var en=fn.fabric||(fn.fabric={});if(en.Point){en.warn("fabric.Point is already defined");return}en.Point=on;function on(dn,rn){this.x=dn,this.y=rn}on.prototype={type:"point",constructor:on,add:function(dn){return new on(this.x+dn.x,this.y+dn.y)},addEquals:function(dn){return this.x+=dn.x,this.y+=dn.y,this},scalarAdd:function(dn){return new on(this.x+dn,this.y+dn)},scalarAddEquals:function(dn){return this.x+=dn,this.y+=dn,this},subtract:function(dn){return new on(this.x-dn.x,this.y-dn.y)},subtractEquals:function(dn){return this.x-=dn.x,this.y-=dn.y,this},scalarSubtract:function(dn){return new on(this.x-dn,this.y-dn)},scalarSubtractEquals:function(dn){return this.x-=dn,this.y-=dn,this},multiply:function(dn){return new on(this.x*dn,this.y*dn)},multiplyEquals:function(dn){return this.x*=dn,this.y*=dn,this},divide:function(dn){return new on(this.x/dn,this.y/dn)},divideEquals:function(dn){return this.x/=dn,this.y/=dn,this},eq:function(dn){return this.x===dn.x&&this.y===dn.y},lt:function(dn){return this.x<dn.x&&this.y<dn.y},lte:function(dn){return this.x<=dn.x&&this.y<=dn.y},gt:function(dn){return this.x>dn.x&&this.y>dn.y},gte:function(dn){return this.x>=dn.x&&this.y>=dn.y},lerp:function(dn,rn){return typeof rn>"u"&&(rn=.5),rn=Math.max(Math.min(1,rn),0),new on(this.x+(dn.x-this.x)*rn,this.y+(dn.y-this.y)*rn)},distanceFrom:function(dn){var rn=this.x-dn.x,an=this.y-dn.y;return Math.sqrt(rn*rn+an*an)},midPointFrom:function(dn){return this.lerp(dn)},min:function(dn){return new on(Math.min(this.x,dn.x),Math.min(this.y,dn.y))},max:function(dn){return new on(Math.max(this.x,dn.x),Math.max(this.y,dn.y))},toString:function(){return this.x+","+this.y},setXY:function(dn,rn){return this.x=dn,this.y=rn,this},setX:function(dn){return this.x=dn,this},setY:function(dn){return this.y=dn,this},setFromPoint:function(dn){return this.x=dn.x,this.y=dn.y,this},swap:function(dn){var rn=this.x,an=this.y;this.x=dn.x,this.y=dn.y,dn.x=rn,dn.y=an},clone:function(){return new on(this.x,this.y)}}}(St),function(fn){var en=fn.fabric||(fn.fabric={});if(en.Intersection){en.warn("fabric.Intersection is already defined");return}function on(dn){this.status=dn,this.points=[]}en.Intersection=on,en.Intersection.prototype={constructor:on,appendPoint:function(dn){return this.points.push(dn),this},appendPoints:function(dn){return this.points=this.points.concat(dn),this}},en.Intersection.intersectLineLine=function(dn,rn,an,nn){var cn,hn=(nn.x-an.x)*(dn.y-an.y)-(nn.y-an.y)*(dn.x-an.x),sn=(rn.x-dn.x)*(dn.y-an.y)-(rn.y-dn.y)*(dn.x-an.x),pn=(nn.y-an.y)*(rn.x-dn.x)-(nn.x-an.x)*(rn.y-dn.y);if(pn!==0){var mn=hn/pn,yn=sn/pn;0<=mn&&mn<=1&&0<=yn&&yn<=1?(cn=new on("Intersection"),cn.appendPoint(new en.Point(dn.x+mn*(rn.x-dn.x),dn.y+mn*(rn.y-dn.y)))):cn=new on}else hn===0||sn===0?cn=new on("Coincident"):cn=new on("Parallel");return cn},en.Intersection.intersectLinePolygon=function(dn,rn,an){var nn=new on,cn=an.length,hn,sn,pn,mn;for(mn=0;mn<cn;mn++)hn=an[mn],sn=an[(mn+1)%cn],pn=on.intersectLineLine(dn,rn,hn,sn),nn.appendPoints(pn.points);return nn.points.length>0&&(nn.status="Intersection"),nn},en.Intersection.intersectPolygonPolygon=function(dn,rn){var an=new on,nn=dn.length,cn;for(cn=0;cn<nn;cn++){var hn=dn[cn],sn=dn[(cn+1)%nn],pn=on.intersectLinePolygon(hn,sn,rn);an.appendPoints(pn.points)}return an.points.length>0&&(an.status="Intersection"),an},en.Intersection.intersectPolygonRectangle=function(dn,rn,an){var nn=rn.min(an),cn=rn.max(an),hn=new en.Point(cn.x,nn.y),sn=new en.Point(nn.x,cn.y),pn=on.intersectLinePolygon(nn,hn,dn),mn=on.intersectLinePolygon(hn,cn,dn),yn=on.intersectLinePolygon(cn,sn,dn),_n=on.intersectLinePolygon(sn,nn,dn),xn=new on;return xn.appendPoints(pn.points),xn.appendPoints(mn.points),xn.appendPoints(yn.points),xn.appendPoints(_n.points),xn.points.length>0&&(xn.status="Intersection"),xn}}(St),function(fn){var en=fn.fabric||(fn.fabric={});if(en.Color){en.warn("fabric.Color is already defined.");return}function on(rn){rn?this._tryParsingColor(rn):this.setSource([0,0,0,1])}en.Color=on,en.Color.prototype={_tryParsingColor:function(rn){var an;rn in on.colorNameMap&&(rn=on.colorNameMap[rn]),rn==="transparent"&&(an=[255,255,255,0]),an||(an=on.sourceFromHex(rn)),an||(an=on.sourceFromRgb(rn)),an||(an=on.sourceFromHsl(rn)),an||(an=[0,0,0,1]),an&&this.setSource(an)},_rgbToHsl:function(rn,an,nn){rn/=255,an/=255,nn/=255;var cn,hn,sn,pn=en.util.array.max([rn,an,nn]),mn=en.util.array.min([rn,an,nn]);if(sn=(pn+mn)/2,pn===mn)cn=hn=0;else{var yn=pn-mn;switch(hn=sn>.5?yn/(2-pn-mn):yn/(pn+mn),pn){case rn:cn=(an-nn)/yn+(an<nn?6:0);break;case an:cn=(nn-rn)/yn+2;break;case nn:cn=(rn-an)/yn+4;break}cn/=6}return[Math.round(cn*360),Math.round(hn*100),Math.round(sn*100)]},getSource:function(){return this._source},setSource:function(rn){this._source=rn},toRgb:function(){var rn=this.getSource();return"rgb("+rn[0]+","+rn[1]+","+rn[2]+")"},toRgba:function(){var rn=this.getSource();return"rgba("+rn[0]+","+rn[1]+","+rn[2]+","+rn[3]+")"},toHsl:function(){var rn=this.getSource(),an=this._rgbToHsl(rn[0],rn[1],rn[2]);return"hsl("+an[0]+","+an[1]+"%,"+an[2]+"%)"},toHsla:function(){var rn=this.getSource(),an=this._rgbToHsl(rn[0],rn[1],rn[2]);return"hsla("+an[0]+","+an[1]+"%,"+an[2]+"%,"+rn[3]+")"},toHex:function(){var rn=this.getSource(),an,nn,cn;return an=rn[0].toString(16),an=an.length===1?"0"+an:an,nn=rn[1].toString(16),nn=nn.length===1?"0"+nn:nn,cn=rn[2].toString(16),cn=cn.length===1?"0"+cn:cn,an.toUpperCase()+nn.toUpperCase()+cn.toUpperCase()},toHexa:function(){var rn=this.getSource(),an;return an=Math.round(rn[3]*255),an=an.toString(16),an=an.length===1?"0"+an:an,this.toHex()+an.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(rn){var an=this.getSource();return an[3]=rn,this.setSource(an),this},toGrayscale:function(){var rn=this.getSource(),an=parseInt((rn[0]*.3+rn[1]*.59+rn[2]*.11).toFixed(0),10),nn=rn[3];return this.setSource([an,an,an,nn]),this},toBlackWhite:function(rn){var an=this.getSource(),nn=(an[0]*.3+an[1]*.59+an[2]*.11).toFixed(0),cn=an[3];return rn=rn||127,nn=Number(nn)<Number(rn)?0:255,this.setSource([nn,nn,nn,cn]),this},overlayWith:function(rn){rn instanceof on||(rn=new on(rn));var an=[],nn=this.getAlpha(),cn=.5,hn=this.getSource(),sn=rn.getSource(),pn;for(pn=0;pn<3;pn++)an.push(Math.round(hn[pn]*(1-cn)+sn[pn]*cn));return an[3]=nn,this.setSource(an),this}},en.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,en.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,en.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,en.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function dn(rn,an,nn){return nn<0&&(nn+=1),nn>1&&(nn-=1),nn<1/6?rn+(an-rn)*6*nn:nn<1/2?an:nn<2/3?rn+(an-rn)*(2/3-nn)*6:rn}en.Color.fromRgb=function(rn){return on.fromSource(on.sourceFromRgb(rn))},en.Color.sourceFromRgb=function(rn){var an=rn.match(on.reRGBa);if(an){var nn=parseInt(an[1],10)/(/%$/.test(an[1])?100:1)*(/%$/.test(an[1])?255:1),cn=parseInt(an[2],10)/(/%$/.test(an[2])?100:1)*(/%$/.test(an[2])?255:1),hn=parseInt(an[3],10)/(/%$/.test(an[3])?100:1)*(/%$/.test(an[3])?255:1);return[parseInt(nn,10),parseInt(cn,10),parseInt(hn,10),an[4]?parseFloat(an[4]):1]}},en.Color.fromRgba=on.fromRgb,en.Color.fromHsl=function(rn){return on.fromSource(on.sourceFromHsl(rn))},en.Color.sourceFromHsl=function(rn){var an=rn.match(on.reHSLa);if(!!an){var nn=(parseFloat(an[1])%360+360)%360/360,cn=parseFloat(an[2])/(/%$/.test(an[2])?100:1),hn=parseFloat(an[3])/(/%$/.test(an[3])?100:1),sn,pn,mn;if(cn===0)sn=pn=mn=hn;else{var yn=hn<=.5?hn*(cn+1):hn+cn-hn*cn,_n=hn*2-yn;sn=dn(_n,yn,nn+1/3),pn=dn(_n,yn,nn),mn=dn(_n,yn,nn-1/3)}return[Math.round(sn*255),Math.round(pn*255),Math.round(mn*255),an[4]?parseFloat(an[4]):1]}},en.Color.fromHsla=on.fromHsl,en.Color.fromHex=function(rn){return on.fromSource(on.sourceFromHex(rn))},en.Color.sourceFromHex=function(rn){if(rn.match(on.reHex)){var an=rn.slice(rn.indexOf("#")+1),nn=an.length===3||an.length===4,cn=an.length===8||an.length===4,hn=nn?an.charAt(0)+an.charAt(0):an.substring(0,2),sn=nn?an.charAt(1)+an.charAt(1):an.substring(2,4),pn=nn?an.charAt(2)+an.charAt(2):an.substring(4,6),mn=cn?nn?an.charAt(3)+an.charAt(3):an.substring(6,8):"FF";return[parseInt(hn,16),parseInt(sn,16),parseInt(pn,16),parseFloat((parseInt(mn,16)/255).toFixed(2))]}},en.Color.fromSource=function(rn){var an=new on;return an.setSource(rn),an}}(St),function(fn){var en=fn.fabric||(fn.fabric={}),on=["e","se","s","sw","w","nw","n","ne","e"],dn=["ns","nesw","ew","nwse"],rn={},an="left",nn="top",cn="right",hn="bottom",sn="center",pn={top:hn,bottom:nn,left:cn,right:an,center:sn},mn=en.util.radiansToDegrees,yn=Math.sign||function($n){return($n>0)-($n<0)||+$n};function _n($n,qn){var zn=$n.angle+mn(Math.atan2(qn.y,qn.x))+360;return Math.round(zn%360/45)}function xn($n,qn){var zn=qn.transform.target,jn=zn.canvas,ur=en.util.object.clone(qn);ur.target=zn,jn&&jn.fire("object:"+$n,ur),zn.fire($n,qn)}function Sn($n,qn){var zn=qn.canvas,jn=zn.uniScaleKey,ur=$n[jn];return zn.uniformScaling&&!ur||!zn.uniformScaling&&ur}function Pn($n){return $n.originX===sn&&$n.originY===sn}function Ln($n,qn,zn){var jn=$n.lockScalingX,ur=$n.lockScalingY;return!!(jn&&ur||!qn&&(jn||ur)&&zn||jn&&qn==="x"||ur&&qn==="y")}function In($n,qn,zn){var jn="not-allowed",ur=Sn($n,zn),gr="";if(qn.x!==0&&qn.y===0?gr="x":qn.x===0&&qn.y!==0&&(gr="y"),Ln(zn,gr,ur))return jn;var ar=_n(zn,qn);return on[ar]+"-resize"}function Rn($n,qn,zn){var jn="not-allowed";if(qn.x!==0&&zn.lockSkewingY||qn.y!==0&&zn.lockSkewingX)return jn;var ur=_n(zn,qn)%4;return dn[ur]+"-resize"}function Mn($n,qn,zn){return $n[zn.canvas.altActionKey]?rn.skewCursorStyleHandler($n,qn,zn):rn.scaleCursorStyleHandler($n,qn,zn)}function Hn($n,qn,zn){var jn=$n[zn.canvas.altActionKey];if(qn.x===0)return jn?"skewX":"scaleY";if(qn.y===0)return jn?"skewY":"scaleX"}function Qn($n,qn,zn){return zn.lockRotation?"not-allowed":qn.cursorStyle}function Kn($n,qn,zn,jn){return{e:$n,transform:qn,pointer:{x:zn,y:jn}}}function nr($n){return function(qn,zn,jn,ur){var gr=zn.target,ar=gr.getCenterPoint(),vr=gr.translateToOriginPoint(ar,zn.originX,zn.originY),dr=$n(qn,zn,jn,ur);return gr.setPositionByOrigin(vr,zn.originX,zn.originY),dr}}function Zn($n,qn){return function(zn,jn,ur,gr){var ar=qn(zn,jn,ur,gr);return ar&&xn($n,Kn(zn,jn,ur,gr)),ar}}function ir($n,qn,zn,jn,ur){var gr=$n.target,ar=gr.controls[$n.corner],vr=gr.canvas.getZoom(),dr=gr.padding/vr,hr=gr.toLocalPoint(new en.Point(jn,ur),qn,zn);return hr.x>=dr&&(hr.x-=dr),hr.x<=-dr&&(hr.x+=dr),hr.y>=dr&&(hr.y-=dr),hr.y<=dr&&(hr.y+=dr),hr.x-=ar.offsetX,hr.y-=ar.offsetY,hr}function Jn($n){return $n.flipX!==$n.flipY}function Vn($n,qn,zn,jn,ur){if($n[qn]!==0){var gr=$n._getTransformedDimensions()[jn],ar=ur/gr*$n[zn];$n.set(zn,ar)}}function Xn($n,qn,zn,jn){var ur=qn.target,gr=ur._getTransformedDimensions(0,ur.skewY),ar=ir(qn,qn.originX,qn.originY,zn,jn),vr=Math.abs(ar.x*2)-gr.x,dr=ur.skewX,hr;vr<2?hr=0:(hr=mn(Math.atan2(vr/ur.scaleX,gr.y/ur.scaleY)),qn.originX===an&&qn.originY===hn&&(hr=-hr),qn.originX===cn&&qn.originY===nn&&(hr=-hr),Jn(ur)&&(hr=-hr));var _r=dr!==hr;if(_r){var or=ur._getTransformedDimensions().y;ur.set("skewX",hr),Vn(ur,"skewY","scaleY","y",or)}return _r}function Yn($n,qn,zn,jn){var ur=qn.target,gr=ur._getTransformedDimensions(ur.skewX,0),ar=ir(qn,qn.originX,qn.originY,zn,jn),vr=Math.abs(ar.y*2)-gr.y,dr=ur.skewY,hr;vr<2?hr=0:(hr=mn(Math.atan2(vr/ur.scaleY,gr.x/ur.scaleX)),qn.originX===an&&qn.originY===hn&&(hr=-hr),qn.originX===cn&&qn.originY===nn&&(hr=-hr),Jn(ur)&&(hr=-hr));var _r=dr!==hr;if(_r){var or=ur._getTransformedDimensions().x;ur.set("skewY",hr),Vn(ur,"skewX","scaleX","x",or)}return _r}function Tn($n,qn,zn,jn){var ur=qn.target,gr=ur.skewX,ar,vr=qn.originY;if(ur.lockSkewingX)return!1;if(gr===0){var dr=ir(qn,sn,sn,zn,jn);dr.x>0?ar=an:ar=cn}else gr>0&&(ar=vr===nn?an:cn),gr<0&&(ar=vr===nn?cn:an),Jn(ur)&&(ar=ar===an?cn:an);qn.originX=ar;var hr=Zn("skewing",nr(Xn));return hr($n,qn,zn,jn)}function An($n,qn,zn,jn){var ur=qn.target,gr=ur.skewY,ar,vr=qn.originX;if(ur.lockSkewingY)return!1;if(gr===0){var dr=ir(qn,sn,sn,zn,jn);dr.y>0?ar=nn:ar=hn}else gr>0&&(ar=vr===an?nn:hn),gr<0&&(ar=vr===an?hn:nn),Jn(ur)&&(ar=ar===nn?hn:nn);qn.originY=ar;var hr=Zn("skewing",nr(Yn));return hr($n,qn,zn,jn)}function wn($n,qn,zn,jn){var ur=qn,gr=ur.target,ar=gr.translateToOriginPoint(gr.getCenterPoint(),ur.originX,ur.originY);if(gr.lockRotation)return!1;var vr=Math.atan2(ur.ey-ar.y,ur.ex-ar.x),dr=Math.atan2(jn-ar.y,zn-ar.x),hr=mn(dr-vr+ur.theta),_r=!0;if(gr.snapAngle>0){var or=gr.snapAngle,Er=gr.snapThreshold||or,Dr=Math.ceil(hr/or)*or,Rr=Math.floor(hr/or)*or;Math.abs(hr-Rr)<Er?hr=Rr:Math.abs(hr-Dr)<Er&&(hr=Dr)}return hr<0&&(hr=360+hr),hr%=360,_r=gr.angle!==hr,gr.angle=hr,_r}function En($n,qn,zn,jn,ur){ur=ur||{};var gr=qn.target,ar=gr.lockScalingX,vr=gr.lockScalingY,dr=ur.by,hr,_r,or,Er,Dr=Sn($n,gr),Rr=Ln(gr,dr,Dr),Gr,Ir,ts=qn.gestureScale;if(Rr)return!1;if(ts)_r=qn.scaleX*ts,or=qn.scaleY*ts;else{if(hr=ir(qn,qn.originX,qn.originY,zn,jn),Gr=dr!=="y"?yn(hr.x):1,Ir=dr!=="x"?yn(hr.y):1,qn.signX||(qn.signX=Gr),qn.signY||(qn.signY=Ir),gr.lockScalingFlip&&(qn.signX!==Gr||qn.signY!==Ir))return!1;if(Er=gr._getTransformedDimensions(),Dr&&!dr){var zr=Math.abs(hr.x)+Math.abs(hr.y),ws=qn.original,es=Math.abs(Er.x*ws.scaleX/gr.scaleX)+Math.abs(Er.y*ws.scaleY/gr.scaleY),ps=zr/es;_r=ws.scaleX*ps,or=ws.scaleY*ps}else _r=Math.abs(hr.x*gr.scaleX/Er.x),or=Math.abs(hr.y*gr.scaleY/Er.y);Pn(qn)&&(_r*=2,or*=2),qn.signX!==Gr&&dr!=="y"&&(qn.originX=pn[qn.originX],_r*=-1,qn.signX=Gr),qn.signY!==Ir&&dr!=="x"&&(qn.originY=pn[qn.originY],or*=-1,qn.signY=Ir)}var ys=gr.scaleX,Or=gr.scaleY;return dr?(dr==="x"&&gr.set("scaleX",_r),dr==="y"&&gr.set("scaleY",or)):(!ar&&gr.set("scaleX",_r),!vr&&gr.set("scaleY",or)),ys!==gr.scaleX||Or!==gr.scaleY}function Nn($n,qn,zn,jn){return En($n,qn,zn,jn)}function Fn($n,qn,zn,jn){return En($n,qn,zn,jn,{by:"x"})}function Un($n,qn,zn,jn){return En($n,qn,zn,jn,{by:"y"})}function Gn($n,qn,zn,jn){return $n[qn.target.canvas.altActionKey]?rn.skewHandlerX($n,qn,zn,jn):rn.scalingY($n,qn,zn,jn)}function er($n,qn,zn,jn){return $n[qn.target.canvas.altActionKey]?rn.skewHandlerY($n,qn,zn,jn):rn.scalingX($n,qn,zn,jn)}function On($n,qn,zn,jn){var ur=qn.target,gr=ir(qn,qn.originX,qn.originY,zn,jn),ar=ur.strokeWidth/(ur.strokeUniform?ur.scaleX:1),vr=Pn(qn)?2:1,dr=ur.width,hr=Math.abs(gr.x*vr/ur.scaleX)-ar;return ur.set("width",Math.max(hr,0)),dr!==hr}function Bn($n,qn,zn,jn){var ur=qn.target,gr=zn-qn.offsetX,ar=jn-qn.offsetY,vr=!ur.get("lockMovementX")&&ur.left!==gr,dr=!ur.get("lockMovementY")&&ur.top!==ar;return vr&&ur.set("left",gr),dr&&ur.set("top",ar),(vr||dr)&&xn("moving",Kn($n,qn,zn,jn)),vr||dr}rn.scaleCursorStyleHandler=In,rn.skewCursorStyleHandler=Rn,rn.scaleSkewCursorStyleHandler=Mn,rn.rotationWithSnapping=Zn("rotating",nr(wn)),rn.scalingEqually=Zn("scaling",nr(Nn)),rn.scalingX=Zn("scaling",nr(Fn)),rn.scalingY=Zn("scaling",nr(Un)),rn.scalingYOrSkewingX=Gn,rn.scalingXOrSkewingY=er,rn.changeWidth=Zn("resizing",nr(On)),rn.skewHandlerX=Tn,rn.skewHandlerY=An,rn.dragHandler=Bn,rn.scaleOrSkewActionName=Hn,rn.rotationStyleHandler=Qn,rn.fireEvent=xn,rn.wrapWithFixedAnchor=nr,rn.wrapWithFireEvent=Zn,rn.getLocalPoint=ir,en.controlsUtils=rn}(St),function(fn){var en=fn.fabric||(fn.fabric={}),on=en.util.degreesToRadians,dn=en.controlsUtils;function rn(nn,cn,hn,sn,pn){sn=sn||{};var mn=this.sizeX||sn.cornerSize||pn.cornerSize,yn=this.sizeY||sn.cornerSize||pn.cornerSize,_n=typeof sn.transparentCorners<"u"?sn.transparentCorners:pn.transparentCorners,xn=_n?"stroke":"fill",Sn=!_n&&(sn.cornerStrokeColor||pn.cornerStrokeColor),Pn=cn,Ln=hn,In;nn.save(),nn.fillStyle=sn.cornerColor||pn.cornerColor,nn.strokeStyle=sn.cornerStrokeColor||pn.cornerStrokeColor,mn>yn?(In=mn,nn.scale(1,yn/mn),Ln=hn*mn/yn):yn>mn?(In=yn,nn.scale(mn/yn,1),Pn=cn*yn/mn):In=mn,nn.lineWidth=1,nn.beginPath(),nn.arc(Pn,Ln,In/2,0,2*Math.PI,!1),nn[xn](),Sn&&nn.stroke(),nn.restore()}function an(nn,cn,hn,sn,pn){sn=sn||{};var mn=this.sizeX||sn.cornerSize||pn.cornerSize,yn=this.sizeY||sn.cornerSize||pn.cornerSize,_n=typeof sn.transparentCorners<"u"?sn.transparentCorners:pn.transparentCorners,xn=_n?"stroke":"fill",Sn=!_n&&(sn.cornerStrokeColor||pn.cornerStrokeColor),Pn=mn/2,Ln=yn/2;nn.save(),nn.fillStyle=sn.cornerColor||pn.cornerColor,nn.strokeStyle=sn.cornerStrokeColor||pn.cornerStrokeColor,nn.lineWidth=1,nn.translate(cn,hn),nn.rotate(on(pn.angle)),nn[xn+"Rect"](-Pn,-Ln,mn,yn),Sn&&nn.strokeRect(-Pn,-Ln,mn,yn),nn.restore()}dn.renderCircleControl=rn,dn.renderSquareControl=an}(St),function(fn){var en=fn.fabric||(fn.fabric={});function on(dn){for(var rn in dn)this[rn]=dn[rn]}en.Control=on,en.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(dn,rn){return rn.cursorStyle},getActionName:function(dn,rn){return rn.actionName},getVisibility:function(dn,rn){var an=dn._controlsVisibility;return an&&typeof an[rn]<"u"?an[rn]:this.visible},setVisibility:function(dn){this.visible=dn},positionHandler:function(dn,rn){var an=en.util.transformPoint({x:this.x*dn.x+this.offsetX,y:this.y*dn.y+this.offsetY},rn);return an},calcCornerCoords:function(dn,rn,an,nn,cn){var hn,sn,pn,mn,yn=cn?this.touchSizeX:this.sizeX,_n=cn?this.touchSizeY:this.sizeY;if(yn&&_n&&yn!==_n){var xn=Math.atan2(_n,yn),Sn=Math.sqrt(yn*yn+_n*_n)/2,Pn=xn-en.util.degreesToRadians(dn),Ln=Math.PI/2-xn-en.util.degreesToRadians(dn);hn=Sn*en.util.cos(Pn),sn=Sn*en.util.sin(Pn),pn=Sn*en.util.cos(Ln),mn=Sn*en.util.sin(Ln)}else{var In=yn&&_n?yn:rn;Sn=In*.7071067812;var Pn=en.util.degreesToRadians(45-dn);hn=pn=Sn*en.util.cos(Pn),sn=mn=Sn*en.util.sin(Pn)}return{tl:{x:an-mn,y:nn-pn},tr:{x:an+hn,y:nn-sn},bl:{x:an-hn,y:nn+sn},br:{x:an+mn,y:nn+pn}}},render:function(dn,rn,an,nn,cn){switch(nn=nn||{},nn.cornerStyle||cn.cornerStyle){case"circle":en.controlsUtils.renderCircleControl.call(this,dn,rn,an,nn,cn);break;default:en.controlsUtils.renderSquareControl.call(this,dn,rn,an,nn,cn)}}}}(St),function(){function fn(an,nn){var cn=an.getAttribute("style"),hn=an.getAttribute("offset")||0,sn,pn,mn,yn;if(hn=parseFloat(hn)/(/%$/.test(hn)?100:1),hn=hn<0?0:hn>1?1:hn,cn){var _n=cn.split(/\s*;\s*/);for(_n[_n.length-1]===""&&_n.pop(),yn=_n.length;yn--;){var xn=_n[yn].split(/\s*:\s*/),Sn=xn[0].trim(),Pn=xn[1].trim();Sn==="stop-color"?sn=Pn:Sn==="stop-opacity"&&(mn=Pn)}}return sn||(sn=an.getAttribute("stop-color")||"rgb(0,0,0)"),mn||(mn=an.getAttribute("stop-opacity")),sn=new e.Color(sn),pn=sn.getAlpha(),mn=isNaN(parseFloat(mn))?1:parseFloat(mn),mn*=pn*nn,{offset:hn,color:sn.toRgb(),opacity:mn}}function en(an){return{x1:an.getAttribute("x1")||0,y1:an.getAttribute("y1")||0,x2:an.getAttribute("x2")||"100%",y2:an.getAttribute("y2")||0}}function on(an){return{x1:an.getAttribute("fx")||an.getAttribute("cx")||"50%",y1:an.getAttribute("fy")||an.getAttribute("cy")||"50%",r1:0,x2:an.getAttribute("cx")||"50%",y2:an.getAttribute("cy")||"50%",r2:an.getAttribute("r")||"50%"}}var dn=e.util.object.clone;e.Gradient=e.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(an){an||(an={}),an.coords||(an.coords={});var nn,cn=this;Object.keys(an).forEach(function(hn){cn[hn]=an[hn]}),this.id?this.id+="_"+e.Object.__uid++:this.id=e.Object.__uid++,nn={x1:an.coords.x1||0,y1:an.coords.y1||0,x2:an.coords.x2||0,y2:an.coords.y2||0},this.type==="radial"&&(nn.r1=an.coords.r1||0,nn.r2=an.coords.r2||0),this.coords=nn,this.colorStops=an.colorStops.slice()},addColorStop:function(an){for(var nn in an){var cn=new e.Color(an[nn]);this.colorStops.push({offset:parseFloat(nn),color:cn.toRgb(),opacity:cn.getAlpha()})}return this},toObject:function(an){var nn={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return e.util.populateWithProperties(this,nn,an),nn},toSVG:function(an,pn){var cn=dn(this.coords,!0),hn,sn,pn=pn||{},mn,yn,_n=dn(this.colorStops,!0),xn=cn.r1>cn.r2,Sn=this.gradientTransform?this.gradientTransform.concat():e.iMatrix.concat(),Pn=-this.offsetX,Ln=-this.offsetY,In=!!pn.additionalTransform,Rn=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(_n.sort(function(nr,Zn){return nr.offset-Zn.offset}),Rn==="objectBoundingBox"?(Pn/=an.width,Ln/=an.height):(Pn+=an.width/2,Ln+=an.height/2),an.type==="path"&&this.gradientUnits!=="percentage"&&(Pn-=an.pathOffset.x,Ln-=an.pathOffset.y),Sn[4]-=Pn,Sn[5]-=Ln,yn='id="SVGID_'+this.id+'" gradientUnits="'+Rn+'"',yn+=' gradientTransform="'+(In?pn.additionalTransform+" ":"")+e.util.matrixToSVG(Sn)+'" ',this.type==="linear"?mn=["<linearGradient ",yn,' x1="',cn.x1,'" y1="',cn.y1,'" x2="',cn.x2,'" y2="',cn.y2,`">
`]:this.type==="radial"&&(mn=["<radialGradient ",yn,' cx="',xn?cn.x1:cn.x2,'" cy="',xn?cn.y1:cn.y2,'" r="',xn?cn.r1:cn.r2,'" fx="',xn?cn.x2:cn.x1,'" fy="',xn?cn.y2:cn.y1,`">
`]),this.type==="radial"){if(xn)for(_n=_n.concat(),_n.reverse(),hn=0,sn=_n.length;hn<sn;hn++)_n[hn].offset=1-_n[hn].offset;var Mn=Math.min(cn.r1,cn.r2);if(Mn>0){var Hn=Math.max(cn.r1,cn.r2),Qn=Mn/Hn;for(hn=0,sn=_n.length;hn<sn;hn++)_n[hn].offset+=Qn*(1-_n[hn].offset)}}for(hn=0,sn=_n.length;hn<sn;hn++){var Kn=_n[hn];mn.push("<stop ",'offset="',Kn.offset*100+"%",'" style="stop-color:',Kn.color,typeof Kn.opacity<"u"?";stop-opacity: "+Kn.opacity:";",`"/>
`)}return mn.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),mn.join("")},toLive:function(an){var nn,cn=e.util.object.clone(this.coords),hn,sn;if(!!this.type){for(this.type==="linear"?nn=an.createLinearGradient(cn.x1,cn.y1,cn.x2,cn.y2):this.type==="radial"&&(nn=an.createRadialGradient(cn.x1,cn.y1,cn.r1,cn.x2,cn.y2,cn.r2)),hn=0,sn=this.colorStops.length;hn<sn;hn++){var pn=this.colorStops[hn].color,mn=this.colorStops[hn].opacity,yn=this.colorStops[hn].offset;typeof mn<"u"&&(pn=new e.Color(pn).setAlpha(mn).toRgba()),nn.addColorStop(yn,pn)}return nn}}}),e.util.object.extend(e.Gradient,{fromElement:function(an,nn,cn,hn){var sn=parseFloat(cn)/(/%$/.test(cn)?100:1);sn=sn<0?0:sn>1?1:sn,isNaN(sn)&&(sn=1);var pn=an.getElementsByTagName("stop"),mn,yn=an.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",_n=an.getAttribute("gradientTransform")||"",xn=[],Sn,Pn,Ln=0,In=0,Rn;for(an.nodeName==="linearGradient"||an.nodeName==="LINEARGRADIENT"?(mn="linear",Sn=en(an)):(mn="radial",Sn=on(an)),Pn=pn.length;Pn--;)xn.push(fn(pn[Pn],sn));Rn=e.parseTransformAttribute(_n),rn(nn,Sn,hn,yn),yn==="pixels"&&(Ln=-nn.left,In=-nn.top);var Mn=new e.Gradient({id:an.getAttribute("id"),type:mn,coords:Sn,colorStops:xn,gradientUnits:yn,gradientTransform:Rn,offsetX:Ln,offsetY:In});return Mn}});function rn(an,nn,cn,hn){var sn,pn;Object.keys(nn).forEach(function(mn){sn=nn[mn],sn==="Infinity"?pn=1:sn==="-Infinity"?pn=0:(pn=parseFloat(nn[mn],10),typeof sn=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(sn)&&(pn*=.01,hn==="pixels"&&((mn==="x1"||mn==="x2"||mn==="r2")&&(pn*=cn.viewBoxWidth||cn.width),(mn==="y1"||mn==="y2")&&(pn*=cn.viewBoxHeight||cn.height)))),nn[mn]=pn})}}(),function(){var fn=e.util.toFixed;e.Pattern=e.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(en,on){if(en||(en={}),this.id=e.Object.__uid++,this.setOptions(en),!en.source||en.source&&typeof en.source!="string"){on&&on(this);return}else{var dn=this;this.source=e.util.createImage(),e.util.loadImage(en.source,function(rn,an){dn.source=rn,on&&on(dn,an)},null,this.crossOrigin)}},toObject:function(en){var on=e.Object.NUM_FRACTION_DIGITS,dn,rn;return typeof this.source.src=="string"?dn=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(dn=this.source.toDataURL()),rn={type:"pattern",source:dn,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:fn(this.offsetX,on),offsetY:fn(this.offsetY,on),patternTransform:this.patternTransform?this.patternTransform.concat():null},e.util.populateWithProperties(this,rn,en),rn},toSVG:function(en){var on=typeof this.source=="function"?this.source():this.source,dn=on.width/en.width,rn=on.height/en.height,an=this.offsetX/en.width,nn=this.offsetY/en.height,cn="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(rn=1,nn&&(rn+=Math.abs(nn))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(dn=1,an&&(dn+=Math.abs(an))),on.src?cn=on.src:on.toDataURL&&(cn=on.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+an+'" y="'+nn+'" width="'+dn+'" height="'+rn+`">
<image x="0" y="0" width="`+on.width+'" height="'+on.height+'" xlink:href="'+cn+`"></image>
</pattern>
`},setOptions:function(en){for(var on in en)this[on]=en[on]},toLive:function(en){var on=this.source;return!on||typeof on.src<"u"&&(!on.complete||on.naturalWidth===0||on.naturalHeight===0)?"":en.createPattern(on,this.repeat)}})}(),function(fn){var en=fn.fabric||(fn.fabric={}),on=en.util.toFixed;if(en.Shadow){en.warn("fabric.Shadow is already defined.");return}en.Shadow=en.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(dn){typeof dn=="string"&&(dn=this._parseShadow(dn));for(var rn in dn)this[rn]=dn[rn];this.id=en.Object.__uid++},_parseShadow:function(dn){var rn=dn.trim(),an=en.Shadow.reOffsetsAndBlur.exec(rn)||[],nn=rn.replace(en.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:nn.trim(),offsetX:parseFloat(an[1],10)||0,offsetY:parseFloat(an[2],10)||0,blur:parseFloat(an[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(dn){var rn=40,an=40,nn=en.Object.NUM_FRACTION_DIGITS,cn=en.util.rotateVector({x:this.offsetX,y:this.offsetY},en.util.degreesToRadians(-dn.angle)),hn=20,sn=new en.Color(this.color);return dn.width&&dn.height&&(rn=on((Math.abs(cn.x)+this.blur)/dn.width,nn)*100+hn,an=on((Math.abs(cn.y)+this.blur)/dn.height,nn)*100+hn),dn.flipX&&(cn.x*=-1),dn.flipY&&(cn.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+an+'%" height="'+(100+2*an)+'%" x="-'+rn+'%" width="'+(100+2*rn)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+on(this.blur?this.blur/2:0,nn)+`"></feGaussianBlur>
	<feOffset dx="`+on(cn.x,nn)+'" dy="'+on(cn.y,nn)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+sn.toRgb()+'" flood-opacity="'+sn.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var dn={},rn=en.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(an){this[an]!==rn[an]&&(dn[an]=this[an])},this),dn}}),en.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(St),function(){if(e.StaticCanvas){e.warn("fabric.StaticCanvas is already defined.");return}var fn=e.util.object.extend,en=e.util.getElementOffset,on=e.util.removeFromArray,dn=e.util.toFixed,rn=e.util.transformPoint,an=e.util.invertTransform,nn=e.util.getNodeCanvas,cn=e.util.createCanvasElement,hn=new Error("Could not initialize `canvas` element");e.StaticCanvas=e.util.createClass(e.CommonMethods,{initialize:function(sn,pn){pn||(pn={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(sn,pn)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:e.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(sn,pn){var mn=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(sn),this._initOptions(pn),this.interactive||this._initRetinaScaling(),pn.overlayImage&&this.setOverlayImage(pn.overlayImage,mn),pn.backgroundImage&&this.setBackgroundImage(pn.backgroundImage,mn),pn.backgroundColor&&this.setBackgroundColor(pn.backgroundColor,mn),pn.overlayColor&&this.setOverlayColor(pn.overlayColor,mn),this.calcOffset()},_isRetinaScaling:function(){return e.devicePixelRatio!==1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?e.devicePixelRatio:1},_initRetinaScaling:function(){if(!!this._isRetinaScaling()){var sn=e.devicePixelRatio;this.__initRetinaScaling(sn,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(sn,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(sn,pn,mn){pn.setAttribute("width",this.width*sn),pn.setAttribute("height",this.height*sn),mn.scale(sn,sn)},calcOffset:function(){return this._offset=en(this.lowerCanvasEl),this},setOverlayImage:function(sn,pn,mn){return this.__setBgOverlayImage("overlayImage",sn,pn,mn)},setBackgroundImage:function(sn,pn,mn){return this.__setBgOverlayImage("backgroundImage",sn,pn,mn)},setOverlayColor:function(sn,pn){return this.__setBgOverlayColor("overlayColor",sn,pn)},setBackgroundColor:function(sn,pn){return this.__setBgOverlayColor("backgroundColor",sn,pn)},__setBgOverlayImage:function(sn,pn,mn,yn){return typeof pn=="string"?e.util.loadImage(pn,function(_n,xn){if(_n){var Sn=new e.Image(_n,yn);this[sn]=Sn,Sn.canvas=this}mn&&mn(_n,xn)},this,yn&&yn.crossOrigin):(yn&&pn.setOptions(yn),this[sn]=pn,pn&&(pn.canvas=this),mn&&mn(pn,!1)),this},__setBgOverlayColor:function(sn,pn,mn){return this[sn]=pn,this._initGradient(pn,sn),this._initPattern(pn,sn,mn),this},_createCanvasElement:function(){var sn=cn();if(!sn||(sn.style||(sn.style={}),typeof sn.getContext>"u"))throw hn;return sn},_initOptions:function(sn){var pn=this.lowerCanvasEl;this._setOptions(sn),this.width=this.width||parseInt(pn.width,10)||0,this.height=this.height||parseInt(pn.height,10)||0,this.lowerCanvasEl.style&&(pn.width=this.width,pn.height=this.height,pn.style.width=this.width+"px",pn.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(sn){sn&&sn.getContext?this.lowerCanvasEl=sn:this.lowerCanvasEl=e.util.getById(sn)||this._createCanvasElement(),e.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(sn,pn){return this.setDimensions({width:sn},pn)},setHeight:function(sn,pn){return this.setDimensions({height:sn},pn)},setDimensions:function(sn,pn){var mn;pn=pn||{};for(var yn in sn)mn=sn[yn],pn.cssOnly||(this._setBackstoreDimension(yn,sn[yn]),mn+="px",this.hasLostContext=!0),pn.backstoreOnly||this._setCssDimension(yn,mn);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(),this._initRetinaScaling(),this.calcOffset(),pn.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(sn,pn){return this.lowerCanvasEl[sn]=pn,this.upperCanvasEl&&(this.upperCanvasEl[sn]=pn),this.cacheCanvasEl&&(this.cacheCanvasEl[sn]=pn),this[sn]=pn,this},_setCssDimension:function(sn,pn){return this.lowerCanvasEl.style[sn]=pn,this.upperCanvasEl&&(this.upperCanvasEl.style[sn]=pn),this.wrapperEl&&(this.wrapperEl.style[sn]=pn),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(sn){var pn=this._activeObject,mn=this.backgroundImage,yn=this.overlayImage,_n,xn,Sn;for(this.viewportTransform=sn,xn=0,Sn=this._objects.length;xn<Sn;xn++)_n=this._objects[xn],_n.group||_n.setCoords(!0);return pn&&pn.setCoords(),mn&&mn.setCoords(!0),yn&&yn.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(sn,pn){var mn=sn,yn=this.viewportTransform.slice(0);sn=rn(sn,an(this.viewportTransform)),yn[0]=pn,yn[3]=pn;var _n=rn(sn,yn);return yn[4]+=mn.x-_n.x,yn[5]+=mn.y-_n.y,this.setViewportTransform(yn)},setZoom:function(sn){return this.zoomToPoint(new e.Point(0,0),sn),this},absolutePan:function(sn){var pn=this.viewportTransform.slice(0);return pn[4]=-sn.x,pn[5]=-sn.y,this.setViewportTransform(pn)},relativePan:function(sn){return this.absolutePan(new e.Point(-sn.x-this.viewportTransform[4],-sn.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(sn){this.stateful&&sn.setupState(),sn._set("canvas",this),sn.setCoords(),this.fire("object:added",{target:sn}),sn.fire("added")},_onObjectRemoved:function(sn){this.fire("object:removed",{target:sn}),sn.fire("removed"),delete sn.canvas},clearContext:function(sn){return sn.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var sn=this.contextContainer;return this.renderCanvas(sn,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=e.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var sn={},pn=this.width,mn=this.height,yn=an(this.viewportTransform);return sn.tl=rn({x:0,y:0},yn),sn.br=rn({x:pn,y:mn},yn),sn.tr=new e.Point(sn.br.x,sn.tl.y),sn.bl=new e.Point(sn.tl.x,sn.br.y),this.vptCoords=sn,sn},cancelRequestedRender:function(){this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(sn,pn){var mn=this.viewportTransform,yn=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(sn),e.util.setImageSmoothing(sn,this.imageSmoothingEnabled),this.fire("before:render",{ctx:sn}),this._renderBackground(sn),sn.save(),sn.transform(mn[0],mn[1],mn[2],mn[3],mn[4],mn[5]),this._renderObjects(sn,pn),sn.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(sn),yn&&(yn.canvas=this,yn.shouldCache(),yn._transformDone=!0,yn.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(sn)),this._renderOverlay(sn),this.controlsAboveOverlay&&this.interactive&&this.drawControls(sn),this.fire("after:render",{ctx:sn})},drawClipPathOnCanvas:function(sn){var pn=this.viewportTransform,mn=this.clipPath;sn.save(),sn.transform(pn[0],pn[1],pn[2],pn[3],pn[4],pn[5]),sn.globalCompositeOperation="destination-in",mn.transform(sn),sn.scale(1/mn.zoomX,1/mn.zoomY),sn.drawImage(mn._cacheCanvas,-mn.cacheTranslationX,-mn.cacheTranslationY),sn.restore()},_renderObjects:function(sn,pn){var mn,yn;for(mn=0,yn=pn.length;mn<yn;++mn)pn[mn]&&pn[mn].render(sn)},_renderBackgroundOrOverlay:function(sn,pn){var mn=this[pn+"Color"],yn=this[pn+"Image"],_n=this.viewportTransform,xn=this[pn+"Vpt"];if(!(!mn&&!yn)){if(mn){sn.save(),sn.beginPath(),sn.moveTo(0,0),sn.lineTo(this.width,0),sn.lineTo(this.width,this.height),sn.lineTo(0,this.height),sn.closePath(),sn.fillStyle=mn.toLive?mn.toLive(sn,this):mn,xn&&sn.transform(_n[0],_n[1],_n[2],_n[3],_n[4],_n[5]),sn.transform(1,0,0,1,mn.offsetX||0,mn.offsetY||0);var Sn=mn.gradientTransform||mn.patternTransform;Sn&&sn.transform(Sn[0],Sn[1],Sn[2],Sn[3],Sn[4],Sn[5]),sn.fill(),sn.restore()}yn&&(sn.save(),xn&&sn.transform(_n[0],_n[1],_n[2],_n[3],_n[4],_n[5]),yn.render(sn),sn.restore())}},_renderBackground:function(sn){this._renderBackgroundOrOverlay(sn,"background")},_renderOverlay:function(sn){this._renderBackgroundOrOverlay(sn,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(sn){return this._centerObject(sn,new e.Point(this.getCenter().left,sn.getCenterPoint().y))},centerObjectV:function(sn){return this._centerObject(sn,new e.Point(sn.getCenterPoint().x,this.getCenter().top))},centerObject:function(sn){var pn=this.getCenter();return this._centerObject(sn,new e.Point(pn.left,pn.top))},viewportCenterObject:function(sn){var pn=this.getVpCenter();return this._centerObject(sn,pn)},viewportCenterObjectH:function(sn){var pn=this.getVpCenter();return this._centerObject(sn,new e.Point(pn.x,sn.getCenterPoint().y)),this},viewportCenterObjectV:function(sn){var pn=this.getVpCenter();return this._centerObject(sn,new e.Point(sn.getCenterPoint().x,pn.y))},getVpCenter:function(){var sn=this.getCenter(),pn=an(this.viewportTransform);return rn({x:sn.left,y:sn.top},pn)},_centerObject:function(sn,pn){return sn.setPositionByOrigin(pn,"center","center"),sn.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(sn){return this.toDatalessObject(sn)},toObject:function(sn){return this._toObjectMethod("toObject",sn)},toDatalessObject:function(sn){return this._toObjectMethod("toDatalessObject",sn)},_toObjectMethod:function(sn,pn){var mn=this.clipPath,yn={version:e.version,objects:this._toObjects(sn,pn)};return mn&&!mn.excludeFromExport&&(yn.clipPath=this._toObject(this.clipPath,sn,pn)),fn(yn,this.__serializeBgOverlay(sn,pn)),e.util.populateWithProperties(this,yn,pn),yn},_toObjects:function(sn,pn){return this._objects.filter(function(mn){return!mn.excludeFromExport}).map(function(mn){return this._toObject(mn,sn,pn)},this)},_toObject:function(sn,pn,mn){var yn;this.includeDefaultValues||(yn=sn.includeDefaultValues,sn.includeDefaultValues=!1);var _n=sn[pn](mn);return this.includeDefaultValues||(sn.includeDefaultValues=yn),_n},__serializeBgOverlay:function(sn,pn){var mn={},yn=this.backgroundImage,_n=this.overlayImage,xn=this.backgroundColor,Sn=this.overlayColor;return xn&&xn.toObject?xn.excludeFromExport||(mn.background=xn.toObject(pn)):xn&&(mn.background=xn),Sn&&Sn.toObject?Sn.excludeFromExport||(mn.overlay=Sn.toObject(pn)):Sn&&(mn.overlay=Sn),yn&&!yn.excludeFromExport&&(mn.backgroundImage=this._toObject(yn,sn,pn)),_n&&!_n.excludeFromExport&&(mn.overlayImage=this._toObject(_n,sn,pn)),mn},svgViewportTransformation:!0,toSVG:function(sn,pn){sn||(sn={}),sn.reviver=pn;var mn=[];return this._setSVGPreamble(mn,sn),this._setSVGHeader(mn,sn),this.clipPath&&mn.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(mn,"background"),this._setSVGBgOverlayImage(mn,"backgroundImage",pn),this._setSVGObjects(mn,pn),this.clipPath&&mn.push(`</g>
`),this._setSVGBgOverlayColor(mn,"overlay"),this._setSVGBgOverlayImage(mn,"overlayImage",pn),mn.push("</svg>"),mn.join("")},_setSVGPreamble:function(sn,pn){pn.suppressPreamble||sn.push('<?xml version="1.0" encoding="',pn.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(sn,pn){var mn=pn.width||this.width,yn=pn.height||this.height,_n,xn='viewBox="0 0 '+this.width+" "+this.height+'" ',Sn=e.Object.NUM_FRACTION_DIGITS;pn.viewBox?xn='viewBox="'+pn.viewBox.x+" "+pn.viewBox.y+" "+pn.viewBox.width+" "+pn.viewBox.height+'" ':this.svgViewportTransformation&&(_n=this.viewportTransform,xn='viewBox="'+dn(-_n[4]/_n[0],Sn)+" "+dn(-_n[5]/_n[3],Sn)+" "+dn(this.width/_n[0],Sn)+" "+dn(this.height/_n[3],Sn)+'" '),sn.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',mn,'" ','height="',yn,'" ',xn,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",e.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(pn),`</defs>
`)},createSVGClipPathMarkup:function(sn){var pn=this.clipPath;return pn?(pn.clipPathId="CLIPPATH_"+e.Object.__uid++,'<clipPath id="'+pn.clipPathId+`" >
`+this.clipPath.toClipPathSVG(sn.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var sn=this,pn=["background","overlay"].map(function(mn){var yn=sn[mn+"Color"];if(yn&&yn.toLive){var _n=sn[mn+"Vpt"],xn=sn.viewportTransform,Sn={width:sn.width/(_n?xn[0]:1),height:sn.height/(_n?xn[3]:1)};return yn.toSVG(Sn,{additionalTransform:_n?e.util.matrixToSVG(xn):""})}});return pn.join("")},createSVGFontFacesMarkup:function(){var sn="",pn={},mn,yn,_n,xn,Sn,Pn,Ln,In,Rn,Mn=e.fontPaths,Hn=[];for(this._objects.forEach(function Kn(nr){Hn.push(nr),nr._objects&&nr._objects.forEach(Kn)}),In=0,Rn=Hn.length;In<Rn;In++)if(mn=Hn[In],yn=mn.fontFamily,!(mn.type.indexOf("text")===-1||pn[yn]||!Mn[yn])&&(pn[yn]=!0,!!mn.styles)){_n=mn.styles;for(Sn in _n){xn=_n[Sn];for(Ln in xn)Pn=xn[Ln],yn=Pn.fontFamily,!pn[yn]&&Mn[yn]&&(pn[yn]=!0)}}for(var Qn in pn)sn+=[`		@font-face {
`,"			font-family: '",Qn,`';
`,"			src: url('",Mn[Qn],`');
`,`		}
`].join("");return sn&&(sn=['	<style type="text/css">',`<![CDATA[
`,sn,"]]>",`</style>
`].join("")),sn},_setSVGObjects:function(sn,pn){var mn,yn,_n,xn=this._objects;for(yn=0,_n=xn.length;yn<_n;yn++)mn=xn[yn],!mn.excludeFromExport&&this._setSVGObject(sn,mn,pn)},_setSVGObject:function(sn,pn,mn){sn.push(pn.toSVG(mn))},_setSVGBgOverlayImage:function(sn,pn,mn){this[pn]&&!this[pn].excludeFromExport&&this[pn].toSVG&&sn.push(this[pn].toSVG(mn))},_setSVGBgOverlayColor:function(sn,pn){var mn=this[pn+"Color"],yn=this.viewportTransform,_n=this.width,xn=this.height;if(!!mn)if(mn.toLive){var Sn=mn.repeat,Pn=e.util.invertTransform(yn),Ln=this[pn+"Vpt"],In=Ln?e.util.matrixToSVG(Pn):"";sn.push('<rect transform="'+In+" translate(",_n/2,",",xn/2,')"',' x="',mn.offsetX-_n/2,'" y="',mn.offsetY-xn/2,'" ','width="',Sn==="repeat-y"||Sn==="no-repeat"?mn.source.width:_n,'" height="',Sn==="repeat-x"||Sn==="no-repeat"?mn.source.height:xn,'" fill="url(#SVGID_'+mn.id+')"',`></rect>
`)}else sn.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',mn,'"',`></rect>
`)},sendToBack:function(sn){if(!sn)return this;var pn=this._activeObject,mn,yn,_n;if(sn===pn&&sn.type==="activeSelection")for(_n=pn._objects,mn=_n.length;mn--;)yn=_n[mn],on(this._objects,yn),this._objects.unshift(yn);else on(this._objects,sn),this._objects.unshift(sn);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(sn){if(!sn)return this;var pn=this._activeObject,mn,yn,_n;if(sn===pn&&sn.type==="activeSelection")for(_n=pn._objects,mn=0;mn<_n.length;mn++)yn=_n[mn],on(this._objects,yn),this._objects.push(yn);else on(this._objects,sn),this._objects.push(sn);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(sn,pn){if(!sn)return this;var mn=this._activeObject,yn,_n,xn,Sn,Pn,Ln=0;if(sn===mn&&sn.type==="activeSelection")for(Pn=mn._objects,yn=0;yn<Pn.length;yn++)_n=Pn[yn],xn=this._objects.indexOf(_n),xn>0+Ln&&(Sn=xn-1,on(this._objects,_n),this._objects.splice(Sn,0,_n)),Ln++;else xn=this._objects.indexOf(sn),xn!==0&&(Sn=this._findNewLowerIndex(sn,xn,pn),on(this._objects,sn),this._objects.splice(Sn,0,sn));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(sn,pn,mn){var yn,_n;if(mn)for(yn=pn,_n=pn-1;_n>=0;--_n){var xn=sn.intersectsWithObject(this._objects[_n])||sn.isContainedWithinObject(this._objects[_n])||this._objects[_n].isContainedWithinObject(sn);if(xn){yn=_n;break}}else yn=pn-1;return yn},bringForward:function(sn,pn){if(!sn)return this;var mn=this._activeObject,yn,_n,xn,Sn,Pn,Ln=0;if(sn===mn&&sn.type==="activeSelection")for(Pn=mn._objects,yn=Pn.length;yn--;)_n=Pn[yn],xn=this._objects.indexOf(_n),xn<this._objects.length-1-Ln&&(Sn=xn+1,on(this._objects,_n),this._objects.splice(Sn,0,_n)),Ln++;else xn=this._objects.indexOf(sn),xn!==this._objects.length-1&&(Sn=this._findNewUpperIndex(sn,xn,pn),on(this._objects,sn),this._objects.splice(Sn,0,sn));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(sn,pn,mn){var yn,_n,xn;if(mn)for(yn=pn,_n=pn+1,xn=this._objects.length;_n<xn;++_n){var Sn=sn.intersectsWithObject(this._objects[_n])||sn.isContainedWithinObject(this._objects[_n])||this._objects[_n].isContainedWithinObject(sn);if(Sn){yn=_n;break}}else yn=pn+1;return yn},moveTo:function(sn,pn){return on(this._objects,sn),this._objects.splice(pn,0,sn),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(sn){sn.dispose&&sn.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),this.lowerCanvasEl.style=this._originalCanvasStyle,delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),e.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),fn(e.StaticCanvas.prototype,e.Observable),fn(e.StaticCanvas.prototype,e.Collection),fn(e.StaticCanvas.prototype,e.DataURLExporter),fn(e.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(sn){var pn=cn();if(!pn||!pn.getContext)return null;var mn=pn.getContext("2d");if(!mn)return null;switch(sn){case"setLineDash":return typeof mn.setLineDash<"u";default:return null}}}),e.StaticCanvas.prototype.toJSON=e.StaticCanvas.prototype.toObject,e.isLikelyNode&&(e.StaticCanvas.prototype.createPNGStream=function(){var sn=nn(this.lowerCanvasEl);return sn&&sn.createPNGStream()},e.StaticCanvas.prototype.createJPEGStream=function(sn){var pn=nn(this.lowerCanvasEl);return pn&&pn.createJPEGStream(sn)})}(),e.BaseBrush=e.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(){var fn=this.canvas.contextTop;fn.strokeStyle=this.color,fn.lineWidth=this.width,fn.lineCap=this.strokeLineCap,fn.miterLimit=this.strokeMiterLimit,fn.lineJoin=this.strokeLineJoin,fn.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(fn){var en=this.canvas.viewportTransform;fn.save(),fn.transform(en[0],en[1],en[2],en[3],en[4],en[5])},_setShadow:function(){if(!!this.shadow){var fn=this.canvas,en=this.shadow,on=fn.contextTop,dn=fn.getZoom();fn&&fn._isRetinaScaling()&&(dn*=e.devicePixelRatio),on.shadowColor=en.color,on.shadowBlur=en.blur*dn,on.shadowOffsetX=en.offsetX*dn,on.shadowOffsetY=en.offsetY*dn}},needsFullRender:function(){var fn=new e.Color(this.color);return fn.getAlpha()<1||!!this.shadow},_resetShadow:function(){var fn=this.canvas.contextTop;fn.shadowColor="",fn.shadowBlur=fn.shadowOffsetX=fn.shadowOffsetY=0},_isOutSideCanvas:function(fn){return fn.x<0||fn.x>this.canvas.getWidth()||fn.y<0||fn.y>this.canvas.getHeight()}}),function(){e.PencilBrush=e.util.createClass(e.BaseBrush,{decimate:.4,initialize:function(fn){this.canvas=fn,this._points=[]},_drawSegment:function(fn,en,on){var dn=en.midPointFrom(on);return fn.quadraticCurveTo(en.x,en.y,dn.x,dn.y),dn},onMouseDown:function(fn,en){!this.canvas._isMainEvent(en.e)||(this._prepareForDrawing(fn),this._captureDrawingPath(fn),this._render())},onMouseMove:function(fn,en){if(!!this.canvas._isMainEvent(en.e)&&!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(fn))&&this._captureDrawingPath(fn)&&this._points.length>1)if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var on=this._points,dn=on.length,rn=this.canvas.contextTop;this._saveAndTransform(rn),this.oldEnd&&(rn.beginPath(),rn.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(rn,on[dn-2],on[dn-1],!0),rn.stroke(),rn.restore()}},onMouseUp:function(fn){return this.canvas._isMainEvent(fn.e)?(this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(fn){var en=new e.Point(fn.x,fn.y);this._reset(),this._addPoint(en),this.canvas.contextTop.moveTo(en.x,en.y)},_addPoint:function(fn){return this._points.length>1&&fn.eq(this._points[this._points.length-1])?!1:(this._points.push(fn),!0)},_reset:function(){this._points=[],this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(fn){var en=new e.Point(fn.x,fn.y);return this._addPoint(en)},_render:function(){var fn=this.canvas.contextTop,en,on,dn=this._points[0],rn=this._points[1];if(this._saveAndTransform(fn),fn.beginPath(),this._points.length===2&&dn.x===rn.x&&dn.y===rn.y){var an=this.width/1e3;dn=new e.Point(dn.x,dn.y),rn=new e.Point(rn.x,rn.y),dn.x-=an,rn.x+=an}for(fn.moveTo(dn.x,dn.y),en=1,on=this._points.length;en<on;en++)this._drawSegment(fn,dn,rn),dn=this._points[en],rn=this._points[en+1];fn.lineTo(dn.x,dn.y),fn.stroke(),fn.restore()},convertPointsToSVGPath:function(fn){var en=this.width/1e3;return e.util.getSmoothPathFromPoints(fn,en)},_isEmptySVGPath:function(fn){var en=e.util.joinPath(fn);return en==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(fn){var en=new e.Path(fn,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,en.shadow=new e.Shadow(this.shadow)),en},decimatePoints:function(fn,en){if(fn.length<=2)return fn;var on=this.canvas.getZoom(),dn=Math.pow(en/on,2),rn,an=fn.length-1,nn=fn[0],cn=[nn],hn;for(rn=1;rn<an-1;rn++)hn=Math.pow(nn.x-fn[rn].x,2)+Math.pow(nn.y-fn[rn].y,2),hn>=dn&&(nn=fn[rn],cn.push(nn));return cn.push(fn[an]),cn},_finalizeAndAddPath:function(){var fn=this.canvas.contextTop;fn.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var en=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(en)){this.canvas.requestRenderAll();return}var on=this.createPath(en);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:on}),this.canvas.add(on),this.canvas.requestRenderAll(),on.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:on})}})}(),e.CircleBrush=e.util.createClass(e.BaseBrush,{width:10,initialize:function(fn){this.canvas=fn,this.points=[]},drawDot:function(fn){var en=this.addPoint(fn),on=this.canvas.contextTop;this._saveAndTransform(on),this.dot(on,en),on.restore()},dot:function(fn,en){fn.fillStyle=en.fill,fn.beginPath(),fn.arc(en.x,en.y,en.radius,0,Math.PI*2,!1),fn.closePath(),fn.fill()},onMouseDown:function(fn){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(fn)},_render:function(){var fn=this.canvas.contextTop,en,on,dn=this.points;for(this._saveAndTransform(fn),en=0,on=dn.length;en<on;en++)this.dot(fn,dn[en]);fn.restore()},onMouseMove:function(fn){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(fn)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(fn),this._render()):this.drawDot(fn))},onMouseUp:function(){var fn=this.canvas.renderOnAddRemove,en,on;this.canvas.renderOnAddRemove=!1;var dn=[];for(en=0,on=this.points.length;en<on;en++){var rn=this.points[en],an=new e.Circle({radius:rn.radius,left:rn.x,top:rn.y,originX:"center",originY:"center",fill:rn.fill});this.shadow&&(an.shadow=new e.Shadow(this.shadow)),dn.push(an)}var nn=new e.Group(dn);nn.canvas=this.canvas,this.canvas.fire("before:path:created",{path:nn}),this.canvas.add(nn),this.canvas.fire("path:created",{path:nn}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=fn,this.canvas.requestRenderAll()},addPoint:function(fn){var en=new e.Point(fn.x,fn.y),on=e.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,dn=new e.Color(this.color).setAlpha(e.util.getRandomInt(0,100)/100).toRgba();return en.radius=on,en.fill=dn,this.points.push(en),en}}),e.SprayBrush=e.util.createClass(e.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(fn){this.canvas=fn,this.sprayChunks=[]},onMouseDown:function(fn){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(fn),this.render(this.sprayChunkPoints)},onMouseMove:function(fn){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(fn)||(this.addSprayChunk(fn),this.render(this.sprayChunkPoints))},onMouseUp:function(){var fn=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var en=[],on=0,dn=this.sprayChunks.length;on<dn;on++)for(var rn=this.sprayChunks[on],an=0,nn=rn.length;an<nn;an++){var cn=new e.Rect({width:rn[an].width,height:rn[an].width,left:rn[an].x+1,top:rn[an].y+1,originX:"center",originY:"center",fill:this.color});en.push(cn)}this.optimizeOverlapping&&(en=this._getOptimizedRects(en));var hn=new e.Group(en);this.shadow&&hn.set("shadow",new e.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:hn}),this.canvas.add(hn),this.canvas.fire("path:created",{path:hn}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=fn,this.canvas.requestRenderAll()},_getOptimizedRects:function(fn){var en={},on,dn,rn;for(dn=0,rn=fn.length;dn<rn;dn++)on=fn[dn].left+""+fn[dn].top,en[on]||(en[on]=fn[dn]);var an=[];for(on in en)an.push(en[on]);return an},render:function(fn){var en=this.canvas.contextTop,on,dn;for(en.fillStyle=this.color,this._saveAndTransform(en),on=0,dn=fn.length;on<dn;on++){var rn=fn[on];typeof rn.opacity<"u"&&(en.globalAlpha=rn.opacity),en.fillRect(rn.x,rn.y,rn.width,rn.width)}en.restore()},_render:function(){var fn=this.canvas.contextTop,en,on;for(fn.fillStyle=this.color,this._saveAndTransform(fn),en=0,on=this.sprayChunks.length;en<on;en++)this.render(this.sprayChunks[en]);fn.restore()},addSprayChunk:function(fn){this.sprayChunkPoints=[];var en,on,dn,rn=this.width/2,an;for(an=0;an<this.density;an++){en=e.util.getRandomInt(fn.x-rn,fn.x+rn),on=e.util.getRandomInt(fn.y-rn,fn.y+rn),this.dotWidthVariance?dn=e.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):dn=this.dotWidth;var nn=new e.Point(en,on);nn.width=dn,this.randomOpacity&&(nn.opacity=e.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(nn)}this.sprayChunks.push(this.sprayChunkPoints)}}),e.PatternBrush=e.util.createClass(e.PencilBrush,{getPatternSrc:function(){var fn=20,en=5,on=e.util.createCanvasElement(),dn=on.getContext("2d");return on.width=on.height=fn+en,dn.fillStyle=this.color,dn.beginPath(),dn.arc(fn/2,fn/2,fn/2,0,Math.PI*2,!1),dn.closePath(),dn.fill(),on},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(fn){var en=this.callSuper("createPath",fn),on=en._getLeftTopCoords().scalarAdd(en.strokeWidth/2);return en.stroke=new e.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-on.x,offsetY:-on.y}),en}}),function(){var fn=e.util.getPointer,en=e.util.degreesToRadians,on=e.util.isTouchEvent;e.Canvas=e.util.createClass(e.StaticCanvas,{initialize:function(rn,an){an||(an={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(rn,an),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=e.PencilBrush&&new e.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var rn=this.getActiveObjects(),an,nn,cn;if(rn.length>0&&!this.preserveObjectStacking){nn=[],cn=[];for(var hn=0,sn=this._objects.length;hn<sn;hn++)an=this._objects[hn],rn.indexOf(an)===-1?nn.push(an):cn.push(an);rn.length>1&&(this._activeObject._objects=cn),nn.push.apply(nn,cn)}else nn=this._objects;return nn},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&this.renderTopLayer(this.contextTop);var rn=this.contextContainer;return this.renderCanvas(rn,this._chooseObjectsToRender()),this},renderTopLayer:function(rn){rn.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(rn),this.contextTopDirty=!0),rn.restore()},renderTop:function(){var rn=this.contextTop;return this.clearContext(rn),this.renderTopLayer(rn),this.fire("after:render"),this},_normalizePointer:function(rn,an){var nn=rn.calcTransformMatrix(),cn=e.util.invertTransform(nn),hn=this.restorePointerVpt(an);return e.util.transformPoint(hn,cn)},isTargetTransparent:function(rn,an,nn){if(rn.shouldCache()&&rn._cacheCanvas&&rn!==this._activeObject){var cn=this._normalizePointer(rn,{x:an,y:nn}),hn=Math.max(rn.cacheTranslationX+cn.x*rn.zoomX,0),sn=Math.max(rn.cacheTranslationY+cn.y*rn.zoomY,0),_n=e.util.isTransparent(rn._cacheContext,Math.round(hn),Math.round(sn),this.targetFindTolerance);return _n}var pn=this.contextCache,mn=rn.selectionBackgroundColor,yn=this.viewportTransform;rn.selectionBackgroundColor="",this.clearContext(pn),pn.save(),pn.transform(yn[0],yn[1],yn[2],yn[3],yn[4],yn[5]),rn.render(pn),pn.restore(),rn.selectionBackgroundColor=mn;var _n=e.util.isTransparent(pn,an,nn,this.targetFindTolerance);return _n},_isSelectionKeyPressed:function(rn){var an=!1;return Object.prototype.toString.call(this.selectionKey)==="[object Array]"?an=!!this.selectionKey.find(function(nn){return rn[nn]===!0}):an=rn[this.selectionKey],an},_shouldClearSelection:function(rn,an){var nn=this.getActiveObjects(),cn=this._activeObject;return!an||an&&cn&&nn.length>1&&nn.indexOf(an)===-1&&cn!==an&&!this._isSelectionKeyPressed(rn)||an&&!an.evented||an&&!an.selectable&&cn&&cn!==an},_shouldCenterTransform:function(rn,an,nn){if(!!rn){var cn;return an==="scale"||an==="scaleX"||an==="scaleY"||an==="resizing"?cn=this.centeredScaling||rn.centeredScaling:an==="rotate"&&(cn=this.centeredRotation||rn.centeredRotation),cn?!nn:nn}},_getOriginFromCorner:function(rn,an){var nn={x:rn.originX,y:rn.originY};return an==="ml"||an==="tl"||an==="bl"?nn.x="right":(an==="mr"||an==="tr"||an==="br")&&(nn.x="left"),an==="tl"||an==="mt"||an==="tr"?nn.y="bottom":(an==="bl"||an==="mb"||an==="br")&&(nn.y="top"),nn},_getActionFromCorner:function(rn,an,nn,cn){if(!an||!rn)return"drag";var hn=cn.controls[an];return hn.getActionName(nn,hn,cn)},_setupCurrentTransform:function(rn,an,nn){if(!!an){var cn=this.getPointer(rn),hn=an.__corner,sn=an.controls[hn],pn=nn&&hn?sn.getActionHandler(rn,an,sn):e.controlsUtils.dragHandler,mn=this._getActionFromCorner(nn,hn,rn,an),yn=this._getOriginFromCorner(an,hn),_n=rn[this.centeredKey],xn={target:an,action:mn,actionHandler:pn,corner:hn,scaleX:an.scaleX,scaleY:an.scaleY,skewX:an.skewX,skewY:an.skewY,offsetX:cn.x-an.left,offsetY:cn.y-an.top,originX:yn.x,originY:yn.y,ex:cn.x,ey:cn.y,lastX:cn.x,lastY:cn.y,theta:en(an.angle),width:an.width*an.scaleX,shiftKey:rn.shiftKey,altKey:_n,original:e.util.saveObjectTransform(an)};this._shouldCenterTransform(an,mn,_n)&&(xn.originX="center",xn.originY="center"),xn.original.originX=yn.x,xn.original.originY=yn.y,this._currentTransform=xn,this._beforeTransform(rn)}},setCursor:function(rn){this.upperCanvasEl.style.cursor=rn},_drawSelection:function(rn){var an=this._groupSelector,nn=new e.Point(an.ex,an.ey),cn=e.util.transformPoint(nn,this.viewportTransform),hn=new e.Point(an.ex+an.left,an.ey+an.top),sn=e.util.transformPoint(hn,this.viewportTransform),pn=Math.min(cn.x,sn.x),mn=Math.min(cn.y,sn.y),yn=Math.max(cn.x,sn.x),_n=Math.max(cn.y,sn.y),xn=this.selectionLineWidth/2;this.selectionColor&&(rn.fillStyle=this.selectionColor,rn.fillRect(pn,mn,yn-pn,_n-mn)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(rn.lineWidth=this.selectionLineWidth,rn.strokeStyle=this.selectionBorderColor,pn+=xn,mn+=xn,yn-=xn,_n-=xn,e.Object.prototype._setLineDash.call(this,rn,this.selectionDashArray),rn.strokeRect(pn,mn,yn-pn,_n-mn))},findTarget:function(rn,an){if(!this.skipTargetFind){var nn=!0,cn=this.getPointer(rn,nn),hn=this._activeObject,sn=this.getActiveObjects(),pn,mn,yn=on(rn),_n=sn.length>1&&!an||sn.length===1;if(this.targets=[],_n&&hn._findTargetCorner(cn,yn)||sn.length>1&&!an&&hn===this._searchPossibleTargets([hn],cn))return hn;if(sn.length===1&&hn===this._searchPossibleTargets([hn],cn))if(this.preserveObjectStacking)pn=hn,mn=this.targets,this.targets=[];else return hn;var xn=this._searchPossibleTargets(this._objects,cn);return rn[this.altSelectionKey]&&xn&&pn&&xn!==pn&&(xn=pn,this.targets=mn),xn}},_checkTarget:function(rn,an,nn){if(an&&an.visible&&an.evented&&an.containsPoint(rn))if((this.perPixelTargetFind||an.perPixelTargetFind)&&!an.isEditing){var cn=this.isTargetTransparent(an,nn.x,nn.y);if(!cn)return!0}else return!0},_searchPossibleTargets:function(rn,an){for(var nn,cn=rn.length,hn;cn--;){var sn=rn[cn],pn=sn.group?this._normalizePointer(sn.group,an):an;if(this._checkTarget(pn,sn,an)){nn=rn[cn],nn.subTargetCheck&&nn instanceof e.Group&&(hn=this._searchPossibleTargets(nn._objects,an),hn&&this.targets.push(hn));break}}return nn},restorePointerVpt:function(rn){return e.util.transformPoint(rn,e.util.invertTransform(this.viewportTransform))},getPointer:function(rn,an){if(this._absolutePointer&&!an)return this._absolutePointer;if(this._pointer&&an)return this._pointer;var nn=fn(rn),cn=this.upperCanvasEl,hn=cn.getBoundingClientRect(),sn=hn.width||0,pn=hn.height||0,mn;(!sn||!pn)&&("top"in hn&&"bottom"in hn&&(pn=Math.abs(hn.top-hn.bottom)),"right"in hn&&"left"in hn&&(sn=Math.abs(hn.right-hn.left))),this.calcOffset(),nn.x=nn.x-this._offset.left,nn.y=nn.y-this._offset.top,an||(nn=this.restorePointerVpt(nn));var yn=this.getRetinaScaling();return yn!==1&&(nn.x/=yn,nn.y/=yn),sn===0||pn===0?mn={width:1,height:1}:mn={width:cn.width/sn,height:cn.height/pn},{x:nn.x*mn.width,y:nn.y*mn.height}},_createUpperCanvas:function(){var rn=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),an=this.lowerCanvasEl,nn=this.upperCanvasEl;nn?nn.className="":(nn=this._createCanvasElement(),this.upperCanvasEl=nn),e.util.addClass(nn,"upper-canvas "+rn),this.wrapperEl.appendChild(nn),this._copyCanvasStyle(an,nn),this._applyCanvasStyle(nn),this.contextTop=nn.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=e.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),e.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),e.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(rn){var an=this.width||rn.width,nn=this.height||rn.height;e.util.setStyle(rn,{position:"absolute",width:an+"px",height:nn+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),rn.width=an,rn.height=nn,e.util.makeElementUnselectable(rn)},_copyCanvasStyle:function(rn,an){an.style.cssText=rn.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var rn=this._activeObject;return rn?rn.type==="activeSelection"&&rn._objects?rn._objects.slice(0):[rn]:[]},_onObjectRemoved:function(rn){rn===this._activeObject&&(this.fire("before:selection:cleared",{target:rn}),this._discardActiveObject(),this.fire("selection:cleared",{target:rn}),rn.fire("deselected")),rn===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",rn)},_fireSelectionEvents:function(rn,an){var nn=!1,cn=this.getActiveObjects(),hn=[],sn=[];rn.forEach(function(pn){cn.indexOf(pn)===-1&&(nn=!0,pn.fire("deselected",{e:an,target:pn}),sn.push(pn))}),cn.forEach(function(pn){rn.indexOf(pn)===-1&&(nn=!0,pn.fire("selected",{e:an,target:pn}),hn.push(pn))}),rn.length>0&&cn.length>0?nn&&this.fire("selection:updated",{e:an,selected:hn,deselected:sn,updated:hn[0]||sn[0],target:this._activeObject}):cn.length>0?this.fire("selection:created",{e:an,selected:hn,target:this._activeObject}):rn.length>0&&this.fire("selection:cleared",{e:an,deselected:sn})},setActiveObject:function(rn,an){var nn=this.getActiveObjects();return this._setActiveObject(rn,an),this._fireSelectionEvents(nn,an),this},_setActiveObject:function(rn,an){return this._activeObject===rn||!this._discardActiveObject(an,rn)||rn.onSelect({e:an})?!1:(this._activeObject=rn,!0)},_discardActiveObject:function(rn,an){var nn=this._activeObject;if(nn){if(nn.onDeselect({e:rn,object:an}))return!1;this._activeObject=null}return!0},discardActiveObject:function(rn){var an=this.getActiveObjects(),nn=this.getActiveObject();return an.length&&this.fire("before:selection:cleared",{target:nn,e:rn}),this._discardActiveObject(rn),this._fireSelectionEvents(an,rn),this},dispose:function(){var rn=this.wrapperEl;return this.removeListeners(),rn.removeChild(this.upperCanvasEl),rn.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(an){e.util.cleanUpJsdomNode(this[an]),this[an]=void 0}.bind(this)),rn.parentNode&&rn.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,e.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(rn){var an=this._activeObject;an&&an._renderControls(rn)},_toObject:function(rn,an,nn){var cn=this._realizeGroupTransformOnObject(rn),hn=this.callSuper("_toObject",rn,an,nn);return this._unwindGroupTransformOnObject(rn,cn),hn},_realizeGroupTransformOnObject:function(rn){if(rn.group&&rn.group.type==="activeSelection"&&this._activeObject===rn.group){var an=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],nn={};return an.forEach(function(cn){nn[cn]=rn[cn]}),e.util.addTransformToObject(rn,this._activeObject.calcOwnMatrix()),nn}else return null},_unwindGroupTransformOnObject:function(rn,an){an&&rn.set(an)},_setSVGObject:function(rn,an,nn){var cn=this._realizeGroupTransformOnObject(an);this.callSuper("_setSVGObject",rn,an,nn),this._unwindGroupTransformOnObject(an,cn)},setViewportTransform:function(rn){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),e.StaticCanvas.prototype.setViewportTransform.call(this,rn)}});for(var dn in e.StaticCanvas)dn!=="prototype"&&(e.Canvas[dn]=e.StaticCanvas[dn])}(),function(){var fn=e.util.addListener,en=e.util.removeListener,on=3,dn=2,rn=1,an={passive:!1};function nn(cn,hn){return cn.button&&cn.button===hn-1}e.util.object.extend(e.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(fn,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(cn,hn){var sn=this.upperCanvasEl,pn=this._getEventPrefix();cn(e.window,"resize",this._onResize),cn(sn,pn+"down",this._onMouseDown),cn(sn,pn+"move",this._onMouseMove,an),cn(sn,pn+"out",this._onMouseOut),cn(sn,pn+"enter",this._onMouseEnter),cn(sn,"wheel",this._onMouseWheel),cn(sn,"contextmenu",this._onContextMenu),cn(sn,"dblclick",this._onDoubleClick),cn(sn,"dragover",this._onDragOver),cn(sn,"dragenter",this._onDragEnter),cn(sn,"dragleave",this._onDragLeave),cn(sn,"drop",this._onDrop),this.enablePointerEvents||cn(sn,"touchstart",this._onTouchStart,an),typeof eventjs<"u"&&hn in eventjs&&(eventjs[hn](sn,"gesture",this._onGesture),eventjs[hn](sn,"drag",this._onDrag),eventjs[hn](sn,"orientation",this._onOrientationChange),eventjs[hn](sn,"shake",this._onShake),eventjs[hn](sn,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(en,"remove");var cn=this._getEventPrefix();en(e.document,cn+"up",this._onMouseUp),en(e.document,"touchend",this._onTouchEnd,an),en(e.document,cn+"move",this._onMouseMove,an),en(e.document,"touchmove",this._onMouseMove,an)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._simpleEventHandler.bind(this,"drop"),this.eventsBound=!0)},_onGesture:function(cn,hn){this.__onTransformGesture&&this.__onTransformGesture(cn,hn)},_onDrag:function(cn,hn){this.__onDrag&&this.__onDrag(cn,hn)},_onMouseWheel:function(cn){this.__onMouseWheel(cn)},_onMouseOut:function(cn){var hn=this._hoveredTarget;this.fire("mouse:out",{target:hn,e:cn}),this._hoveredTarget=null,hn&&hn.fire("mouseout",{e:cn});var sn=this;this._hoveredTargets.forEach(function(pn){sn.fire("mouse:out",{target:hn,e:cn}),pn&&hn.fire("mouseout",{e:cn})}),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach(function(pn){pn.isEditing&&pn.hiddenTextarea.focus()})},_onMouseEnter:function(cn){!this._currentTransform&&!this.findTarget(cn)&&(this.fire("mouse:over",{target:null,e:cn}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(cn,hn){this.__onOrientationChange&&this.__onOrientationChange(cn,hn)},_onShake:function(cn,hn){this.__onShake&&this.__onShake(cn,hn)},_onLongPress:function(cn,hn){this.__onLongPress&&this.__onLongPress(cn,hn)},_onDragOver:function(cn){cn.preventDefault();var hn=this._simpleEventHandler("dragover",cn);this._fireEnterLeaveEvents(hn,cn)},_onContextMenu:function(cn){return this.stopContextMenu&&(cn.stopPropagation(),cn.preventDefault()),!1},_onDoubleClick:function(cn){this._cacheTransformEventData(cn),this._handleEvent(cn,"dblclick"),this._resetTransformEventData(cn)},getPointerId:function(cn){var hn=cn.changedTouches;return hn?hn[0]&&hn[0].identifier:this.enablePointerEvents?cn.pointerId:-1},_isMainEvent:function(cn){return cn.isPrimary===!0?!0:cn.isPrimary===!1?!1:cn.type==="touchend"&&cn.touches.length===0?!0:cn.changedTouches?cn.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(cn){cn.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(cn)),this.__onMouseDown(cn),this._resetTransformEventData();var hn=this.upperCanvasEl,sn=this._getEventPrefix();fn(e.document,"touchend",this._onTouchEnd,an),fn(e.document,"touchmove",this._onMouseMove,an),en(hn,sn+"down",this._onMouseDown)},_onMouseDown:function(cn){this.__onMouseDown(cn),this._resetTransformEventData();var hn=this.upperCanvasEl,sn=this._getEventPrefix();en(hn,sn+"move",this._onMouseMove,an),fn(e.document,sn+"up",this._onMouseUp),fn(e.document,sn+"move",this._onMouseMove,an)},_onTouchEnd:function(cn){if(!(cn.touches.length>0)){this.__onMouseUp(cn),this._resetTransformEventData(),this.mainTouchId=null;var hn=this._getEventPrefix();en(e.document,"touchend",this._onTouchEnd,an),en(e.document,"touchmove",this._onMouseMove,an);var sn=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){fn(sn.upperCanvasEl,hn+"down",sn._onMouseDown),sn._willAddMouseDown=0},400)}},_onMouseUp:function(cn){this.__onMouseUp(cn),this._resetTransformEventData();var hn=this.upperCanvasEl,sn=this._getEventPrefix();this._isMainEvent(cn)&&(en(e.document,sn+"up",this._onMouseUp),en(e.document,sn+"move",this._onMouseMove,an),fn(hn,sn+"move",this._onMouseMove,an))},_onMouseMove:function(cn){!this.allowTouchScrolling&&cn.preventDefault&&cn.preventDefault(),this.__onMouseMove(cn)},_onResize:function(){this.calcOffset()},_shouldRender:function(cn){var hn=this._activeObject;return!!hn!=!!cn||hn&&cn&&hn!==cn?!0:(hn&&hn.isEditing,!1)},__onMouseUp:function(cn){var hn,sn=this._currentTransform,pn=this._groupSelector,mn=!1,yn=!pn||pn.left===0&&pn.top===0;if(this._cacheTransformEventData(cn),hn=this._target,this._handleEvent(cn,"up:before"),nn(cn,on)){this.fireRightClick&&this._handleEvent(cn,"up",on,yn);return}if(nn(cn,dn)){this.fireMiddleClick&&this._handleEvent(cn,"up",dn,yn),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(cn);return}if(!!this._isMainEvent(cn)){if(sn&&(this._finalizeCurrentTransform(cn),mn=sn.actionPerformed),!yn){var _n=hn===this._activeObject;this._maybeGroupObjects(cn),mn||(mn=this._shouldRender(hn)||!_n&&hn===this._activeObject)}if(hn){if(hn.selectable&&hn!==this._activeObject&&hn.activeOn==="up")this.setActiveObject(hn,cn),mn=!0;else{var xn=hn._findTargetCorner(this.getPointer(cn,!0),e.util.isTouchEvent(cn)),Sn=hn.controls[xn],Pn=Sn&&Sn.getMouseUpHandler(cn,hn,Sn);if(Pn){var Ln=this.getPointer(cn);Pn(cn,sn,Ln.x,Ln.y)}}hn.isMoving=!1}this._setCursorFromEvent(cn,hn),this._handleEvent(cn,"up",rn,yn),this._groupSelector=null,this._currentTransform=null,hn&&(hn.__corner=0),mn?this.requestRenderAll():yn||this.renderTop()}},_simpleEventHandler:function(cn,hn){var sn=this.findTarget(hn),pn=this.targets,mn={e:hn,target:sn,subTargets:pn};if(this.fire(cn,mn),sn&&sn.fire(cn,mn),!pn)return sn;for(var yn=0;yn<pn.length;yn++)pn[yn].fire(cn,mn);return sn},_handleEvent:function(cn,hn,sn,pn){var mn=this._target,yn=this.targets||[],_n={e:cn,target:mn,subTargets:yn,button:sn||rn,isClick:pn||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};hn==="up"&&(_n.currentTarget=this.findTarget(cn),_n.currentSubTargets=this.targets),this.fire("mouse:"+hn,_n),mn&&mn.fire("mouse"+hn,_n);for(var xn=0;xn<yn.length;xn++)yn[xn].fire("mouse"+hn,_n)},_finalizeCurrentTransform:function(cn){var hn=this._currentTransform,sn=hn.target,pn,mn={e:cn,target:sn,transform:hn,action:hn.action};sn._scaling&&(sn._scaling=!1),sn.setCoords(),(hn.actionPerformed||this.stateful&&sn.hasStateChanged())&&(hn.actionPerformed&&(pn=this._addEventOptions(mn,hn),this._fire(pn,mn)),this._fire("modified",mn))},_addEventOptions:function(cn,hn){var sn,pn;switch(hn.action){case"scaleX":sn="scaled",pn="x";break;case"scaleY":sn="scaled",pn="y";break;case"skewX":sn="skewed",pn="x";break;case"skewY":sn="skewed",pn="y";break;case"scale":sn="scaled",pn="equally";break;case"rotate":sn="rotated";break;case"drag":sn="moved";break}return cn.by=pn,sn},_onMouseDownInDrawingMode:function(cn){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(cn).requestRenderAll();var hn=this.getPointer(cn);this.freeDrawingBrush.onMouseDown(hn,{e:cn,pointer:hn}),this._handleEvent(cn,"down")},_onMouseMoveInDrawingMode:function(cn){if(this._isCurrentlyDrawing){var hn=this.getPointer(cn);this.freeDrawingBrush.onMouseMove(hn,{e:cn,pointer:hn})}this.setCursor(this.freeDrawingCursor),this._handleEvent(cn,"move")},_onMouseUpInDrawingMode:function(cn){var hn=this.getPointer(cn);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:cn,pointer:hn}),this._handleEvent(cn,"up")},__onMouseDown:function(cn){this._cacheTransformEventData(cn),this._handleEvent(cn,"down:before");var hn=this._target;if(nn(cn,on)){this.fireRightClick&&this._handleEvent(cn,"down",on);return}if(nn(cn,dn)){this.fireMiddleClick&&this._handleEvent(cn,"down",dn);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(cn);return}if(!!this._isMainEvent(cn)&&!this._currentTransform){var sn=this._pointer;this._previousPointer=sn;var pn=this._shouldRender(hn),mn=this._shouldGroup(cn,hn);if(this._shouldClearSelection(cn,hn)?this.discardActiveObject(cn):mn&&(this._handleGrouping(cn,hn),hn=this._activeObject),this.selection&&(!hn||!hn.selectable&&!hn.isEditing&&hn!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),hn){var yn=hn===this._activeObject;hn.selectable&&hn.activeOn==="down"&&this.setActiveObject(hn,cn);var _n=hn._findTargetCorner(this.getPointer(cn,!0),e.util.isTouchEvent(cn));if(hn.__corner=_n,hn===this._activeObject&&(_n||!mn)){this._setupCurrentTransform(cn,hn,yn);var xn=hn.controls[_n],sn=this.getPointer(cn),Sn=xn&&xn.getMouseDownHandler(cn,hn,xn);Sn&&Sn(cn,this._currentTransform,sn.x,sn.y)}}this._handleEvent(cn,"down"),(pn||mn)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(cn){this._resetTransformEventData(),this._pointer=this.getPointer(cn,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(cn)||null},_beforeTransform:function(cn){var hn=this._currentTransform;this.stateful&&hn.target.saveState(),this.fire("before:transform",{e:cn,transform:hn})},__onMouseMove:function(cn){this._handleEvent(cn,"move:before"),this._cacheTransformEventData(cn);var hn,sn;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(cn);return}if(!!this._isMainEvent(cn)){var pn=this._groupSelector;pn?(sn=this._absolutePointer,pn.left=sn.x-pn.ex,pn.top=sn.y-pn.ey,this.renderTop()):this._currentTransform?this._transformObject(cn):(hn=this.findTarget(cn)||null,this._setCursorFromEvent(cn,hn),this._fireOverOutEvents(hn,cn)),this._handleEvent(cn,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(cn,hn){var sn=this._hoveredTarget,pn=this._hoveredTargets,mn=this.targets,yn=Math.max(pn.length,mn.length);this.fireSyntheticInOutEvents(cn,hn,{oldTarget:sn,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var _n=0;_n<yn;_n++)this.fireSyntheticInOutEvents(mn[_n],hn,{oldTarget:pn[_n],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=cn,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(cn,hn){var sn=this._draggedoverTarget,pn=this._hoveredTargets,mn=this.targets,yn=Math.max(pn.length,mn.length);this.fireSyntheticInOutEvents(cn,hn,{oldTarget:sn,evtOut:"dragleave",evtIn:"dragenter"});for(var _n=0;_n<yn;_n++)this.fireSyntheticInOutEvents(mn[_n],hn,{oldTarget:pn[_n],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=cn},fireSyntheticInOutEvents:function(cn,hn,sn){var pn,mn,yn=sn.oldTarget,_n,xn,Sn=yn!==cn,Pn=sn.canvasEvtIn,Ln=sn.canvasEvtOut;Sn&&(pn={e:hn,target:cn,previousTarget:yn},mn={e:hn,target:yn,nextTarget:cn}),xn=cn&&Sn,_n=yn&&Sn,_n&&(Ln&&this.fire(Ln,mn),yn.fire(sn.evtOut,mn)),xn&&(Pn&&this.fire(Pn,pn),cn.fire(sn.evtIn,pn))},__onMouseWheel:function(cn){this._cacheTransformEventData(cn),this._handleEvent(cn,"wheel"),this._resetTransformEventData()},_transformObject:function(cn){var hn=this.getPointer(cn),sn=this._currentTransform;sn.reset=!1,sn.shiftKey=cn.shiftKey,sn.altKey=cn[this.centeredKey],this._performTransformAction(cn,sn,hn),sn.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(cn,hn,sn){var pn=sn.x,mn=sn.y,yn=hn.action,_n=!1,xn=hn.actionHandler;xn&&(_n=xn(cn,hn,pn,mn)),yn==="drag"&&_n&&(hn.target.isMoving=!0,this.setCursor(hn.target.moveCursor||this.moveCursor)),hn.actionPerformed=hn.actionPerformed||_n},_fire:e.controlsUtils.fireEvent,_setCursorFromEvent:function(cn,hn){if(!hn)return this.setCursor(this.defaultCursor),!1;var sn=hn.hoverCursor||this.hoverCursor,pn=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,mn=(!pn||!pn.contains(hn))&&hn._findTargetCorner(this.getPointer(cn,!0));mn?this.setCursor(this.getCornerCursor(mn,hn,cn)):(hn.subTargetCheck&&this.targets.concat().reverse().map(function(yn){sn=yn.hoverCursor||sn}),this.setCursor(sn))},getCornerCursor:function(cn,hn,sn){var pn=hn.controls[cn];return pn.cursorStyleHandler(sn,pn,hn)}})}(),function(){var fn=Math.min,en=Math.max;e.util.object.extend(e.Canvas.prototype,{_shouldGroup:function(on,dn){var rn=this._activeObject;return rn&&this._isSelectionKeyPressed(on)&&dn&&dn.selectable&&this.selection&&(rn!==dn||rn.type==="activeSelection")&&!dn.onSelect({e:on})},_handleGrouping:function(on,dn){var rn=this._activeObject;rn.__corner||dn===rn&&(dn=this.findTarget(on,!0),!dn||!dn.selectable)||(rn&&rn.type==="activeSelection"?this._updateActiveSelection(dn,on):this._createActiveSelection(dn,on))},_updateActiveSelection:function(on,dn){var rn=this._activeObject,an=rn._objects.slice(0);rn.contains(on)?(rn.removeWithUpdate(on),this._hoveredTarget=on,this._hoveredTargets=this.targets.concat(),rn.size()===1&&this._setActiveObject(rn.item(0),dn)):(rn.addWithUpdate(on),this._hoveredTarget=rn,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(an,dn)},_createActiveSelection:function(on,dn){var rn=this.getActiveObjects(),an=this._createGroup(on);this._hoveredTarget=an,this._setActiveObject(an,dn),this._fireSelectionEvents(rn,dn)},_createGroup:function(on){var dn=this._objects,rn=dn.indexOf(this._activeObject)<dn.indexOf(on),an=rn?[this._activeObject,on]:[on,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new e.ActiveSelection(an,{canvas:this})},_groupSelectedObjects:function(on){var dn=this._collectObjects(on),rn;dn.length===1?this.setActiveObject(dn[0],on):dn.length>1&&(rn=new e.ActiveSelection(dn.reverse(),{canvas:this}),this.setActiveObject(rn,on))},_collectObjects:function(on){for(var dn=[],rn,an=this._groupSelector.ex,nn=this._groupSelector.ey,cn=an+this._groupSelector.left,hn=nn+this._groupSelector.top,sn=new e.Point(fn(an,cn),fn(nn,hn)),pn=new e.Point(en(an,cn),en(nn,hn)),mn=!this.selectionFullyContained,yn=an===cn&&nn===hn,_n=this._objects.length;_n--&&(rn=this._objects[_n],!(!(!rn||!rn.selectable||!rn.visible)&&(mn&&rn.intersectsWithRect(sn,pn,!0)||rn.isContainedWithinRect(sn,pn,!0)||mn&&rn.containsPoint(sn,null,!0)||mn&&rn.containsPoint(pn,null,!0))&&(dn.push(rn),yn))););return dn.length>1&&(dn=dn.filter(function(xn){return!xn.onSelect({e:on})})),dn},_maybeGroupObjects:function(on){this.selection&&this._groupSelector&&this._groupSelectedObjects(on),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){e.util.object.extend(e.StaticCanvas.prototype,{toDataURL:function(fn){fn||(fn={});var en=fn.format||"png",on=fn.quality||1,dn=(fn.multiplier||1)*(fn.enableRetinaScaling?this.getRetinaScaling():1),rn=this.toCanvasElement(dn,fn);return e.util.toDataURL(rn,en,on)},toCanvasElement:function(fn,en){fn=fn||1,en=en||{};var on=(en.width||this.width)*fn,dn=(en.height||this.height)*fn,rn=this.getZoom(),an=this.width,nn=this.height,cn=rn*fn,hn=this.viewportTransform,sn=(hn[4]-(en.left||0))*fn,pn=(hn[5]-(en.top||0))*fn,mn=this.interactive,yn=[cn,0,0,cn,sn,pn],_n=this.enableRetinaScaling,xn=e.util.createCanvasElement(),Sn=this.contextTop;return xn.width=on,xn.height=dn,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=yn,this.width=on,this.height=dn,this.calcViewportBoundaries(),this.renderCanvas(xn.getContext("2d"),this._objects),this.viewportTransform=hn,this.width=an,this.height=nn,this.calcViewportBoundaries(),this.interactive=mn,this.enableRetinaScaling=_n,this.contextTop=Sn,xn}})}(),e.util.object.extend(e.StaticCanvas.prototype,{loadFromJSON:function(fn,en,on){if(!!fn){var dn=typeof fn=="string"?JSON.parse(fn):e.util.object.clone(fn),rn=this,an=dn.clipPath,nn=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete dn.clipPath,this._enlivenObjects(dn.objects,function(cn){rn.clear(),rn._setBgOverlay(dn,function(){an?rn._enlivenObjects([an],function(hn){rn.clipPath=hn[0],rn.__setupCanvas.call(rn,dn,cn,nn,en)}):rn.__setupCanvas.call(rn,dn,cn,nn,en)})},on),this}},__setupCanvas:function(fn,en,on,dn){var rn=this;en.forEach(function(an,nn){rn.insertAt(an,nn)}),this.renderOnAddRemove=on,delete fn.objects,delete fn.backgroundImage,delete fn.overlayImage,delete fn.background,delete fn.overlay,this._setOptions(fn),this.renderAll(),dn&&dn()},_setBgOverlay:function(fn,en){var on={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!fn.backgroundImage&&!fn.overlayImage&&!fn.background&&!fn.overlay){en&&en();return}var dn=function(){on.backgroundImage&&on.overlayImage&&on.backgroundColor&&on.overlayColor&&en&&en()};this.__setBgOverlay("backgroundImage",fn.backgroundImage,on,dn),this.__setBgOverlay("overlayImage",fn.overlayImage,on,dn),this.__setBgOverlay("backgroundColor",fn.background,on,dn),this.__setBgOverlay("overlayColor",fn.overlay,on,dn)},__setBgOverlay:function(fn,en,on,dn){var rn=this;if(!en){on[fn]=!0,dn&&dn();return}fn==="backgroundImage"||fn==="overlayImage"?e.util.enlivenObjects([en],function(an){rn[fn]=an[0],on[fn]=!0,dn&&dn()}):this["set"+e.util.string.capitalize(fn,!0)](en,function(){on[fn]=!0,dn&&dn()})},_enlivenObjects:function(fn,en,on){if(!fn||fn.length===0){en&&en([]);return}e.util.enlivenObjects(fn,function(dn){en&&en(dn)},null,on)},_toDataURL:function(fn,en){this.clone(function(on){en(on.toDataURL(fn))})},_toDataURLWithMultiplier:function(fn,en,on){this.clone(function(dn){on(dn.toDataURLWithMultiplier(fn,en))})},clone:function(fn,en){var on=JSON.stringify(this.toJSON(en));this.cloneWithoutData(function(dn){dn.loadFromJSON(on,function(){fn&&fn(dn)})})},cloneWithoutData:function(fn){var en=e.util.createCanvasElement();en.width=this.width,en.height=this.height;var on=new e.Canvas(en);this.backgroundImage?(on.setBackgroundImage(this.backgroundImage.src,function(){on.renderAll(),fn&&fn(on)}),on.backgroundImageOpacity=this.backgroundImageOpacity,on.backgroundImageStretch=this.backgroundImageStretch):fn&&fn(on)}}),function(fn){var en=fn.fabric||(fn.fabric={}),on=en.util.object.extend,dn=en.util.object.clone,rn=en.util.toFixed,an=en.util.string.capitalize,nn=en.util.degreesToRadians,cn=!en.isLikelyNode,hn=2;en.Object||(en.Object=en.util.createClass(en.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:cn,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(sn){sn&&this.setOptions(sn)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=en.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(sn){var pn=en.perfLimitSizeTotal,mn=sn.width,yn=sn.height,_n=en.maxCacheSideLimit,xn=en.minCacheSideLimit;if(mn<=_n&&yn<=_n&&mn*yn<=pn)return mn<xn&&(sn.width=xn),yn<xn&&(sn.height=xn),sn;var Sn=mn/yn,Pn=en.util.limitDimsByArea(Sn,pn),Ln=en.util.capValue,In=Ln(xn,Pn.x,_n),Rn=Ln(xn,Pn.y,_n);return mn>In&&(sn.zoomX/=mn/In,sn.width=In,sn.capped=!0),yn>Rn&&(sn.zoomY/=yn/Rn,sn.height=Rn,sn.capped=!0),sn},_getCacheCanvasDimensions:function(){var sn=this.getTotalObjectScaling(),pn=this._getTransformedDimensions(0,0),mn=pn.x*sn.scaleX/this.scaleX,yn=pn.y*sn.scaleY/this.scaleY;return{width:mn+hn,height:yn+hn,zoomX:sn.scaleX,zoomY:sn.scaleY,x:mn,y:yn}},_updateCacheCanvas:function(){var sn=this.canvas;if(this.noScaleCache&&sn&&sn._currentTransform){var pn=sn._currentTransform.target,mn=sn._currentTransform.action;if(this===pn&&mn.slice&&mn.slice(0,5)==="scale")return!1}var yn=this._cacheCanvas,_n=this._limitCacheSize(this._getCacheCanvasDimensions()),xn=en.minCacheSideLimit,Sn=_n.width,Pn=_n.height,Ln,In,Rn=_n.zoomX,Mn=_n.zoomY,Hn=Sn!==this.cacheWidth||Pn!==this.cacheHeight,Qn=this.zoomX!==Rn||this.zoomY!==Mn,Kn=Hn||Qn,nr=0,Zn=0,ir=!1;if(Hn){var Jn=this._cacheCanvas.width,Vn=this._cacheCanvas.height,Xn=Sn>Jn||Pn>Vn,Yn=(Sn<Jn*.9||Pn<Vn*.9)&&Jn>xn&&Vn>xn;ir=Xn||Yn,Xn&&!_n.capped&&(Sn>xn||Pn>xn)&&(nr=Sn*.1,Zn=Pn*.1)}return this instanceof en.Text&&this.path&&(Kn=!0,ir=!0,nr+=this.getHeightOfLine(0)*this.zoomX,Zn+=this.getHeightOfLine(0)*this.zoomY),Kn?(ir?(yn.width=Math.ceil(Sn+nr),yn.height=Math.ceil(Pn+Zn)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,yn.width,yn.height)),Ln=_n.x/2,In=_n.y/2,this.cacheTranslationX=Math.round(yn.width/2-Ln)+Ln,this.cacheTranslationY=Math.round(yn.height/2-In)+In,this.cacheWidth=Sn,this.cacheHeight=Pn,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(Rn,Mn),this.zoomX=Rn,this.zoomY=Mn,!0):!1},setOptions:function(sn){this._setOptions(sn),this._initGradient(sn.fill,"fill"),this._initGradient(sn.stroke,"stroke"),this._initPattern(sn.fill,"fill"),this._initPattern(sn.stroke,"stroke")},transform:function(sn){var pn=this.group&&!this.group._transformDone||this.group&&this.canvas&&sn===this.canvas.contextTop,mn=this.calcTransformMatrix(!pn);sn.transform(mn[0],mn[1],mn[2],mn[3],mn[4],mn[5])},toObject:function(sn){var pn=en.Object.NUM_FRACTION_DIGITS,mn={type:this.type,version:en.version,originX:this.originX,originY:this.originY,left:rn(this.left,pn),top:rn(this.top,pn),width:rn(this.width,pn),height:rn(this.height,pn),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:rn(this.strokeWidth,pn),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:rn(this.strokeMiterLimit,pn),scaleX:rn(this.scaleX,pn),scaleY:rn(this.scaleY,pn),angle:rn(this.angle,pn),flipX:this.flipX,flipY:this.flipY,opacity:rn(this.opacity,pn),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:rn(this.skewX,pn),skewY:rn(this.skewY,pn)};return this.clipPath&&!this.clipPath.excludeFromExport&&(mn.clipPath=this.clipPath.toObject(sn),mn.clipPath.inverted=this.clipPath.inverted,mn.clipPath.absolutePositioned=this.clipPath.absolutePositioned),en.util.populateWithProperties(this,mn,sn),this.includeDefaultValues||(mn=this._removeDefaultValues(mn)),mn},toDatalessObject:function(sn){return this.toObject(sn)},_removeDefaultValues:function(sn){var pn=en.util.getKlass(sn.type).prototype,mn=pn.stateProperties;return mn.forEach(function(yn){if(!(yn==="left"||yn==="top")){sn[yn]===pn[yn]&&delete sn[yn];var _n=Object.prototype.toString.call(sn[yn])==="[object Array]"&&Object.prototype.toString.call(pn[yn])==="[object Array]";_n&&sn[yn].length===0&&pn[yn].length===0&&delete sn[yn]}}),sn},toString:function(){return"#<fabric."+an(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var sn=en.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(sn.scaleX),scaleY:Math.abs(sn.scaleY)}},getTotalObjectScaling:function(){var sn=this.getObjectScaling(),pn=sn.scaleX,mn=sn.scaleY;if(this.canvas){var yn=this.canvas.getZoom(),_n=this.canvas.getRetinaScaling();pn*=yn*_n,mn*=yn*_n}return{scaleX:pn,scaleY:mn}},getObjectOpacity:function(){var sn=this.opacity;return this.group&&(sn*=this.group.getObjectOpacity()),sn},_set:function(sn,pn){var mn=sn==="scaleX"||sn==="scaleY",yn=this[sn]!==pn,_n=!1;return mn&&(pn=this._constrainScale(pn)),sn==="scaleX"&&pn<0?(this.flipX=!this.flipX,pn*=-1):sn==="scaleY"&&pn<0?(this.flipY=!this.flipY,pn*=-1):sn==="shadow"&&pn&&!(pn instanceof en.Shadow)?pn=new en.Shadow(pn):sn==="dirty"&&this.group&&this.group.set("dirty",pn),this[sn]=pn,yn&&(_n=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(sn)>-1?(this.dirty=!0,_n&&this.group.set("dirty",!0)):_n&&this.stateProperties.indexOf(sn)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:en.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(sn){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(sn.save(),this._setupCompositeOperation(sn),this.drawSelectionBackground(sn),this.transform(sn),this._setOpacity(sn),this._setShadow(sn,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(sn)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(sn),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),sn.restore())},renderCache:function(sn){sn=sn||{},this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,sn.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(sn){var pn=this.clipPath;if(sn.save(),pn.inverted?sn.globalCompositeOperation="destination-out":sn.globalCompositeOperation="destination-in",pn.absolutePositioned){var mn=en.util.invertTransform(this.calcTransformMatrix());sn.transform(mn[0],mn[1],mn[2],mn[3],mn[4],mn[5])}pn.transform(sn),sn.scale(1/pn.zoomX,1/pn.zoomY),sn.drawImage(pn._cacheCanvas,-pn.cacheTranslationX,-pn.cacheTranslationY),sn.restore()},drawObject:function(sn,pn){var mn=this.fill,yn=this.stroke;pn?(this.fill="black",this.stroke="",this._setClippingProperties(sn)):this._renderBackground(sn),this._render(sn),this._drawClipPath(sn),this.fill=mn,this.stroke=yn},_drawClipPath:function(sn){var pn=this.clipPath;!pn||(pn.canvas=this.canvas,pn.shouldCache(),pn._transformDone=!0,pn.renderCache({forClipping:!0}),this.drawClipPathOnCache(sn))},drawCacheOnCanvas:function(sn){sn.scale(1/this.zoomX,1/this.zoomY),sn.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(sn){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!sn&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!sn){var pn=this.cacheWidth/this.zoomX,mn=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-pn/2,-mn/2,pn,mn)}return!0}return!1},_renderBackground:function(sn){if(!!this.backgroundColor){var pn=this._getNonTransformedDimensions();sn.fillStyle=this.backgroundColor,sn.fillRect(-pn.x/2,-pn.y/2,pn.x,pn.y),this._removeShadow(sn)}},_setOpacity:function(sn){this.group&&!this.group._transformDone?sn.globalAlpha=this.getObjectOpacity():sn.globalAlpha*=this.opacity},_setStrokeStyles:function(sn,pn){var mn=pn.stroke;mn&&(sn.lineWidth=pn.strokeWidth,sn.lineCap=pn.strokeLineCap,sn.lineDashOffset=pn.strokeDashOffset,sn.lineJoin=pn.strokeLineJoin,sn.miterLimit=pn.strokeMiterLimit,mn.toLive?mn.gradientUnits==="percentage"||mn.gradientTransform||mn.patternTransform?this._applyPatternForTransformedGradient(sn,mn):(sn.strokeStyle=mn.toLive(sn,this),this._applyPatternGradientTransform(sn,mn)):sn.strokeStyle=pn.stroke)},_setFillStyles:function(sn,pn){var mn=pn.fill;mn&&(mn.toLive?(sn.fillStyle=mn.toLive(sn,this),this._applyPatternGradientTransform(sn,pn.fill)):sn.fillStyle=mn)},_setClippingProperties:function(sn){sn.globalAlpha=1,sn.strokeStyle="transparent",sn.fillStyle="#000000"},_setLineDash:function(sn,pn){!pn||pn.length===0||(1&pn.length&&pn.push.apply(pn,pn),sn.setLineDash(pn))},_renderControls:function(sn,pn){var mn=this.getViewportTransform(),yn=this.calcTransformMatrix(),_n,xn,Sn;pn=pn||{},xn=typeof pn.hasBorders<"u"?pn.hasBorders:this.hasBorders,Sn=typeof pn.hasControls<"u"?pn.hasControls:this.hasControls,yn=en.util.multiplyTransformMatrices(mn,yn),_n=en.util.qrDecompose(yn),sn.save(),sn.translate(_n.translateX,_n.translateY),sn.lineWidth=1*this.borderScaleFactor,this.group||(sn.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),sn.rotate(nn(_n.angle)),pn.forActiveSelection||this.group?xn&&this.drawBordersInGroup(sn,_n,pn):xn&&this.drawBorders(sn,pn),Sn&&this.drawControls(sn,pn),sn.restore()},_setShadow:function(sn){if(!!this.shadow){var pn=this.shadow,mn=this.canvas,yn,_n=mn&&mn.viewportTransform[0]||1,xn=mn&&mn.viewportTransform[3]||1;pn.nonScaling?yn={scaleX:1,scaleY:1}:yn=this.getObjectScaling(),mn&&mn._isRetinaScaling()&&(_n*=en.devicePixelRatio,xn*=en.devicePixelRatio),sn.shadowColor=pn.color,sn.shadowBlur=pn.blur*en.browserShadowBlurConstant*(_n+xn)*(yn.scaleX+yn.scaleY)/4,sn.shadowOffsetX=pn.offsetX*_n*yn.scaleX,sn.shadowOffsetY=pn.offsetY*xn*yn.scaleY}},_removeShadow:function(sn){!this.shadow||(sn.shadowColor="",sn.shadowBlur=sn.shadowOffsetX=sn.shadowOffsetY=0)},_applyPatternGradientTransform:function(sn,pn){if(!pn||!pn.toLive)return{offsetX:0,offsetY:0};var mn=pn.gradientTransform||pn.patternTransform,yn=-this.width/2+pn.offsetX||0,_n=-this.height/2+pn.offsetY||0;return pn.gradientUnits==="percentage"?sn.transform(this.width,0,0,this.height,yn,_n):sn.transform(1,0,0,1,yn,_n),mn&&sn.transform(mn[0],mn[1],mn[2],mn[3],mn[4],mn[5]),{offsetX:yn,offsetY:_n}},_renderPaintInOrder:function(sn){this.paintFirst==="stroke"?(this._renderStroke(sn),this._renderFill(sn)):(this._renderFill(sn),this._renderStroke(sn))},_render:function(){},_renderFill:function(sn){!this.fill||(sn.save(),this._setFillStyles(sn,this),this.fillRule==="evenodd"?sn.fill("evenodd"):sn.fill(),sn.restore())},_renderStroke:function(sn){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(sn),sn.save(),this.strokeUniform&&this.group){var pn=this.getObjectScaling();sn.scale(1/pn.scaleX,1/pn.scaleY)}else this.strokeUniform&&sn.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(sn,this.strokeDashArray),this._setStrokeStyles(sn,this),sn.stroke(),sn.restore()}},_applyPatternForTransformedGradient:function(sn,pn){var mn=this._limitCacheSize(this._getCacheCanvasDimensions()),yn=en.util.createCanvasElement(),_n,xn=this.canvas.getRetinaScaling(),Sn=mn.x/this.scaleX/xn,Pn=mn.y/this.scaleY/xn;yn.width=Sn,yn.height=Pn,_n=yn.getContext("2d"),_n.beginPath(),_n.moveTo(0,0),_n.lineTo(Sn,0),_n.lineTo(Sn,Pn),_n.lineTo(0,Pn),_n.closePath(),_n.translate(Sn/2,Pn/2),_n.scale(mn.zoomX/this.scaleX/xn,mn.zoomY/this.scaleY/xn),this._applyPatternGradientTransform(_n,pn),_n.fillStyle=pn.toLive(sn),_n.fill(),sn.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),sn.scale(xn*this.scaleX/mn.zoomX,xn*this.scaleY/mn.zoomY),sn.strokeStyle=_n.createPattern(yn,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var sn=en.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",sn.scaleX),this.set("scaleY",sn.scaleY),this.angle=sn.angle,this.skewX=sn.skewX,this.skewY=0}},_removeTransformMatrix:function(sn){var pn=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),pn=en.util.transformPoint(pn,this.transformMatrix)),this.transformMatrix=null,sn&&(this.scaleX*=sn.scaleX,this.scaleY*=sn.scaleY,this.cropX=sn.cropX,this.cropY=sn.cropY,pn.x+=sn.offsetLeft,pn.y+=sn.offsetTop,this.width=sn.width,this.height=sn.height),this.setPositionByOrigin(pn,"center","center")},clone:function(sn,pn){var mn=this.toObject(pn);this.constructor.fromObject?this.constructor.fromObject(mn,sn):en.Object._fromObject("Object",mn,sn)},cloneAsImage:function(sn,pn){var mn=this.toCanvasElement(pn);return sn&&sn(new en.Image(mn)),this},toCanvasElement:function(sn){sn||(sn={});var pn=en.util,mn=pn.saveObjectTransform(this),yn=this.group,_n=this.shadow,xn=Math.abs,Sn=(sn.multiplier||1)*(sn.enableRetinaScaling?en.devicePixelRatio:1);delete this.group,sn.withoutTransform&&pn.resetObjectTransform(this),sn.withoutShadow&&(this.shadow=null);var Pn=en.util.createCanvasElement(),Ln=this.getBoundingRect(!0,!0),In=this.shadow,Rn,Mn={x:0,y:0},Hn,Qn,Kn;In&&(Hn=In.blur,In.nonScaling?Rn={scaleX:1,scaleY:1}:Rn=this.getObjectScaling(),Mn.x=2*Math.round(xn(In.offsetX)+Hn)*xn(Rn.scaleX),Mn.y=2*Math.round(xn(In.offsetY)+Hn)*xn(Rn.scaleY)),Qn=Ln.width+Mn.x,Kn=Ln.height+Mn.y,Pn.width=Math.ceil(Qn),Pn.height=Math.ceil(Kn);var nr=new en.StaticCanvas(Pn,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});sn.format==="jpeg"&&(nr.backgroundColor="#fff"),this.setPositionByOrigin(new en.Point(nr.width/2,nr.height/2),"center","center");var Zn=this.canvas;nr.add(this);var ir=nr.toCanvasElement(Sn||1,sn);return this.shadow=_n,this.set("canvas",Zn),yn&&(this.group=yn),this.set(mn).setCoords(),nr._objects=[],nr.dispose(),nr=null,ir},toDataURL:function(sn){return sn||(sn={}),en.util.toDataURL(this.toCanvasElement(sn),sn.format||"png",sn.quality||1)},isType:function(sn){return this.type===sn},complexity:function(){return 1},toJSON:function(sn){return this.toObject(sn)},rotate:function(sn){var pn=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return pn&&this._setOriginToCenter(),this.set("angle",sn),pn&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(sn,pn){pn=pn||this.canvas.getPointer(sn);var mn=new en.Point(pn.x,pn.y),yn=this._getLeftTopCoords();return this.angle&&(mn=en.util.rotatePoint(mn,yn,nn(-this.angle))),{x:mn.x-yn.x,y:mn.y-yn.y}},_setupCompositeOperation:function(sn){this.globalCompositeOperation&&(sn.globalCompositeOperation=this.globalCompositeOperation)}}),en.util.createAccessors&&en.util.createAccessors(en.Object),on(en.Object.prototype,en.Observable),en.Object.NUM_FRACTION_DIGITS=2,en.Object._fromObject=function(sn,pn,mn,yn){var _n=en[sn];pn=dn(pn,!0),en.util.enlivenPatterns([pn.fill,pn.stroke],function(xn){typeof xn[0]<"u"&&(pn.fill=xn[0]),typeof xn[1]<"u"&&(pn.stroke=xn[1]),en.util.enlivenObjects([pn.clipPath],function(Sn){pn.clipPath=Sn[0];var Pn=yn?new _n(pn[yn],pn):new _n(pn);mn&&mn(Pn)})})},en.Object.__uid=0)}(St),function(){var fn=e.util.degreesToRadians,en={left:-.5,center:0,right:.5},on={top:-.5,center:0,bottom:.5};e.util.object.extend(e.Object.prototype,{translateToGivenOrigin:function(dn,rn,an,nn,cn){var hn=dn.x,sn=dn.y,pn,mn,yn;return typeof rn=="string"?rn=en[rn]:rn-=.5,typeof nn=="string"?nn=en[nn]:nn-=.5,pn=nn-rn,typeof an=="string"?an=on[an]:an-=.5,typeof cn=="string"?cn=on[cn]:cn-=.5,mn=cn-an,(pn||mn)&&(yn=this._getTransformedDimensions(),hn=dn.x+pn*yn.x,sn=dn.y+mn*yn.y),new e.Point(hn,sn)},translateToCenterPoint:function(dn,rn,an){var nn=this.translateToGivenOrigin(dn,rn,an,"center","center");return this.angle?e.util.rotatePoint(nn,dn,fn(this.angle)):nn},translateToOriginPoint:function(dn,rn,an){var nn=this.translateToGivenOrigin(dn,"center","center",rn,an);return this.angle?e.util.rotatePoint(nn,dn,fn(this.angle)):nn},getCenterPoint:function(){var dn=new e.Point(this.left,this.top);return this.translateToCenterPoint(dn,this.originX,this.originY)},getPointByOrigin:function(dn,rn){var an=this.getCenterPoint();return this.translateToOriginPoint(an,dn,rn)},toLocalPoint:function(dn,rn,an){var nn=this.getCenterPoint(),cn,hn;return typeof rn<"u"&&typeof an<"u"?cn=this.translateToGivenOrigin(nn,"center","center",rn,an):cn=new e.Point(this.left,this.top),hn=new e.Point(dn.x,dn.y),this.angle&&(hn=e.util.rotatePoint(hn,nn,-fn(this.angle))),hn.subtractEquals(cn)},setPositionByOrigin:function(dn,rn,an){var nn=this.translateToCenterPoint(dn,rn,an),cn=this.translateToOriginPoint(nn,this.originX,this.originY);this.set("left",cn.x),this.set("top",cn.y)},adjustPosition:function(dn){var rn=fn(this.angle),an=this.getScaledWidth(),nn=e.util.cos(rn)*an,cn=e.util.sin(rn)*an,hn,sn;typeof this.originX=="string"?hn=en[this.originX]:hn=this.originX-.5,typeof dn=="string"?sn=en[dn]:sn=dn-.5,this.left+=nn*(sn-hn),this.top+=cn*(sn-hn),this.setCoords(),this.originX=dn},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var dn=this.getCenterPoint();this.originX="center",this.originY="center",this.left=dn.x,this.top=dn.y},_resetOrigin:function(){var dn=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=dn.x,this.top=dn.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function fn(an){return[new e.Point(an.tl.x,an.tl.y),new e.Point(an.tr.x,an.tr.y),new e.Point(an.br.x,an.br.y),new e.Point(an.bl.x,an.bl.y)]}var en=e.util,on=en.degreesToRadians,dn=en.multiplyTransformMatrices,rn=en.transformPoint;en.object.extend(e.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(an,nn){return nn?an?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),an?this.aCoords:this.lineCoords)},getCoords:function(an,nn){return fn(this._getCoords(an,nn))},intersectsWithRect:function(an,nn,cn,hn){var sn=this.getCoords(cn,hn),pn=e.Intersection.intersectPolygonRectangle(sn,an,nn);return pn.status==="Intersection"},intersectsWithObject:function(an,nn,cn){var hn=e.Intersection.intersectPolygonPolygon(this.getCoords(nn,cn),an.getCoords(nn,cn));return hn.status==="Intersection"||an.isContainedWithinObject(this,nn,cn)||this.isContainedWithinObject(an,nn,cn)},isContainedWithinObject:function(an,nn,cn){for(var hn=this.getCoords(nn,cn),sn=nn?an.aCoords:an.lineCoords,pn=0,mn=an._getImageLines(sn);pn<4;pn++)if(!an.containsPoint(hn[pn],mn))return!1;return!0},isContainedWithinRect:function(an,nn,cn,hn){var sn=this.getBoundingRect(cn,hn);return sn.left>=an.x&&sn.left+sn.width<=nn.x&&sn.top>=an.y&&sn.top+sn.height<=nn.y},containsPoint:function(an,pn,cn,hn){var sn=this._getCoords(cn,hn),pn=pn||this._getImageLines(sn),mn=this._findCrossPoints(an,pn);return mn!==0&&mn%2===1},isOnScreen:function(an){if(!this.canvas)return!1;var nn=this.canvas.vptCoords.tl,cn=this.canvas.vptCoords.br,hn=this.getCoords(!0,an);return hn.some(function(sn){return sn.x<=cn.x&&sn.x>=nn.x&&sn.y<=cn.y&&sn.y>=nn.y})||this.intersectsWithRect(nn,cn,!0,an)?!0:this._containsCenterOfCanvas(nn,cn,an)},_containsCenterOfCanvas:function(an,nn,cn){var hn={x:(an.x+nn.x)/2,y:(an.y+nn.y)/2};return!!this.containsPoint(hn,null,!0,cn)},isPartiallyOnScreen:function(an){if(!this.canvas)return!1;var nn=this.canvas.vptCoords.tl,cn=this.canvas.vptCoords.br;if(this.intersectsWithRect(nn,cn,!0,an))return!0;var hn=this.getCoords(!0,an).every(function(sn){return(sn.x>=cn.x||sn.x<=nn.x)&&(sn.y>=cn.y||sn.y<=nn.y)});return hn&&this._containsCenterOfCanvas(nn,cn,an)},_getImageLines:function(an){var nn={topline:{o:an.tl,d:an.tr},rightline:{o:an.tr,d:an.br},bottomline:{o:an.br,d:an.bl},leftline:{o:an.bl,d:an.tl}};return nn},_findCrossPoints:function(an,nn){var cn,hn,sn,pn,mn,yn=0,_n;for(var xn in nn)if(_n=nn[xn],!(_n.o.y<an.y&&_n.d.y<an.y)&&!(_n.o.y>=an.y&&_n.d.y>=an.y)&&(_n.o.x===_n.d.x&&_n.o.x>=an.x?mn=_n.o.x:(cn=0,hn=(_n.d.y-_n.o.y)/(_n.d.x-_n.o.x),sn=an.y-cn*an.x,pn=_n.o.y-hn*_n.o.x,mn=-(sn-pn)/(cn-hn)),mn>=an.x&&(yn+=1),yn===2))break;return yn},getBoundingRect:function(an,nn){var cn=this.getCoords(an,nn);return en.makeBoundingBoxFromPoints(cn)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(an){return Math.abs(an)<this.minScaleLimit?an<0?-this.minScaleLimit:this.minScaleLimit:an===0?1e-4:an},scale:function(an){return this._set("scaleX",an),this._set("scaleY",an),this.setCoords()},scaleToWidth:function(an,nn){var cn=this.getBoundingRect(nn).width/this.getScaledWidth();return this.scale(an/this.width/cn)},scaleToHeight:function(an,nn){var cn=this.getBoundingRect(nn).height/this.getScaledHeight();return this.scale(an/this.height/cn)},calcCoords:function(an){return an?this.calcACoords():this.calcOCoords()},calcLineCoords:function(){var an=this.getViewportTransform(),nn=this.padding,cn=on(this.angle),hn=en.cos(cn),sn=en.sin(cn),pn=hn*nn,mn=sn*nn,yn=pn+mn,_n=pn-mn,xn=this.calcACoords(),Sn={tl:rn(xn.tl,an),tr:rn(xn.tr,an),bl:rn(xn.bl,an),br:rn(xn.br,an)};return nn&&(Sn.tl.x-=_n,Sn.tl.y-=yn,Sn.tr.x+=yn,Sn.tr.y-=_n,Sn.bl.x-=yn,Sn.bl.y+=_n,Sn.br.x+=_n,Sn.br.y+=yn),Sn},calcOCoords:function(){var an=this._calcRotateMatrix(),nn=this._calcTranslateMatrix(),cn=this.getViewportTransform(),hn=dn(cn,nn),sn=dn(hn,an),sn=dn(sn,[1/cn[0],0,0,1/cn[3],0,0]),pn=this._calculateCurrentDimensions(),mn={};return this.forEachControl(function(yn,_n,xn){mn[_n]=yn.positionHandler(pn,sn,xn)}),mn},calcACoords:function(){var an=this._calcRotateMatrix(),nn=this._calcTranslateMatrix(),cn=dn(nn,an),hn=this._getTransformedDimensions(),sn=hn.x/2,pn=hn.y/2;return{tl:rn({x:-sn,y:-pn},cn),tr:rn({x:sn,y:-pn},cn),bl:rn({x:-sn,y:pn},cn),br:rn({x:sn,y:pn},cn)}},setCoords:function(an){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),an?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return en.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var an=this.getCenterPoint();return[1,0,0,1,an.x,an.y]},transformMatrixKey:function(an){var nn="_",cn="";return!an&&this.group&&(cn=this.group.transformMatrixKey(an)+nn),cn+this.top+nn+this.left+nn+this.scaleX+nn+this.scaleY+nn+this.skewX+nn+this.skewY+nn+this.angle+nn+this.originX+nn+this.originY+nn+this.width+nn+this.height+nn+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(an){var nn=this.calcOwnMatrix();if(an||!this.group)return nn;var cn=this.transformMatrixKey(an),hn=this.matrixCache||(this.matrixCache={});return hn.key===cn?hn.value:(this.group&&(nn=dn(this.group.calcTransformMatrix(!1),nn)),hn.key=cn,hn.value=nn,nn)},calcOwnMatrix:function(){var an=this.transformMatrixKey(!0),nn=this.ownMatrixCache||(this.ownMatrixCache={});if(nn.key===an)return nn.value;var cn=this._calcTranslateMatrix(),hn={angle:this.angle,translateX:cn[4],translateY:cn[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return nn.key=an,nn.value=en.composeMatrix(hn),nn.value},_calcDimensionsTransformMatrix:function(an,nn,cn){return en.calcDimensionsMatrix({skewX:an,skewY:nn,scaleX:this.scaleX*(cn&&this.flipX?-1:1),scaleY:this.scaleY*(cn&&this.flipY?-1:1)})},_getNonTransformedDimensions:function(){var an=this.strokeWidth,nn=this.width+an,cn=this.height+an;return{x:nn,y:cn}},_getTransformedDimensions:function(an,nn){typeof an>"u"&&(an=this.skewX),typeof nn>"u"&&(nn=this.skewY);var cn,hn,sn,pn=an===0&&nn===0;if(this.strokeUniform?(hn=this.width,sn=this.height):(cn=this._getNonTransformedDimensions(),hn=cn.x,sn=cn.y),pn)return this._finalizeDimensions(hn*this.scaleX,sn*this.scaleY);var mn=en.sizeAfterTransform(hn,sn,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:an,skewY:nn});return this._finalizeDimensions(mn.x,mn.y)},_finalizeDimensions:function(an,nn){return this.strokeUniform?{x:an+this.strokeWidth,y:nn+this.strokeWidth}:{x:an,y:nn}},_calculateCurrentDimensions:function(){var an=this.getViewportTransform(),nn=this._getTransformedDimensions(),cn=rn(nn,an,!0);return cn.scalarAdd(2*this.padding)}})}(),e.util.object.extend(e.Object.prototype,{sendToBack:function(){return this.group?e.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?e.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(fn){return this.group?e.StaticCanvas.prototype.sendBackwards.call(this.group,this,fn):this.canvas&&this.canvas.sendBackwards(this,fn),this},bringForward:function(fn){return this.group?e.StaticCanvas.prototype.bringForward.call(this.group,this,fn):this.canvas&&this.canvas.bringForward(this,fn),this},moveTo:function(fn){return this.group&&this.group.type!=="activeSelection"?e.StaticCanvas.prototype.moveTo.call(this.group,this,fn):this.canvas&&this.canvas.moveTo(this,fn),this}}),function(){function fn(on,dn){if(dn){if(dn.toLive)return on+": url(#SVGID_"+dn.id+"); ";var rn=new e.Color(dn),an=on+": "+rn.toRgb()+"; ",nn=rn.getAlpha();return nn!==1&&(an+=on+"-opacity: "+nn.toString()+"; "),an}else return on+": none; "}var en=e.util.toFixed;e.util.object.extend(e.Object.prototype,{getSvgStyles:function(on){var dn=this.fillRule?this.fillRule:"nonzero",rn=this.strokeWidth?this.strokeWidth:"0",an=this.strokeDashArray?this.strokeDashArray.join(" "):"none",nn=this.strokeDashOffset?this.strokeDashOffset:"0",cn=this.strokeLineCap?this.strokeLineCap:"butt",hn=this.strokeLineJoin?this.strokeLineJoin:"miter",sn=this.strokeMiterLimit?this.strokeMiterLimit:"4",pn=typeof this.opacity<"u"?this.opacity:"1",mn=this.visible?"":" visibility: hidden;",yn=on?"":this.getSvgFilter(),_n=fn("fill",this.fill),xn=fn("stroke",this.stroke);return[xn,"stroke-width: ",rn,"; ","stroke-dasharray: ",an,"; ","stroke-linecap: ",cn,"; ","stroke-dashoffset: ",nn,"; ","stroke-linejoin: ",hn,"; ","stroke-miterlimit: ",sn,"; ",_n,"fill-rule: ",dn,"; ","opacity: ",pn,";",yn,mn].join("")},getSvgSpanStyles:function(on,dn){var rn="; ",nn=on.fontFamily?"font-family: "+(on.fontFamily.indexOf("'")===-1&&on.fontFamily.indexOf('"')===-1?"'"+on.fontFamily+"'":on.fontFamily)+rn:"",an=on.strokeWidth?"stroke-width: "+on.strokeWidth+rn:"",nn=nn,cn=on.fontSize?"font-size: "+on.fontSize+"px"+rn:"",hn=on.fontStyle?"font-style: "+on.fontStyle+rn:"",sn=on.fontWeight?"font-weight: "+on.fontWeight+rn:"",pn=on.fill?fn("fill",on.fill):"",mn=on.stroke?fn("stroke",on.stroke):"",yn=this.getSvgTextDecoration(on),_n=on.deltaY?"baseline-shift: "+-on.deltaY+"; ":"";return yn&&(yn="text-decoration: "+yn+rn),[mn,an,nn,cn,hn,sn,yn,pn,_n,dn?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(on){return["overline","underline","line-through"].filter(function(dn){return on[dn.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(on,dn){var rn=on?this.calcTransformMatrix():this.calcOwnMatrix(),an='transform="'+e.util.matrixToSVG(rn);return an+(dn||"")+'" '},_setSVGBg:function(on){if(this.backgroundColor){var dn=e.Object.NUM_FRACTION_DIGITS;on.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',en(-this.width/2,dn),'" y="',en(-this.height/2,dn),'" width="',en(this.width,dn),'" height="',en(this.height,dn),`"></rect>
`)}},toSVG:function(on){return this._createBaseSVGMarkup(this._toSVG(on),{reviver:on})},toClipPathSVG:function(on){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(on),{reviver:on})},_createBaseClipPathSVGMarkup:function(on,dn){dn=dn||{};var rn=dn.reviver,an=dn.additionalTransform||"",nn=[this.getSvgTransform(!0,an),this.getSvgCommons()].join(""),cn=on.indexOf("COMMON_PARTS");return on[cn]=nn,rn?rn(on.join("")):on.join("")},_createBaseSVGMarkup:function(on,dn){dn=dn||{};var rn=dn.noStyle,an=dn.reviver,nn=rn?"":'style="'+this.getSvgStyles()+'" ',cn=dn.withShadow?'style="'+this.getSvgFilter()+'" ':"",hn=this.clipPath,sn=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",pn=hn&&hn.absolutePositioned,mn=this.stroke,yn=this.fill,_n=this.shadow,xn,Sn=[],Pn,Ln=on.indexOf("COMMON_PARTS"),In=dn.additionalTransform;return hn&&(hn.clipPathId="CLIPPATH_"+e.Object.__uid++,Pn='<clipPath id="'+hn.clipPathId+`" >
`+hn.toClipPathSVG(an)+`</clipPath>
`),pn&&Sn.push("<g ",cn,this.getSvgCommons(),` >
`),Sn.push("<g ",this.getSvgTransform(!1),pn?"":cn+this.getSvgCommons(),` >
`),xn=[nn,sn,rn?"":this.addPaintOrder()," ",In?'transform="'+In+'" ':""].join(""),on[Ln]=xn,yn&&yn.toLive&&Sn.push(yn.toSVG(this)),mn&&mn.toLive&&Sn.push(mn.toSVG(this)),_n&&Sn.push(_n.toSVG(this)),hn&&Sn.push(Pn),Sn.push(on.join("")),Sn.push(`</g>
`),pn&&Sn.push(`</g>
`),an?an(Sn.join("")):Sn.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var fn=e.util.object.extend,en="stateProperties";function on(rn,an,nn){var cn={},hn=!0;nn.forEach(function(sn){cn[sn]=rn[sn]}),fn(rn[an],cn,hn)}function dn(rn,an,nn){if(rn===an)return!0;if(Array.isArray(rn)){if(!Array.isArray(an)||rn.length!==an.length)return!1;for(var cn=0,hn=rn.length;cn<hn;cn++)if(!dn(rn[cn],an[cn]))return!1;return!0}else if(rn&&typeof rn=="object"){var sn=Object.keys(rn),pn;if(!an||typeof an!="object"||!nn&&sn.length!==Object.keys(an).length)return!1;for(var cn=0,hn=sn.length;cn<hn;cn++)if(pn=sn[cn],!(pn==="canvas"||pn==="group")&&!dn(rn[pn],an[pn]))return!1;return!0}}e.util.object.extend(e.Object.prototype,{hasStateChanged:function(rn){rn=rn||en;var an="_"+rn;return Object.keys(this[an]).length<this[rn].length?!0:!dn(this[an],this,!0)},saveState:function(rn){var an=rn&&rn.propertySet||en,nn="_"+an;return this[nn]?(on(this,nn,this[an]),rn&&rn.stateProperties&&on(this,nn,rn.stateProperties),this):this.setupState(rn)},setupState:function(rn){rn=rn||{};var an=rn.propertySet||en;return rn.propertySet=an,this["_"+an]={},this.saveState(rn),this}})}(),function(){var fn=e.util.degreesToRadians;e.util.object.extend(e.Object.prototype,{_findTargetCorner:function(en,on){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var dn=en.x,rn=en.y,an,nn,cn=Object.keys(this.oCoords),hn=cn.length-1,sn;for(this.__corner=0;hn>=0;hn--)if(sn=cn[hn],!!this.isControlVisible(sn)&&(nn=this._getImageLines(on?this.oCoords[sn].touchCorner:this.oCoords[sn].corner),an=this._findCrossPoints({x:dn,y:rn},nn),an!==0&&an%2===1))return this.__corner=sn,sn;return!1},forEachControl:function(en){for(var on in this.controls)en(this.controls[on],on,this)},_setCornerCoords:function(){var en=this.oCoords;for(var on in en){var dn=this.controls[on];en[on].corner=dn.calcCornerCoords(this.angle,this.cornerSize,en[on].x,en[on].y,!1),en[on].touchCorner=dn.calcCornerCoords(this.angle,this.touchCornerSize,en[on].x,en[on].y,!0)}},drawSelectionBackground:function(en){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;en.save();var on=this.getCenterPoint(),dn=this._calculateCurrentDimensions(),rn=this.canvas.viewportTransform;return en.translate(on.x,on.y),en.scale(1/rn[0],1/rn[3]),en.rotate(fn(this.angle)),en.fillStyle=this.selectionBackgroundColor,en.fillRect(-dn.x/2,-dn.y/2,dn.x,dn.y),en.restore(),this},drawBorders:function(en,on){on=on||{};var dn=this._calculateCurrentDimensions(),rn=this.borderScaleFactor,an=dn.x+rn,nn=dn.y+rn,cn=typeof on.hasControls<"u"?on.hasControls:this.hasControls,hn=!1;return en.save(),en.strokeStyle=on.borderColor||this.borderColor,this._setLineDash(en,on.borderDashArray||this.borderDashArray),en.strokeRect(-an/2,-nn/2,an,nn),cn&&(en.beginPath(),this.forEachControl(function(sn,pn,mn){sn.withConnection&&sn.getVisibility(mn,pn)&&(hn=!0,en.moveTo(sn.x*an,sn.y*nn),en.lineTo(sn.x*an+sn.offsetX,sn.y*nn+sn.offsetY))}),hn&&en.stroke()),en.restore(),this},drawBordersInGroup:function(en,on,dn){dn=dn||{};var rn=e.util.sizeAfterTransform(this.width,this.height,on),an=this.strokeWidth,nn=this.strokeUniform,cn=this.borderScaleFactor,hn=rn.x+an*(nn?this.canvas.getZoom():on.scaleX)+cn,sn=rn.y+an*(nn?this.canvas.getZoom():on.scaleY)+cn;return en.save(),this._setLineDash(en,dn.borderDashArray||this.borderDashArray),en.strokeStyle=dn.borderColor||this.borderColor,en.strokeRect(-hn/2,-sn/2,hn,sn),en.restore(),this},drawControls:function(en,on){on=on||{},en.save();var dn=this.canvas.getRetinaScaling(),rn,an;return en.setTransform(dn,0,0,dn,0,0),en.strokeStyle=en.fillStyle=on.cornerColor||this.cornerColor,this.transparentCorners||(en.strokeStyle=on.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(en,on.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(rn=this.group.calcTransformMatrix()),this.forEachControl(function(nn,cn,hn){an=hn.oCoords[cn],nn.getVisibility(hn,cn)&&(rn&&(an=e.util.transformPoint(an,rn)),nn.render(en,an.x,an.y,on,hn))}),en.restore(),this},isControlVisible:function(en){return this.controls[en]&&this.controls[en].getVisibility(this,en)},setControlVisible:function(en,on){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[en]=on,this},setControlsVisibility:function(en){en||(en={});for(var on in en)this.setControlVisible(on,en[on]);return this},onDeselect:function(){},onSelect:function(){}})}(),e.util.object.extend(e.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(fn,en){en=en||{};var on=function(){},dn=en.onComplete||on,rn=en.onChange||on,an=this;return e.util.animate({startValue:fn.left,endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(nn){fn.set("left",nn),an.requestRenderAll(),rn()},onComplete:function(){fn.setCoords(),dn()}}),this},fxCenterObjectV:function(fn,en){en=en||{};var on=function(){},dn=en.onComplete||on,rn=en.onChange||on,an=this;return e.util.animate({startValue:fn.top,endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(nn){fn.set("top",nn),an.requestRenderAll(),rn()},onComplete:function(){fn.setCoords(),dn()}}),this},fxRemove:function(fn,en){en=en||{};var on=function(){},dn=en.onComplete||on,rn=en.onChange||on,an=this;return e.util.animate({startValue:fn.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(nn){fn.set("opacity",nn),an.requestRenderAll(),rn()},onComplete:function(){an.remove(fn),dn()}}),this}}),e.util.object.extend(e.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var fn=[],en,on;for(en in arguments[0])fn.push(en);for(var dn=0,rn=fn.length;dn<rn;dn++)en=fn[dn],on=dn!==rn-1,this._animate(en,arguments[0][en],arguments[1],on)}else this._animate.apply(this,arguments);return this},_animate:function(fn,en,on,dn){var rn=this,an;en=en.toString(),on?on=e.util.object.clone(on):on={},~fn.indexOf(".")&&(an=fn.split("."));var nn=rn.colorProperties.indexOf(fn)>-1||an&&rn.colorProperties.indexOf(an[1])>-1,cn=an?this.get(an[0])[an[1]]:this.get(fn);"from"in on||(on.from=cn),nn||(~en.indexOf("=")?en=cn+parseFloat(en.replace("=","")):en=parseFloat(en));var hn={startValue:on.from,endValue:en,byValue:on.by,easing:on.easing,duration:on.duration,abort:on.abort&&function(sn,pn,mn){return on.abort.call(rn,sn,pn,mn)},onChange:function(sn,pn,mn){an?rn[an[0]][an[1]]=sn:rn.set(fn,sn),!dn&&on.onChange&&on.onChange(sn,pn,mn)},onComplete:function(sn,pn,mn){dn||(rn.setCoords(),on.onComplete&&on.onComplete(sn,pn,mn))}};return nn?e.util.animateColor(hn.startValue,hn.endValue,hn.duration,hn):e.util.animate(hn)}}),function(fn){var en=fn.fabric||(fn.fabric={}),on=en.util.object.extend,dn=en.util.object.clone,rn={x1:1,x2:1,y1:1,y2:1};if(en.Line){en.warn("fabric.Line is already defined");return}en.Line=en.util.createClass(en.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:en.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(nn,cn){nn||(nn=[0,0,0,0]),this.callSuper("initialize",cn),this.set("x1",nn[0]),this.set("y1",nn[1]),this.set("x2",nn[2]),this.set("y2",nn[3]),this._setWidthHeight(cn)},_setWidthHeight:function(nn){nn||(nn={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in nn?nn.left:this._getLeftToOriginX(),this.top="top"in nn?nn.top:this._getTopToOriginY()},_set:function(nn,cn){return this.callSuper("_set",nn,cn),typeof rn[nn]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:an({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:an({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(nn){nn.beginPath();var cn=this.calcLinePoints();nn.moveTo(cn.x1,cn.y1),nn.lineTo(cn.x2,cn.y2),nn.lineWidth=this.strokeWidth;var hn=nn.strokeStyle;nn.strokeStyle=this.stroke||nn.fillStyle,this.stroke&&this._renderStroke(nn),nn.strokeStyle=hn},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(nn){return on(this.callSuper("toObject",nn),this.calcLinePoints())},_getNonTransformedDimensions:function(){var nn=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(nn.y-=this.strokeWidth),this.height===0&&(nn.x-=this.strokeWidth)),nn},calcLinePoints:function(){var nn=this.x1<=this.x2?-1:1,cn=this.y1<=this.y2?-1:1,hn=nn*this.width*.5,sn=cn*this.height*.5,pn=nn*this.width*-.5,mn=cn*this.height*-.5;return{x1:hn,x2:pn,y1:sn,y2:mn}},_toSVG:function(){var nn=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',nn.x1,'" y1="',nn.y1,'" x2="',nn.x2,'" y2="',nn.y2,`" />
`]}}),en.Line.ATTRIBUTE_NAMES=en.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),en.Line.fromElement=function(nn,cn,hn){hn=hn||{};var sn=en.parseAttributes(nn,en.Line.ATTRIBUTE_NAMES),pn=[sn.x1||0,sn.y1||0,sn.x2||0,sn.y2||0];cn(new en.Line(pn,on(sn,hn)))},en.Line.fromObject=function(nn,cn){function hn(pn){delete pn.points,cn&&cn(pn)}var sn=dn(nn,!0);sn.points=[nn.x1,nn.y1,nn.x2,nn.y2],en.Object._fromObject("Line",sn,hn,"points")};function an(nn,cn){var hn=nn.origin,sn=nn.axis1,pn=nn.axis2,mn=nn.dimension,yn=cn.nearest,_n=cn.center,xn=cn.farthest;return function(){switch(this.get(hn)){case yn:return Math.min(this.get(sn),this.get(pn));case _n:return Math.min(this.get(sn),this.get(pn))+.5*this.get(mn);case xn:return Math.max(this.get(sn),this.get(pn))}}}}(St),function(fn){var en=fn.fabric||(fn.fabric={}),on=Math.PI;if(en.Circle){en.warn("fabric.Circle is already defined.");return}en.Circle=en.util.createClass(en.Object,{type:"circle",radius:0,startAngle:0,endAngle:on*2,cacheProperties:en.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(rn,an){return this.callSuper("_set",rn,an),rn==="radius"&&this.setRadius(an),this},toObject:function(rn){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(rn))},_toSVG:function(){var rn,an=0,nn=0,cn=(this.endAngle-this.startAngle)%(2*on);if(cn===0)rn=["<circle ","COMMON_PARTS",'cx="'+an+'" cy="'+nn+'" ','r="',this.radius,`" />
`];else{var hn=en.util.cos(this.startAngle)*this.radius,sn=en.util.sin(this.startAngle)*this.radius,pn=en.util.cos(this.endAngle)*this.radius,mn=en.util.sin(this.endAngle)*this.radius,yn=cn>on?"1":"0";rn=['<path d="M '+hn+" "+sn," A "+this.radius+" "+this.radius," 0 ",+yn+" 1"," "+pn+" "+mn,'" ',"COMMON_PARTS",` />
`]}return rn},_render:function(rn){rn.beginPath(),rn.arc(0,0,this.radius,this.startAngle,this.endAngle,!1),this._renderPaintInOrder(rn)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(rn){return this.radius=rn,this.set("width",rn*2).set("height",rn*2)}}),en.Circle.ATTRIBUTE_NAMES=en.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),en.Circle.fromElement=function(rn,an){var nn=en.parseAttributes(rn,en.Circle.ATTRIBUTE_NAMES);if(!dn(nn))throw new Error("value of `r` attribute is required and can not be negative");nn.left=(nn.left||0)-nn.radius,nn.top=(nn.top||0)-nn.radius,an(new en.Circle(nn))};function dn(rn){return"radius"in rn&&rn.radius>=0}en.Circle.fromObject=function(rn,an){en.Object._fromObject("Circle",rn,an)}}(St),function(fn){var en=fn.fabric||(fn.fabric={});if(en.Triangle){en.warn("fabric.Triangle is already defined");return}en.Triangle=en.util.createClass(en.Object,{type:"triangle",width:100,height:100,_render:function(on){var dn=this.width/2,rn=this.height/2;on.beginPath(),on.moveTo(-dn,rn),on.lineTo(0,-rn),on.lineTo(dn,rn),on.closePath(),this._renderPaintInOrder(on)},_toSVG:function(){var on=this.width/2,dn=this.height/2,rn=[-on+" "+dn,"0 "+-dn,on+" "+dn].join(",");return["<polygon ","COMMON_PARTS",'points="',rn,'" />']}}),en.Triangle.fromObject=function(on,dn){return en.Object._fromObject("Triangle",on,dn)}}(St),function(fn){var en=fn.fabric||(fn.fabric={}),on=Math.PI*2;if(en.Ellipse){en.warn("fabric.Ellipse is already defined.");return}en.Ellipse=en.util.createClass(en.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:en.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(dn){this.callSuper("initialize",dn),this.set("rx",dn&&dn.rx||0),this.set("ry",dn&&dn.ry||0)},_set:function(dn,rn){switch(this.callSuper("_set",dn,rn),dn){case"rx":this.rx=rn,this.set("width",rn*2);break;case"ry":this.ry=rn,this.set("height",rn*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(dn){return this.callSuper("toObject",["rx","ry"].concat(dn))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(dn){dn.beginPath(),dn.save(),dn.transform(1,0,0,this.ry/this.rx,0,0),dn.arc(0,0,this.rx,0,on,!1),dn.restore(),this._renderPaintInOrder(dn)}}),en.Ellipse.ATTRIBUTE_NAMES=en.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),en.Ellipse.fromElement=function(dn,rn){var an=en.parseAttributes(dn,en.Ellipse.ATTRIBUTE_NAMES);an.left=(an.left||0)-an.rx,an.top=(an.top||0)-an.ry,rn(new en.Ellipse(an))},en.Ellipse.fromObject=function(dn,rn){en.Object._fromObject("Ellipse",dn,rn)}}(St),function(fn){var en=fn.fabric||(fn.fabric={}),on=en.util.object.extend;if(en.Rect){en.warn("fabric.Rect is already defined");return}en.Rect=en.util.createClass(en.Object,{stateProperties:en.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:en.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(dn){this.callSuper("initialize",dn),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(dn){var rn=this.rx?Math.min(this.rx,this.width/2):0,an=this.ry?Math.min(this.ry,this.height/2):0,nn=this.width,cn=this.height,hn=-this.width/2,sn=-this.height/2,pn=rn!==0||an!==0,mn=1-.5522847498;dn.beginPath(),dn.moveTo(hn+rn,sn),dn.lineTo(hn+nn-rn,sn),pn&&dn.bezierCurveTo(hn+nn-mn*rn,sn,hn+nn,sn+mn*an,hn+nn,sn+an),dn.lineTo(hn+nn,sn+cn-an),pn&&dn.bezierCurveTo(hn+nn,sn+cn-mn*an,hn+nn-mn*rn,sn+cn,hn+nn-rn,sn+cn),dn.lineTo(hn+rn,sn+cn),pn&&dn.bezierCurveTo(hn+mn*rn,sn+cn,hn,sn+cn-mn*an,hn,sn+cn-an),dn.lineTo(hn,sn+an),pn&&dn.bezierCurveTo(hn,sn+mn*an,hn+mn*rn,sn,hn+rn,sn),dn.closePath(),this._renderPaintInOrder(dn)},toObject:function(dn){return this.callSuper("toObject",["rx","ry"].concat(dn))},_toSVG:function(){var dn=-this.width/2,rn=-this.height/2;return["<rect ","COMMON_PARTS",'x="',dn,'" y="',rn,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),en.Rect.ATTRIBUTE_NAMES=en.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),en.Rect.fromElement=function(dn,rn,an){if(!dn)return rn(null);an=an||{};var nn=en.parseAttributes(dn,en.Rect.ATTRIBUTE_NAMES);nn.left=nn.left||0,nn.top=nn.top||0,nn.height=nn.height||0,nn.width=nn.width||0;var cn=new en.Rect(on(an?en.util.object.clone(an):{},nn));cn.visible=cn.visible&&cn.width>0&&cn.height>0,rn(cn)},en.Rect.fromObject=function(dn,rn){return en.Object._fromObject("Rect",dn,rn)}}(St),function(fn){var en=fn.fabric||(fn.fabric={}),on=en.util.object.extend,dn=en.util.array.min,rn=en.util.array.max,an=en.util.toFixed;if(en.Polyline){en.warn("fabric.Polyline is already defined");return}en.Polyline=en.util.createClass(en.Object,{type:"polyline",points:null,cacheProperties:en.Object.prototype.cacheProperties.concat("points"),initialize:function(nn,cn){cn=cn||{},this.points=nn||[],this.callSuper("initialize",cn),this._setPositionDimensions(cn)},_setPositionDimensions:function(nn){var cn=this._calcDimensions(nn),hn;this.width=cn.width,this.height=cn.height,nn.fromSVG||(hn=this.translateToGivenOrigin({x:cn.left-this.strokeWidth/2,y:cn.top-this.strokeWidth/2},"left","top",this.originX,this.originY)),typeof nn.left>"u"&&(this.left=nn.fromSVG?cn.left:hn.x),typeof nn.top>"u"&&(this.top=nn.fromSVG?cn.top:hn.y),this.pathOffset={x:cn.left+this.width/2,y:cn.top+this.height/2}},_calcDimensions:function(){var nn=this.points,cn=dn(nn,"x")||0,hn=dn(nn,"y")||0,sn=rn(nn,"x")||0,pn=rn(nn,"y")||0,mn=sn-cn,yn=pn-hn;return{left:cn,top:hn,width:mn,height:yn}},toObject:function(nn){return on(this.callSuper("toObject",nn),{points:this.points.concat()})},_toSVG:function(){for(var nn=[],cn=this.pathOffset.x,hn=this.pathOffset.y,sn=en.Object.NUM_FRACTION_DIGITS,pn=0,mn=this.points.length;pn<mn;pn++)nn.push(an(this.points[pn].x-cn,sn),",",an(this.points[pn].y-hn,sn)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',nn.join(""),`" />
`]},commonRender:function(nn){var cn,hn=this.points.length,sn=this.pathOffset.x,pn=this.pathOffset.y;if(!hn||isNaN(this.points[hn-1].y))return!1;nn.beginPath(),nn.moveTo(this.points[0].x-sn,this.points[0].y-pn);for(var mn=0;mn<hn;mn++)cn=this.points[mn],nn.lineTo(cn.x-sn,cn.y-pn);return!0},_render:function(nn){!this.commonRender(nn)||this._renderPaintInOrder(nn)},complexity:function(){return this.get("points").length}}),en.Polyline.ATTRIBUTE_NAMES=en.SHARED_ATTRIBUTES.concat(),en.Polyline.fromElementGenerator=function(nn){return function(cn,hn,sn){if(!cn)return hn(null);sn||(sn={});var pn=en.parsePointsAttribute(cn.getAttribute("points")),mn=en.parseAttributes(cn,en[nn].ATTRIBUTE_NAMES);mn.fromSVG=!0,hn(new en[nn](pn,on(mn,sn)))}},en.Polyline.fromElement=en.Polyline.fromElementGenerator("Polyline"),en.Polyline.fromObject=function(nn,cn){return en.Object._fromObject("Polyline",nn,cn,"points")}}(St),function(fn){var en=fn.fabric||(fn.fabric={});if(en.Polygon){en.warn("fabric.Polygon is already defined");return}en.Polygon=en.util.createClass(en.Polyline,{type:"polygon",_render:function(on){!this.commonRender(on)||(on.closePath(),this._renderPaintInOrder(on))}}),en.Polygon.ATTRIBUTE_NAMES=en.SHARED_ATTRIBUTES.concat(),en.Polygon.fromElement=en.Polyline.fromElementGenerator("Polygon"),en.Polygon.fromObject=function(on,dn){en.Object._fromObject("Polygon",on,dn,"points")}}(St),function(fn){var en=fn.fabric||(fn.fabric={}),on=en.util.array.min,dn=en.util.array.max,rn=en.util.object.extend,an=Object.prototype.toString,nn=en.util.toFixed;if(en.Path){en.warn("fabric.Path is already defined");return}en.Path=en.util.createClass(en.Object,{type:"path",path:null,cacheProperties:en.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:en.Object.prototype.stateProperties.concat("path"),initialize:function(cn,hn){hn=hn||{},this.callSuper("initialize",hn),cn||(cn=[]);var sn=an.call(cn)==="[object Array]";this.path=en.util.makePathSimpler(sn?cn:en.util.parsePath(cn)),this.path&&en.Polyline.prototype._setPositionDimensions.call(this,hn)},_renderPathCommands:function(cn){var hn,sn=0,pn=0,mn=0,yn=0,_n=0,xn=0,Sn=-this.pathOffset.x,Pn=-this.pathOffset.y;cn.beginPath();for(var Ln=0,In=this.path.length;Ln<In;++Ln)switch(hn=this.path[Ln],hn[0]){case"L":mn=hn[1],yn=hn[2],cn.lineTo(mn+Sn,yn+Pn);break;case"M":mn=hn[1],yn=hn[2],sn=mn,pn=yn,cn.moveTo(mn+Sn,yn+Pn);break;case"C":mn=hn[5],yn=hn[6],_n=hn[3],xn=hn[4],cn.bezierCurveTo(hn[1]+Sn,hn[2]+Pn,_n+Sn,xn+Pn,mn+Sn,yn+Pn);break;case"Q":cn.quadraticCurveTo(hn[1]+Sn,hn[2]+Pn,hn[3]+Sn,hn[4]+Pn),mn=hn[3],yn=hn[4],_n=hn[1],xn=hn[2];break;case"z":case"Z":mn=sn,yn=pn,cn.closePath();break}},_render:function(cn){this._renderPathCommands(cn),this._renderPaintInOrder(cn)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(cn){return rn(this.callSuper("toObject",cn),{path:this.path.map(function(hn){return hn.slice()})})},toDatalessObject:function(cn){var hn=this.toObject(["sourcePath"].concat(cn));return hn.sourcePath&&delete hn.path,hn},_toSVG:function(){var cn=en.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',cn,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var cn=en.Object.NUM_FRACTION_DIGITS;return" translate("+nn(-this.pathOffset.x,cn)+", "+nn(-this.pathOffset.y,cn)+")"},toClipPathSVG:function(cn){var hn=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:cn,additionalTransform:hn})},toSVG:function(cn){var hn=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:cn,additionalTransform:hn})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var cn=[],hn=[],sn,pn=0,mn=0,yn=0,_n=0,xn,Sn=0,Pn=this.path.length;Sn<Pn;++Sn){switch(sn=this.path[Sn],sn[0]){case"L":yn=sn[1],_n=sn[2],xn=[];break;case"M":yn=sn[1],_n=sn[2],pn=yn,mn=_n,xn=[];break;case"C":xn=en.util.getBoundsOfCurve(yn,_n,sn[1],sn[2],sn[3],sn[4],sn[5],sn[6]),yn=sn[5],_n=sn[6];break;case"Q":xn=en.util.getBoundsOfCurve(yn,_n,sn[1],sn[2],sn[1],sn[2],sn[3],sn[4]),yn=sn[3],_n=sn[4];break;case"z":case"Z":yn=pn,_n=mn;break}xn.forEach(function(Kn){cn.push(Kn.x),hn.push(Kn.y)}),cn.push(yn),hn.push(_n)}var Ln=on(cn)||0,In=on(hn)||0,Rn=dn(cn)||0,Mn=dn(hn)||0,Hn=Rn-Ln,Qn=Mn-In;return{left:Ln,top:In,width:Hn,height:Qn}}}),en.Path.fromObject=function(cn,hn){if(typeof cn.sourcePath=="string"){var sn=cn.sourcePath;en.loadSVGFromURL(sn,function(pn){var mn=pn[0];mn.setOptions(cn),hn&&hn(mn)})}else en.Object._fromObject("Path",cn,hn,"path")},en.Path.ATTRIBUTE_NAMES=en.SHARED_ATTRIBUTES.concat(["d"]),en.Path.fromElement=function(cn,hn,sn){var pn=en.parseAttributes(cn,en.Path.ATTRIBUTE_NAMES);pn.fromSVG=!0,hn(new en.Path(pn.d,rn(pn,sn)))}}(St),function(fn){var en=fn.fabric||(fn.fabric={}),on=en.util.array.min,dn=en.util.array.max;en.Group||(en.Group=en.util.createClass(en.Object,en.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(rn,an,nn){an=an||{},this._objects=[],nn&&this.callSuper("initialize",an),this._objects=rn||[];for(var cn=this._objects.length;cn--;)this._objects[cn].group=this;if(nn)this._updateObjectsACoords();else{var hn=an&&an.centerPoint;an.originX!==void 0&&(this.originX=an.originX),an.originY!==void 0&&(this.originY=an.originY),hn||this._calcBounds(),this._updateObjectsCoords(hn),delete an.centerPoint,this.callSuper("initialize",an)}this.setCoords()},_updateObjectsACoords:function(){for(var rn=!0,an=this._objects.length;an--;)this._objects[an].setCoords(rn)},_updateObjectsCoords:function(an){for(var an=an||this.getCenterPoint(),nn=this._objects.length;nn--;)this._updateObjectCoords(this._objects[nn],an)},_updateObjectCoords:function(rn,an){var nn=rn.left,cn=rn.top,hn=!0;rn.set({left:nn-an.x,top:cn-an.y}),rn.group=this,rn.setCoords(hn)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(rn){var an=!!this.group;return this._restoreObjectsState(),en.util.resetObjectTransform(this),rn&&(an&&en.util.removeTransformFromObject(rn,this.group.calcTransformMatrix()),this._objects.push(rn),rn.group=this,rn._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,an?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(rn){return this._restoreObjectsState(),en.util.resetObjectTransform(this),this.remove(rn),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(rn){this.dirty=!0,rn.group=this,rn._set("canvas",this.canvas)},_onObjectRemoved:function(rn){this.dirty=!0,delete rn.group},_set:function(rn,an){var nn=this._objects.length;if(this.useSetOnGroup)for(;nn--;)this._objects[nn].setOnGroup(rn,an);if(rn==="canvas")for(;nn--;)this._objects[nn]._set(rn,an);en.Object.prototype._set.call(this,rn,an)},toObject:function(rn){var an=this.includeDefaultValues,nn=this._objects.filter(function(hn){return!hn.excludeFromExport}).map(function(hn){var sn=hn.includeDefaultValues;hn.includeDefaultValues=an;var pn=hn.toObject(rn);return hn.includeDefaultValues=sn,pn}),cn=en.Object.prototype.toObject.call(this,rn);return cn.objects=nn,cn},toDatalessObject:function(rn){var an,nn=this.sourcePath;if(nn)an=nn;else{var cn=this.includeDefaultValues;an=this._objects.map(function(sn){var pn=sn.includeDefaultValues;sn.includeDefaultValues=cn;var mn=sn.toDatalessObject(rn);return sn.includeDefaultValues=pn,mn})}var hn=en.Object.prototype.toDatalessObject.call(this,rn);return hn.objects=an,hn},render:function(rn){this._transformDone=!0,this.callSuper("render",rn),this._transformDone=!1},shouldCache:function(){var rn=en.Object.prototype.shouldCache.call(this);if(rn){for(var an=0,nn=this._objects.length;an<nn;an++)if(this._objects[an].willDrawShadow())return this.ownCaching=!1,!1}return rn},willDrawShadow:function(){if(en.Object.prototype.willDrawShadow.call(this))return!0;for(var rn=0,an=this._objects.length;rn<an;rn++)if(this._objects[rn].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(rn){for(var an=0,nn=this._objects.length;an<nn;an++)this._objects[an].render(rn);this._drawClipPath(rn)},isCacheDirty:function(rn){if(this.callSuper("isCacheDirty",rn))return!0;if(!this.statefullCache)return!1;for(var an=0,nn=this._objects.length;an<nn;an++)if(this._objects[an].isCacheDirty(!0)){if(this._cacheCanvas){var cn=this.cacheWidth/this.zoomX,hn=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-cn/2,-hn/2,cn,hn)}return!0}return!1},_restoreObjectsState:function(){var rn=this.calcOwnMatrix();return this._objects.forEach(function(an){en.util.addTransformToObject(an,rn),delete an.group,an.setCoords()}),this},realizeTransform:function(rn,an){return en.util.addTransformToObject(rn,an),rn},destroy:function(){return this._objects.forEach(function(rn){rn.set("dirty",!0)}),this._restoreObjectsState()},toActiveSelection:function(){if(!!this.canvas){var rn=this._objects,an=this.canvas;this._objects=[];var nn=this.toObject();delete nn.objects;var cn=new en.ActiveSelection([]);return cn.set(nn),cn.type="activeSelection",an.remove(this),rn.forEach(function(hn){hn.group=cn,hn.dirty=!0,an.add(hn)}),cn.canvas=an,cn._objects=rn,an._activeObject=cn,cn.setCoords(),cn}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var rn=!0;return this.forEachObject(function(an){an.setCoords(rn)}),this},_calcBounds:function(rn){for(var an=[],nn=[],cn,hn,sn,pn=["tr","br","bl","tl"],mn=0,yn=this._objects.length,_n,xn=pn.length;mn<yn;++mn){for(cn=this._objects[mn],sn=cn.calcACoords(),_n=0;_n<xn;_n++)hn=pn[_n],an.push(sn[hn].x),nn.push(sn[hn].y);cn.aCoords=sn}this._getBounds(an,nn,rn)},_getBounds:function(rn,an,nn){var cn=new en.Point(on(rn),on(an)),hn=new en.Point(dn(rn),dn(an)),sn=cn.y||0,pn=cn.x||0,mn=hn.x-cn.x||0,yn=hn.y-cn.y||0;this.width=mn,this.height=yn,nn||this.setPositionByOrigin({x:pn,y:sn},"left","top")},_toSVG:function(rn){for(var an=["<g ","COMMON_PARTS",` >
`],nn=0,cn=this._objects.length;nn<cn;nn++)an.push("		",this._objects[nn].toSVG(rn));return an.push(`</g>
`),an},getSvgStyles:function(){var rn=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",an=this.visible?"":" visibility: hidden;";return[rn,this.getSvgFilter(),an].join("")},toClipPathSVG:function(rn){for(var an=[],nn=0,cn=this._objects.length;nn<cn;nn++)an.push("	",this._objects[nn].toClipPathSVG(rn));return this._createBaseClipPathSVGMarkup(an,{reviver:rn})}}),en.Group.fromObject=function(rn,an){var nn=rn.objects,cn=en.util.object.clone(rn,!0);if(delete cn.objects,typeof nn=="string"){en.loadSVGFromURL(nn,function(hn){var sn=en.util.groupSVGElements(hn,rn,nn);sn.set(cn),an&&an(sn)});return}en.util.enlivenObjects(nn,function(hn){en.util.enlivenObjects([rn.clipPath],function(sn){var pn=en.util.object.clone(rn,!0);pn.clipPath=sn[0],delete pn.objects,an&&an(new en.Group(hn,pn,!0))})})})}(St),function(fn){var en=fn.fabric||(fn.fabric={});en.ActiveSelection||(en.ActiveSelection=en.util.createClass(en.Group,{type:"activeSelection",initialize:function(on,dn){dn=dn||{},this._objects=on||[];for(var rn=this._objects.length;rn--;)this._objects[rn].group=this;dn.originX&&(this.originX=dn.originX),dn.originY&&(this.originY=dn.originY),this._calcBounds(),this._updateObjectsCoords(),en.Object.prototype.initialize.call(this,dn),this.setCoords()},toGroup:function(){var on=this._objects.concat();this._objects=[];var dn=en.Object.prototype.toObject.call(this),rn=new en.Group([]);if(delete dn.type,rn.set(dn),on.forEach(function(nn){nn.canvas.remove(nn),nn.group=rn}),rn._objects=on,!this.canvas)return rn;var an=this.canvas;return an.add(rn),an._activeObject=rn,rn.setCoords(),rn},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(on,dn,rn){on.save(),on.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",on,dn),rn=rn||{},typeof rn.hasControls>"u"&&(rn.hasControls=!1),rn.forActiveSelection=!0;for(var an=0,nn=this._objects.length;an<nn;an++)this._objects[an]._renderControls(on,rn);on.restore()}}),en.ActiveSelection.fromObject=function(on,dn){en.util.enlivenObjects(on.objects,function(rn){delete on.objects,dn&&dn(new en.ActiveSelection(rn,on,!0))})})}(St),function(fn){var en=e.util.object.extend;if(fn.fabric||(fn.fabric={}),fn.fabric.Image){e.warn("fabric.Image is already defined.");return}e.Image=e.util.createClass(e.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:e.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:e.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(on,dn){dn||(dn={}),this.filters=[],this.cacheKey="texture"+e.Object.__uid++,this.callSuper("initialize",dn),this._initElement(on,dn)},getElement:function(){return this._element||{}},setElement:function(on,dn){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=on,this._originalElement=on,this._initConfig(dn),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(on){var dn=e.filterBackend;dn&&dn.evictCachesForKey&&dn.evictCachesForKey(on)},dispose:function(){this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(on){e.util.cleanUpJsdomNode(this[on]),this[on]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var on=this.getElement();return{width:on.naturalWidth||on.width,height:on.naturalHeight||on.height}},_stroke:function(on){if(!(!this.stroke||this.strokeWidth===0)){var dn=this.width/2,rn=this.height/2;on.beginPath(),on.moveTo(-dn,-rn),on.lineTo(dn,-rn),on.lineTo(dn,rn),on.lineTo(-dn,rn),on.lineTo(-dn,-rn),on.closePath()}},toObject:function(on){var dn=[];this.filters.forEach(function(an){an&&dn.push(an.toObject())});var rn=en(this.callSuper("toObject",["cropX","cropY"].concat(on)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:dn});return this.resizeFilter&&(rn.resizeFilter=this.resizeFilter.toObject()),rn},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var on=[],dn=[],rn,an=this._element,nn=-this.width/2,cn=-this.height/2,hn="",sn="";if(!an)return[];if(this.hasCrop()){var pn=e.Object.__uid++;on.push('<clipPath id="imageCrop_'+pn+`">
`,'	<rect x="'+nn+'" y="'+cn+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),hn=' clip-path="url(#imageCrop_'+pn+')" '}if(this.imageSmoothing||(sn='" image-rendering="optimizeSpeed'),dn.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',nn-this.cropX,'" y="',cn-this.cropY,'" width="',an.width||an.naturalWidth,'" height="',an.height||an.height,sn,'"',hn,`></image>
`),this.stroke||this.strokeDashArray){var mn=this.fill;this.fill=null,rn=["	<rect ",'x="',nn,'" y="',cn,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=mn}return this.paintFirst!=="fill"?on=on.concat(rn,dn):on=on.concat(dn,rn),on},getSrc:function(on){var dn=on?this._element:this._originalElement;return dn?dn.toDataURL?dn.toDataURL():this.srcFromAttribute?dn.getAttribute("src"):dn.src:this.src||""},setSrc:function(on,dn,rn){return e.util.loadImage(on,function(an,nn){this.setElement(an,rn),this._setWidthHeight(),dn&&dn(this,nn)},this,rn&&rn.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var on=this.resizeFilter,dn=this.minimumScaleTrigger,rn=this.getTotalObjectScaling(),an=rn.scaleX,nn=rn.scaleY,cn=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!on||an>dn&&nn>dn){this._element=cn,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=an,this._lastScaleY=nn;return}e.filterBackend||(e.filterBackend=e.initFilterBackend());var hn=e.util.createCanvasElement(),sn=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,pn=cn.width,mn=cn.height;hn.width=pn,hn.height=mn,this._element=hn,this._lastScaleX=on.scaleX=an,this._lastScaleY=on.scaleY=nn,e.filterBackend.applyFilters([on],cn,pn,mn,this._element,sn),this._filterScalingX=hn.width/this._originalElement.width,this._filterScalingY=hn.height/this._originalElement.height},applyFilters:function(on){if(on=on||this.filters||[],on=on.filter(function(cn){return cn&&!cn.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),on.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var dn=this._originalElement,rn=dn.naturalWidth||dn.width,an=dn.naturalHeight||dn.height;if(this._element===this._originalElement){var nn=e.util.createCanvasElement();nn.width=rn,nn.height=an,this._element=nn,this._filteredEl=nn}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,rn,an),this._lastScaleX=1,this._lastScaleY=1;return e.filterBackend||(e.filterBackend=e.initFilterBackend()),e.filterBackend.applyFilters(on,this._originalElement,rn,an,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(on){e.util.setImageSmoothing(on,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(on),this._renderPaintInOrder(on)},drawCacheOnCanvas:function(on){e.util.setImageSmoothing(on,this.imageSmoothing),e.Object.prototype.drawCacheOnCanvas.call(this,on)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(on){var dn=this._element;if(!!dn){var rn=this._filterScalingX,an=this._filterScalingY,nn=this.width,cn=this.height,hn=Math.min,sn=Math.max,pn=sn(this.cropX,0),mn=sn(this.cropY,0),yn=dn.naturalWidth||dn.width,_n=dn.naturalHeight||dn.height,xn=pn*rn,Sn=mn*an,Pn=hn(nn*rn,yn-xn),Ln=hn(cn*an,_n-Sn),In=-nn/2,Rn=-cn/2,Mn=hn(nn,yn/rn-pn),Hn=hn(cn,_n/an-mn);dn&&on.drawImage(dn,xn,Sn,Pn,Ln,In,Rn,Mn,Hn)}},_needsResize:function(){var on=this.getTotalObjectScaling();return on.scaleX!==this._lastScaleX||on.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(on,dn){this.setElement(e.util.getById(on),dn),e.util.addClass(this.getElement(),e.Image.CSS_CANVAS)},_initConfig:function(on){on||(on={}),this.setOptions(on),this._setWidthHeight(on)},_initFilters:function(on,dn){on&&on.length?e.util.enlivenObjects(on,function(rn){dn&&dn(rn)},"fabric.Image.filters"):dn&&dn()},_setWidthHeight:function(on){on||(on={});var dn=this.getElement();this.width=on.width||dn.naturalWidth||dn.width||0,this.height=on.height||dn.naturalHeight||dn.height||0},parsePreserveAspectRatioAttribute:function(){var on=e.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),dn=this._element.width,rn=this._element.height,an=1,nn=1,cn=0,hn=0,sn=0,pn=0,mn,yn=this.width,_n=this.height,xn={width:yn,height:_n};return on&&(on.alignX!=="none"||on.alignY!=="none")?(on.meetOrSlice==="meet"&&(an=nn=e.util.findScaleToFit(this._element,xn),mn=(yn-dn*an)/2,on.alignX==="Min"&&(cn=-mn),on.alignX==="Max"&&(cn=mn),mn=(_n-rn*nn)/2,on.alignY==="Min"&&(hn=-mn),on.alignY==="Max"&&(hn=mn)),on.meetOrSlice==="slice"&&(an=nn=e.util.findScaleToCover(this._element,xn),mn=dn-yn/an,on.alignX==="Mid"&&(sn=mn/2),on.alignX==="Max"&&(sn=mn),mn=rn-_n/nn,on.alignY==="Mid"&&(pn=mn/2),on.alignY==="Max"&&(pn=mn),dn=yn/an,rn=_n/nn)):(an=yn/dn,nn=_n/rn),{width:dn,height:rn,scaleX:an,scaleY:nn,offsetLeft:cn,offsetTop:hn,cropX:sn,cropY:pn}}}),e.Image.CSS_CANVAS="canvas-img",e.Image.prototype.getSvgSrc=e.Image.prototype.getSrc,e.Image.fromObject=function(on,dn){var rn=e.util.object.clone(on);e.util.loadImage(rn.src,function(an,nn){if(nn){dn&&dn(null,!0);return}e.Image.prototype._initFilters.call(rn,rn.filters,function(cn){rn.filters=cn||[],e.Image.prototype._initFilters.call(rn,[rn.resizeFilter],function(hn){rn.resizeFilter=hn[0],e.util.enlivenObjects([rn.clipPath],function(sn){rn.clipPath=sn[0];var pn=new e.Image(an,rn);dn(pn,!1)})})})},null,rn.crossOrigin)},e.Image.fromURL=function(on,dn,rn){e.util.loadImage(on,function(an,nn){dn&&dn(new e.Image(an,rn),nn)},null,rn&&rn.crossOrigin)},e.Image.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),e.Image.fromElement=function(on,dn,rn){var an=e.parseAttributes(on,e.Image.ATTRIBUTE_NAMES);e.Image.fromURL(an["xlink:href"],dn,en(rn?e.util.object.clone(rn):{},an))}}(St),e.util.object.extend(e.Object.prototype,{_getAngleValueForStraighten:function(){var fn=this.angle%360;return fn>0?Math.round((fn-1)/90)*90:Math.round(fn/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten()),this},fxStraighten:function(fn){fn=fn||{};var en=function(){},on=fn.onComplete||en,dn=fn.onChange||en,rn=this;return e.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(an){rn.rotate(an),dn()},onComplete:function(){rn.setCoords(),on()}}),this}}),e.util.object.extend(e.StaticCanvas.prototype,{straightenObject:function(fn){return fn.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(fn){return fn.fxStraighten({onChange:this.requestRenderAllBound}),this}}),function(){function fn(on,dn){var rn="precision "+dn+` float;
void main(){}`,an=on.createShader(on.FRAGMENT_SHADER);return on.shaderSource(an,rn),on.compileShader(an),!!on.getShaderParameter(an,on.COMPILE_STATUS)}e.isWebglSupported=function(on){if(e.isLikelyNode)return!1;on=on||e.WebglFilterBackend.prototype.tileSize;var dn=document.createElement("canvas"),rn=dn.getContext("webgl")||dn.getContext("experimental-webgl"),an=!1;if(rn){e.maxTextureSize=rn.getParameter(rn.MAX_TEXTURE_SIZE),an=e.maxTextureSize>=on;for(var nn=["highp","mediump","lowp"],cn=0;cn<3;cn++)if(fn(rn,nn[cn])){e.webGlPrecision=nn[cn];break}}return this.isSupported=an,an},e.WebglFilterBackend=en;function en(on){on&&on.tileSize&&(this.tileSize=on.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}en.prototype={tileSize:2048,resources:{},setupGLContext:function(on,dn){this.dispose(),this.createWebGLCanvas(on,dn),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(on,dn)},chooseFastestCopyGLTo2DMethod:function(on,dn){var rn=typeof window.performance<"u",an;try{new ImageData(1,1),an=!0}catch{an=!1}var nn=typeof ArrayBuffer<"u",cn=typeof Uint8ClampedArray<"u";if(!!(rn&&an&&nn&&cn)){var hn=e.util.createCanvasElement(),sn=new ArrayBuffer(on*dn*4);if(e.forceGLPutImageData){this.imageBuffer=sn,this.copyGLTo2D=vn;return}var pn={imageBuffer:sn,destinationWidth:on,destinationHeight:dn,targetCanvas:hn},mn,yn,_n;hn.width=on,hn.height=dn,mn=window.performance.now(),gn.call(pn,this.gl,pn),yn=window.performance.now()-mn,mn=window.performance.now(),vn.call(pn,this.gl,pn),_n=window.performance.now()-mn,yn>_n?(this.imageBuffer=sn,this.copyGLTo2D=vn):this.copyGLTo2D=gn}},createWebGLCanvas:function(on,dn){var rn=e.util.createCanvasElement();rn.width=on,rn.height=dn;var an={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},nn=rn.getContext("webgl",an);nn||(nn=rn.getContext("experimental-webgl",an)),nn&&(nn.clearColor(0,0,0,0),this.canvas=rn,this.gl=nn)},applyFilters:function(on,dn,rn,an,nn,cn){var hn=this.gl,sn;cn&&(sn=this.getCachedTexture(cn,dn));var pn={originalWidth:dn.width||dn.originalWidth,originalHeight:dn.height||dn.originalHeight,sourceWidth:rn,sourceHeight:an,destinationWidth:rn,destinationHeight:an,context:hn,sourceTexture:this.createTexture(hn,rn,an,!sn&&dn),targetTexture:this.createTexture(hn,rn,an),originalTexture:sn||this.createTexture(hn,rn,an,!sn&&dn),passes:on.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:nn},mn=hn.createFramebuffer();return hn.bindFramebuffer(hn.FRAMEBUFFER,mn),on.forEach(function(yn){yn&&yn.applyTo(pn)}),un(pn),this.copyGLTo2D(hn,pn),hn.bindTexture(hn.TEXTURE_2D,null),hn.deleteTexture(pn.sourceTexture),hn.deleteTexture(pn.targetTexture),hn.deleteFramebuffer(mn),nn.getContext("2d").setTransform(1,0,0,1,0,0),pn},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(on,dn,rn,an){var nn=on.createTexture();return on.bindTexture(on.TEXTURE_2D,nn),on.texParameteri(on.TEXTURE_2D,on.TEXTURE_MAG_FILTER,on.NEAREST),on.texParameteri(on.TEXTURE_2D,on.TEXTURE_MIN_FILTER,on.NEAREST),on.texParameteri(on.TEXTURE_2D,on.TEXTURE_WRAP_S,on.CLAMP_TO_EDGE),on.texParameteri(on.TEXTURE_2D,on.TEXTURE_WRAP_T,on.CLAMP_TO_EDGE),an?on.texImage2D(on.TEXTURE_2D,0,on.RGBA,on.RGBA,on.UNSIGNED_BYTE,an):on.texImage2D(on.TEXTURE_2D,0,on.RGBA,dn,rn,0,on.RGBA,on.UNSIGNED_BYTE,null),nn},getCachedTexture:function(on,dn){if(this.textureCache[on])return this.textureCache[on];var rn=this.createTexture(this.gl,dn.width,dn.height,dn);return this.textureCache[on]=rn,rn},evictCachesForKey:function(on){this.textureCache[on]&&(this.gl.deleteTexture(this.textureCache[on]),delete this.textureCache[on])},copyGLTo2D:gn,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var on=this.gl,dn={renderer:"",vendor:""};if(!on)return dn;var rn=on.getExtension("WEBGL_debug_renderer_info");if(rn){var an=on.getParameter(rn.UNMASKED_RENDERER_WEBGL),nn=on.getParameter(rn.UNMASKED_VENDOR_WEBGL);an&&(dn.renderer=an.toLowerCase()),nn&&(dn.vendor=nn.toLowerCase())}return this.gpuInfo=dn,dn}}}();function un(fn){var en=fn.targetCanvas,on=en.width,dn=en.height,rn=fn.destinationWidth,an=fn.destinationHeight;(on!==rn||dn!==an)&&(en.width=rn,en.height=an)}function gn(fn,en){var on=fn.canvas,dn=en.targetCanvas,rn=dn.getContext("2d");rn.translate(0,dn.height),rn.scale(1,-1);var an=on.height-dn.height;rn.drawImage(on,0,an,dn.width,dn.height,0,0,dn.width,dn.height)}function vn(fn,en){var on=en.targetCanvas,dn=on.getContext("2d"),rn=en.destinationWidth,an=en.destinationHeight,nn=rn*an*4,cn=new Uint8Array(this.imageBuffer,0,nn),hn=new Uint8ClampedArray(this.imageBuffer,0,nn);fn.readPixels(0,0,rn,an,fn.RGBA,fn.UNSIGNED_BYTE,cn);var sn=new ImageData(hn,rn,an);dn.putImageData(sn,0,0)}(function(){var fn=function(){};e.Canvas2dFilterBackend=en;function en(){}en.prototype={evictCachesForKey:fn,dispose:fn,clearWebGLCaches:fn,resources:{},applyFilters:function(on,dn,rn,an,nn){var cn=nn.getContext("2d");cn.drawImage(dn,0,0,rn,an);var hn=cn.getImageData(0,0,rn,an),sn=cn.getImageData(0,0,rn,an),pn={sourceWidth:rn,sourceHeight:an,imageData:hn,originalEl:dn,originalImageData:sn,canvasEl:nn,ctx:cn,filterBackend:this};return on.forEach(function(mn){mn.applyTo(pn)}),(pn.imageData.width!==rn||pn.imageData.height!==an)&&(nn.width=pn.imageData.width,nn.height=pn.imageData.height),cn.putImageData(pn.imageData,0,0),pn}}})(),e.Image=e.Image||{},e.Image.filters=e.Image.filters||{},e.Image.filters.BaseFilter=e.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(fn){fn&&this.setOptions(fn)},setOptions:function(fn){for(var en in fn)this[en]=fn[en]},createProgram:function(fn,en,on){en=en||this.fragmentSource,on=on||this.vertexSource,e.webGlPrecision!=="highp"&&(en=en.replace(/precision highp float/g,"precision "+e.webGlPrecision+" float"));var dn=fn.createShader(fn.VERTEX_SHADER);if(fn.shaderSource(dn,on),fn.compileShader(dn),!fn.getShaderParameter(dn,fn.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+fn.getShaderInfoLog(dn));var rn=fn.createShader(fn.FRAGMENT_SHADER);if(fn.shaderSource(rn,en),fn.compileShader(rn),!fn.getShaderParameter(rn,fn.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+fn.getShaderInfoLog(rn));var an=fn.createProgram();if(fn.attachShader(an,dn),fn.attachShader(an,rn),fn.linkProgram(an),!fn.getProgramParameter(an,fn.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+fn.getProgramInfoLog(an));var nn=this.getAttributeLocations(fn,an),cn=this.getUniformLocations(fn,an)||{};return cn.uStepW=fn.getUniformLocation(an,"uStepW"),cn.uStepH=fn.getUniformLocation(an,"uStepH"),{program:an,attributeLocations:nn,uniformLocations:cn}},getAttributeLocations:function(fn,en){return{aPosition:fn.getAttribLocation(en,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(fn,en,on){var dn=en.aPosition,rn=fn.createBuffer();fn.bindBuffer(fn.ARRAY_BUFFER,rn),fn.enableVertexAttribArray(dn),fn.vertexAttribPointer(dn,2,fn.FLOAT,!1,0,0),fn.bufferData(fn.ARRAY_BUFFER,on,fn.STATIC_DRAW)},_setupFrameBuffer:function(fn){var en=fn.context,on,dn;fn.passes>1?(on=fn.destinationWidth,dn=fn.destinationHeight,(fn.sourceWidth!==on||fn.sourceHeight!==dn)&&(en.deleteTexture(fn.targetTexture),fn.targetTexture=fn.filterBackend.createTexture(en,on,dn)),en.framebufferTexture2D(en.FRAMEBUFFER,en.COLOR_ATTACHMENT0,en.TEXTURE_2D,fn.targetTexture,0)):(en.bindFramebuffer(en.FRAMEBUFFER,null),en.finish())},_swapTextures:function(fn){fn.passes--,fn.pass++;var en=fn.targetTexture;fn.targetTexture=fn.sourceTexture,fn.sourceTexture=en},isNeutralState:function(){var fn=this.mainParameter,en=e.Image.filters[this.type].prototype;if(fn)if(Array.isArray(en[fn])){for(var on=en[fn].length;on--;)if(this[fn][on]!==en[fn][on])return!1;return!0}else return en[fn]===this[fn];else return!1},applyTo:function(fn){fn.webgl?(this._setupFrameBuffer(fn),this.applyToWebGL(fn),this._swapTextures(fn)):this.applyTo2d(fn)},retrieveShader:function(fn){return fn.programCache.hasOwnProperty(this.type)||(fn.programCache[this.type]=this.createProgram(fn.context)),fn.programCache[this.type]},applyToWebGL:function(fn){var en=fn.context,on=this.retrieveShader(fn);fn.pass===0&&fn.originalTexture?en.bindTexture(en.TEXTURE_2D,fn.originalTexture):en.bindTexture(en.TEXTURE_2D,fn.sourceTexture),en.useProgram(on.program),this.sendAttributeData(en,on.attributeLocations,fn.aPosition),en.uniform1f(on.uniformLocations.uStepW,1/fn.sourceWidth),en.uniform1f(on.uniformLocations.uStepH,1/fn.sourceHeight),this.sendUniformData(en,on.uniformLocations),en.viewport(0,0,fn.destinationWidth,fn.destinationHeight),en.drawArrays(en.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(fn,en,on){fn.activeTexture(on),fn.bindTexture(fn.TEXTURE_2D,en),fn.activeTexture(fn.TEXTURE0)},unbindAdditionalTexture:function(fn,en){fn.activeTexture(en),fn.bindTexture(fn.TEXTURE_2D,null),fn.activeTexture(fn.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(fn){this[this.mainParameter]=fn},sendUniformData:function(){},createHelpLayer:function(fn){if(!fn.helpLayer){var en=document.createElement("canvas");en.width=fn.sourceWidth,en.height=fn.sourceHeight,fn.helpLayer=en}},toObject:function(){var fn={type:this.type},en=this.mainParameter;return en&&(fn[en]=this[en]),fn},toJSON:function(){return this.toObject()}}),e.Image.filters.BaseFilter.fromObject=function(fn,en){var on=new e.Image.filters[fn.type](fn);return en&&en(on),on},function(fn){var en=fn.fabric||(fn.fabric={}),on=en.Image.filters,dn=en.util.createClass;on.ColorMatrix=dn(on.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(rn){this.callSuper("initialize",rn),this.matrix=this.matrix.slice(0)},applyTo2d:function(rn){var an=rn.imageData,nn=an.data,cn=nn.length,hn=this.matrix,sn,pn,mn,yn,_n,xn=this.colorsOnly;for(_n=0;_n<cn;_n+=4)sn=nn[_n],pn=nn[_n+1],mn=nn[_n+2],xn?(nn[_n]=sn*hn[0]+pn*hn[1]+mn*hn[2]+hn[4]*255,nn[_n+1]=sn*hn[5]+pn*hn[6]+mn*hn[7]+hn[9]*255,nn[_n+2]=sn*hn[10]+pn*hn[11]+mn*hn[12]+hn[14]*255):(yn=nn[_n+3],nn[_n]=sn*hn[0]+pn*hn[1]+mn*hn[2]+yn*hn[3]+hn[4]*255,nn[_n+1]=sn*hn[5]+pn*hn[6]+mn*hn[7]+yn*hn[8]+hn[9]*255,nn[_n+2]=sn*hn[10]+pn*hn[11]+mn*hn[12]+yn*hn[13]+hn[14]*255,nn[_n+3]=sn*hn[15]+pn*hn[16]+mn*hn[17]+yn*hn[18]+hn[19]*255)},getUniformLocations:function(rn,an){return{uColorMatrix:rn.getUniformLocation(an,"uColorMatrix"),uConstants:rn.getUniformLocation(an,"uConstants")}},sendUniformData:function(rn,an){var nn=this.matrix,cn=[nn[0],nn[1],nn[2],nn[3],nn[5],nn[6],nn[7],nn[8],nn[10],nn[11],nn[12],nn[13],nn[15],nn[16],nn[17],nn[18]],hn=[nn[4],nn[9],nn[14],nn[19]];rn.uniformMatrix4fv(an.uColorMatrix,!1,cn),rn.uniform4fv(an.uConstants,hn)}}),en.Image.filters.ColorMatrix.fromObject=en.Image.filters.BaseFilter.fromObject}(St),function(fn){var en=fn.fabric||(fn.fabric={}),on=en.Image.filters,dn=en.util.createClass;on.Brightness=dn(on.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(rn){if(this.brightness!==0){var an=rn.imageData,nn=an.data,cn,hn=nn.length,sn=Math.round(this.brightness*255);for(cn=0;cn<hn;cn+=4)nn[cn]=nn[cn]+sn,nn[cn+1]=nn[cn+1]+sn,nn[cn+2]=nn[cn+2]+sn}},getUniformLocations:function(rn,an){return{uBrightness:rn.getUniformLocation(an,"uBrightness")}},sendUniformData:function(rn,an){rn.uniform1f(an.uBrightness,this.brightness)}}),en.Image.filters.Brightness.fromObject=en.Image.filters.BaseFilter.fromObject}(St),function(fn){var en=fn.fabric||(fn.fabric={}),on=en.util.object.extend,dn=en.Image.filters,rn=en.util.createClass;dn.Convolute=rn(dn.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(an){var nn=Math.sqrt(this.matrix.length),cn=this.type+"_"+nn+"_"+(this.opaque?1:0),hn=this.fragmentSource[cn];return an.programCache.hasOwnProperty(cn)||(an.programCache[cn]=this.createProgram(an.context,hn)),an.programCache[cn]},applyTo2d:function(an){var nn=an.imageData,cn=nn.data,hn=this.matrix,sn=Math.round(Math.sqrt(hn.length)),pn=Math.floor(sn/2),mn=nn.width,yn=nn.height,_n=an.ctx.createImageData(mn,yn),xn=_n.data,Sn=this.opaque?1:0,Pn,Ln,In,Rn,Mn,Hn,Qn,Kn,nr,Zn,ir,Jn,Vn;for(ir=0;ir<yn;ir++)for(Zn=0;Zn<mn;Zn++){for(Mn=(ir*mn+Zn)*4,Pn=0,Ln=0,In=0,Rn=0,Vn=0;Vn<sn;Vn++)for(Jn=0;Jn<sn;Jn++)Qn=ir+Vn-pn,Hn=Zn+Jn-pn,!(Qn<0||Qn>=yn||Hn<0||Hn>=mn)&&(Kn=(Qn*mn+Hn)*4,nr=hn[Vn*sn+Jn],Pn+=cn[Kn]*nr,Ln+=cn[Kn+1]*nr,In+=cn[Kn+2]*nr,Sn||(Rn+=cn[Kn+3]*nr));xn[Mn]=Pn,xn[Mn+1]=Ln,xn[Mn+2]=In,Sn?xn[Mn+3]=cn[Mn+3]:xn[Mn+3]=Rn}an.imageData=_n},getUniformLocations:function(an,nn){return{uMatrix:an.getUniformLocation(nn,"uMatrix"),uOpaque:an.getUniformLocation(nn,"uOpaque"),uHalfSize:an.getUniformLocation(nn,"uHalfSize"),uSize:an.getUniformLocation(nn,"uSize")}},sendUniformData:function(an,nn){an.uniform1fv(nn.uMatrix,this.matrix)},toObject:function(){return on(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),en.Image.filters.Convolute.fromObject=en.Image.filters.BaseFilter.fromObject}(St),function(fn){var en=fn.fabric||(fn.fabric={}),on=en.Image.filters,dn=en.util.createClass;on.Grayscale=dn(on.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(rn){var an=rn.imageData,nn=an.data,cn,hn=nn.length,sn,pn=this.mode;for(cn=0;cn<hn;cn+=4)pn==="average"?sn=(nn[cn]+nn[cn+1]+nn[cn+2])/3:pn==="lightness"?sn=(Math.min(nn[cn],nn[cn+1],nn[cn+2])+Math.max(nn[cn],nn[cn+1],nn[cn+2]))/2:pn==="luminosity"&&(sn=.21*nn[cn]+.72*nn[cn+1]+.07*nn[cn+2]),nn[cn]=sn,nn[cn+1]=sn,nn[cn+2]=sn},retrieveShader:function(rn){var an=this.type+"_"+this.mode;if(!rn.programCache.hasOwnProperty(an)){var nn=this.fragmentSource[this.mode];rn.programCache[an]=this.createProgram(rn.context,nn)}return rn.programCache[an]},getUniformLocations:function(rn,an){return{uMode:rn.getUniformLocation(an,"uMode")}},sendUniformData:function(rn,an){var nn=1;rn.uniform1i(an.uMode,nn)},isNeutralState:function(){return!1}}),en.Image.filters.Grayscale.fromObject=en.Image.filters.BaseFilter.fromObject}(St),function(fn){var en=fn.fabric||(fn.fabric={}),on=en.Image.filters,dn=en.util.createClass;on.Invert=dn(on.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(rn){var an=rn.imageData,nn=an.data,cn,hn=nn.length;for(cn=0;cn<hn;cn+=4)nn[cn]=255-nn[cn],nn[cn+1]=255-nn[cn+1],nn[cn+2]=255-nn[cn+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(rn,an){return{uInvert:rn.getUniformLocation(an,"uInvert")}},sendUniformData:function(rn,an){rn.uniform1i(an.uInvert,this.invert)}}),en.Image.filters.Invert.fromObject=en.Image.filters.BaseFilter.fromObject}(St),function(fn){var en=fn.fabric||(fn.fabric={}),on=en.util.object.extend,dn=en.Image.filters,rn=en.util.createClass;dn.Noise=rn(dn.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(an){if(this.noise!==0){var nn=an.imageData,cn=nn.data,hn,sn=cn.length,pn=this.noise,mn;for(hn=0,sn=cn.length;hn<sn;hn+=4)mn=(.5-Math.random())*pn,cn[hn]+=mn,cn[hn+1]+=mn,cn[hn+2]+=mn}},getUniformLocations:function(an,nn){return{uNoise:an.getUniformLocation(nn,"uNoise"),uSeed:an.getUniformLocation(nn,"uSeed")}},sendUniformData:function(an,nn){an.uniform1f(nn.uNoise,this.noise/255),an.uniform1f(nn.uSeed,Math.random())},toObject:function(){return on(this.callSuper("toObject"),{noise:this.noise})}}),en.Image.filters.Noise.fromObject=en.Image.filters.BaseFilter.fromObject}(St),function(fn){var en=fn.fabric||(fn.fabric={}),on=en.Image.filters,dn=en.util.createClass;on.Pixelate=dn(on.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(rn){var an=rn.imageData,nn=an.data,cn=an.height,hn=an.width,sn,pn,mn,yn,_n,xn,Sn,Pn,Ln,In,Rn;for(pn=0;pn<cn;pn+=this.blocksize)for(mn=0;mn<hn;mn+=this.blocksize)for(sn=pn*4*hn+mn*4,yn=nn[sn],_n=nn[sn+1],xn=nn[sn+2],Sn=nn[sn+3],In=Math.min(pn+this.blocksize,cn),Rn=Math.min(mn+this.blocksize,hn),Pn=pn;Pn<In;Pn++)for(Ln=mn;Ln<Rn;Ln++)sn=Pn*4*hn+Ln*4,nn[sn]=yn,nn[sn+1]=_n,nn[sn+2]=xn,nn[sn+3]=Sn},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(rn,an){return{uBlocksize:rn.getUniformLocation(an,"uBlocksize"),uStepW:rn.getUniformLocation(an,"uStepW"),uStepH:rn.getUniformLocation(an,"uStepH")}},sendUniformData:function(rn,an){rn.uniform1f(an.uBlocksize,this.blocksize)}}),en.Image.filters.Pixelate.fromObject=en.Image.filters.BaseFilter.fromObject}(St),function(fn){var en=fn.fabric||(fn.fabric={}),on=en.util.object.extend,dn=en.Image.filters,rn=en.util.createClass;dn.RemoveColor=rn(dn.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(an){var nn=an.imageData,cn=nn.data,hn,sn=this.distance*255,pn,mn,yn,_n=new en.Color(this.color).getSource(),xn=[_n[0]-sn,_n[1]-sn,_n[2]-sn],Sn=[_n[0]+sn,_n[1]+sn,_n[2]+sn];for(hn=0;hn<cn.length;hn+=4)pn=cn[hn],mn=cn[hn+1],yn=cn[hn+2],pn>xn[0]&&mn>xn[1]&&yn>xn[2]&&pn<Sn[0]&&mn<Sn[1]&&yn<Sn[2]&&(cn[hn+3]=0)},getUniformLocations:function(an,nn){return{uLow:an.getUniformLocation(nn,"uLow"),uHigh:an.getUniformLocation(nn,"uHigh")}},sendUniformData:function(an,nn){var cn=new en.Color(this.color).getSource(),hn=parseFloat(this.distance),sn=[0+cn[0]/255-hn,0+cn[1]/255-hn,0+cn[2]/255-hn,1],pn=[cn[0]/255+hn,cn[1]/255+hn,cn[2]/255+hn,1];an.uniform4fv(nn.uLow,sn),an.uniform4fv(nn.uHigh,pn)},toObject:function(){return on(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),en.Image.filters.RemoveColor.fromObject=en.Image.filters.BaseFilter.fromObject}(St),function(fn){var en=fn.fabric||(fn.fabric={}),on=en.Image.filters,dn=en.util.createClass,rn={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var an in rn)on[an]=dn(on.ColorMatrix,{type:an,matrix:rn[an],mainParameter:!1,colorsOnly:!0}),en.Image.filters[an].fromObject=en.Image.filters.BaseFilter.fromObject}(St),function(fn){var en=fn.fabric,on=en.Image.filters,dn=en.util.createClass;on.BlendColor=dn(on.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(rn){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[rn]+`}
}`},retrieveShader:function(rn){var an=this.type+"_"+this.mode,nn;return rn.programCache.hasOwnProperty(an)||(nn=this.buildSource(this.mode),rn.programCache[an]=this.createProgram(rn.context,nn)),rn.programCache[an]},applyTo2d:function(rn){var an=rn.imageData,nn=an.data,cn=nn.length,hn,sn,pn,mn,yn,_n,xn,Sn=1-this.alpha;xn=new en.Color(this.color).getSource(),hn=xn[0]*this.alpha,sn=xn[1]*this.alpha,pn=xn[2]*this.alpha;for(var Pn=0;Pn<cn;Pn+=4)switch(mn=nn[Pn],yn=nn[Pn+1],_n=nn[Pn+2],this.mode){case"multiply":nn[Pn]=mn*hn/255,nn[Pn+1]=yn*sn/255,nn[Pn+2]=_n*pn/255;break;case"screen":nn[Pn]=255-(255-mn)*(255-hn)/255,nn[Pn+1]=255-(255-yn)*(255-sn)/255,nn[Pn+2]=255-(255-_n)*(255-pn)/255;break;case"add":nn[Pn]=mn+hn,nn[Pn+1]=yn+sn,nn[Pn+2]=_n+pn;break;case"diff":case"difference":nn[Pn]=Math.abs(mn-hn),nn[Pn+1]=Math.abs(yn-sn),nn[Pn+2]=Math.abs(_n-pn);break;case"subtract":nn[Pn]=mn-hn,nn[Pn+1]=yn-sn,nn[Pn+2]=_n-pn;break;case"darken":nn[Pn]=Math.min(mn,hn),nn[Pn+1]=Math.min(yn,sn),nn[Pn+2]=Math.min(_n,pn);break;case"lighten":nn[Pn]=Math.max(mn,hn),nn[Pn+1]=Math.max(yn,sn),nn[Pn+2]=Math.max(_n,pn);break;case"overlay":nn[Pn]=hn<128?2*mn*hn/255:255-2*(255-mn)*(255-hn)/255,nn[Pn+1]=sn<128?2*yn*sn/255:255-2*(255-yn)*(255-sn)/255,nn[Pn+2]=pn<128?2*_n*pn/255:255-2*(255-_n)*(255-pn)/255;break;case"exclusion":nn[Pn]=hn+mn-2*hn*mn/255,nn[Pn+1]=sn+yn-2*sn*yn/255,nn[Pn+2]=pn+_n-2*pn*_n/255;break;case"tint":nn[Pn]=hn+mn*Sn,nn[Pn+1]=sn+yn*Sn,nn[Pn+2]=pn+_n*Sn}},getUniformLocations:function(rn,an){return{uColor:rn.getUniformLocation(an,"uColor")}},sendUniformData:function(rn,an){var nn=new en.Color(this.color).getSource();nn[0]=this.alpha*nn[0]/255,nn[1]=this.alpha*nn[1]/255,nn[2]=this.alpha*nn[2]/255,nn[3]=this.alpha,rn.uniform4fv(an.uColor,nn)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),en.Image.filters.BlendColor.fromObject=en.Image.filters.BaseFilter.fromObject}(St),function(fn){var en=fn.fabric,on=en.Image.filters,dn=en.util.createClass;on.BlendImage=dn(on.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(rn){var an=this.type+"_"+this.mode,nn=this.fragmentSource[this.mode];return rn.programCache.hasOwnProperty(an)||(rn.programCache[an]=this.createProgram(rn.context,nn)),rn.programCache[an]},applyToWebGL:function(rn){var an=rn.context,nn=this.createTexture(rn.filterBackend,this.image);this.bindAdditionalTexture(an,nn,an.TEXTURE1),this.callSuper("applyToWebGL",rn),this.unbindAdditionalTexture(an,an.TEXTURE1)},createTexture:function(rn,an){return rn.getCachedTexture(an.cacheKey,an._element)},calculateMatrix:function(){var rn=this.image,an=rn._element.width,nn=rn._element.height;return[1/rn.scaleX,0,0,0,1/rn.scaleY,0,-rn.left/an,-rn.top/nn,1]},applyTo2d:function(rn){var an=rn.imageData,nn=rn.filterBackend.resources,cn=an.data,hn=cn.length,sn=an.width,pn=an.height,mn,yn,_n,xn,Sn,Pn,Ln,In,Rn,Mn,Hn=this.image,Qn;nn.blendImage||(nn.blendImage=en.util.createCanvasElement()),Rn=nn.blendImage,Mn=Rn.getContext("2d"),Rn.width!==sn||Rn.height!==pn?(Rn.width=sn,Rn.height=pn):Mn.clearRect(0,0,sn,pn),Mn.setTransform(Hn.scaleX,0,0,Hn.scaleY,Hn.left,Hn.top),Mn.drawImage(Hn._element,0,0,sn,pn),Qn=Mn.getImageData(0,0,sn,pn).data;for(var Kn=0;Kn<hn;Kn+=4)switch(Sn=cn[Kn],Pn=cn[Kn+1],Ln=cn[Kn+2],In=cn[Kn+3],mn=Qn[Kn],yn=Qn[Kn+1],_n=Qn[Kn+2],xn=Qn[Kn+3],this.mode){case"multiply":cn[Kn]=Sn*mn/255,cn[Kn+1]=Pn*yn/255,cn[Kn+2]=Ln*_n/255,cn[Kn+3]=In*xn/255;break;case"mask":cn[Kn+3]=xn;break}},getUniformLocations:function(rn,an){return{uTransformMatrix:rn.getUniformLocation(an,"uTransformMatrix"),uImage:rn.getUniformLocation(an,"uImage")}},sendUniformData:function(rn,an){var nn=this.calculateMatrix();rn.uniform1i(an.uImage,1),rn.uniformMatrix3fv(an.uTransformMatrix,!1,nn)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),en.Image.filters.BlendImage.fromObject=function(rn,an){en.Image.fromObject(rn.image,function(nn){var cn=en.util.object.clone(rn);cn.image=nn,an(new en.Image.filters.BlendImage(cn))})}}(St),function(fn){var en=fn.fabric||(fn.fabric={}),on=Math.pow,dn=Math.floor,rn=Math.sqrt,an=Math.abs,nn=Math.round,cn=Math.sin,hn=Math.ceil,sn=en.Image.filters,pn=en.util.createClass;sn.Resize=pn(sn.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(mn,yn){return{uDelta:mn.getUniformLocation(yn,"uDelta"),uTaps:mn.getUniformLocation(yn,"uTaps")}},sendUniformData:function(mn,yn){mn.uniform2fv(yn.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),mn.uniform1fv(yn.uTaps,this.taps)},retrieveShader:function(mn){var yn=this.getFilterWindow(),_n=this.type+"_"+yn;if(!mn.programCache.hasOwnProperty(_n)){var xn=this.generateShader(yn);mn.programCache[_n]=this.createProgram(mn.context,xn)}return mn.programCache[_n]},getFilterWindow:function(){var mn=this.tempScale;return Math.ceil(this.lanczosLobes/mn)},getTaps:function(){for(var mn=this.lanczosCreate(this.lanczosLobes),yn=this.tempScale,_n=this.getFilterWindow(),xn=new Array(_n),Sn=1;Sn<=_n;Sn++)xn[Sn-1]=mn(Sn*yn);return xn},generateShader:function(xn){for(var yn=new Array(xn),_n=this.fragmentSourceTOP,xn,Sn=1;Sn<=xn;Sn++)yn[Sn-1]=Sn+".0 * uDelta";return _n+="uniform float uTaps["+xn+`];
`,_n+=`void main() {
`,_n+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,_n+=`  float sum = 1.0;
`,yn.forEach(function(Pn,Ln){_n+="  color += texture2D(uTexture, vTexCoord + "+Pn+") * uTaps["+Ln+`];
`,_n+="  color += texture2D(uTexture, vTexCoord - "+Pn+") * uTaps["+Ln+`];
`,_n+="  sum += 2.0 * uTaps["+Ln+`];
`}),_n+=`  gl_FragColor = color / sum;
`,_n+="}",_n},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(mn){mn.webgl?(mn.passes++,this.width=mn.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=mn.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),mn.destinationWidth=this.dW,this._setupFrameBuffer(mn),this.applyToWebGL(mn),this._swapTextures(mn),mn.sourceWidth=mn.destinationWidth,this.height=mn.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),mn.destinationHeight=this.dH,this._setupFrameBuffer(mn),this.applyToWebGL(mn),this._swapTextures(mn),mn.sourceHeight=mn.destinationHeight):this.applyTo2d(mn)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(mn){return function(yn){if(yn>=mn||yn<=-mn)return 0;if(yn<11920929e-14&&yn>-11920929e-14)return 1;yn*=Math.PI;var _n=yn/mn;return cn(yn)/yn*cn(_n)/_n}},applyTo2d:function(mn){var yn=mn.imageData,_n=this.scaleX,xn=this.scaleY;this.rcpScaleX=1/_n,this.rcpScaleY=1/xn;var Sn=yn.width,Pn=yn.height,Ln=nn(Sn*_n),In=nn(Pn*xn),Rn;this.resizeType==="sliceHack"?Rn=this.sliceByTwo(mn,Sn,Pn,Ln,In):this.resizeType==="hermite"?Rn=this.hermiteFastResize(mn,Sn,Pn,Ln,In):this.resizeType==="bilinear"?Rn=this.bilinearFiltering(mn,Sn,Pn,Ln,In):this.resizeType==="lanczos"&&(Rn=this.lanczosResize(mn,Sn,Pn,Ln,In)),mn.imageData=Rn},sliceByTwo:function(mn,yn,_n,xn,Sn){var Pn=mn.imageData,Ln=.5,In=!1,Rn=!1,Mn=yn*Ln,Hn=_n*Ln,Qn=en.filterBackend.resources,Kn,nr,Zn=0,ir=0,Jn=yn,Vn=0;for(Qn.sliceByTwo||(Qn.sliceByTwo=document.createElement("canvas")),Kn=Qn.sliceByTwo,(Kn.width<yn*1.5||Kn.height<_n)&&(Kn.width=yn*1.5,Kn.height=_n),nr=Kn.getContext("2d"),nr.clearRect(0,0,yn*1.5,_n),nr.putImageData(Pn,0,0),xn=dn(xn),Sn=dn(Sn);!In||!Rn;)yn=Mn,_n=Hn,xn<dn(Mn*Ln)?Mn=dn(Mn*Ln):(Mn=xn,In=!0),Sn<dn(Hn*Ln)?Hn=dn(Hn*Ln):(Hn=Sn,Rn=!0),nr.drawImage(Kn,Zn,ir,yn,_n,Jn,Vn,Mn,Hn),Zn=Jn,ir=Vn,Vn+=Hn;return nr.getImageData(Zn,ir,xn,Sn)},lanczosResize:function(mn,yn,_n,xn,Sn){function Pn(Yn){var Tn,An,wn,En,Nn,Fn,Un,Gn,er,On,Bn;for(Vn.x=(Yn+.5)*Hn,Xn.x=dn(Vn.x),Tn=0;Tn<Sn;Tn++){for(Vn.y=(Tn+.5)*Qn,Xn.y=dn(Vn.y),Nn=0,Fn=0,Un=0,Gn=0,er=0,An=Xn.x-Zn;An<=Xn.x+Zn;An++)if(!(An<0||An>=yn)){On=dn(1e3*an(An-Vn.x)),Jn[On]||(Jn[On]={});for(var $n=Xn.y-ir;$n<=Xn.y+ir;$n++)$n<0||$n>=_n||(Bn=dn(1e3*an($n-Vn.y)),Jn[On][Bn]||(Jn[On][Bn]=Mn(rn(on(On*Kn,2)+on(Bn*nr,2))/1e3)),wn=Jn[On][Bn],wn>0&&(En=($n*yn+An)*4,Nn+=wn,Fn+=wn*Ln[En],Un+=wn*Ln[En+1],Gn+=wn*Ln[En+2],er+=wn*Ln[En+3]))}En=(Tn*xn+Yn)*4,Rn[En]=Fn/Nn,Rn[En+1]=Un/Nn,Rn[En+2]=Gn/Nn,Rn[En+3]=er/Nn}return++Yn<xn?Pn(Yn):In}var Ln=mn.imageData.data,In=mn.ctx.createImageData(xn,Sn),Rn=In.data,Mn=this.lanczosCreate(this.lanczosLobes),Hn=this.rcpScaleX,Qn=this.rcpScaleY,Kn=2/this.rcpScaleX,nr=2/this.rcpScaleY,Zn=hn(Hn*this.lanczosLobes/2),ir=hn(Qn*this.lanczosLobes/2),Jn={},Vn={},Xn={};return Pn(0)},bilinearFiltering:function(mn,yn,_n,xn,Sn){var Pn,Ln,In,Rn,Mn,Hn,Qn,Kn,nr,Zn,ir,Jn,Vn=0,Xn,Yn=this.rcpScaleX,Tn=this.rcpScaleY,An=4*(yn-1),wn=mn.imageData,En=wn.data,Nn=mn.ctx.createImageData(xn,Sn),Fn=Nn.data;for(Qn=0;Qn<Sn;Qn++)for(Kn=0;Kn<xn;Kn++)for(Mn=dn(Yn*Kn),Hn=dn(Tn*Qn),nr=Yn*Kn-Mn,Zn=Tn*Qn-Hn,Xn=4*(Hn*yn+Mn),ir=0;ir<4;ir++)Pn=En[Xn+ir],Ln=En[Xn+4+ir],In=En[Xn+An+ir],Rn=En[Xn+An+4+ir],Jn=Pn*(1-nr)*(1-Zn)+Ln*nr*(1-Zn)+In*Zn*(1-nr)+Rn*nr*Zn,Fn[Vn++]=Jn;return Nn},hermiteFastResize:function(mn,yn,_n,xn,Sn){for(var Pn=this.rcpScaleX,Ln=this.rcpScaleY,In=hn(Pn/2),Rn=hn(Ln/2),Mn=mn.imageData,Hn=Mn.data,Qn=mn.ctx.createImageData(xn,Sn),Kn=Qn.data,nr=0;nr<Sn;nr++)for(var Zn=0;Zn<xn;Zn++){for(var ir=(Zn+nr*xn)*4,Jn=0,Vn=0,Xn=0,Yn=0,Tn=0,An=0,wn=0,En=(nr+.5)*Ln,Nn=dn(nr*Ln);Nn<(nr+1)*Ln;Nn++)for(var Fn=an(En-(Nn+.5))/Rn,Un=(Zn+.5)*Pn,Gn=Fn*Fn,er=dn(Zn*Pn);er<(Zn+1)*Pn;er++){var On=an(Un-(er+.5))/In,Bn=rn(Gn+On*On);Bn>1&&Bn<-1||(Jn=2*Bn*Bn*Bn-3*Bn*Bn+1,Jn>0&&(On=4*(er+Nn*yn),wn+=Jn*Hn[On+3],Xn+=Jn,Hn[On+3]<255&&(Jn=Jn*Hn[On+3]/250),Yn+=Jn*Hn[On],Tn+=Jn*Hn[On+1],An+=Jn*Hn[On+2],Vn+=Jn))}Kn[ir]=Yn/Vn,Kn[ir+1]=Tn/Vn,Kn[ir+2]=An/Vn,Kn[ir+3]=wn/Xn}return Qn},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),en.Image.filters.Resize.fromObject=en.Image.filters.BaseFilter.fromObject}(St),function(fn){var en=fn.fabric||(fn.fabric={}),on=en.Image.filters,dn=en.util.createClass;on.Contrast=dn(on.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(rn){if(this.contrast!==0){var an=rn.imageData,nn,hn,cn=an.data,hn=cn.length,sn=Math.floor(this.contrast*255),pn=259*(sn+255)/(255*(259-sn));for(nn=0;nn<hn;nn+=4)cn[nn]=pn*(cn[nn]-128)+128,cn[nn+1]=pn*(cn[nn+1]-128)+128,cn[nn+2]=pn*(cn[nn+2]-128)+128}},getUniformLocations:function(rn,an){return{uContrast:rn.getUniformLocation(an,"uContrast")}},sendUniformData:function(rn,an){rn.uniform1f(an.uContrast,this.contrast)}}),en.Image.filters.Contrast.fromObject=en.Image.filters.BaseFilter.fromObject}(St),function(fn){var en=fn.fabric||(fn.fabric={}),on=en.Image.filters,dn=en.util.createClass;on.Saturation=dn(on.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(rn){if(this.saturation!==0){var an=rn.imageData,nn=an.data,cn=nn.length,hn=-this.saturation,sn,pn;for(sn=0;sn<cn;sn+=4)pn=Math.max(nn[sn],nn[sn+1],nn[sn+2]),nn[sn]+=pn!==nn[sn]?(pn-nn[sn])*hn:0,nn[sn+1]+=pn!==nn[sn+1]?(pn-nn[sn+1])*hn:0,nn[sn+2]+=pn!==nn[sn+2]?(pn-nn[sn+2])*hn:0}},getUniformLocations:function(rn,an){return{uSaturation:rn.getUniformLocation(an,"uSaturation")}},sendUniformData:function(rn,an){rn.uniform1f(an.uSaturation,-this.saturation)}}),en.Image.filters.Saturation.fromObject=en.Image.filters.BaseFilter.fromObject}(St),function(fn){var en=fn.fabric||(fn.fabric={}),on=en.Image.filters,dn=en.util.createClass;on.Vibrance=dn(on.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(rn){if(this.vibrance!==0){var an=rn.imageData,nn=an.data,cn=nn.length,hn=-this.vibrance,sn,pn,mn,yn;for(sn=0;sn<cn;sn+=4)pn=Math.max(nn[sn],nn[sn+1],nn[sn+2]),mn=(nn[sn]+nn[sn+1]+nn[sn+2])/3,yn=Math.abs(pn-mn)*2/255*hn,nn[sn]+=pn!==nn[sn]?(pn-nn[sn])*yn:0,nn[sn+1]+=pn!==nn[sn+1]?(pn-nn[sn+1])*yn:0,nn[sn+2]+=pn!==nn[sn+2]?(pn-nn[sn+2])*yn:0}},getUniformLocations:function(rn,an){return{uVibrance:rn.getUniformLocation(an,"uVibrance")}},sendUniformData:function(rn,an){rn.uniform1f(an.uVibrance,-this.vibrance)}}),en.Image.filters.Vibrance.fromObject=en.Image.filters.BaseFilter.fromObject}(St),function(fn){var en=fn.fabric||(fn.fabric={}),on=en.Image.filters,dn=en.util.createClass;on.Blur=dn(on.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(rn){rn.webgl?(this.aspectRatio=rn.sourceWidth/rn.sourceHeight,rn.passes++,this._setupFrameBuffer(rn),this.horizontal=!0,this.applyToWebGL(rn),this._swapTextures(rn),this._setupFrameBuffer(rn),this.horizontal=!1,this.applyToWebGL(rn),this._swapTextures(rn)):this.applyTo2d(rn)},applyTo2d:function(rn){rn.imageData=this.simpleBlur(rn)},simpleBlur:function(rn){var an=rn.filterBackend.resources,nn,cn,hn=rn.imageData.width,sn=rn.imageData.height;an.blurLayer1||(an.blurLayer1=en.util.createCanvasElement(),an.blurLayer2=en.util.createCanvasElement()),nn=an.blurLayer1,cn=an.blurLayer2,(nn.width!==hn||nn.height!==sn)&&(cn.width=nn.width=hn,cn.height=nn.height=sn);var pn=nn.getContext("2d"),mn=cn.getContext("2d"),yn=15,_n,xn,Sn,Pn,Ln=this.blur*.06*.5;for(pn.putImageData(rn.imageData,0,0),mn.clearRect(0,0,hn,sn),Pn=-yn;Pn<=yn;Pn++)_n=(Math.random()-.5)/4,xn=Pn/yn,Sn=Ln*xn*hn+_n,mn.globalAlpha=1-Math.abs(xn),mn.drawImage(nn,Sn,_n),pn.drawImage(cn,0,0),mn.globalAlpha=1,mn.clearRect(0,0,cn.width,cn.height);for(Pn=-yn;Pn<=yn;Pn++)_n=(Math.random()-.5)/4,xn=Pn/yn,Sn=Ln*xn*sn+_n,mn.globalAlpha=1-Math.abs(xn),mn.drawImage(nn,_n,Sn),pn.drawImage(cn,0,0),mn.globalAlpha=1,mn.clearRect(0,0,cn.width,cn.height);rn.ctx.drawImage(nn,0,0);var In=rn.ctx.getImageData(0,0,nn.width,nn.height);return pn.globalAlpha=1,pn.clearRect(0,0,nn.width,nn.height),In},getUniformLocations:function(rn,an){return{delta:rn.getUniformLocation(an,"uDelta")}},sendUniformData:function(rn,an){var nn=this.chooseRightDelta();rn.uniform2fv(an.delta,nn)},chooseRightDelta:function(){var rn=1,an=[0,0],nn;return this.horizontal?this.aspectRatio>1&&(rn=1/this.aspectRatio):this.aspectRatio<1&&(rn=this.aspectRatio),nn=rn*this.blur*.12,this.horizontal?an[0]=nn:an[1]=nn,an}}),on.Blur.fromObject=en.Image.filters.BaseFilter.fromObject}(St),function(fn){var en=fn.fabric||(fn.fabric={}),on=en.Image.filters,dn=en.util.createClass;on.Gamma=dn(on.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(rn){this.gamma=[1,1,1],on.BaseFilter.prototype.initialize.call(this,rn)},applyTo2d:function(rn){var an=rn.imageData,nn=an.data,cn=this.gamma,hn=nn.length,sn=1/cn[0],pn=1/cn[1],mn=1/cn[2],yn;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),yn=0,hn=256;yn<hn;yn++)this.rVals[yn]=Math.pow(yn/255,sn)*255,this.gVals[yn]=Math.pow(yn/255,pn)*255,this.bVals[yn]=Math.pow(yn/255,mn)*255;for(yn=0,hn=nn.length;yn<hn;yn+=4)nn[yn]=this.rVals[nn[yn]],nn[yn+1]=this.gVals[nn[yn+1]],nn[yn+2]=this.bVals[nn[yn+2]]},getUniformLocations:function(rn,an){return{uGamma:rn.getUniformLocation(an,"uGamma")}},sendUniformData:function(rn,an){rn.uniform3fv(an.uGamma,this.gamma)}}),en.Image.filters.Gamma.fromObject=en.Image.filters.BaseFilter.fromObject}(St),function(fn){var en=fn.fabric||(fn.fabric={}),on=en.Image.filters,dn=en.util.createClass;on.Composed=dn(on.BaseFilter,{type:"Composed",subFilters:[],initialize:function(rn){this.callSuper("initialize",rn),this.subFilters=this.subFilters.slice(0)},applyTo:function(rn){rn.passes+=this.subFilters.length-1,this.subFilters.forEach(function(an){an.applyTo(rn)})},toObject:function(){return en.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(rn){return rn.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(rn){return!rn.isNeutralState()})}}),en.Image.filters.Composed.fromObject=function(rn,an){var nn=rn.subFilters||[],cn=nn.map(function(sn){return new en.Image.filters[sn.type](sn)}),hn=new en.Image.filters.Composed({subFilters:cn});return an&&an(hn),hn}}(St),function(fn){var en=fn.fabric||(fn.fabric={}),on=en.Image.filters,dn=en.util.createClass;on.HueRotation=dn(on.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var rn=this.rotation*Math.PI,an=en.util.cos(rn),nn=en.util.sin(rn),cn=1/3,hn=Math.sqrt(cn)*nn,sn=1-an;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=an+sn/3,this.matrix[1]=cn*sn-hn,this.matrix[2]=cn*sn+hn,this.matrix[5]=cn*sn+hn,this.matrix[6]=an+cn*sn,this.matrix[7]=cn*sn-hn,this.matrix[10]=cn*sn-hn,this.matrix[11]=cn*sn+hn,this.matrix[12]=an+cn*sn},isNeutralState:function(rn){return this.calculateMatrix(),on.BaseFilter.prototype.isNeutralState.call(this,rn)},applyTo:function(rn){this.calculateMatrix(),on.BaseFilter.prototype.applyTo.call(this,rn)}}),en.Image.filters.HueRotation.fromObject=en.Image.filters.BaseFilter.fromObject}(St),function(fn){var en=fn.fabric||(fn.fabric={}),on=en.util.object.clone;if(en.Text){en.warn("fabric.Text is already defined");return}var dn="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide".split(" ");en.Text=en.util.createClass(en.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:en.Object.prototype.stateProperties.concat(dn),cacheProperties:en.Object.prototype.cacheProperties.concat(dn),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(rn,an){this.styles=an?an.styles||{}:{},this.text=rn,this.__skipDimension=!0,this.callSuper("initialize",an),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var rn=this.path;rn&&(rn.segmentsInfo=en.util.getPathSegmentsInfo(rn.path))},getMeasuringContext:function(){return en._measuringContext||(en._measuringContext=this.canvas&&this.canvas.contextCache||en.util.createCanvasElement().getContext("2d")),en._measuringContext},_splitText:function(){var rn=this._splitTextIntoLines(this.text);return this.textLines=rn.lines,this._textLines=rn.graphemeLines,this._unwrappedTextLines=rn._unwrappedLines,this._text=rn.graphemeText,rn},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var rn,an,nn,cn,hn,sn,pn,mn=0,yn=this._textLines.length;mn<yn;mn++)if(!(this.textAlign!=="justify"&&(mn===yn-1||this.isEndOfWrapping(mn)))&&(cn=0,hn=this._textLines[mn],an=this.getLineWidth(mn),an<this.width&&(pn=this.textLines[mn].match(this._reSpacesAndTabs)))){nn=pn.length,rn=(this.width-an)/nn;for(var _n=0,xn=hn.length;_n<=xn;_n++)sn=this.__charBounds[mn][_n],this._reSpaceAndTab.test(hn[_n])?(sn.width+=rn,sn.kernedWidth+=rn,sn.left+=cn,cn+=rn):sn.left+=cn}},isEndOfWrapping:function(rn){return rn===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var rn=this.callSuper("_getCacheCanvasDimensions"),an=this.fontSize;return rn.width+=an*rn.zoomX,rn.height+=an*rn.zoomY,rn},_render:function(rn){var an=this.path;an&&!an.isNotVisible()&&an._render(rn),this._setTextStyles(rn),this._renderTextLinesBackground(rn),this._renderTextDecoration(rn,"underline"),this._renderText(rn),this._renderTextDecoration(rn,"overline"),this._renderTextDecoration(rn,"linethrough")},_renderText:function(rn){this.paintFirst==="stroke"?(this._renderTextStroke(rn),this._renderTextFill(rn)):(this._renderTextFill(rn),this._renderTextStroke(rn))},_setTextStyles:function(rn,an,nn){rn.textBaseline="alphabetic",rn.font=this._getFontDeclaration(an,nn)},calcTextWidth:function(){for(var rn=this.getLineWidth(0),an=1,nn=this._textLines.length;an<nn;an++){var cn=this.getLineWidth(an);cn>rn&&(rn=cn)}return rn},_renderTextLine:function(rn,an,nn,cn,hn,sn){this._renderChars(rn,an,nn,cn,hn,sn)},_renderTextLinesBackground:function(rn){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var an,nn,cn=rn.fillStyle,hn,sn,pn=this._getLeftOffset(),mn=this._getTopOffset(),yn=0,_n=0,xn,Sn,Pn=this.path,Ln,In=0,Rn=this._textLines.length;In<Rn;In++){if(an=this.getHeightOfLine(In),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",In)){mn+=an;continue}hn=this._textLines[In],nn=this._getLineLeftOffset(In),_n=0,yn=0,sn=this.getValueOfPropertyAt(In,0,"textBackgroundColor");for(var Mn=0,Hn=hn.length;Mn<Hn;Mn++)xn=this.__charBounds[In][Mn],Sn=this.getValueOfPropertyAt(In,Mn,"textBackgroundColor"),Pn?(rn.save(),rn.translate(xn.renderLeft,xn.renderTop),rn.rotate(xn.angle),rn.fillStyle=Sn,Sn&&rn.fillRect(-xn.width/2,-an/this.lineHeight*(1-this._fontSizeFraction),xn.width,an/this.lineHeight),rn.restore()):Sn!==sn?(Ln=pn+nn+yn,this.direction==="rtl"&&(Ln=this.width-Ln-_n),rn.fillStyle=sn,sn&&rn.fillRect(Ln,mn,_n,an/this.lineHeight),yn=xn.left,_n=xn.width,sn=Sn):_n+=xn.kernedWidth;Sn&&!Pn&&(Ln=pn+nn+yn,this.direction==="rtl"&&(Ln=this.width-Ln-_n),rn.fillStyle=Sn,rn.fillRect(Ln,mn,_n,an/this.lineHeight)),mn+=an}rn.fillStyle=cn,this._removeShadow(rn)}},getFontCache:function(rn){var an=rn.fontFamily.toLowerCase();en.charWidthsCache[an]||(en.charWidthsCache[an]={});var nn=en.charWidthsCache[an],cn=rn.fontStyle.toLowerCase()+"_"+(rn.fontWeight+"").toLowerCase();return nn[cn]||(nn[cn]={}),nn[cn]},_measureChar:function(rn,an,nn,cn){var hn=this.getFontCache(an),sn=this._getFontDeclaration(an),pn=this._getFontDeclaration(cn),mn=nn+rn,yn=sn===pn,_n,xn,Sn,Pn=an.fontSize/this.CACHE_FONT_SIZE,Ln;if(nn&&hn[nn]!==void 0&&(Sn=hn[nn]),hn[rn]!==void 0&&(Ln=_n=hn[rn]),yn&&hn[mn]!==void 0&&(xn=hn[mn],Ln=xn-Sn),_n===void 0||Sn===void 0||xn===void 0){var In=this.getMeasuringContext();this._setTextStyles(In,an,!0)}return _n===void 0&&(Ln=_n=In.measureText(rn).width,hn[rn]=_n),Sn===void 0&&yn&&nn&&(Sn=In.measureText(nn).width,hn[nn]=Sn),yn&&xn===void 0&&(xn=In.measureText(mn).width,hn[mn]=xn,Ln=xn-Sn),{width:_n*Pn,kernedWidth:Ln*Pn}},getHeightOfChar:function(rn,an){return this.getValueOfPropertyAt(rn,an,"fontSize")},measureLine:function(rn){var an=this._measureLine(rn);return this.charSpacing!==0&&(an.width-=this._getWidthOfCharSpacing()),an.width<0&&(an.width=0),an},_measureLine:function(rn){var an=0,nn,cn,hn=this._textLines[rn],sn,pn,mn=0,yn=new Array(hn.length),_n=0,xn,Sn,Pn=this.path,Ln=this.pathSide==="right";for(this.__charBounds[rn]=yn,nn=0;nn<hn.length;nn++)cn=hn[nn],pn=this._getGraphemeBox(cn,rn,nn,sn),yn[nn]=pn,an+=pn.kernedWidth,sn=cn;if(yn[nn]={left:pn?pn.left+pn.width:0,width:0,kernedWidth:0,height:this.fontSize},Pn){switch(Sn=Pn.segmentsInfo[Pn.segmentsInfo.length-1].length,xn=en.util.getPointOnPath(Pn.path,0,Pn.segmentsInfo),xn.x+=Pn.pathOffset.x,xn.y+=Pn.pathOffset.y,this.textAlign){case"left":_n=Ln?Sn-an:0;break;case"center":_n=(Sn-an)/2;break;case"right":_n=Ln?0:Sn-an;break}for(_n+=this.pathStartOffset*(Ln?-1:1),nn=Ln?hn.length-1:0;Ln?nn>=0:nn<hn.length;Ln?nn--:nn++)pn=yn[nn],_n>Sn?_n%=Sn:_n<0&&(_n+=Sn),this._setGraphemeOnPath(_n,pn,xn),_n+=pn.kernedWidth}return{width:an,numOfSpaces:mn}},_setGraphemeOnPath:function(rn,an,nn){var cn=rn+an.kernedWidth/2,hn=this.path,sn=en.util.getPointOnPath(hn.path,cn,hn.segmentsInfo);an.renderLeft=sn.x-nn.x,an.renderTop=sn.y-nn.y,an.angle=sn.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(rn,an,nn,cn,hn){var sn=this.getCompleteStyleDeclaration(an,nn),pn=cn?this.getCompleteStyleDeclaration(an,nn-1):{},mn=this._measureChar(rn,sn,cn,pn),yn=mn.kernedWidth,_n=mn.width,xn;this.charSpacing!==0&&(xn=this._getWidthOfCharSpacing(),_n+=xn,yn+=xn);var Sn={width:_n,left:0,height:sn.fontSize,kernedWidth:yn,deltaY:sn.deltaY};if(nn>0&&!hn){var Pn=this.__charBounds[an][nn-1];Sn.left=Pn.left+Pn.width+mn.kernedWidth-mn.width}return Sn},getHeightOfLine:function(rn){if(this.__lineHeights[rn])return this.__lineHeights[rn];for(var an=this._textLines[rn],nn=this.getHeightOfChar(rn,0),cn=1,hn=an.length;cn<hn;cn++)nn=Math.max(this.getHeightOfChar(rn,cn),nn);return this.__lineHeights[rn]=nn*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var rn,an=0,nn=0,cn=this._textLines.length;nn<cn;nn++)rn=this.getHeightOfLine(nn),an+=nn===cn-1?rn/this.lineHeight:rn;return an},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(rn,an){rn.save();for(var nn=0,cn=this._getLeftOffset(),hn=this._getTopOffset(),sn=0,pn=this._textLines.length;sn<pn;sn++){var mn=this.getHeightOfLine(sn),yn=mn/this.lineHeight,_n=this._getLineLeftOffset(sn);this._renderTextLine(an,rn,this._textLines[sn],cn+_n,hn+nn+yn,sn),nn+=mn}rn.restore()},_renderTextFill:function(rn){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(rn,"fillText")},_renderTextStroke:function(rn){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(rn),rn.save(),this._setLineDash(rn,this.strokeDashArray),rn.beginPath(),this._renderTextCommon(rn,"strokeText"),rn.closePath(),rn.restore())},_renderChars:function(rn,an,nn,cn,hn,sn){var pn=this.getHeightOfLine(sn),mn=this.textAlign.indexOf("justify")!==-1,yn,_n,xn="",Sn,Pn=0,Ln,In=this.path,Rn=!mn&&this.charSpacing===0&&this.isEmptyStyles(sn)&&!In,Mn=this.direction==="ltr",Hn=this.direction==="ltr"?1:-1,Qn;if(an.save(),hn-=pn*this._fontSizeFraction/this.lineHeight,Rn){an.canvas.setAttribute("dir",Mn?"ltr":"rtl"),an.direction=Mn?"ltr":"rtl",an.textAlign=Mn?"left":"right",this._renderChar(rn,an,sn,0,nn.join(""),cn,hn,pn),an.restore();return}for(var Kn=0,nr=nn.length-1;Kn<=nr;Kn++)Ln=Kn===nr||this.charSpacing||In,xn+=nn[Kn],Sn=this.__charBounds[sn][Kn],Pn===0?(cn+=Hn*(Sn.kernedWidth-Sn.width),Pn+=Sn.width):Pn+=Sn.kernedWidth,mn&&!Ln&&this._reSpaceAndTab.test(nn[Kn])&&(Ln=!0),Ln||(yn=yn||this.getCompleteStyleDeclaration(sn,Kn),_n=this.getCompleteStyleDeclaration(sn,Kn+1),Ln=this._hasStyleChanged(yn,_n)),Ln&&(In?(an.save(),an.translate(Sn.renderLeft,Sn.renderTop),an.rotate(Sn.angle),this._renderChar(rn,an,sn,Kn,xn,-Pn/2,0,pn),an.restore()):(Qn=cn,an.canvas.setAttribute("dir",Mn?"ltr":"rtl"),an.direction=Mn?"ltr":"rtl",an.textAlign=Mn?"left":"right",this._renderChar(rn,an,sn,Kn,xn,Qn,hn,pn)),xn="",yn=_n,cn+=Hn*Pn,Pn=0);an.restore()},_applyPatternGradientTransformText:function(rn){var an=en.util.createCanvasElement(),nn,cn=this.width+this.strokeWidth,hn=this.height+this.strokeWidth;return an.width=cn,an.height=hn,nn=an.getContext("2d"),nn.beginPath(),nn.moveTo(0,0),nn.lineTo(cn,0),nn.lineTo(cn,hn),nn.lineTo(0,hn),nn.closePath(),nn.translate(cn/2,hn/2),nn.fillStyle=rn.toLive(nn),this._applyPatternGradientTransform(nn,rn),nn.fill(),nn.createPattern(an,"no-repeat")},handleFiller:function(rn,an,nn){var cn,hn;return nn.toLive?nn.gradientUnits==="percentage"||nn.gradientTransform||nn.patternTransform?(cn=-this.width/2,hn=-this.height/2,rn.translate(cn,hn),rn[an]=this._applyPatternGradientTransformText(nn),{offsetX:cn,offsetY:hn}):(rn[an]=nn.toLive(rn,this),this._applyPatternGradientTransform(rn,nn)):(rn[an]=nn,{offsetX:0,offsetY:0})},_setStrokeStyles:function(rn,an){return rn.lineWidth=an.strokeWidth,rn.lineCap=this.strokeLineCap,rn.lineDashOffset=this.strokeDashOffset,rn.lineJoin=this.strokeLineJoin,rn.miterLimit=this.strokeMiterLimit,this.handleFiller(rn,"strokeStyle",an.stroke)},_setFillStyles:function(rn,an){return this.handleFiller(rn,"fillStyle",an.fill)},_renderChar:function(rn,an,nn,cn,hn,sn,pn){var mn=this._getStyleDeclaration(nn,cn),yn=this.getCompleteStyleDeclaration(nn,cn),_n=rn==="fillText"&&yn.fill,xn=rn==="strokeText"&&yn.stroke&&yn.strokeWidth,Sn,Pn;!xn&&!_n||(an.save(),_n&&(Sn=this._setFillStyles(an,yn)),xn&&(Pn=this._setStrokeStyles(an,yn)),an.font=this._getFontDeclaration(yn),mn&&mn.textBackgroundColor&&this._removeShadow(an),mn&&mn.deltaY&&(pn+=mn.deltaY),_n&&an.fillText(hn,sn-Sn.offsetX,pn-Sn.offsetY),xn&&an.strokeText(hn,sn-Pn.offsetX,pn-Pn.offsetY),an.restore())},setSuperscript:function(rn,an){return this._setScript(rn,an,this.superscript)},setSubscript:function(rn,an){return this._setScript(rn,an,this.subscript)},_setScript:function(rn,an,nn){var cn=this.get2DCursorLocation(rn,!0),hn=this.getValueOfPropertyAt(cn.lineIndex,cn.charIndex,"fontSize"),sn=this.getValueOfPropertyAt(cn.lineIndex,cn.charIndex,"deltaY"),pn={fontSize:hn*nn.size,deltaY:sn+hn*nn.baseline};return this.setSelectionStyles(pn,rn,an),this},_hasStyleChanged:function(rn,an){return rn.fill!==an.fill||rn.stroke!==an.stroke||rn.strokeWidth!==an.strokeWidth||rn.fontSize!==an.fontSize||rn.fontFamily!==an.fontFamily||rn.fontWeight!==an.fontWeight||rn.fontStyle!==an.fontStyle||rn.deltaY!==an.deltaY},_hasStyleChangedForSvg:function(rn,an){return this._hasStyleChanged(rn,an)||rn.overline!==an.overline||rn.underline!==an.underline||rn.linethrough!==an.linethrough},_getLineLeftOffset:function(rn){var an=this.getLineWidth(rn),nn=this.width-an,cn=this.textAlign,hn=this.direction,pn,sn=0,pn=this.isEndOfWrapping(rn);return cn==="justify"||cn==="justify-center"&&!pn||cn==="justify-right"&&!pn||cn==="justify-left"&&!pn?0:(cn==="center"&&(sn=nn/2),cn==="right"&&(sn=nn),cn==="justify-center"&&(sn=nn/2),cn==="justify-right"&&(sn=nn),hn==="rtl"&&(sn-=nn),sn)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var rn=this._forceClearCache;return rn||(rn=this.hasStateChanged("_dimensionAffectingProps")),rn&&(this.dirty=!0,this._forceClearCache=!1),rn},getLineWidth:function(rn){if(this.__lineWidths[rn])return this.__lineWidths[rn];var an,nn=this._textLines[rn],cn;return nn===""?an=0:(cn=this.measureLine(rn),an=cn.width),this.__lineWidths[rn]=an,an},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(rn,an,nn){var cn=this._getStyleDeclaration(rn,an);return cn&&typeof cn[nn]<"u"?cn[nn]:this[nn]},_renderTextDecoration:function(rn,an){if(!(!this[an]&&!this.styleHas(an))){for(var nn,cn,hn,sn,pn,mn,yn,_n,xn=this._getLeftOffset(),Sn=this._getTopOffset(),Pn,Ln,In,Rn,Mn,Hn,Qn,Kn,nr=this.path,Zn=this._getWidthOfCharSpacing(),ir=this.offsets[an],Jn=0,Vn=this._textLines.length;Jn<Vn;Jn++){if(nn=this.getHeightOfLine(Jn),!this[an]&&!this.styleHas(an,Jn)){Sn+=nn;continue}yn=this._textLines[Jn],Hn=nn/this.lineHeight,sn=this._getLineLeftOffset(Jn),Ln=0,In=0,_n=this.getValueOfPropertyAt(Jn,0,an),Kn=this.getValueOfPropertyAt(Jn,0,"fill"),Pn=Sn+Hn*(1-this._fontSizeFraction),cn=this.getHeightOfChar(Jn,0),pn=this.getValueOfPropertyAt(Jn,0,"deltaY");for(var Xn=0,Yn=yn.length;Xn<Yn;Xn++)if(Rn=this.__charBounds[Jn][Xn],Mn=this.getValueOfPropertyAt(Jn,Xn,an),Qn=this.getValueOfPropertyAt(Jn,Xn,"fill"),hn=this.getHeightOfChar(Jn,Xn),mn=this.getValueOfPropertyAt(Jn,Xn,"deltaY"),nr&&Mn&&Qn)rn.save(),rn.fillStyle=Kn,rn.translate(Rn.renderLeft,Rn.renderTop),rn.rotate(Rn.angle),rn.fillRect(-Rn.kernedWidth/2,ir*hn+mn,Rn.kernedWidth,this.fontSize/15),rn.restore();else if((Mn!==_n||Qn!==Kn||hn!==cn||mn!==pn)&&In>0){var Tn=xn+sn+Ln;this.direction==="rtl"&&(Tn=this.width-Tn-In),_n&&Kn&&(rn.fillStyle=Kn,rn.fillRect(Tn,Pn+ir*cn+pn,In,this.fontSize/15)),Ln=Rn.left,In=Rn.width,_n=Mn,Kn=Qn,cn=hn,pn=mn}else In+=Rn.kernedWidth;var Tn=xn+sn+Ln;this.direction==="rtl"&&(Tn=this.width-Tn-In),rn.fillStyle=Qn,Mn&&Qn&&rn.fillRect(Tn,Pn+ir*cn+pn,In-Zn,this.fontSize/15),Sn+=nn}this._removeShadow(rn)}},_getFontDeclaration:function(rn,an){var nn=rn||this,cn=this.fontFamily,hn=en.Text.genericFonts.indexOf(cn.toLowerCase())>-1,sn=cn===void 0||cn.indexOf("'")>-1||cn.indexOf(",")>-1||cn.indexOf('"')>-1||hn?nn.fontFamily:'"'+nn.fontFamily+'"';return[en.isLikelyNode?nn.fontWeight:nn.fontStyle,en.isLikelyNode?nn.fontStyle:nn.fontWeight,an?this.CACHE_FONT_SIZE+"px":nn.fontSize+"px",sn].join(" ")},render:function(rn){!this.visible||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",rn))},_splitTextIntoLines:function(rn){for(var an=rn.split(this._reNewline),nn=new Array(an.length),cn=[`
`],hn=[],sn=0;sn<an.length;sn++)nn[sn]=en.util.string.graphemeSplit(an[sn]),hn=hn.concat(nn[sn],cn);return hn.pop(),{_unwrappedLines:nn,lines:an,graphemeText:hn,graphemeLines:nn}},toObject:function(rn){var an=dn.concat(rn),nn=this.callSuper("toObject",an);return nn.styles=on(this.styles,!0),nn.path&&(nn.path=this.path.toObject()),nn},set:function(rn,an){this.callSuper("set",rn,an);var nn=!1,cn=!1;if(typeof rn=="object")for(var hn in rn)hn==="path"&&this.setPathInfo(),nn=nn||this._dimensionAffectingProps.indexOf(hn)!==-1,cn=cn||hn==="path";else nn=this._dimensionAffectingProps.indexOf(rn)!==-1,cn=rn==="path";return cn&&this.setPathInfo(),nn&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),en.Text.ATTRIBUTE_NAMES=en.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),en.Text.DEFAULT_SVG_FONT_SIZE=16,en.Text.fromElement=function(rn,an,nn){if(!rn)return an(null);var cn=en.parseAttributes(rn,en.Text.ATTRIBUTE_NAMES),hn=cn.textAnchor||"left";if(nn=en.util.object.extend(nn?on(nn):{},cn),nn.top=nn.top||0,nn.left=nn.left||0,cn.textDecoration){var sn=cn.textDecoration;sn.indexOf("underline")!==-1&&(nn.underline=!0),sn.indexOf("overline")!==-1&&(nn.overline=!0),sn.indexOf("line-through")!==-1&&(nn.linethrough=!0),delete nn.textDecoration}"dx"in cn&&(nn.left+=cn.dx),"dy"in cn&&(nn.top+=cn.dy),"fontSize"in nn||(nn.fontSize=en.Text.DEFAULT_SVG_FONT_SIZE);var pn="";"textContent"in rn?pn=rn.textContent:"firstChild"in rn&&rn.firstChild!==null&&"data"in rn.firstChild&&rn.firstChild.data!==null&&(pn=rn.firstChild.data),pn=pn.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var mn=nn.strokeWidth;nn.strokeWidth=0;var yn=new en.Text(pn,nn),_n=yn.getScaledHeight()/yn.height,xn=(yn.height+yn.strokeWidth)*yn.lineHeight-yn.height,Sn=xn*_n,Pn=yn.getScaledHeight()+Sn,Ln=0;hn==="center"&&(Ln=yn.getScaledWidth()/2),hn==="right"&&(Ln=yn.getScaledWidth()),yn.set({left:yn.left-Ln,top:yn.top-(Pn-yn.fontSize*(.07+yn._fontSizeFraction))/yn.lineHeight,strokeWidth:typeof mn<"u"?mn:1}),an(yn)},en.Text.fromObject=function(rn,an){var nn=on(rn),cn=rn.path;return delete nn.path,en.Object._fromObject("Text",nn,function(hn){cn?en.Object._fromObject("Path",cn,function(sn){hn.set("path",sn),an(hn)},"path"):an(hn)},"text")},en.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],en.util.createAccessors&&en.util.createAccessors(en.Text)}(St),function(){e.util.object.extend(e.Text.prototype,{isEmptyStyles:function(fn){if(!this.styles||typeof fn<"u"&&!this.styles[fn])return!0;var en=typeof fn>"u"?this.styles:{line:this.styles[fn]};for(var on in en)for(var dn in en[on])for(var rn in en[on][dn])return!1;return!0},styleHas:function(fn,en){if(!this.styles||!fn||fn===""||typeof en<"u"&&!this.styles[en])return!1;var on=typeof en>"u"?this.styles:{0:this.styles[en]};for(var dn in on)for(var rn in on[dn])if(typeof on[dn][rn][fn]<"u")return!0;return!1},cleanStyle:function(fn){if(!this.styles||!fn||fn==="")return!1;var en=this.styles,on=0,dn,rn,an=!0,nn=0,cn;for(var hn in en){dn=0;for(var sn in en[hn]){var cn=en[hn][sn],pn=cn.hasOwnProperty(fn);on++,pn?(rn?cn[fn]!==rn&&(an=!1):rn=cn[fn],cn[fn]===this[fn]&&delete cn[fn]):an=!1,Object.keys(cn).length!==0?dn++:delete en[hn][sn]}dn===0&&delete en[hn]}for(var mn=0;mn<this._textLines.length;mn++)nn+=this._textLines[mn].length;an&&on===nn&&(this[fn]=rn,this.removeStyle(fn))},removeStyle:function(fn){if(!(!this.styles||!fn||fn==="")){var en=this.styles,on,dn,rn;for(dn in en){on=en[dn];for(rn in on)delete on[rn][fn],Object.keys(on[rn]).length===0&&delete on[rn];Object.keys(on).length===0&&delete en[dn]}}},_extendStyles:function(fn,en){var on=this.get2DCursorLocation(fn);this._getLineStyle(on.lineIndex)||this._setLineStyle(on.lineIndex),this._getStyleDeclaration(on.lineIndex,on.charIndex)||this._setStyleDeclaration(on.lineIndex,on.charIndex,{}),e.util.object.extend(this._getStyleDeclaration(on.lineIndex,on.charIndex),en)},get2DCursorLocation:function(fn,en){typeof fn>"u"&&(fn=this.selectionStart);for(var on=en?this._unwrappedTextLines:this._textLines,dn=on.length,rn=0;rn<dn;rn++){if(fn<=on[rn].length)return{lineIndex:rn,charIndex:fn};fn-=on[rn].length+this.missingNewlineOffset(rn)}return{lineIndex:rn-1,charIndex:on[rn-1].length<fn?on[rn-1].length:fn}},getSelectionStyles:function(fn,en,on){typeof fn>"u"&&(fn=this.selectionStart||0),typeof en>"u"&&(en=this.selectionEnd||fn);for(var dn=[],rn=fn;rn<en;rn++)dn.push(this.getStyleAtPosition(rn,on));return dn},getStyleAtPosition:function(fn,en){var on=this.get2DCursorLocation(fn),dn=en?this.getCompleteStyleDeclaration(on.lineIndex,on.charIndex):this._getStyleDeclaration(on.lineIndex,on.charIndex);return dn||{}},setSelectionStyles:function(fn,en,on){typeof en>"u"&&(en=this.selectionStart||0),typeof on>"u"&&(on=this.selectionEnd||en);for(var dn=en;dn<on;dn++)this._extendStyles(dn,fn);return this._forceClearCache=!0,this},_getStyleDeclaration:function(fn,en){var on=this.styles&&this.styles[fn];return on?on[en]:null},getCompleteStyleDeclaration:function(fn,en){for(var on=this._getStyleDeclaration(fn,en)||{},dn={},rn,an=0;an<this._styleProperties.length;an++)rn=this._styleProperties[an],dn[rn]=typeof on[rn]>"u"?this[rn]:on[rn];return dn},_setStyleDeclaration:function(fn,en,on){this.styles[fn][en]=on},_deleteStyleDeclaration:function(fn,en){delete this.styles[fn][en]},_getLineStyle:function(fn){return!!this.styles[fn]},_setLineStyle:function(fn){this.styles[fn]={}},_deleteLineStyle:function(fn){delete this.styles[fn]}})}(),function(){function fn(en){en.textDecoration&&(en.textDecoration.indexOf("underline")>-1&&(en.underline=!0),en.textDecoration.indexOf("line-through")>-1&&(en.linethrough=!0),en.textDecoration.indexOf("overline")>-1&&(en.overline=!0),delete en.textDecoration)}e.IText=e.util.createClass(e.Text,e.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(en,on){this.callSuper("initialize",en,on),this.initBehavior()},setSelectionStart:function(en){en=Math.max(en,0),this._updateAndFire("selectionStart",en)},setSelectionEnd:function(en){en=Math.min(en,this.text.length),this._updateAndFire("selectionEnd",en)},_updateAndFire:function(en,on){this[en]!==on&&(this._fireSelectionChanged(),this[en]=on),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(en){this.clearContextTop(),this.callSuper("render",en),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(en){this.callSuper("_render",en)},clearContextTop:function(en){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var on=this.canvas.contextTop,dn=this.canvas.viewportTransform;on.save(),on.transform(dn[0],dn[1],dn[2],dn[3],dn[4],dn[5]),this.transform(on),this._clearTextArea(on),en||on.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var en=this._getCursorBoundaries(),on=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(en,on):this.renderSelection(en,on),on.restore()}},_clearTextArea:function(en){var on=this.width+4,dn=this.height+4;en.clearRect(-on/2,-dn/2,on,dn)},_getCursorBoundaries:function(en){typeof en>"u"&&(en=this.selectionStart);var on=this._getLeftOffset(),dn=this._getTopOffset(),rn=this._getCursorBoundariesOffsets(en);return{left:on,top:dn,leftOffset:rn.left,topOffset:rn.top}},_getCursorBoundariesOffsets:function(en){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var on,dn,rn,an=0,nn=0,cn,hn=this.get2DCursorLocation(en);rn=hn.charIndex,dn=hn.lineIndex;for(var sn=0;sn<dn;sn++)an+=this.getHeightOfLine(sn);on=this._getLineLeftOffset(dn);var pn=this.__charBounds[dn][rn];return pn&&(nn=pn.left),this.charSpacing!==0&&rn===this._textLines[dn].length&&(nn-=this._getWidthOfCharSpacing()),cn={top:an,left:on+(nn>0?nn:0)},this.direction==="rtl"&&(cn.left*=-1),this.cursorOffsetCache=cn,this.cursorOffsetCache},renderCursor:function(en,on){var dn=this.get2DCursorLocation(),rn=dn.lineIndex,an=dn.charIndex>0?dn.charIndex-1:0,nn=this.getValueOfPropertyAt(rn,an,"fontSize"),cn=this.scaleX*this.canvas.getZoom(),hn=this.cursorWidth/cn,sn=en.topOffset,pn=this.getValueOfPropertyAt(rn,an,"deltaY");sn+=(1-this._fontSizeFraction)*this.getHeightOfLine(rn)/this.lineHeight-nn*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(en,on),on.fillStyle=this.cursorColor||this.getValueOfPropertyAt(rn,an,"fill"),on.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,on.fillRect(en.left+en.leftOffset-hn/2,sn+en.top+pn,hn,nn)},renderSelection:function(en,on){for(var dn=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,rn=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,an=this.textAlign.indexOf("justify")!==-1,nn=this.get2DCursorLocation(dn),cn=this.get2DCursorLocation(rn),hn=nn.lineIndex,sn=cn.lineIndex,pn=nn.charIndex<0?0:nn.charIndex,mn=cn.charIndex<0?0:cn.charIndex,yn=hn;yn<=sn;yn++){var _n=this._getLineLeftOffset(yn)||0,xn=this.getHeightOfLine(yn),Sn=0,Pn=0,Ln=0;if(yn===hn&&(Pn=this.__charBounds[hn][pn].left),yn>=hn&&yn<sn)Ln=an&&!this.isEndOfWrapping(yn)?this.width:this.getLineWidth(yn)||5;else if(yn===sn)if(mn===0)Ln=this.__charBounds[sn][mn].left;else{var In=this._getWidthOfCharSpacing();Ln=this.__charBounds[sn][mn-1].left+this.__charBounds[sn][mn-1].width-In}Sn=xn,(this.lineHeight<1||yn===sn&&this.lineHeight>1)&&(xn/=this.lineHeight);var Rn=en.left+_n+Pn,Mn=Ln-Pn,Hn=xn,Qn=0;this.inCompositionMode?(on.fillStyle=this.compositionColor||"black",Hn=1,Qn=xn):on.fillStyle=this.selectionColor,this.direction==="rtl"&&(Rn=this.width-Rn-Mn),on.fillRect(Rn,en.top+en.topOffset+Qn,Mn,Hn),en.topOffset+=Sn}},getCurrentCharFontSize:function(){var en=this._getCurrentCharIndex();return this.getValueOfPropertyAt(en.l,en.c,"fontSize")},getCurrentCharColor:function(){var en=this._getCurrentCharIndex();return this.getValueOfPropertyAt(en.l,en.c,"fill")},_getCurrentCharIndex:function(){var en=this.get2DCursorLocation(this.selectionStart,!0),on=en.charIndex>0?en.charIndex-1:0;return{l:en.lineIndex,c:on}}}),e.IText.fromObject=function(en,on){if(fn(en),en.styles)for(var dn in en.styles)for(var rn in en.styles[dn])fn(en.styles[dn][rn]);e.Object._fromObject("IText",en,on,"text")}}(),function(){var fn=e.util.object.clone;e.util.object.extend(e.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var en=this;this.on("added",function(){var on=en.canvas;on&&(on._hasITextHandlers||(on._hasITextHandlers=!0,en._initCanvasHandlers(on)),on._iTextInstances=on._iTextInstances||[],on._iTextInstances.push(en))})},initRemovedHandler:function(){var en=this;this.on("removed",function(){var on=en.canvas;on&&(on._iTextInstances=on._iTextInstances||[],e.util.removeFromArray(on._iTextInstances,en),on._iTextInstances.length===0&&(on._hasITextHandlers=!1,en._removeCanvasHandlers(on)))})},_initCanvasHandlers:function(en){en._mouseUpITextHandler=function(){en._iTextInstances&&en._iTextInstances.forEach(function(on){on.__isMousedown=!1})},en.on("mouse:up",en._mouseUpITextHandler)},_removeCanvasHandlers:function(en){en.off("mouse:up",en._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(en,on,dn,rn){var an;return an={isAborted:!1,abort:function(){this.isAborted=!0}},en.animate("_currentCursorOpacity",on,{duration:dn,onComplete:function(){an.isAborted||en[rn]()},onChange:function(){en.canvas&&en.selectionStart===en.selectionEnd&&en.renderCursorOrSelection()},abort:function(){return an.isAborted}}),an},_onTickComplete:function(){var en=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){en._currentTickCompleteState=en._animateCursor(en,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(en){var on=this,dn=en?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){on._tick()},dn)},abortCursorAnimation:function(){var en=this._currentTickState||this._currentTickCompleteState,on=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,en&&on&&on.clearContext(on.contextTop||on.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(en){var on=0,dn=en-1;if(this._reSpace.test(this._text[dn]))for(;this._reSpace.test(this._text[dn]);)on++,dn--;for(;/\S/.test(this._text[dn])&&dn>-1;)on++,dn--;return en-on},findWordBoundaryRight:function(en){var on=0,dn=en;if(this._reSpace.test(this._text[dn]))for(;this._reSpace.test(this._text[dn]);)on++,dn++;for(;/\S/.test(this._text[dn])&&dn<this._text.length;)on++,dn++;return en+on},findLineBoundaryLeft:function(en){for(var on=0,dn=en-1;!/\n/.test(this._text[dn])&&dn>-1;)on++,dn--;return en-on},findLineBoundaryRight:function(en){for(var on=0,dn=en;!/\n/.test(this._text[dn])&&dn<this._text.length;)on++,dn++;return en+on},searchWordBoundary:function(en,on){for(var dn=this._text,rn=this._reSpace.test(dn[en])?en-1:en,an=dn[rn],nn=e.reNonWord;!nn.test(an)&&rn>0&&rn<dn.length;)rn+=on,an=dn[rn];return nn.test(an)&&(rn+=on===1?0:1),rn},selectWord:function(en){en=en||this.selectionStart;var on=this.searchWordBoundary(en,-1),dn=this.searchWordBoundary(en,1);this.selectionStart=on,this.selectionEnd=dn,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(en){en=en||this.selectionStart;var on=this.findLineBoundaryLeft(en),dn=this.findLineBoundaryRight(en);return this.selectionStart=on,this.selectionEnd=dn,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(en){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(en),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(en){en._iTextInstances&&en._iTextInstances.forEach(function(on){on.selected=!1,on.isEditing&&on.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(en){if(!(!this.__isMousedown||!this.isEditing)){var on=this.getSelectionStartFromPointer(en.e),dn=this.selectionStart,rn=this.selectionEnd;(on!==this.__selectionStartOnMouseDown||dn===rn)&&(dn===on||rn===on)||(on>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=on):(this.selectionStart=on,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==dn||this.selectionEnd!==rn)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(en,on,dn){var rn=dn.slice(0,en),an=e.util.string.graphemeSplit(rn).length;if(en===on)return{selectionStart:an,selectionEnd:an};var nn=dn.slice(en,on),cn=e.util.string.graphemeSplit(nn).length;return{selectionStart:an,selectionEnd:an+cn}},fromGraphemeToStringSelection:function(en,on,dn){var rn=dn.slice(0,en),an=rn.join("").length;if(en===on)return{selectionStart:an,selectionEnd:an};var nn=dn.slice(en,on),cn=nn.join("").length;return{selectionStart:an,selectionEnd:an+cn}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var en=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=en.selectionStart,this.hiddenTextarea.selectionEnd=en.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(!!this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var en=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=en.selectionEnd,this.inCompositionMode||(this.selectionStart=en.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var en=this._calcTextareaPosition();this.hiddenTextarea.style.left=en.left,this.hiddenTextarea.style.top=en.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var en=this.inCompositionMode?this.compositionStart:this.selectionStart,on=this._getCursorBoundaries(en),dn=this.get2DCursorLocation(en),rn=dn.lineIndex,an=dn.charIndex,nn=this.getValueOfPropertyAt(rn,an,"fontSize")*this.lineHeight,cn=on.leftOffset,hn=this.calcTransformMatrix(),sn={x:on.left+cn,y:on.top+on.topOffset+nn},pn=this.canvas.getRetinaScaling(),mn=this.canvas.upperCanvasEl,yn=mn.width/pn,_n=mn.height/pn,xn=yn-nn,Sn=_n-nn,Pn=mn.clientWidth/yn,Ln=mn.clientHeight/_n;return sn=e.util.transformPoint(sn,hn),sn=e.util.transformPoint(sn,this.canvas.viewportTransform),sn.x*=Pn,sn.y*=Ln,sn.x<0&&(sn.x=0),sn.x>xn&&(sn.x=xn),sn.y<0&&(sn.y=0),sn.y>Sn&&(sn.y=Sn),sn.x+=this.canvas._offset.left,sn.y+=this.canvas._offset.top,{left:sn.x+"px",top:sn.y+"px",fontSize:nn+"px",charHeight:nn}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){!this._savedProps||(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var en=this._textBeforeEdit!==this.text,on=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,on&&(on.blur&&on.blur(),on.parentNode&&on.parentNode.removeChild(on)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),en&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),en&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var en in this.styles)this._textLines[en]||delete this.styles[en]},removeStyleFromTo:function(en,on){var dn=this.get2DCursorLocation(en,!0),rn=this.get2DCursorLocation(on,!0),an=dn.lineIndex,nn=dn.charIndex,cn=rn.lineIndex,hn=rn.charIndex,sn,pn;if(an!==cn){if(this.styles[an])for(sn=nn;sn<this._unwrappedTextLines[an].length;sn++)delete this.styles[an][sn];if(this.styles[cn])for(sn=hn;sn<this._unwrappedTextLines[cn].length;sn++)pn=this.styles[cn][sn],pn&&(this.styles[an]||(this.styles[an]={}),this.styles[an][nn+sn-hn]=pn);for(sn=an+1;sn<=cn;sn++)delete this.styles[sn];this.shiftLineStyles(cn,an-cn)}else if(this.styles[an]){pn=this.styles[an];var mn=hn-nn,yn,_n;for(sn=nn;sn<hn;sn++)delete pn[sn];for(_n in this.styles[an])yn=parseInt(_n,10),yn>=hn&&(pn[yn-mn]=pn[_n],delete pn[_n])}},shiftLineStyles:function(en,on){var dn=fn(this.styles);for(var rn in this.styles){var an=parseInt(rn,10);an>en&&(this.styles[an+on]=dn[an],dn[an-on]||delete this.styles[an])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(en,on,dn,rn){var an,nn={},cn=!1,hn=this._unwrappedTextLines[en].length===on;dn||(dn=1),this.shiftLineStyles(en,dn),this.styles[en]&&(an=this.styles[en][on===0?on:on-1]);for(var sn in this.styles[en]){var pn=parseInt(sn,10);pn>=on&&(cn=!0,nn[pn-on]=this.styles[en][sn],hn&&on===0||delete this.styles[en][sn])}var mn=!1;for(cn&&!hn&&(this.styles[en+dn]=nn,mn=!0),mn&&dn--;dn>0;)rn&&rn[dn-1]?this.styles[en+dn]={0:fn(rn[dn-1])}:an?this.styles[en+dn]={0:fn(an)}:delete this.styles[en+dn],dn--;this._forceClearCache=!0},insertCharStyleObject:function(en,on,dn,rn){this.styles||(this.styles={});var an=this.styles[en],nn=an?fn(an):{};dn||(dn=1);for(var cn in nn){var hn=parseInt(cn,10);hn>=on&&(an[hn+dn]=nn[hn],nn[hn-dn]||delete an[hn])}if(this._forceClearCache=!0,rn){for(;dn--;)!Object.keys(rn[dn]).length||(this.styles[en]||(this.styles[en]={}),this.styles[en][on+dn]=fn(rn[dn]));return}if(!!an)for(var sn=an[on?on-1:1];sn&&dn--;)this.styles[en][on+dn]=fn(sn)},insertNewStyleBlock:function(en,on,dn){for(var rn=this.get2DCursorLocation(on,!0),an=[0],nn=0,cn=0;cn<en.length;cn++)en[cn]===`
`?(nn++,an[nn]=0):an[nn]++;an[0]>0&&(this.insertCharStyleObject(rn.lineIndex,rn.charIndex,an[0],dn),dn=dn&&dn.slice(an[0]+1)),nn&&this.insertNewlineStyleObject(rn.lineIndex,rn.charIndex+an[0],nn);for(var cn=1;cn<nn;cn++)an[cn]>0?this.insertCharStyleObject(rn.lineIndex+cn,0,an[cn],dn):dn&&(this.styles[rn.lineIndex+cn][0]=dn[0]),dn=dn&&dn.slice(an[cn]+1);an[cn]>0&&this.insertCharStyleObject(rn.lineIndex+cn,0,an[cn],dn)},setSelectionStartEndWithShift:function(en,on,dn){dn<=en?(on===en?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=en),this.selectionStart=dn):dn>en&&dn<on?this._selectionDirection==="right"?this.selectionEnd=dn:this.selectionStart=dn:(on===en?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=on),this.selectionEnd=dn)},setSelectionInBoundaries:function(){var en=this.text.length;this.selectionStart>en?this.selectionStart=en:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>en?this.selectionEnd=en:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),e.util.object.extend(e.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(fn){if(!!this.canvas){this.__newClickTime=+new Date;var en=fn.pointer;this.isTripleClick(en)&&(this.fire("tripleclick",fn),this._stopEvent(fn.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=en,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(fn){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===fn.x&&this.__lastPointer.y===fn.y},_stopEvent:function(fn){fn.preventDefault&&fn.preventDefault(),fn.stopPropagation&&fn.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(fn){!this.isEditing||this.selectWord(this.getSelectionStartFromPointer(fn.e))},tripleClickHandler:function(fn){!this.isEditing||this.selectLine(this.getSelectionStartFromPointer(fn.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(fn){!this.canvas||!this.editable||fn.e.button&&fn.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(fn.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(fn){!this.canvas||!this.editable||fn.e.button&&fn.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(fn){if(this.__isMousedown=!1,!(!this.editable||this.group||fn.transform&&fn.transform.actionPerformed||fn.e.button&&fn.e.button!==1)){if(this.canvas){var en=this.canvas._activeObject;if(en&&en!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(fn.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(fn){var en=this.getSelectionStartFromPointer(fn),on=this.selectionStart,dn=this.selectionEnd;fn.shiftKey?this.setSelectionStartEndWithShift(on,dn,en):(this.selectionStart=en,this.selectionEnd=en),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(fn){for(var en=this.getLocalPointer(fn),on=0,dn=0,rn=0,an=0,nn=0,cn,hn,sn=0,pn=this._textLines.length;sn<pn&&rn<=en.y;sn++)rn+=this.getHeightOfLine(sn)*this.scaleY,nn=sn,sn>0&&(an+=this._textLines[sn-1].length+this.missingNewlineOffset(sn-1));cn=this._getLineLeftOffset(nn),dn=cn*this.scaleX,hn=this._textLines[nn],this.direction==="rtl"&&(en.x=this.width*this.scaleX-en.x+dn);for(var mn=0,yn=hn.length;mn<yn&&(on=dn,dn+=this.__charBounds[nn][mn].kernedWidth*this.scaleX,dn<=en.x);mn++)an++;return this._getNewSelectionStartFromOffset(en,on,dn,an,yn)},_getNewSelectionStartFromOffset:function(fn,en,on,dn,rn){var an=fn.x-en,nn=on-fn.x,cn=nn>an||nn<0?0:1,hn=dn+cn;return this.flipX&&(hn=rn-hn),hn>this._text.length&&(hn=this._text.length),hn}}),e.util.object.extend(e.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=e.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var fn=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+fn.top+"; left: "+fn.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding\uFF70top: "+fn.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):e.document.body.appendChild(this.hiddenTextarea),e.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),e.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),e.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),e.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(e.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(fn){if(!!this.isEditing){var en=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(fn.keyCode in en)this[en[fn.keyCode]](fn);else if(fn.keyCode in this.ctrlKeysMapDown&&(fn.ctrlKey||fn.metaKey))this[this.ctrlKeysMapDown[fn.keyCode]](fn);else return;fn.stopImmediatePropagation(),fn.preventDefault(),fn.keyCode>=33&&fn.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(fn){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(fn.keyCode in this.ctrlKeysMapUp&&(fn.ctrlKey||fn.metaKey))this[this.ctrlKeysMapUp[fn.keyCode]](fn);else return;fn.stopImmediatePropagation(),fn.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(fn){var en=this.fromPaste;if(this.fromPaste=!1,fn&&fn.stopPropagation(),!!this.isEditing){var on=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,dn=this._text.length,rn=on.length,an,nn,cn=rn-dn,hn=this.selectionStart,sn=this.selectionEnd,pn=hn!==sn,mn,yn,_n;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var xn=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),Sn=hn>xn.selectionStart;pn?(an=this._text.slice(hn,sn),cn+=sn-hn):rn<dn&&(Sn?an=this._text.slice(sn+cn,sn):an=this._text.slice(hn,hn-cn)),nn=on.slice(xn.selectionEnd-cn,xn.selectionEnd),an&&an.length&&(nn.length&&(mn=this.getSelectionStyles(hn,hn+1,!1),mn=nn.map(function(){return mn[0]})),pn?(yn=hn,_n=sn):Sn?(yn=sn-an.length,_n=sn):(yn=sn,_n=sn+an.length),this.removeStyleFromTo(yn,_n)),nn.length&&(en&&nn.join("")===e.copiedText&&!e.disableStyleCopyPaste&&(mn=e.copiedTextStyle),this.insertNewStyleBlock(nn,hn,mn)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(fn){this.compositionStart=fn.target.selectionStart,this.compositionEnd=fn.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(e.copiedText=this.getSelectedText(),e.disableStyleCopyPaste?e.copiedTextStyle=null:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(fn){return fn&&fn.clipboardData||e.window.clipboardData},_getWidthBeforeCursor:function(fn,en){var on=this._getLineLeftOffset(fn),dn;return en>0&&(dn=this.__charBounds[fn][en-1],on+=dn.left+dn.width),on},getDownCursorOffset:function(fn,en){var on=this._getSelectionForOffset(fn,en),dn=this.get2DCursorLocation(on),rn=dn.lineIndex;if(rn===this._textLines.length-1||fn.metaKey||fn.keyCode===34)return this._text.length-on;var an=dn.charIndex,nn=this._getWidthBeforeCursor(rn,an),cn=this._getIndexOnLine(rn+1,nn),hn=this._textLines[rn].slice(an);return hn.length+cn+1+this.missingNewlineOffset(rn)},_getSelectionForOffset:function(fn,en){return fn.shiftKey&&this.selectionStart!==this.selectionEnd&&en?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(fn,en){var on=this._getSelectionForOffset(fn,en),dn=this.get2DCursorLocation(on),rn=dn.lineIndex;if(rn===0||fn.metaKey||fn.keyCode===33)return-on;var an=dn.charIndex,nn=this._getWidthBeforeCursor(rn,an),cn=this._getIndexOnLine(rn-1,nn),hn=this._textLines[rn].slice(0,an),sn=this.missingNewlineOffset(rn-1);return-this._textLines[rn-1].length+cn-hn.length+(1-sn)},_getIndexOnLine:function(fn,en){for(var on=this._textLines[fn],dn=this._getLineLeftOffset(fn),rn=dn,an=0,nn,cn,hn=0,sn=on.length;hn<sn;hn++)if(nn=this.__charBounds[fn][hn].width,rn+=nn,rn>en){cn=!0;var pn=rn-nn,mn=rn,yn=Math.abs(pn-en),_n=Math.abs(mn-en);an=_n<yn?hn:hn-1;break}return cn||(an=on.length-1),an},moveCursorDown:function(fn){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",fn)},moveCursorUp:function(fn){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",fn)},_moveCursorUpOrDown:function(fn,en){var on="get"+fn+"CursorOffset",dn=this[on](en,this._selectionDirection==="right");en.shiftKey?this.moveCursorWithShift(dn):this.moveCursorWithoutShift(dn),dn!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(fn){var en=this._selectionDirection==="left"?this.selectionStart+fn:this.selectionEnd+fn;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,en),fn!==0},moveCursorWithoutShift:function(fn){return fn<0?(this.selectionStart+=fn,this.selectionEnd=this.selectionStart):(this.selectionEnd+=fn,this.selectionStart=this.selectionEnd),fn!==0},moveCursorLeft:function(fn){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",fn)},_move:function(fn,en,on){var dn;if(fn.altKey)dn=this["findWordBoundary"+on](this[en]);else if(fn.metaKey||fn.keyCode===35||fn.keyCode===36)dn=this["findLineBoundary"+on](this[en]);else return this[en]+=on==="Left"?-1:1,!0;if(typeof dn!==void 0&&this[en]!==dn)return this[en]=dn,!0},_moveLeft:function(fn,en){return this._move(fn,en,"Left")},_moveRight:function(fn,en){return this._move(fn,en,"Right")},moveCursorLeftWithoutShift:function(fn){var en=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(en=this._moveLeft(fn,"selectionStart")),this.selectionEnd=this.selectionStart,en},moveCursorLeftWithShift:function(fn){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(fn,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(fn,"selectionStart")},moveCursorRight:function(fn){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",fn)},_moveCursorLeftOrRight:function(fn,en){var on="moveCursor"+fn+"With";this._currentCursorOpacity=1,en.shiftKey?on+="Shift":on+="outShift",this[on](en)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(fn){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(fn,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(fn,"selectionEnd")},moveCursorRightWithoutShift:function(fn){var en=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(en=this._moveRight(fn,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,en},removeChars:function(fn,en){typeof en>"u"&&(en=fn+1),this.removeStyleFromTo(fn,en),this._text.splice(fn,en-fn),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(fn,en,on,dn){typeof dn>"u"&&(dn=on),dn>on&&this.removeStyleFromTo(on,dn);var rn=e.util.string.graphemeSplit(fn);this.insertNewStyleBlock(rn,on,en),this._text=[].concat(this._text.slice(0,on),rn,this._text.slice(dn)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var fn=e.util.toFixed,en=/  +/g;e.util.object.extend(e.Text.prototype,{_toSVG:function(){var on=this._getSVGLeftTopOffsets(),dn=this._getSVGTextAndBg(on.textTop,on.textLeft);return this._wrapSVGTextAndBg(dn)},toSVG:function(on){return this._createBaseSVGMarkup(this._toSVG(),{reviver:on,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(on){var dn=!0,rn=this.getSvgTextDecoration(this);return[on.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",rn?'text-decoration="'+rn+'" ':"",'style="',this.getSvgStyles(dn),'"',this.addPaintOrder()," >",on.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(on,dn){var rn=[],an=[],nn=on,cn;this._setSVGBg(an);for(var hn=0,sn=this._textLines.length;hn<sn;hn++)cn=this._getLineLeftOffset(hn),(this.textBackgroundColor||this.styleHas("textBackgroundColor",hn))&&this._setSVGTextLineBg(an,hn,dn+cn,nn),this._setSVGTextLineText(rn,hn,dn+cn,nn),nn+=this.getHeightOfLine(hn);return{textSpans:rn,textBgRects:an}},_createTextCharSpan:function(on,dn,rn,an){var nn=on!==on.trim()||on.match(en),cn=this.getSvgSpanStyles(dn,nn),hn=cn?'style="'+cn+'"':"",sn=dn.deltaY,pn="",mn=e.Object.NUM_FRACTION_DIGITS;return sn&&(pn=' dy="'+fn(sn,mn)+'" '),['<tspan x="',fn(rn,mn),'" y="',fn(an,mn),'" ',pn,hn,">",e.util.string.escapeXml(on),"</tspan>"].join("")},_setSVGTextLineText:function(on,dn,rn,an){var nn=this.getHeightOfLine(dn),cn=this.textAlign.indexOf("justify")!==-1,hn,sn,pn="",mn,yn,_n=0,xn=this._textLines[dn],Sn;an+=nn*(1-this._fontSizeFraction)/this.lineHeight;for(var Pn=0,Ln=xn.length-1;Pn<=Ln;Pn++)Sn=Pn===Ln||this.charSpacing,pn+=xn[Pn],mn=this.__charBounds[dn][Pn],_n===0?(rn+=mn.kernedWidth-mn.width,_n+=mn.width):_n+=mn.kernedWidth,cn&&!Sn&&this._reSpaceAndTab.test(xn[Pn])&&(Sn=!0),Sn||(hn=hn||this.getCompleteStyleDeclaration(dn,Pn),sn=this.getCompleteStyleDeclaration(dn,Pn+1),Sn=this._hasStyleChangedForSvg(hn,sn)),Sn&&(yn=this._getStyleDeclaration(dn,Pn)||{},on.push(this._createTextCharSpan(pn,yn,rn,an)),pn="",hn=sn,rn+=_n,_n=0)},_pushTextBgRect:function(on,dn,rn,an,nn,cn){var hn=e.Object.NUM_FRACTION_DIGITS;on.push("		<rect ",this._getFillAttributes(dn),' x="',fn(rn,hn),'" y="',fn(an,hn),'" width="',fn(nn,hn),'" height="',fn(cn,hn),`"></rect>
`)},_setSVGTextLineBg:function(on,dn,rn,an){for(var nn=this._textLines[dn],cn=this.getHeightOfLine(dn)/this.lineHeight,hn=0,sn=0,pn,mn,yn=this.getValueOfPropertyAt(dn,0,"textBackgroundColor"),_n=0,xn=nn.length;_n<xn;_n++)pn=this.__charBounds[dn][_n],mn=this.getValueOfPropertyAt(dn,_n,"textBackgroundColor"),mn!==yn?(yn&&this._pushTextBgRect(on,yn,rn+sn,an,hn,cn),sn=pn.left,hn=pn.width,yn=mn):hn+=pn.kernedWidth;mn&&this._pushTextBgRect(on,mn,rn+sn,an,hn,cn)},_getFillAttributes:function(on){var dn=on&&typeof on=="string"?new e.Color(on):"";return!dn||!dn.getSource()||dn.getAlpha()===1?'fill="'+on+'"':'opacity="'+dn.getAlpha()+'" fill="'+dn.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(on){for(var dn=0,rn=0,an=0;an<on;an++)dn+=this.getHeightOfLine(an);return rn=this.getHeightOfLine(an),{lineTop:dn,offset:(this._fontSizeMult-this._fontSizeFraction)*rn/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(on){var dn=e.Object.prototype.getSvgStyles.call(this,on);return dn+" white-space: pre;"}})}(),function(fn){var en=fn.fabric||(fn.fabric={});en.Textbox=en.util.createClass(en.IText,en.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:en.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(on){for(var dn=0,rn=0,an=0,nn={},cn=0;cn<on.graphemeLines.length;cn++)on.graphemeText[an]===`
`&&cn>0?(rn=0,an++,dn++):!this.splitByGrapheme&&this._reSpaceAndTab.test(on.graphemeText[an])&&cn>0&&(rn++,an++),nn[cn]={line:dn,offset:rn},an+=on.graphemeLines[cn].length,rn+=on.graphemeLines[cn].length;return nn},styleHas:function(on,dn){if(this._styleMap&&!this.isWrapping){var rn=this._styleMap[dn];rn&&(dn=rn.line)}return en.Text.prototype.styleHas.call(this,on,dn)},isEmptyStyles:function(on){if(!this.styles)return!0;var dn=0,rn=on+1,an,nn,cn=!1,hn=this._styleMap[on],sn=this._styleMap[on+1];hn&&(on=hn.line,dn=hn.offset),sn&&(rn=sn.line,cn=rn===on,an=sn.offset),nn=typeof on>"u"?this.styles:{line:this.styles[on]};for(var pn in nn)for(var mn in nn[pn])if(mn>=dn&&(!cn||mn<an))for(var yn in nn[pn][mn])return!1;return!0},_getStyleDeclaration:function(on,dn){if(this._styleMap&&!this.isWrapping){var rn=this._styleMap[on];if(!rn)return null;on=rn.line,dn=rn.offset+dn}return this.callSuper("_getStyleDeclaration",on,dn)},_setStyleDeclaration:function(on,dn,rn){var an=this._styleMap[on];on=an.line,dn=an.offset+dn,this.styles[on][dn]=rn},_deleteStyleDeclaration:function(on,dn){var rn=this._styleMap[on];on=rn.line,dn=rn.offset+dn,delete this.styles[on][dn]},_getLineStyle:function(on){var dn=this._styleMap[on];return!!this.styles[dn.line]},_setLineStyle:function(on){var dn=this._styleMap[on];this.styles[dn.line]={}},_wrapText:function(on,dn){var rn=[],an;for(this.isWrapping=!0,an=0;an<on.length;an++)rn=rn.concat(this._wrapLine(on[an],an,dn));return this.isWrapping=!1,rn},_measureWord:function(on,dn,rn){var an=0,nn,cn=!0;rn=rn||0;for(var hn=0,sn=on.length;hn<sn;hn++){var pn=this._getGraphemeBox(on[hn],dn,hn+rn,nn,cn);an+=pn.kernedWidth,nn=on[hn]}return an},_wrapLine:function(on,dn,rn,Rn){var nn=0,cn=this.splitByGrapheme,hn=[],sn=[],pn=cn?en.util.string.graphemeSplit(on):on.split(this._wordJoiners),mn="",yn=0,_n=cn?"":" ",xn=0,Sn=0,Pn=0,Ln=!0,In=this._getWidthOfCharSpacing(),Rn=Rn||0;pn.length===0&&pn.push([]),rn-=Rn;for(var Mn=0;Mn<pn.length;Mn++)mn=cn?pn[Mn]:en.util.string.graphemeSplit(pn[Mn]),xn=this._measureWord(mn,dn,yn),yn+=mn.length,nn+=Sn+xn-In,nn>rn&&!Ln?(hn.push(sn),sn=[],nn=xn,Ln=!0):nn+=In,!Ln&&!cn&&sn.push(_n),sn=sn.concat(mn),Sn=cn?0:this._measureWord([_n],dn,yn),yn++,Ln=!1,xn>Pn&&(Pn=xn);return Mn&&hn.push(sn),Pn+Rn>this.dynamicMinWidth&&(this.dynamicMinWidth=Pn-In+Rn),hn},isEndOfWrapping:function(on){return!this._styleMap[on+1]||this._styleMap[on+1].line!==this._styleMap[on].line},missingNewlineOffset:function(on){return this.splitByGrapheme?this.isEndOfWrapping(on)?1:0:1},_splitTextIntoLines:function(on){for(var dn=en.Text.prototype._splitTextIntoLines.call(this,on),rn=this._wrapText(dn.lines,this.width),an=new Array(rn.length),nn=0;nn<rn.length;nn++)an[nn]=rn[nn].join("");return dn.lines=an,dn.graphemeLines=rn,dn},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var on={};for(var dn in this._styleMap)this._textLines[dn]&&(on[this._styleMap[dn].line]=1);for(var dn in this.styles)on[dn]||delete this.styles[dn]},toObject:function(on){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(on))}}),en.Textbox.fromObject=function(on,dn){return en.Object._fromObject("Textbox",on,dn,"text")}}(St),function(){var fn=e.controlsUtils,en=fn.scaleSkewCursorStyleHandler,on=fn.scaleCursorStyleHandler,dn=fn.scalingEqually,rn=fn.scalingYOrSkewingX,an=fn.scalingXOrSkewingY,nn=fn.scaleOrSkewActionName,cn=e.Object.prototype.controls;if(cn.ml=new e.Control({x:-.5,y:0,cursorStyleHandler:en,actionHandler:an,getActionName:nn}),cn.mr=new e.Control({x:.5,y:0,cursorStyleHandler:en,actionHandler:an,getActionName:nn}),cn.mb=new e.Control({x:0,y:.5,cursorStyleHandler:en,actionHandler:rn,getActionName:nn}),cn.mt=new e.Control({x:0,y:-.5,cursorStyleHandler:en,actionHandler:rn,getActionName:nn}),cn.tl=new e.Control({x:-.5,y:-.5,cursorStyleHandler:on,actionHandler:dn}),cn.tr=new e.Control({x:.5,y:-.5,cursorStyleHandler:on,actionHandler:dn}),cn.bl=new e.Control({x:-.5,y:.5,cursorStyleHandler:on,actionHandler:dn}),cn.br=new e.Control({x:.5,y:.5,cursorStyleHandler:on,actionHandler:dn}),cn.mtr=new e.Control({x:0,y:-.5,actionHandler:fn.rotationWithSnapping,cursorStyleHandler:fn.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),e.Textbox){var hn=e.Textbox.prototype.controls={};hn.mtr=cn.mtr,hn.tr=cn.tr,hn.br=cn.br,hn.tl=cn.tl,hn.bl=cn.bl,hn.mt=cn.mt,hn.mb=cn.mb,hn.mr=new e.Control({x:.5,y:0,actionHandler:fn.changeWidth,cursorStyleHandler:en,actionName:"resizing"}),hn.ml=new e.Control({x:-.5,y:0,actionHandler:fn.changeWidth,cursorStyleHandler:en,actionName:"resizing"})}}()})(fabric);const FabricPage=({isDeleteClick:St,page:e,bgImage:_e,isEdit:tn})=>{const[un,gn]=react.exports.useState(null),vn=react.exports.useRef(null),[fn,en]=react.exports.useState(""),[on]=useAtom(signToPdfAtom),[,dn]=useAtom(setOutputDocumentArr);react.exports.useEffect(()=>{gn(new fabric.fabric.Canvas(vn.current,{containerClass:"myClass"}))},[vn]),react.exports.useEffect(()=>{tn&&_e&&!fn&&en(_e),fn&&fabric.fabric.Image.fromURL(fn,nn=>{un==null||un.setBackgroundImage(fn,()=>un.renderAll());const cn=nn.width,hn=nn.height;cn&&hn&&(un==null||un.setDimensions({width:cn,height:hn}))})},[un,fn,_e]),react.exports.useEffect(()=>{if((on==null?void 0:on.page)===e){const{imageUrl:nn}=on;un&&fabric.fabric.Image.fromURL(nn,cn=>{cn.scaleToWidth(200),cn.scaleToHeight(200),cn.set({}),cn.on("mouseup",function(){an()}),un.add(cn).renderAll()})}},[on]),react.exports.useEffect(()=>{St&&rn()},[St]);const rn=()=>{const nn=un==null?void 0:un.getActiveObject();nn&&(un==null||un.remove(nn))},an=()=>{if(un){const nn=un.toDataURL({format:"jpg"});dn({document:{page:e,isEdit:!0,imageUrl:nn}})}};return jsx("canvas",{ref:vn})},StartSign=()=>{const[St]=useAtom(pdfAtom),[e]=useAtom(outputDocumentArr),[_e]=useAtom(stepAtom),[tn]=useAtom(signToPdfAtom),[,un]=useAtom(setPdfCombinePage),[,gn]=useAtom(setOutputDocumentArr),[,vn]=useAtom(setOutputInfo),[fn,en]=react.exports.useState(0),[on,dn]=react.exports.useState(!1),[rn,an]=react.exports.useState(!1);react.exports.useEffect(()=>{en(1),e.length&&(gn({document:null}),vn({isSubmit:!1,docName:"",extension:"pdf"}))},[St]),react.exports.useEffect(()=>{if(_e===3){let hn=null;if(e.length<(St==null?void 0:St._pdfInfo.numPages))return hn=setTimeout(()=>{an(!0),en(sn=>sn+1)},500),()=>clearTimeout(hn);an(!1),clearTimeout(hn)}},[_e,fn]),react.exports.useEffect(()=>{!rn&&_e===3&&(en(1),un({page:1}))},[rn]),react.exports.useEffect(()=>{var sn,pn;const hn=(sn=e.find(mn=>(mn==null?void 0:mn.page)===(tn==null?void 0:tn.page)))==null?void 0:sn.isEdit;if(tn!==null&&tn.page!==0&&!hn){const mn=(pn=e.find(_n=>(_n==null?void 0:_n.page)===tn.page))==null?void 0:pn.imageUrl,yn={page:tn.page,isEdit:!0,imageUrl:mn};gn({document:yn})}},[tn]);const nn=hn=>{if(rn)return;const sn=St==null?void 0:St._pdfInfo.numPages;hn==="next"&&fn<sn?(en(pn=>pn+1),un({page:fn+1})):hn==="last"&&fn>1&&sn!==1&&(en(pn=>pn-1),un({page:fn-1}))};return jsxs("section",{className:"flex flex-col lg:flex-row lg:justify-center mx-auto mt-[40px] w-[80%] max-w-[586px] lg:max-w-[1000px]",children:[jsx(MySign,{type:"allowSelect"}),jsxs("div",{className:"flex-grow mt-[40px] lg:mt-0 lg:ml-[40px]",children:[jsx("h4",{className:"text-[#4F4F4F]",children:"\u7C3D\u7F72\u6587\u4EF6"}),jsx("span",{className:"text-[#828282]",children:"\u5C07\u5DE6\u65B9\u7C3D\u540D\u6A94\u62D6\u79FB\u7F6E\u7C3D\u7F72\u6587\u4EF6\u4E2D\u4E26\u8ABF\u6574\u4F4D\u7F6E\u8207\u5927\u5C0F"}),jsxs("div",{className:"flex flex-col w-full h-[780px] pt-[16px] px-[42px] pb-[22px] mt-[20px] bg-white rounded-[5px]",children:[jsx("div",{className:"flex-none flex justify-end h-[32px] mb-[12px]",children:jsx("button",{onClick:hn=>{dn(!0);const sn=setTimeout(()=>{dn(!1),clearTimeout(sn)},2e3)},className:"flex-center w-[60px] h-[32px] ml-[12px] text-[14px] text-[#595ED3] bg-[#E9E1FF] rounded-[5px]",children:"\u6E05\u9664"})}),jsxs("div",{className:`relative flex-grow w-full h-full border border-[#E0E0E0] ${rn?"overflow-hidden":"max-w-[670px]  overflow-auto"}`,children:[Array.from(Array(St==null?void 0:St._pdfInfo.numPages).keys()).map((hn,sn)=>{var pn;return jsx("div",{className:((pn=e.find(mn=>(mn==null?void 0:mn.page)===sn+1))==null?void 0:pn.isEdit)===!1&&fn===sn+1&&!rn?"":rn&&sn+1?"flex-center":"hiddenSection",children:jsx(CanvasPreview,{page:sn+1,currentPage:fn})},sn)}),Array.from(Array(St==null?void 0:St._pdfInfo.numPages).keys()).map((hn,sn)=>{var pn,mn,yn;return jsx("div",{className:((pn=e.find(_n=>(_n==null?void 0:_n.page)===hn+1))==null?void 0:pn.isEdit)===!0&&fn===hn+1?"":"hiddenSection",children:jsx(FabricPage,{isDeleteClick:on,page:hn+1,bgImage:(mn=e.find(_n=>(_n==null?void 0:_n.page)===hn+1&&_n.isEdit))==null?void 0:mn.imageUrl,isEdit:(yn=e.find(_n=>(_n==null?void 0:_n.page)===hn+1))==null?void 0:yn.isEdit})},sn)}),jsx("div",{className:`absolute left-0 top-0 w-full h-full ${rn?"bg-[#fff] loadingAnimation z-[30]":"-z-[20]"}`})]}),jsxs("div",{className:"flex-none flex justify-center mt-[18px]",children:[fn?jsx("button",{onClick:()=>nn("last"),className:`${fn>1&&(St==null?void 0:St._pdfInfo.numPages)!==1&&!rn?"text-[#787CDA]":"text-[#BDBDBD]"}`,children:jsx(ArrowIcon,{})}):"",fn?jsx("div",{className:"h-[31px] mb-[10px] mx-[24px] leading-[38px] text-[14px] text-[#828282]",children:rn?"loading...":`${fn} / ${St==null?void 0:St._pdfInfo.numPages}`}):"",fn?jsx("button",{onClick:()=>nn("next"),className:`${fn<(St==null?void 0:St._pdfInfo.numPages)&&!rn?"text-[#787CDA]":"text-[#BDBDBD]"} rotate-180`,children:jsx(ArrowIcon,{})}):""]})]})]})]})},DownloadResult=()=>{const[St]=useAtom(pdfAtom),[e]=useAtom(outputInfoAtom),[,_e]=useAtom(setOutputInfo),[tn]=useAtom(outputDocumentArr),[un,gn]=react.exports.useState(1),vn=en=>{const on=St==null?void 0:St._pdfInfo.numPages;en==="next"&&un<on?gn(dn=>dn+1):en==="last"&&un>1&&on!==1&&gn(dn=>dn-1)},fn=en=>{_e({extension:en})};return jsxs("section",{className:"flex flex-col mx-auto w-[80%] max-w-[586px] lg:max-w-[586px]",children:[jsxs("div",{className:"flex flex-col mb-[32px]",children:[jsxs("h4",{className:"mb-[21px] text-[#4F4F4F]",children:["\u6587\u4EF6\u540D\u7A31",jsx("span",{className:"ml-[4px] text-[#FF7070]",children:"*"})]}),jsxs("div",{className:"flex flex-col md:flex-row justify-between",children:[jsx("input",{onChange:en=>_e({docName:en.target.value}),value:e.docName,type:"text",placeholder:"\u8F38\u5165\u6587\u4EF6\u540D\u7A31",className:`signInput w-full max-w-[353px] h-[40px] pr-[70px] mb-[40px] md:mb-0 rounded-[5px] ${e.isSubmit&&!e.docName?"border border-[#f00]":""}`}),jsx("ul",{className:"flex",children:["pdf","jpg"].map((en,on)=>jsxs("li",{onClick:()=>fn(en),className:"extension-selector flex items-center cursor-pointer",children:[jsx("div",{className:"w-[21px] h-[21px] mr-[14px] p-[4px] border rounded-full border-[#595ED3]",children:jsx("div",{className:`w-full h-full bg-[#595ED3] rounded-full ${en===e.extension?"block":"hidden"}`})}),jsxs("span",{children:[".",en]})]},on))})]})]}),jsxs("div",{children:[jsx("h4",{className:"mb-[21px] text-[#4F4F4F]",children:"\u9810\u89BD\u6587\u4EF6"}),jsxs("div",{className:"flex flex-col items-center pt-[20px] px-[42.5px] bg-white",children:[jsx("div",{className:"flex-center w-full h-auto border border-[#E0E0E0] overflow-auto",children:tn.length&&tn.map((en,on)=>jsx("img",{src:en==null?void 0:en.imageUrl,alt:"",className:un===(en==null?void 0:en.page)?"object-contain":"hiddenSection"},on))}),jsxs("div",{className:"flex justify-center py-[10px]",children:[un?jsx("button",{onClick:()=>vn("last"),className:`${un>1&&(St==null?void 0:St._pdfInfo.numPages)!==1?"text-[#787CDA]":"text-[#BDBDBD]"}`,children:jsx(ArrowIcon,{})}):"",jsx("div",{className:"h-[31px] mb-[10px] mx-[24px] leading-[38px] text-[14px] text-[#828282]",children:`${un} / ${St==null?void 0:St._pdfInfo.numPages}`}),un?jsx("button",{onClick:()=>vn("next"),className:`${un<(St==null?void 0:St._pdfInfo.numPages)?"text-[#787CDA]":"text-[#BDBDBD]"} rotate-180`,children:jsx(ArrowIcon,{})}):""]})]})]})]})},Sign=()=>{const[St]=useAtom(signListAtom),[e]=useAtom(outputInfoAtom),[,_e]=useAtom(setSignList),[,tn]=useAtom(displayMessageBox),[un]=useAtom(stepAtom),[,gn]=useAtom(setStepDirection),[,vn]=useAtom(setCurrentStep),[,fn]=useAtom(setOutputInfo),[,en]=useAtom(setOutputDocumentArr),[on]=useAtom(outputDocumentArr),[dn]=useAtom(pdfAtom),rn=react.exports.useRef(null),an={isDisplay:!0,isMask:!1,dialogName:"alert",content:"",basicStyle:"w-[200px] text-[#333333] bg-[#FF7070] shadow-[0_4px_12px_rgba(0,0,0,0.1)]",logoStyle:"text-[#fff]"};react.exports.useEffect(()=>{if(_e(),rn){const sn=rn.current.getTotalLength();rn.current.style.strokeDasharray=sn,rn.current.style.animation=`zeroToStep${un} ${un/2}s linear forwards`}},[]);const nn=sn=>{if(un===1&&!St.length){tn({...an,content:"\u8ACB\u5EFA\u7ACB\u7C3D\u540D\u6A94"});return}else if(un===2&&!dn&&sn===3){tn({...an,content:"\u8ACB\u4E0A\u50B3\u7C3D\u7F72\u6587\u4EF6"});return}else un===4&&sn===2&&(en({document:null}),fn({isSubmit:!1,docName:"",extension:"pdf"}));scrollTo(0,0),vn({step:sn}),gn({from:un,to:sn}),rn.current.style.animation=`step${un}ToStep${sn} 1s linear forwards`},cn=[{id:1,name:"\u5EFA\u7ACB\u7C3D\u540D\u6A94",style:"left-[-17px]"},{id:2,name:"\u4E0A\u50B3\u7C3D\u7F72\u6587\u4EF6",style:"left-[-22px]"},{id:3,name:"\u7C3D\u540D",style:""},{id:4,name:"\u4E0B\u8F09\u7C3D\u7F72\u6587\u4EF6",style:"right-[-25px]"}],hn=()=>{fn({isSubmit:!0});const{docName:sn,extension:pn}=e;if(!sn||!pn){tn({...an,content:"\u8ACB\u586B\u5BEB\u6587\u4EF6\u540D\u7A31"});return}if(pn==="jpg")for(let mn of on){const yn=document.createElement("a");yn.download=`${sn}${mn==null?void 0:mn.page}.jpg`,mn&&(yn.href=mn==null?void 0:mn.imageUrl),yn.target="_blank",document.body.appendChild(yn),yn.click(),yn.parentNode&&yn.parentNode.removeChild(yn)}else if(pn==="pdf"&&on[0]){const mn=on[0],{width:yn,height:_n}=mn;let xn=new E("p","px",[yn,_n]);for(const[Sn,Pn]of on.entries())if(Pn){const{width:Ln,height:In}=Pn;xn.addImage(Pn==null?void 0:Pn.imageUrl,"JPEG",0,0,Ln,In),Pn.page<on.length&&xn.addPage([Ln,In])}xn.save(`${sn}.pdf`)}};return jsxs("section",{className:"w-full mx-auto overflow-x-hidden",children:[jsx("div",{className:"w-[300px] xs:w-[400px] mmd:w-[620px] mx-auto",children:jsx("div",{className:`
          relative flex justify-center mt-[50px] mx-auto w-[543px] animation 
          ${un===1?"left-[40%] xs:left-[41%] mmd:left-[39%]":un===2?"left-[-13%] xs:left-[2%] mmd:left-[13%]":un===3?"left-[-66%] xs:left-[-38%] mmd:left-[-13%]":un===4?"left-[-120%] xs:left-[-77%] mmd:left-[-40%]":""}
          md:left-0
        `,children:jsxs("div",{className:"w-full mb-[68px]",children:[jsx("div",{className:"absolute text-[#F2F2F2] z-[5]",children:jsx(ProgressBarIcon,{})}),jsx("div",{className:"relative z-[10]",children:jsx("svg",{width:"543",height:"63",viewBox:"0 0 543 63",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsx("path",{ref:rn,d:"M539.817 58.801C523.388 49.5565 509.817 37.917 508.483 22.1103C507.15 6.3036 511.817 3.33386 514.245 3.33386C516.674 3.33386 521.483 7.74058 521.579 21.0086C521.674 34.2767 517.579 47.9279 490.341 55.1606C463.102 62.3934 395.96 58.8489 379.674 55.7833C360.722 52.1909 343.864 40.6472 344.626 20.6254C345.531 -2.12663 359.531 3.62126 359.436 20.6254C359.388 29.7741 356.007 40.9825 338.198 50.227C319.055 60.1421 271.341 59.6632 271.341 59.6632C271.341 59.6632 223.817 60.1421 204.722 50.227C186.96 40.9825 183.579 29.822 183.579 20.6254C183.483 3.62126 197.483 -2.12663 198.341 20.6254C199.102 40.6472 182.293 52.1909 163.436 55.7833C147.198 58.8489 80.293 62.3934 53.1501 55.1606C26.0073 47.9279 21.912 34.3246 22.0072 21.0086C22.1025 7.69268 26.8644 3.33386 29.293 3.33386C31.7215 3.33386 36.3882 6.3036 35.0549 22.1103C33.7215 37.917 20.2453 49.5565 3.81677 58.801",stroke:"#787CDA",strokeWidth:"6",strokeMiterlimit:"10",strokeLinecap:"round"})})}),jsx("div",{className:"flex justify-between",children:cn.map((sn,pn)=>jsxs("div",{className:`${sn.style} relative flex flex-col items-center ${un===sn.id?"text-[#333333]":un>sn.id?"text-[#787CDA]":"text-[#BDBDBD]"}`,children:[jsxs("span",{className:"text-[12px]",children:["step",sn.id]}),jsxs("div",{className:"relative",children:[jsx("h3",{className:"relative z-[3] text-[18px] font-medium",children:sn.name}),un===sn.id&&jsx("div",{className:"absolute left-[10px] right-[10px] top-0 bottom-0 m-auto h-[8px] bg-[#E3FEC7]"})]})]},pn))})]})})}),jsx("div",{className:un===1?"":"hiddenSection",children:jsx(CreateSign,{})}),jsx("div",{className:un===2?"":"hiddenSection",children:jsx(UploadDocument,{})}),jsx("div",{className:un===3?"":"hiddenSection",children:jsx(StartSign,{})}),jsx("div",{className:un===4?"":"hiddenSection",children:jsx(DownloadResult,{})}),jsxs("div",{className:"flex flex-col sm:flex-row justify-center items-center mt-[60px]",children:[un!==1&&jsx("button",{className:"flex-center w-[180px] h-[40px] text-[14px] text-[#4F4F4F] border border-[#E3FEC7] rounded-full",onClick:()=>nn(un-1),children:"\u4E0A\u4E00\u6B65"}),un===1&&jsx("button",{className:`flex-center w-[180px] h-[40px] ${un===1&&!St.length?"text-[#fff] bg-[#BDBDBD]":""} ${un!==1?"ml-[20px]":""} text-[14px] text-[#4F4F4F] bg-[#E3FEC7] rounded-full`,onClick:()=>nn(un+1),children:"\u4E0B\u4E00\u6B65"}),un===2?jsx("button",{className:`flex-center w-[180px] h-[40px] mt-[20px] sm:mt-0 sm:ml-[20px] text-[14px] text-[#4F4F4F] bg-[#E3FEC7] rounded-full ${dn?"":"text-[#fff] bg-[#BDBDBD]"}`,onClick:()=>nn(3),children:"\u524D\u5F80\u7C3D\u540D"}):un===3?jsx("button",{className:"flex-center w-[180px] h-[40px] mt-[20px] sm:mt-0 sm:ml-[20px] text-[14px] text-[#4F4F4F] bg-[#E3FEC7] rounded-full",onClick:()=>nn(4),children:"\u524D\u5F80\u4E0B\u8F09"}):un===4?jsxs("button",{onClick:hn,className:"flex-center w-[180px] h-[40px] mt-[20px] sm:mt-0 sm:ml-[20px] text-[14px] text-[#4F4F4F] bg-[#E3FEC7] rounded-full",children:["\u4E0B\u8F09",jsx("span",{className:"ml-[6px]",children:e.extension})]}):null,un===4&&jsx("button",{onClick:()=>nn(2),className:"flex-center w-[180px] h-[40px] mt-[20px] sm:mt-0 sm:ml-[20px] text-[14px] text-[#4F4F4F] border border-[#E3FEC7] rounded-full",children:"\u518D\u7C3D\u4E00\u4EFD"})]})]})},History=()=>jsx("section",{}),LogoIcon=()=>jsx("svg",{width:"28",height:"23",viewBox:"0 0 28 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsx("path",{d:"M0.98065 20.2657C0.947218 20.1409 0.929007 19.9898 0.910798 19.8386C0.633959 13.3156 3.5083 10.651 5.22531 9.65602C6.38385 8.98898 7.92266 8.57666 9.63421 8.80897C9.85359 7.88097 10.148 7.06658 10.4911 6.3506C12.2272 2.76513 15.8703 1.72208 18.5894 2.55366C18.7836 2.61306 18.9778 2.67245 19.1776 2.75265C19.1954 2.56957 19.1883 2.46003 19.2036 2.43366C19.2952 1.36158 20.2428 0.572767 21.3204 0.685192C22.3925 0.776822 23.1605 1.73 23.0633 2.78128C23.0537 2.82844 22.9717 3.85336 23.162 5.2288C24.3808 6.28405 25.5098 7.58626 26.3228 9.04C27.8363 11.777 28.2263 13.2327 27.734 14.3898C27.4782 15.0156 26.9379 15.4946 26.2989 15.6882C25.1607 16.0154 23.5004 15.7248 20.7706 10.5277C20.2257 9.49245 19.868 8.40704 19.6214 7.40332C18.8025 6.84266 18.0282 6.44836 17.4456 6.27017C16.333 5.94422 14.7485 6.43565 13.9558 8.05218C13.6377 8.69463 13.4056 9.49229 13.2431 10.3828C13.2694 10.398 13.2958 10.4132 13.3014 10.434C16.7091 13.087 17.2858 17.5683 17.4775 19.0325C17.6804 20.5383 16.9754 22.3988 15.2966 22.8709C14.0752 23.2205 12.2734 22.9009 10.6522 19.3458C9.63306 17.1226 9.21288 14.8058 9.19227 12.6495C8.23381 12.4828 7.51306 12.7874 7.16661 12.9916C5.49119 13.9755 4.63285 16.3451 4.76162 19.6538C4.8059 20.734 3.97491 21.6253 2.91547 21.664C1.99751 21.7317 1.2091 21.1183 0.98065 20.2657Z",fill:"#E3FEC7"})}),Header=()=>jsxs("header",{className:"flex-center h-[80px] text-[24px] font-medium text-purple bg-[#E5E6F2]",children:[jsx(LogoIcon,{}),jsx("span",{className:"ml-[12px]",children:"\u7C3D\u500B\u540D"})]}),Layout=St=>jsxs("section",{className:"flex flex-col min-h-screen",children:[jsx(Header,{}),jsx("main",{className:"flex-grow flex mt-auto pb-[80px] bg-[#E5E6F2]",children:St.children})]});function App(){return jsx(Provider,{children:jsxs(Layout,{children:[jsxs(Routes,{children:[jsx(Route,{path:"/",element:jsx(Navigate,{to:"/login"})}),jsx(Route,{path:"/login",element:jsx(Login,{})}),jsx(Route,{path:"/overview",element:jsx(Overview,{})}),jsx(Route,{path:"/sign",element:jsx(Sign,{})}),jsx(Route,{path:"/history",element:jsx(History,{})})]}),jsx(Dialog,{})]})})}const index="";client.createRoot(document.getElementById("root")).render(jsx(React.StrictMode,{children:jsx(BrowserRouter,{children:jsx(App,{})})}));export{_defineProperty as _,commonjsGlobal as c};
